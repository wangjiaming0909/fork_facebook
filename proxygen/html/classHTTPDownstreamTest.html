<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: HTTPDownstreamTest&lt; C &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classHTTPDownstreamTest.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classHTTPDownstreamTest-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">HTTPDownstreamTest&lt; C &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for HTTPDownstreamTest&lt; C &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classHTTPDownstreamTest.png" usemap="#HTTPDownstreamTest_3C_20C_20_3E_map" alt=""/>
  <map id="HTTPDownstreamTest_3C_20C_20_3E_map" name="HTTPDownstreamTest&lt; C &gt;_map">
<area href="classHTTPDownstreamSessionUpgradeFlowControlTest.html" alt="HTTPDownstreamSessionUpgradeFlowControlTest" shape="rect" coords="0,112,295,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a602d4e3eab6691730f1c91342a0cb092"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a602d4e3eab6691730f1c91342a0cb092">HTTPDownstreamTest</a> (std::vector&lt; int64_t &gt; flowControl={-1,-1,-1}, bool startImmediately=true)</td></tr>
<tr class="separator:a602d4e3eab6691730f1c91342a0cb092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b4b86f26d2504888fca13ba2d69044"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a> (const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</td></tr>
<tr class="separator:a14b4b86f26d2504888fca13ba2d69044"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51344e68e702f00023df7dae96f65820"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a51344e68e702f00023df7dae96f65820">sendRequest</a> (const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;req, bool eom=true)</td></tr>
<tr class="separator:a51344e68e702f00023df7dae96f65820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de657b63c7b09c0d6ca8fc221c7a792"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a7de657b63c7b09c0d6ca8fc221c7a792">sendHeader</a> ()</td></tr>
<tr class="separator:a7de657b63c7b09c0d6ca8fc221c7a792"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7af80b6a258ea7a54f63f79cc05dcaf"><td class="memItemLeft" align="right" valign="top">Promise&lt; Unit &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ad7af80b6a258ea7a54f63f79cc05dcaf">sendRequestLater</a> (<a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> req, bool eof=false)</td></tr>
<tr class="separator:ad7af80b6a258ea7a54f63f79cc05dcaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f3e052750dc7fc9e318df114efae10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ac9f3e052750dc7fc9e318df114efae10">SetUp</a> () override</td></tr>
<tr class="separator:ac9f3e052750dc7fc9e318df114efae10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c6421d5b6f4d9d77c4624c5f20248dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a3c6421d5b6f4d9d77c4624c5f20248dd">cleanup</a> ()</td></tr>
<tr class="separator:a3c6421d5b6f4d9d77c4624c5f20248dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15ca5ec8573e07ff4ec9aaec3812be41"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; testing::StrictMock&lt; <a class="el" href="classproxygen_1_1MockHTTPHandler.html">MockHTTPHandler</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a15ca5ec8573e07ff4ec9aaec3812be41">addSimpleStrictHandler</a> ()</td></tr>
<tr class="separator:a15ca5ec8573e07ff4ec9aaec3812be41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3114c5718f2c5f6eb188d2aa409b339f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; testing::NiceMock&lt; <a class="el" href="classproxygen_1_1MockHTTPHandler.html">MockHTTPHandler</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a3114c5718f2c5f6eb188d2aa409b339f">addSimpleNiceHandler</a> ()</td></tr>
<tr class="separator:a3114c5718f2c5f6eb188d2aa409b339f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9469020a4dbd46bc15e5132a05e1d935"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a9469020a4dbd46bc15e5132a05e1d935">onEOMTerminateHandlerExpectShutdown</a> (<a class="el" href="classproxygen_1_1MockHTTPHandler.html">MockHTTPHandler</a> &amp;handler)</td></tr>
<tr class="separator:a9469020a4dbd46bc15e5132a05e1d935"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48d8bc32715ea1c587abab3714232c78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">expectDetachSession</a> ()</td></tr>
<tr class="separator:a48d8bc32715ea1c587abab3714232c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c361b0f34907d7a945ed309a3161cd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a5c361b0f34907d7a945ed309a3161cd8">addSingleByteReads</a> (const char *data, milliseconds delay={})</td></tr>
<tr class="separator:a5c361b0f34907d7a945ed309a3161cd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac883526b2d777a4e131abafd7b998483"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">flushRequestsAndLoop</a> (bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</td></tr>
<tr class="separator:ac883526b2d777a4e131abafd7b998483"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a973662f8c90cfa6516feea2cbe9f0304"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a973662f8c90cfa6516feea2cbe9f0304">flushRequestsAndLoopN</a> (uint64_t n, bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</td></tr>
<tr class="separator:a973662f8c90cfa6516feea2cbe9f0304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8976962121af33c3caf0bc9ccfb11a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ab8976962121af33c3caf0bc9ccfb11a1">flushRequests</a> (bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</td></tr>
<tr class="separator:ab8976962121af33c3caf0bc9ccfb11a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab700c063a3227a6ac1752fb13ee99e48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ab700c063a3227a6ac1752fb13ee99e48">testSimpleUpgrade</a> (const std::string &amp;upgradeHeader, <a class="el" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a> expectedProtocol, const std::string &amp;expectedUpgradeHeader)</td></tr>
<tr class="separator:ab700c063a3227a6ac1752fb13ee99e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03e22df6023ae6b74736af956be93a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ab03e22df6023ae6b74736af956be93a1">gracefulShutdown</a> ()</td></tr>
<tr class="separator:ab03e22df6023ae6b74736af956be93a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b692ddacca59cd6de1c0526467b1a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a00b692ddacca59cd6de1c0526467b1a0">testPriorities</a> (uint32_t numPriorities)</td></tr>
<tr class="separator:a00b692ddacca59cd6de1c0526467b1a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e1e673d970f37f78dcb5c4a5522c40a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a2e1e673d970f37f78dcb5c4a5522c40a">testChunks</a> (bool trailers)</td></tr>
<tr class="separator:a2e1e673d970f37f78dcb5c4a5522c40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6838fb25be29dd31a7ad8b7fe1fadee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#af6838fb25be29dd31a7ad8b7fe1fadee">expect101</a> (<a class="el" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a> expectedProtocol, const std::string &amp;expectedUpgrade, bool expect100=false)</td></tr>
<tr class="separator:af6838fb25be29dd31a7ad8b7fe1fadee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2d1282f50936c6e661ea21fa9e182c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#aec2d1282f50936c6e661ea21fa9e182c">expectResponse</a> (uint32_t code=200, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> errorCode=ErrorCode::NO_ERROR, bool expect100=false, bool expectGoaway=false)</td></tr>
<tr class="separator:aec2d1282f50936c6e661ea21fa9e182c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c6f26a3f77028aa03bd9f844ee3e741"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a0c6f26a3f77028aa03bd9f844ee3e741">expectResponses</a> (uint32_t n, uint32_t code=200, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> errorCode=ErrorCode::NO_ERROR, bool expect100=false, bool expectGoaway=false)</td></tr>
<tr class="separator:a0c6f26a3f77028aa03bd9f844ee3e741"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa800294f65d254f30aea9fa906ff407b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">parseOutput</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &amp;clientCodec)</td></tr>
<tr class="separator:aa800294f65d254f30aea9fa906ff407b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a208b25dcd27143e557dafe7ec2803a61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a208b25dcd27143e557dafe7ec2803a61">resumeWritesInLoop</a> ()</td></tr>
<tr class="separator:a208b25dcd27143e557dafe7ec2803a61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c58f43ceea76591517372823c41636"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a46c58f43ceea76591517372823c41636">resumeWritesAfterDelay</a> (milliseconds delay)</td></tr>
<tr class="separator:a46c58f43ceea76591517372823c41636"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3949ce20921419c3e82b4fecb661dca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1MockByteEventTracker.html">MockByteEventTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#af3949ce20921419c3e82b4fecb661dca">setMockByteEventTracker</a> ()</td></tr>
<tr class="separator:af3949ce20921419c3e82b4fecb661dca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac46b07afb5858b8e9f61a3f2fedd71f5"><td class="memItemLeft" align="right" valign="top">EventBase&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a></td></tr>
<tr class="separator:ac46b07afb5858b8e9f61a3f2fedd71f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44b1edf6354c86649b1354696b36f68"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classTestAsyncTransport.html">TestAsyncTransport</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a></td></tr>
<tr class="separator:ab44b1edf6354c86649b1354696b36f68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a795ecf7e745d3067b28adc343f904360"><td class="memItemLeft" align="right" valign="top">folly::HHWheelTimer::UniquePtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a795ecf7e745d3067b28adc343f904360">transactionTimeouts_</a></td></tr>
<tr class="separator:a795ecf7e745d3067b28adc343f904360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1a64adb2ce35eb25406ec7ee75f7692"><td class="memItemLeft" align="right" valign="top">std::vector&lt; int64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a></td></tr>
<tr class="separator:ae1a64adb2ce35eb25406ec7ee75f7692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebc16f384387328455eaf6979cee35f9"><td class="memItemLeft" align="right" valign="top">StrictMock&lt; <a class="el" href="classproxygen_1_1MockController.html">MockController</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a></td></tr>
<tr class="separator:aebc16f384387328455eaf6979cee35f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad1dfcfd461476fa7e36c2246206672"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPDownstreamSession.html">HTTPDownstreamSession</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a></td></tr>
<tr class="separator:abad1dfcfd461476fa7e36c2246206672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03190a599b98f1d6691dca31fb303d28"><td class="memItemLeft" align="right" valign="top">IOBufQueue&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a> {IOBufQueue::cacheChainLength()}</td></tr>
<tr class="separator:a03190a599b98f1d6691dca31fb303d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36aee26f5b8dde672ff089fec7224ed8"><td class="memItemLeft" align="right" valign="top">unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a></td></tr>
<tr class="separator:a36aee26f5b8dde672ff089fec7224ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8985275878cd904b62ca6611e19a40ab"><td class="memItemLeft" align="right" valign="top">NiceMock&lt; <a class="el" href="classproxygen_1_1MockHTTPCodecCallback.html">MockHTTPCodecCallback</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a></td></tr>
<tr class="separator:a8985275878cd904b62ca6611e19a40ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d929e4489f4e8374d7d543d972bc42e"><td class="memItemLeft" align="right" valign="top">IOBufQueue&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">parseOutputStream_</a> {IOBufQueue::cacheChainLength()}</td></tr>
<tr class="separator:a0d929e4489f4e8374d7d543d972bc42e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a0c2dbbc7f2f60fc446417b28eb559"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">breakParseOutput_</a> {false}</td></tr>
<tr class="separator:ab1a0c2dbbc7f2f60fc446417b28eb559"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385606fbd6451c9cedf3b74675d46dd3"><td class="memItemLeft" align="right" valign="top">C::Codec *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a385606fbd6451c9cedf3b74675d46dd3">rawCodec_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a385606fbd6451c9cedf3b74675d46dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a392c199fd91632e7fee519fca15423"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HeaderIndexingStrategy.html">HeaderIndexingStrategy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHTTPDownstreamTest.html#a0a392c199fd91632e7fee519fca15423">testH2IndexingStrat_</a></td></tr>
<tr class="separator:a0a392c199fd91632e7fee519fca15423"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename C&gt;<br />
class HTTPDownstreamTest&lt; C &gt;</h3>


<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00044">44</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a602d4e3eab6691730f1c91342a0cb092"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::<a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a> </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; int64_t &gt;&#160;</td>
          <td class="paramname"><em>flowControl</em> = <code>{&#160;-1,&#160;-1,&#160;-1&#160;}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startImmediately</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00046">46</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                                     { -1, -1, -1 },</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">bool</span> startImmediately = <span class="keyword">true</span>)</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    : <a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>(),</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>(<span class="keyword">new</span> <a class="code" href="classTestAsyncTransport.html">TestAsyncTransport</a>(&amp;<a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>)),</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#a795ecf7e745d3067b28adc343f904360">transactionTimeouts_</a>(<a class="code" href="namespaceproxygen.html#ac2b4652e12eeb4d55706d7a0d0ada475">makeTimeoutSet</a>(&amp;<a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>)),</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>(flowControl) {</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, getGracefulShutdownTimeout())</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      .WillRepeatedly(Return(std::chrono::milliseconds(0)));</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, attachSession(_))</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      .WillRepeatedly(Invoke([&amp;] (<a class="code" href="classproxygen_1_1HTTPSessionBase.html">HTTPSessionBase</a>* session) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        session-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a95a22573ef0549e41d0d991bcf0a558a">setPrioritySampled</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      }));</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    HTTPSession::setDefaultReadBufferLimit(65536);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">auto</span> codec = makeServerCodec&lt;typename C::Codec&gt;(C::version);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a385606fbd6451c9cedf3b74675d46dd3">rawCodec_</a> = codec.get();</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// If the codec is H2, getHeaderIndexingStrategy will be called when setting</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// up the codec</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (rawCodec_-&gt;getProtocol() == CodecProtocol::HTTP_2) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, getHeaderIndexingStrategy())</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        .WillOnce(</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;          Return(&amp;<a class="code" href="classHTTPDownstreamTest.html#a0a392c199fd91632e7fee519fca15423">testH2IndexingStrat_</a>)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      );</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a> = <span class="keyword">new</span> <a class="code" href="classproxygen_1_1HTTPDownstreamSession.html">HTTPDownstreamSession</a>(</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#a795ecf7e745d3067b28adc343f904360">transactionTimeouts_</a>.get(),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      std::move(AsyncTransportWrapper::UniquePtr(<a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>)),</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <a class="code" href="namespaceproxygen.html#ad837ab655543e4211b38011fb932d77a">localAddr</a>, <a class="code" href="namespaceproxygen.html#a7e97e63571b9ca17de27bd219d3b0e18">peerAddr</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      &amp;<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>,</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      std::move(codec),</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      <a class="code" href="namespaceproxygen.html#a30e7387405c00c352e49cccda0584fae">mockTransportInfo</a> <span class="comment">/* no stats for now */</span>,</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="keyword">nullptr</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; param: flowControl) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">if</span> (param &lt; 0) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        param = rawCodec_-&gt;getDefaultWindowSize();</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// Ensure the H2 header indexing strategy was setup correctly if applicable</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span> (rawCodec_-&gt;getProtocol() == CodecProtocol::HTTP_2) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <a class="code" href="classproxygen_1_1HTTP2Codec.html">HTTP2Codec</a>* recastedCodec = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classproxygen_1_1HTTP2Codec.html">HTTP2Codec</a>*<span class="keyword">&gt;</span>(<a class="code" href="classHTTPDownstreamTest.html#a385606fbd6451c9cedf3b74675d46dd3">rawCodec_</a>);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      EXPECT_EQ(</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        recastedCodec-&gt;<a class="code" href="classproxygen_1_1HTTP2Codec.html#a18540e4ea97aace01b07ae1e0c1e2129">getHeaderIndexingStrategy</a>(), &amp;<a class="code" href="classHTTPDownstreamTest.html#a0a392c199fd91632e7fee519fca15423">testH2IndexingStrat_</a>);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSession.html#abf7a8f45923ceb76bcff72f6939011a0">setFlowControl</a>(flowControl[0], flowControl[1],</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                 flowControl[2]);</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSession.html#afd9f33352327dcc51e618f007797f4c8">setEgressSettings</a>({{ SettingsId::MAX_CONCURRENT_STREAMS, 80 },</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                     { SettingsId::HEADER_TABLE_SIZE, 5555 },</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                     { SettingsId::ENABLE_PUSH, 1 },</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                     { SettingsId::ENABLE_EX_HEADERS, 1 }});</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">if</span> (startImmediately) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPDownstreamSession.html#a3a03b89e4be6f8d06df0b770eeab06ed">startNow</a>();</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    }</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a> = makeClientCodec&lt;typename C::Codec&gt;(C::version);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;getProtocol() == CodecProtocol::HTTP_2) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;getEgressSettings()-&gt;setSetting(</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        SettingsId::ENABLE_EX_HEADERS, 1);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;generateConnectionPreface(<a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;setCallback(&amp;<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aebc16f384387328455eaf6979cee35f9"><div class="ttname"><a href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">HTTPDownstreamTest::mockController_</a></div><div class="ttdeci">StrictMock&lt; MockController &gt; mockController_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">HTTPDownstreamSessionTest.cpp:424</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a7e97e63571b9ca17de27bd219d3b0e18"><div class="ttname"><a href="namespaceproxygen.html#a7e97e63571b9ca17de27bd219d3b0e18">proxygen::peerAddr</a></div><div class="ttdeci">const SocketAddress peerAddr</div><div class="ttdef"><b>Definition:</b> <a href="session_2test_2TestUtils_8cpp_source.html#l00020">TestUtils.cpp:20</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ae1a64adb2ce35eb25406ec7ee75f7692"><div class="ttname"><a href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">HTTPDownstreamTest::flowControl_</a></div><div class="ttdeci">std::vector&lt; int64_t &gt; flowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00423">HTTPDownstreamSessionTest.cpp:423</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a30e7387405c00c352e49cccda0584fae"><div class="ttname"><a href="namespaceproxygen.html#a30e7387405c00c352e49cccda0584fae">proxygen::mockTransportInfo</a></div><div class="ttdeci">const wangle::TransportInfo mockTransportInfo</div><div class="ttdef"><b>Definition:</b> <a href="session_2test_2TestUtils_8cpp_source.html#l00018">TestUtils.cpp:18</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPDownstreamSession_html"><div class="ttname"><a href="classproxygen_1_1HTTPDownstreamSession.html">proxygen::HTTPDownstreamSession</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSession_8h_source.html#l00018">HTTPDownstreamSession.h:18</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2Codec_html_a18540e4ea97aace01b07ae1e0c1e2129"><div class="ttname"><a href="classproxygen_1_1HTTP2Codec.html#a18540e4ea97aace01b07ae1e0c1e2129">proxygen::HTTP2Codec::getHeaderIndexingStrategy</a></div><div class="ttdeci">const HeaderIndexingStrategy * getHeaderIndexingStrategy() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Codec_8h_source.html#l00174">HTTP2Codec.h:174</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPDownstreamSession_html_a3a03b89e4be6f8d06df0b770eeab06ed"><div class="ttname"><a href="classproxygen_1_1HTTPDownstreamSession.html#a3a03b89e4be6f8d06df0b770eeab06ed">proxygen::HTTPDownstreamSession::startNow</a></div><div class="ttdeci">void startNow() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSession_8cpp_source.html#l00024">HTTPDownstreamSession.cpp:24</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac46b07afb5858b8e9f61a3f2fedd71f5"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">HTTPDownstreamTest::eventBase_</a></div><div class="ttdeci">EventBase eventBase_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">HTTPDownstreamSessionTest.cpp:420</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a795ecf7e745d3067b28adc343f904360"><div class="ttname"><a href="classHTTPDownstreamTest.html#a795ecf7e745d3067b28adc343f904360">HTTPDownstreamTest::transactionTimeouts_</a></div><div class="ttdeci">folly::HHWheelTimer::UniquePtr transactionTimeouts_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00422">HTTPDownstreamSessionTest.cpp:422</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac2b4652e12eeb4d55706d7a0d0ada475"><div class="ttname"><a href="namespaceproxygen.html#ac2b4652e12eeb4d55706d7a0d0ada475">proxygen::makeTimeoutSet</a></div><div class="ttdeci">folly::HHWheelTimer::UniquePtr makeTimeoutSet(EventBase *evb)</div><div class="ttdef"><b>Definition:</b> <a href="session_2test_2TestUtils_8cpp_source.html#l00031">TestUtils.cpp:31</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a03190a599b98f1d6691dca31fb303d28"><div class="ttname"><a href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">HTTPDownstreamTest::requests_</a></div><div class="ttdeci">IOBufQueue requests_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">HTTPDownstreamSessionTest.cpp:426</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_abf7a8f45923ceb76bcff72f6939011a0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#abf7a8f45923ceb76bcff72f6939011a0">proxygen::HTTPSession::setFlowControl</a></div><div class="ttdeci">void setFlowControl(size_t initialReceiveWindow, size_t receiveStreamWindowSize, size_t receiveSessionWindowSize) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00336">HTTPSession.cpp:336</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a95a22573ef0549e41d0d991bcf0a558a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a95a22573ef0549e41d0d991bcf0a558a">proxygen::HTTPSessionBase::setPrioritySampled</a></div><div class="ttdeci">void setPrioritySampled(bool sampled)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00314">HTTPSessionBase.h:314</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a8985275878cd904b62ca6611e19a40ab"><div class="ttname"><a href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">HTTPDownstreamTest::callbacks_</a></div><div class="ttdeci">NiceMock&lt; MockHTTPCodecCallback &gt; callbacks_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00428">HTTPDownstreamSessionTest.cpp:428</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a385606fbd6451c9cedf3b74675d46dd3"><div class="ttname"><a href="classHTTPDownstreamTest.html#a385606fbd6451c9cedf3b74675d46dd3">HTTPDownstreamTest::rawCodec_</a></div><div class="ttdeci">C::Codec * rawCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00431">HTTPDownstreamSessionTest.cpp:431</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_afd9f33352327dcc51e618f007797f4c8"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#afd9f33352327dcc51e618f007797f4c8">proxygen::HTTPSession::setEgressSettings</a></div><div class="ttdeci">void setEgressSettings(const SettingsList &amp;inSettings) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00351">HTTPSession.cpp:351</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html"><div class="ttname"><a href="classTestAsyncTransport.html">TestAsyncTransport</a></div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8h_source.html#l00019">TestAsyncTransport.h:19</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00035">HTTPSessionBase.h:35</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2Codec_html"><div class="ttname"><a href="classproxygen_1_1HTTP2Codec.html">proxygen::HTTP2Codec</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Codec_8h_source.html#l00029">HTTP2Codec.h:29</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a0a392c199fd91632e7fee519fca15423"><div class="ttname"><a href="classHTTPDownstreamTest.html#a0a392c199fd91632e7fee519fca15423">HTTPDownstreamTest::testH2IndexingStrat_</a></div><div class="ttdeci">HeaderIndexingStrategy testH2IndexingStrat_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00432">HTTPDownstreamSessionTest.cpp:432</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ad837ab655543e4211b38011fb932d77a"><div class="ttname"><a href="namespaceproxygen.html#ad837ab655543e4211b38011fb932d77a">proxygen::localAddr</a></div><div class="ttdeci">const SocketAddress localAddr</div><div class="ttdef"><b>Definition:</b> <a href="session_2test_2TestUtils_8cpp_source.html#l00019">TestUtils.cpp:19</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_abad1dfcfd461476fa7e36c2246206672"><div class="ttname"><a href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">HTTPDownstreamTest::httpSession_</a></div><div class="ttdeci">HTTPDownstreamSession * httpSession_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">HTTPDownstreamSessionTest.cpp:425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a3114c5718f2c5f6eb188d2aa409b339f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;testing::NiceMock&lt;<a class="el" href="classproxygen_1_1MockHTTPHandler.html">MockHTTPHandler</a>&gt; &gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::addSimpleNiceHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00173">173</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                         {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    std::unique_ptr&lt;testing::NiceMock&lt;MockHTTPHandler&gt;&gt; handler =</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      std::make_unique&lt;testing::NiceMock&lt;MockHTTPHandler&gt;&gt;();</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// See comment above</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">auto</span> rawHandler = handler.get();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, getRequestHandler(testing::_, testing::_))</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      .WillOnce(testing::Return(rawHandler))</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      .RetiresOnSaturation();</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    EXPECT_CALL(*handler, setTransaction(testing::_))</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      .WillOnce(testing::SaveArg&lt;0&gt;(&amp;handler-&gt;txn_));</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> handler;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aebc16f384387328455eaf6979cee35f9"><div class="ttname"><a href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">HTTPDownstreamTest::mockController_</a></div><div class="ttdeci">StrictMock&lt; MockController &gt; mockController_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">HTTPDownstreamSessionTest.cpp:424</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15ca5ec8573e07ff4ec9aaec3812be41"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;testing::StrictMock&lt;<a class="el" href="classproxygen_1_1MockHTTPHandler.html">MockHTTPHandler</a>&gt; &gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::addSimpleStrictHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00155">155</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                           {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    std::unique_ptr&lt;testing::StrictMock&lt;MockHTTPHandler&gt;&gt; handler =</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      std::make_unique&lt;testing::StrictMock&lt;MockHTTPHandler&gt;&gt;();</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// The ownership model here is suspect, but assume the callers won&#39;t destroy</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="comment">// handler before it&#39;s requested</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keyword">auto</span> rawHandler = handler.get();</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, getRequestHandler(testing::_, testing::_))</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      .WillOnce(testing::Return(rawHandler))</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      .RetiresOnSaturation();</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    EXPECT_CALL(*handler, setTransaction(testing::_))</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      .WillOnce(testing::SaveArg&lt;0&gt;(&amp;handler-&gt;txn_));</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> handler;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aebc16f384387328455eaf6979cee35f9"><div class="ttname"><a href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">HTTPDownstreamTest::mockController_</a></div><div class="ttdeci">StrictMock&lt; MockController &gt; mockController_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">HTTPDownstreamSessionTest.cpp:424</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5c361b0f34907d7a945ed309a3161cd8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::addSingleByteReads </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>delay</em> = <code>{}</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00199">199</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                                               {}) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keywordtype">char</span>* p = data; *p != <span class="charliteral">&#39;\0&#39;</span>; ++p) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#aadecdff89c3b318475ff86af41736130">addReadEvent</a>(p, 1, delay);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_aadecdff89c3b318475ff86af41736130"><div class="ttname"><a href="classTestAsyncTransport.html#aadecdff89c3b318475ff86af41736130">TestAsyncTransport::addReadEvent</a></div><div class="ttdeci">void addReadEvent(const void *buf, size_t buflen, std::chrono::milliseconds delayFromPrevious)</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00438">TestAsyncTransport.cpp:438</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c6421d5b6f4d9d77c4624c5f20248dd"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00148">148</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                 {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, detachSession(_));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSession.html#a60c801ba3d005b715d85661d0ab5e50f">dropConnection</a>();</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aebc16f384387328455eaf6979cee35f9"><div class="ttname"><a href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">HTTPDownstreamTest::mockController_</a></div><div class="ttdeci">StrictMock&lt; MockController &gt; mockController_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">HTTPDownstreamSessionTest.cpp:424</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a60c801ba3d005b715d85661d0ab5e50f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a60c801ba3d005b715d85661d0ab5e50f">proxygen::HTTPSession::dropConnection</a></div><div class="ttdeci">void dropConnection() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00493">HTTPSession.cpp:493</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_abad1dfcfd461476fa7e36c2246206672"><div class="ttname"><a href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">HTTPDownstreamTest::httpSession_</a></div><div class="ttdeci">HTTPDownstreamSession * httpSession_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">HTTPDownstreamSessionTest.cpp:425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6838fb25be29dd31a7ad8b7fe1fadee"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::expect101 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a>&#160;</td>
          <td class="paramname"><em>expectedProtocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expectedUpgrade</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>expect100</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00253">253</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                                         {</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    NiceMock&lt;MockHTTPCodecCallback&gt; callbacks;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    EXPECT_CALL(callbacks, onMessageBegin(_, _));</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    EXPECT_CALL(callbacks, onNativeProtocolUpgrade(_, _, _, _))</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      .WillOnce(</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        Invoke([<span class="keyword">this</span>, expectedUpgrade] (<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>,</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                                        <a class="code" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a>,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                                        <span class="keyword">const</span> std::string&amp;,</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                                        <a class="code" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a>&amp; msg) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;             EXPECT_EQ(msg.<a class="code" href="classproxygen_1_1HTTPMessage.html#ac064c15b921026a767bf252aee16e8ef">getStatusCode</a>(), 101);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;             EXPECT_EQ(msg.<a class="code" href="classproxygen_1_1HTTPMessage.html#a0e99af0573c855ec71204f24fc0ee617">getStatusMessage</a>(), <span class="stringliteral">&quot;Switching Protocols&quot;</span>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;             EXPECT_EQ(msg.<a class="code" href="classproxygen_1_1HTTPMessage.html#a2ba4953e1ab061fe5eb68af08e684772">getHeaders</a>().<a class="code" href="classproxygen_1_1HTTPHeaders.html#aa14bc0e99fc0ebe98fb95b7cff1bb598">getSingleOrEmpty</a>(HTTP_HEADER_UPGRADE),</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                       expectedUpgrade);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;             <span class="comment">// also connection and date</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;             EXPECT_EQ(msg.<a class="code" href="classproxygen_1_1HTTPMessage.html#a2ba4953e1ab061fe5eb68af08e684772">getHeaders</a>().<a class="code" href="classproxygen_1_1HTTPHeaders.html#a63958050d64b868c92960dccf830ca30">size</a>(), 3);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;             <a class="code" href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">breakParseOutput_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;             <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;               }));</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// this comes before 101, but due to gmock this is backwards</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> (expect100) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      EXPECT_CALL(callbacks, onMessageBegin(_, _))</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        .RetiresOnSaturation();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      EXPECT_CALL(callbacks, onHeadersComplete(_, _))</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        .WillOnce(Invoke([] (<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>,</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                             std::shared_ptr&lt;HTTPMessage&gt; msg) {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                 LOG(INFO) &lt;&lt; <span class="stringliteral">&quot;100 headers&quot;</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                 EXPECT_EQ(msg-&gt;getStatusCode(), 100);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                         }))</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        .RetiresOnSaturation();</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      EXPECT_CALL(callbacks, onMessageComplete(_, _))</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        .RetiresOnSaturation();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;setCallback(&amp;callbacks);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">parseOutput</a>(*<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a> = HTTPCodecFactory::getCodec(expectedProtocol,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                              TransportDirection::UPSTREAM);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aa800294f65d254f30aea9fa906ff407b"><div class="ttname"><a href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">HTTPDownstreamTest::parseOutput</a></div><div class="ttdeci">void parseOutput(HTTPCodec &amp;clientCodec)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00368">HTTPDownstreamSessionTest.cpp:368</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPMessage_html_a0e99af0573c855ec71204f24fc0ee617"><div class="ttname"><a href="classproxygen_1_1HTTPMessage.html#a0e99af0573c855ec71204f24fc0ee617">proxygen::HTTPMessage::getStatusMessage</a></div><div class="ttdeci">const std::string &amp; getStatusMessage() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPMessage_8h_source.html#l00245">HTTPMessage.h:245</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPMessage_html_ac064c15b921026a767bf252aee16e8ef"><div class="ttname"><a href="classproxygen_1_1HTTPMessage.html#ac064c15b921026a767bf252aee16e8ef">proxygen::HTTPMessage::getStatusCode</a></div><div class="ttdeci">uint16_t getStatusCode() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPMessage_8cpp_source.html#l00340">HTTPMessage.cpp:340</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPMessage_html_a2ba4953e1ab061fe5eb68af08e684772"><div class="ttname"><a href="classproxygen_1_1HTTPMessage.html#a2ba4953e1ab061fe5eb68af08e684772">proxygen::HTTPMessage::getHeaders</a></div><div class="ttdeci">HTTPHeaders &amp; getHeaders()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPMessage_8h_source.html#l00273">HTTPMessage.h:273</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPHeaders_html_aa14bc0e99fc0ebe98fb95b7cff1bb598"><div class="ttname"><a href="classproxygen_1_1HTTPHeaders.html#aa14bc0e99fc0ebe98fb95b7cff1bb598">proxygen::HTTPHeaders::getSingleOrEmpty</a></div><div class="ttdeci">const std::string &amp; getSingleOrEmpty(const T &amp;nameOrCode) const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPHeaders_8h_source.html#l00434">HTTPHeaders.h:434</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPHeaders_html_a63958050d64b868c92960dccf830ca30"><div class="ttname"><a href="classproxygen_1_1HTTPHeaders.html#a63958050d64b868c92960dccf830ca30">proxygen::HTTPHeaders::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPHeaders_8cpp_source.html#l00234">HTTPHeaders.cpp:234</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab1a0c2dbbc7f2f60fc446417b28eb559"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">HTTPDownstreamTest::breakParseOutput_</a></div><div class="ttdeci">bool breakParseOutput_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00430">HTTPDownstreamSessionTest.cpp:430</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_addee32fd97cd4864b2a4b2f8a99c11c1"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">proxygen::HTTPCodec::StreamID</a></div><div class="ttdeci">uint64_t StreamID</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00049">HTTPCodec.h:49</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPMessage_html"><div class="ttname"><a href="classproxygen_1_1HTTPMessage.html">proxygen::HTTPMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPMessage_8h_source.html#l00039">HTTPMessage.h:39</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a470a61083ee151f964f0382f345a2b42"><div class="ttname"><a href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">proxygen::CodecProtocol</a></div><div class="ttdeci">CodecProtocol</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8h_source.html#l00019">CodecProtocol.h:19</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48d8bc32715ea1c587abab3714232c78"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::expectDetachSession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00195">195</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                             {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, detachSession(testing::_));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aebc16f384387328455eaf6979cee35f9"><div class="ttname"><a href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">HTTPDownstreamTest::mockController_</a></div><div class="ttdeci">StrictMock&lt; MockController &gt; mockController_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">HTTPDownstreamSessionTest.cpp:424</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aec2d1282f50936c6e661ea21fa9e182c"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::expectResponse </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>code</em> = <code>200</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a>&#160;</td>
          <td class="paramname"><em>errorCode</em> = <code>ErrorCode::NO_ERROR</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>expect100</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>expectGoaway</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00293">293</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                                                         {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a0c6f26a3f77028aa03bd9f844ee3e741">expectResponses</a>(1, code, errorCode, expect100, expectGoaway);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_a0c6f26a3f77028aa03bd9f844ee3e741"><div class="ttname"><a href="classHTTPDownstreamTest.html#a0c6f26a3f77028aa03bd9f844ee3e741">HTTPDownstreamTest::expectResponses</a></div><div class="ttdeci">void expectResponses(uint32_t n, uint32_t code=200, ErrorCode errorCode=ErrorCode::NO_ERROR, bool expect100=false, bool expectGoaway=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00298">HTTPDownstreamSessionTest.cpp:298</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0c6f26a3f77028aa03bd9f844ee3e741"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::expectResponses </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>code</em> = <code>200</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a>&#160;</td>
          <td class="paramname"><em>errorCode</em> = <code>ErrorCode::NO_ERROR</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>expect100</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>expectGoaway</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00298">298</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                                                          {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;setCallback(&amp;<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespaceproxygen.html#a310dc42e3f7c61f50f8ab80a79ba19e8">isParallelCodecProtocol</a>(<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;getProtocol())) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onSettings(_))</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        .WillOnce(Invoke([<span class="keyword">this</span>] (<span class="keyword">const</span> <a class="code" href="namespaceproxygen.html#a178ae546fbff60576dc3e3ce2de52410">SettingsList</a>&amp; <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a>) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[0] &gt; 0) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordtype">bool</span> foundInitialWindow = <span class="keyword">false</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; setting: settings) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                  <span class="keywordflow">if</span> (setting.id == SettingsId::INITIAL_WINDOW_SIZE) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    EXPECT_EQ(flowControl_[0], setting.value);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    foundInitialWindow = true;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                  }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                EXPECT_TRUE(foundInitialWindow);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;              }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            }));</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[2] &gt; 0) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      int64_t sessionDelta =</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[2] - <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;getDefaultWindowSize();</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;supportsSessionFlowControl() &amp;&amp; sessionDelta) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onWindowUpdate(0, sessionDelta));</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    }</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[1] &gt; 0) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      <span class="keywordtype">size_t</span> initWindow = <a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[0] &gt; 0 ?</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[0] : <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;getDefaultWindowSize();</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      int64_t streamDelta = <a class="code" href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">flowControl_</a>[1] - initWindow;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;supportsStreamFlowControl() &amp;&amp; streamDelta) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onWindowUpdate(1, streamDelta));</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordflow">if</span> (expectGoaway) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onGoaway(<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>(1),</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                                      ErrorCode::NO_ERROR, _));</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; n; i++) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      uint8_t times = (expect100) ? 2 : 1;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onMessageBegin(_, _))</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        .Times(times).RetiresOnSaturation();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onHeadersComplete(_, _))</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        .WillOnce(Invoke([code] (<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>,</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                 std::shared_ptr&lt;HTTPMessage&gt; msg) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                           EXPECT_EQ(msg-&gt;getStatusCode(), code);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                         }));</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">if</span> (expect100) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onHeadersComplete(_, _))</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          .WillOnce(Invoke([] (<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>,</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                               std::shared_ptr&lt;HTTPMessage&gt; msg) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                             EXPECT_EQ(msg-&gt;getStatusCode(), 100);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                           }))</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;          .RetiresOnSaturation();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordflow">if</span> (errorCode != ErrorCode::NO_ERROR) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onAbort(_, _))</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;          .WillOnce(Invoke([errorCode] (<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>,</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                                        <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> error) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                             EXPECT_EQ(error, errorCode);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                         }));</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onBody(_, _, _)).RetiresOnSaturation();</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onMessageComplete(_, _)).RetiresOnSaturation();</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">parseOutput</a>(*<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_aa800294f65d254f30aea9fa906ff407b"><div class="ttname"><a href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">HTTPDownstreamTest::parseOutput</a></div><div class="ttdeci">void parseOutput(HTTPCodec &amp;clientCodec)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00368">HTTPDownstreamSessionTest.cpp:368</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ae1a64adb2ce35eb25406ec7ee75f7692"><div class="ttname"><a href="classHTTPDownstreamTest.html#ae1a64adb2ce35eb25406ec7ee75f7692">HTTPDownstreamTest::flowControl_</a></div><div class="ttdeci">std::vector&lt; int64_t &gt; flowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00423">HTTPDownstreamSessionTest.cpp:423</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a8985275878cd904b62ca6611e19a40ab"><div class="ttname"><a href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">HTTPDownstreamTest::callbacks_</a></div><div class="ttdeci">NiceMock&lt; MockHTTPCodecCallback &gt; callbacks_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00428">HTTPDownstreamSessionTest.cpp:428</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9b"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">proxygen::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdef"><b>Definition:</b> <a href="ErrorCode_8h_source.html#l00026">ErrorCode.h:26</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a178ae546fbff60576dc3e3ce2de52410"><div class="ttname"><a href="namespaceproxygen.html#a178ae546fbff60576dc3e3ce2de52410">proxygen::SettingsList</a></div><div class="ttdeci">std::vector&lt; HTTPSetting &gt; SettingsList</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8h_source.html#l00081">HTTPSettings.h:81</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a310dc42e3f7c61f50f8ab80a79ba19e8"><div class="ttname"><a href="namespaceproxygen.html#a310dc42e3f7c61f50f8ab80a79ba19e8">proxygen::isParallelCodecProtocol</a></div><div class="ttdeci">bool isParallelCodecProtocol(CodecProtocol protocol)</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8cpp_source.html#l00086">CodecProtocol.cpp:86</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_addee32fd97cd4864b2a4b2f8a99c11c1"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">proxygen::HTTPCodec::StreamID</a></div><div class="ttdeci">uint64_t StreamID</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00049">HTTPCodec.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab8976962121af33c3caf0bc9ccfb11a1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::flushRequests </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eof</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>eofDelay</em> = <code>milliseconds(0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>initialDelay</em> = <code>milliseconds(0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void()&gt;&#160;</td>
          <td class="paramname"><em>extraEventsFn</em> = <code>std::function&lt;void()&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00223">223</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                                                               {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#aadecdff89c3b318475ff86af41736130">addReadEvent</a>(<a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>, initialDelay);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (extraEventsFn) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      extraEventsFn();</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> (eof) {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#aaaac5d5fb78fd8aa09e8b5d19bba657d">addReadEOF</a>(eofDelay);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#a8af6a8fa921d4f81b4a2afc30bbe4f2f">startReadEvents</a>();</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div><div class="ttc" id="classTestAsyncTransport_html_a8af6a8fa921d4f81b4a2afc30bbe4f2f"><div class="ttname"><a href="classTestAsyncTransport.html#a8af6a8fa921d4f81b4a2afc30bbe4f2f">TestAsyncTransport::startReadEvents</a></div><div class="ttdeci">void startReadEvents()</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00491">TestAsyncTransport.cpp:491</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_aadecdff89c3b318475ff86af41736130"><div class="ttname"><a href="classTestAsyncTransport.html#aadecdff89c3b318475ff86af41736130">TestAsyncTransport::addReadEvent</a></div><div class="ttdeci">void addReadEvent(const void *buf, size_t buflen, std::chrono::milliseconds delayFromPrevious)</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00438">TestAsyncTransport.cpp:438</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a03190a599b98f1d6691dca31fb303d28"><div class="ttname"><a href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">HTTPDownstreamTest::requests_</a></div><div class="ttdeci">IOBufQueue requests_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">HTTPDownstreamSessionTest.cpp:426</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_aaaac5d5fb78fd8aa09e8b5d19bba657d"><div class="ttname"><a href="classTestAsyncTransport.html#aaaac5d5fb78fd8aa09e8b5d19bba657d">TestAsyncTransport::addReadEOF</a></div><div class="ttdeci">void addReadEOF(std::chrono::milliseconds delayFromPrevious)</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00455">TestAsyncTransport.cpp:455</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac883526b2d777a4e131abafd7b998483"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::flushRequestsAndLoop </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eof</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>eofDelay</em> = <code>milliseconds(0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>initialDelay</em> = <code>milliseconds(0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void()&gt;&#160;</td>
          <td class="paramname"><em>extraEventsFn</em> = <code>std::function&lt;void()&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00205">205</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                                               {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ab8976962121af33c3caf0bc9ccfb11a1">flushRequests</a>(eof, eofDelay, initialDelay, extraEventsFn);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>.loop();</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_ac46b07afb5858b8e9f61a3f2fedd71f5"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">HTTPDownstreamTest::eventBase_</a></div><div class="ttdeci">EventBase eventBase_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">HTTPDownstreamSessionTest.cpp:420</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab8976962121af33c3caf0bc9ccfb11a1"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab8976962121af33c3caf0bc9ccfb11a1">HTTPDownstreamTest::flushRequests</a></div><div class="ttdeci">void flushRequests(bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00223">HTTPDownstreamSessionTest.cpp:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a973662f8c90cfa6516feea2cbe9f0304"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::flushRequestsAndLoopN </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eof</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>eofDelay</em> = <code>milliseconds(0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>initialDelay</em> = <code>milliseconds(0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; void()&gt;&#160;</td>
          <td class="paramname"><em>extraEventsFn</em> = <code>std::function&lt;void()&gt;()</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00213">213</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                                               {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ab8976962121af33c3caf0bc9ccfb11a1">flushRequests</a>(eof, eofDelay, initialDelay, extraEventsFn);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; n; i++) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>.loopOnce();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_ac46b07afb5858b8e9f61a3f2fedd71f5"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">HTTPDownstreamTest::eventBase_</a></div><div class="ttdeci">EventBase eventBase_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">HTTPDownstreamSessionTest.cpp:420</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab8976962121af33c3caf0bc9ccfb11a1"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab8976962121af33c3caf0bc9ccfb11a1">HTTPDownstreamTest::flushRequests</a></div><div class="ttdeci">void flushRequests(bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00223">HTTPDownstreamSessionTest.cpp:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab03e22df6023ae6b74736af956be93a1"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::gracefulShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00242">242</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                          {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    folly::DelayedDestruction::DestructorGuard g(<a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;generateGoaway(this-&gt;<a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>, 0, ErrorCode::NO_ERROR);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">expectDetachSession</a>();</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">flushRequestsAndLoop</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_ac883526b2d777a4e131abafd7b998483"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">HTTPDownstreamTest::flushRequestsAndLoop</a></div><div class="ttdeci">void flushRequestsAndLoop(bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00205">HTTPDownstreamSessionTest.cpp:205</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a03190a599b98f1d6691dca31fb303d28"><div class="ttname"><a href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">HTTPDownstreamTest::requests_</a></div><div class="ttdeci">IOBufQueue requests_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">HTTPDownstreamSessionTest.cpp:426</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a48d8bc32715ea1c587abab3714232c78"><div class="ttname"><a href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">HTTPDownstreamTest::expectDetachSession</a></div><div class="ttdeci">void expectDetachSession()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00195">HTTPDownstreamSessionTest.cpp:195</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_abad1dfcfd461476fa7e36c2246206672"><div class="ttname"><a href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">HTTPDownstreamTest::httpSession_</a></div><div class="ttdeci">HTTPDownstreamSession * httpSession_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">HTTPDownstreamSessionTest.cpp:425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9469020a4dbd46bc15e5132a05e1d935"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::onEOMTerminateHandlerExpectShutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1MockHTTPHandler.html">MockHTTPHandler</a> &amp;&#160;</td>
          <td class="paramname"><em>handler</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00189">189</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                                                                     {</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    handler.<a class="code" href="classproxygen_1_1MockHTTPHandler.html#a0db962440de5bab056cc9b4ec2621107">expectEOM</a>([&amp;] { handler.<a class="code" href="classproxygen_1_1HTTPHandlerBase.html#a381cad48ce1e784c81c3b6eb6b7b8c32">terminate</a>(); });</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    handler.<a class="code" href="classproxygen_1_1MockHTTPHandler.html#a51813e2f1f2a0e91f6be054c084eeea7">expectDetachTransaction</a>();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">expectDetachSession</a>();</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1MockHTTPHandler_html_a0db962440de5bab056cc9b4ec2621107"><div class="ttname"><a href="classproxygen_1_1MockHTTPHandler.html#a0db962440de5bab056cc9b4ec2621107">proxygen::MockHTTPHandler::expectEOM</a></div><div class="ttdeci">void expectEOM(std::function&lt; void()&gt; callback=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionMocks_8h_source.html#l00275">HTTPSessionMocks.h:275</a></div></div>
<div class="ttc" id="classproxygen_1_1MockHTTPHandler_html_a51813e2f1f2a0e91f6be054c084eeea7"><div class="ttname"><a href="classproxygen_1_1MockHTTPHandler.html#a51813e2f1f2a0e91f6be054c084eeea7">proxygen::MockHTTPHandler::expectDetachTransaction</a></div><div class="ttdeci">void expectDetachTransaction(std::function&lt; void()&gt; callback=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionMocks_8h_source.html#l00321">HTTPSessionMocks.h:321</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a48d8bc32715ea1c587abab3714232c78"><div class="ttname"><a href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">HTTPDownstreamTest::expectDetachSession</a></div><div class="ttdeci">void expectDetachSession()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00195">HTTPDownstreamSessionTest.cpp:195</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPHandlerBase_html_a381cad48ce1e784c81c3b6eb6b7b8c32"><div class="ttname"><a href="classproxygen_1_1HTTPHandlerBase.html#a381cad48ce1e784c81c3b6eb6b7b8c32">proxygen::HTTPHandlerBase::terminate</a></div><div class="ttdeci">void terminate()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionMocks_8h_source.html#l00033">HTTPSessionMocks.h:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa800294f65d254f30aea9fa906ff407b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::parseOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &amp;&#160;</td>
          <td class="paramname"><em>clientCodec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00368">368</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                           {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">auto</span> writeEvents = <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#a868b84b536e34136c476bb44485eafca">getWriteEvents</a>();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">breakParseOutput_</a> &amp;&amp;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;           (!writeEvents-&gt;empty() || !<a class="code" href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">parseOutputStream_</a>.empty())) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">if</span> (!writeEvents-&gt;empty()) {</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keyword">auto</span> <span class="keyword">event</span> = writeEvents-&gt;front();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keyword">auto</span> vec = <span class="keyword">event</span>-&gt;getIoVec();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <span class="keyword">event</span>-&gt;getCount(); i++) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;          <a class="code" href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">parseOutputStream_</a>.append(</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            IOBuf::copyBuffer(vec[i].iov_base, vec[i].iov_len));</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        writeEvents-&gt;pop_front();</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      uint32_t consumed = clientCodec.<a class="code" href="classproxygen_1_1HTTPCodec.html#a44a623c547735db83ae472ba7f1af6df">onIngress</a>(*<a class="code" href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">parseOutputStream_</a>.front());</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">parseOutputStream_</a>.split(consumed);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">breakParseOutput_</a>) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      EXPECT_EQ(<a class="code" href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">parseOutputStream_</a>.chainLength(), 0);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">breakParseOutput_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_a0d929e4489f4e8374d7d543d972bc42e"><div class="ttname"><a href="classHTTPDownstreamTest.html#a0d929e4489f4e8374d7d543d972bc42e">HTTPDownstreamTest::parseOutputStream_</a></div><div class="ttdeci">IOBufQueue parseOutputStream_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00429">HTTPDownstreamSessionTest.cpp:429</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a44a623c547735db83ae472ba7f1af6df"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a44a623c547735db83ae472ba7f1af6df">proxygen::HTTPCodec::onIngress</a></div><div class="ttdeci">virtual size_t onIngress(const folly::IOBuf &amp;buf)=0</div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_a868b84b536e34136c476bb44485eafca"><div class="ttname"><a href="classTestAsyncTransport.html#a868b84b536e34136c476bb44485eafca">TestAsyncTransport::getWriteEvents</a></div><div class="ttdeci">std::deque&lt; std::shared_ptr&lt; WriteEvent &gt; &gt; * getWriteEvents()</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8h_source.html#l00101">TestAsyncTransport.h:101</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab1a0c2dbbc7f2f60fc446417b28eb559"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab1a0c2dbbc7f2f60fc446417b28eb559">HTTPDownstreamTest::breakParseOutput_</a></div><div class="ttdeci">bool breakParseOutput_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00430">HTTPDownstreamSessionTest.cpp:430</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a46c58f43ceea76591517372823c41636"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::resumeWritesAfterDelay </td>
          <td>(</td>
          <td class="paramtype">milliseconds&#160;</td>
          <td class="paramname"><em>delay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00394">394</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                                  {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>.runAfterDelay([<span class="keyword">this</span>] { <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#a8e86662a17790980714be5eea91e94ae">resumeWrites</a>(); },</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                             delay.count());</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac46b07afb5858b8e9f61a3f2fedd71f5"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">HTTPDownstreamTest::eventBase_</a></div><div class="ttdeci">EventBase eventBase_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">HTTPDownstreamSessionTest.cpp:420</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_a8e86662a17790980714be5eea91e94ae"><div class="ttname"><a href="classTestAsyncTransport.html#a8e86662a17790980714be5eea91e94ae">TestAsyncTransport::resumeWrites</a></div><div class="ttdeci">void resumeWrites()</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00394">TestAsyncTransport.cpp:394</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a208b25dcd27143e557dafe7ec2803a61"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::resumeWritesInLoop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00390">390</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                            {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>.runInLoop([<span class="keyword">this</span>] { <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#a8e86662a17790980714be5eea91e94ae">resumeWrites</a>(); });</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac46b07afb5858b8e9f61a3f2fedd71f5"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">HTTPDownstreamTest::eventBase_</a></div><div class="ttdeci">EventBase eventBase_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">HTTPDownstreamSessionTest.cpp:420</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_a8e86662a17790980714be5eea91e94ae"><div class="ttname"><a href="classTestAsyncTransport.html#a8e86662a17790980714be5eea91e94ae">TestAsyncTransport::resumeWrites</a></div><div class="ttdeci">void resumeWrites()</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00394">TestAsyncTransport.cpp:394</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7de657b63c7b09c0d6ca8fc221c7a792"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::sendHeader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00126">126</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                 {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a>(<span class="stringliteral">&quot;/&quot;</span>, 0, <span class="keyword">false</span>);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_a14b4b86f26d2504888fca13ba2d69044"><div class="ttname"><a href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">HTTPDownstreamTest::sendRequest</a></div><div class="ttdeci">HTTPCodec::StreamID sendRequest(const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">HTTPDownstreamSessionTest.cpp:111</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a14b4b86f26d2504888fca13ba2d69044"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::sendRequest </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>url</em> = <code>&quot;/&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>priority</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eom</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">111</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                                                   {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">auto</span> req = <a class="code" href="namespaceproxygen.html#ac94313b3a860ee1efa0939b0c8664798">getGetRequest</a>();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    req.setURL(url);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    req.setPriority(priority);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a>(req, eom);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_a14b4b86f26d2504888fca13ba2d69044"><div class="ttname"><a href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">HTTPDownstreamTest::sendRequest</a></div><div class="ttdeci">HTTPCodec::StreamID sendRequest(const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">HTTPDownstreamSessionTest.cpp:111</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac94313b3a860ee1efa0939b0c8664798"><div class="ttname"><a href="namespaceproxygen.html#ac94313b3a860ee1efa0939b0c8664798">proxygen::getGetRequest</a></div><div class="ttdeci">HTTPMessage getGetRequest(const std::string &amp;url)</div><div class="ttdef"><b>Definition:</b> <a href="codec_2test_2TestUtils_8cpp_source.html#l00076">TestUtils.cpp:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51344e68e702f00023df7dae96f65820"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::sendRequest </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eom</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00120">120</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                                                         {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">auto</span> <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> = <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;createStream();</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>-&gt;generateHeader(<a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>, <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, req, eom);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_a03190a599b98f1d6691dca31fb303d28"><div class="ttname"><a href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">HTTPDownstreamTest::requests_</a></div><div class="ttdeci">IOBufQueue requests_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">HTTPDownstreamSessionTest.cpp:426</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad7af80b6a258ea7a54f63f79cc05dcaf"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Promise&lt;Unit&gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::sendRequestLater </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a>&#160;</td>
          <td class="paramname"><em>req</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eof</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00130">130</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                                  {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    Promise&lt;Unit&gt; reqp;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    reqp.getFuture().then(&amp;<a class="code" href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">eventBase_</a>, [=] {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a>(req);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#aadecdff89c3b318475ff86af41736130">addReadEvent</a>(<a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>, milliseconds(0));</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (eof) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <a class="code" href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">transport_</a>-&gt;<a class="code" href="classTestAsyncTransport.html#aaaac5d5fb78fd8aa09e8b5d19bba657d">addReadEOF</a>(milliseconds(0));</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      });</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> reqp;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div><div class="ttc" id="classHTTPDownstreamTest_html_a14b4b86f26d2504888fca13ba2d69044"><div class="ttname"><a href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">HTTPDownstreamTest::sendRequest</a></div><div class="ttdeci">HTTPCodec::StreamID sendRequest(const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">HTTPDownstreamSessionTest.cpp:111</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab44b1edf6354c86649b1354696b36f68"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab44b1edf6354c86649b1354696b36f68">HTTPDownstreamTest::transport_</a></div><div class="ttdeci">TestAsyncTransport * transport_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">HTTPDownstreamSessionTest.cpp:421</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_aadecdff89c3b318475ff86af41736130"><div class="ttname"><a href="classTestAsyncTransport.html#aadecdff89c3b318475ff86af41736130">TestAsyncTransport::addReadEvent</a></div><div class="ttdeci">void addReadEvent(const void *buf, size_t buflen, std::chrono::milliseconds delayFromPrevious)</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00438">TestAsyncTransport.cpp:438</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac46b07afb5858b8e9f61a3f2fedd71f5"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac46b07afb5858b8e9f61a3f2fedd71f5">HTTPDownstreamTest::eventBase_</a></div><div class="ttdeci">EventBase eventBase_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">HTTPDownstreamSessionTest.cpp:420</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a03190a599b98f1d6691dca31fb303d28"><div class="ttname"><a href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">HTTPDownstreamTest::requests_</a></div><div class="ttdeci">IOBufQueue requests_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">HTTPDownstreamSessionTest.cpp:426</a></div></div>
<div class="ttc" id="classTestAsyncTransport_html_aaaac5d5fb78fd8aa09e8b5d19bba657d"><div class="ttname"><a href="classTestAsyncTransport.html#aaaac5d5fb78fd8aa09e8b5d19bba657d">TestAsyncTransport::addReadEOF</a></div><div class="ttdeci">void addReadEOF(std::chrono::milliseconds delayFromPrevious)</div><div class="ttdef"><b>Definition:</b> <a href="TestAsyncTransport_8cpp_source.html#l00455">TestAsyncTransport.cpp:455</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af3949ce20921419c3e82b4fecb661dca"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1MockByteEventTracker.html">MockByteEventTracker</a>* <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::setMockByteEventTracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00399">399</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                                                  {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keyword">auto</span> byteEventTracker = <span class="keyword">new</span> <a class="code" href="classproxygen_1_1MockByteEventTracker.html">MockByteEventTracker</a>(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSession.html#a2fec0d8847998b13b34d943e4cf61011">setByteEventTracker</a>(</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      std::unique_ptr&lt;ByteEventTracker&gt;(byteEventTracker));</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    EXPECT_CALL(*byteEventTracker, preSend(_, _, _))</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      .WillRepeatedly(Return(0));</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    EXPECT_CALL(*byteEventTracker, drainByteEvents())</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      .WillRepeatedly(Return(0));</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    EXPECT_CALL(*byteEventTracker, processByteEvents(_, _))</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      .WillRepeatedly(Invoke([]</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                             (std::shared_ptr&lt;ByteEventTracker&gt; <span class="keyword">self</span>,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                              uint64_t bytesWritten) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                               <span class="keywordflow">return</span> <span class="keyword">self</span>-&gt;ByteEventTracker::processByteEvents(</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                                 <span class="keyword">self</span>,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                 bytesWritten);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                             }));</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordflow">return</span> byteEventTracker;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a2fec0d8847998b13b34d943e4cf61011"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2fec0d8847998b13b34d943e4cf61011">proxygen::HTTPSession::setByteEventTracker</a></div><div class="ttdeci">void setByteEventTracker(std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00317">HTTPSession.cpp:317</a></div></div>
<div class="ttc" id="classproxygen_1_1MockByteEventTracker_html"><div class="ttname"><a href="classproxygen_1_1MockByteEventTracker.html">proxygen::MockByteEventTracker</a></div><div class="ttdef"><b>Definition:</b> <a href="MockByteEventTracker_8h_source.html#l00017">MockByteEventTracker.h:17</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_abad1dfcfd461476fa7e36c2246206672"><div class="ttname"><a href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">HTTPDownstreamTest::httpSession_</a></div><div class="ttdeci">HTTPDownstreamSession * httpSession_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">HTTPDownstreamSessionTest.cpp:425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9f3e052750dc7fc9e318df114efae10"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::SetUp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00142">142</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    folly::EventBaseManager::get()-&gt;clearEventBase();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    HTTPSession::setDefaultWriteBufferLimit(65536);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    HTTP2PriorityQueue::setNodeLifetime(std::chrono::milliseconds(2));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e1e673d970f37f78dcb5c4a5522c40a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::testChunks </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>trailers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l01369">1369</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                                    {</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;  InSequence enforceOrder;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  <span class="keyword">auto</span> handler = <a class="code" href="classHTTPDownstreamTest.html#a15ca5ec8573e07ff4ec9aaec3812be41">addSimpleStrictHandler</a>();</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;  handler-&gt;expectHeaders();</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;  handler-&gt;expectEOM([&amp;handler, trailers] () {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      handler-&gt;sendChunkedReplyWithBody(200, 100, 17, trailers);</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    });</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  handler-&gt;expectDetachTransaction();</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;  HTTPSession::DestructorGuard g(<a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a>();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">flushRequestsAndLoop</a>(<span class="keyword">true</span>, milliseconds(0));</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onMessageBegin(1, _))</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;    .Times(1);</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onHeadersComplete(1, _))</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;    .Times(1);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 6; i++) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onChunkHeader(1, _));</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onBody(1, _, _));</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onChunkComplete(1));</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;  <span class="keywordflow">if</span> (trailers) {</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onTrailersComplete(1, _));</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onMessageComplete(1, _));</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">parseOutput</a>(*<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">expectDetachSession</a>();</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div><div class="ttc" id="classHTTPDownstreamTest_html_aa800294f65d254f30aea9fa906ff407b"><div class="ttname"><a href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">HTTPDownstreamTest::parseOutput</a></div><div class="ttdeci">void parseOutput(HTTPCodec &amp;clientCodec)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00368">HTTPDownstreamSessionTest.cpp:368</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a14b4b86f26d2504888fca13ba2d69044"><div class="ttname"><a href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">HTTPDownstreamTest::sendRequest</a></div><div class="ttdeci">HTTPCodec::StreamID sendRequest(const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">HTTPDownstreamSessionTest.cpp:111</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac883526b2d777a4e131abafd7b998483"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">HTTPDownstreamTest::flushRequestsAndLoop</a></div><div class="ttdeci">void flushRequestsAndLoop(bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00205">HTTPDownstreamSessionTest.cpp:205</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a8985275878cd904b62ca6611e19a40ab"><div class="ttname"><a href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">HTTPDownstreamTest::callbacks_</a></div><div class="ttdeci">NiceMock&lt; MockHTTPCodecCallback &gt; callbacks_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00428">HTTPDownstreamSessionTest.cpp:428</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a15ca5ec8573e07ff4ec9aaec3812be41"><div class="ttname"><a href="classHTTPDownstreamTest.html#a15ca5ec8573e07ff4ec9aaec3812be41">HTTPDownstreamTest::addSimpleStrictHandler</a></div><div class="ttdeci">std::unique_ptr&lt; testing::StrictMock&lt; MockHTTPHandler &gt; &gt; addSimpleStrictHandler()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00155">HTTPDownstreamSessionTest.cpp:155</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a48d8bc32715ea1c587abab3714232c78"><div class="ttname"><a href="classHTTPDownstreamTest.html#a48d8bc32715ea1c587abab3714232c78">HTTPDownstreamTest::expectDetachSession</a></div><div class="ttdeci">void expectDetachSession()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00195">HTTPDownstreamSessionTest.cpp:195</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_abad1dfcfd461476fa7e36c2246206672"><div class="ttname"><a href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">HTTPDownstreamTest::httpSession_</a></div><div class="ttdeci">HTTPDownstreamSession * httpSession_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">HTTPDownstreamSessionTest.cpp:425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a00b692ddacca59cd6de1c0526467b1a0"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::testPriorities </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>numPriorities</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l02174">2174</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                                                                 {</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;  uint32_t iterations = 10;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;  uint32_t maxPriority = numPriorities - 1;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;  std::vector&lt;std::unique_ptr&lt;testing::NiceMock&lt;MockHTTPHandler&gt;&gt;&gt; handlers;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> pri = numPriorities - 1; pri &gt;= 0; pri--) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; iterations; i++) {</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <a class="code" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a>(<span class="stringliteral">&quot;/&quot;</span>, pri * (8 / numPriorities));</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      InSequence handlerSequence;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keyword">auto</span> handler = <a class="code" href="classHTTPDownstreamTest.html#a3114c5718f2c5f6eb188d2aa409b339f">addSimpleNiceHandler</a>();</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="keyword">auto</span> rawHandler = handler.get();</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      handlers.push_back(std::move(handler));</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      rawHandler-&gt;expectHeaders();</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      rawHandler-&gt;expectEOM([rawHandler] {</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;          rawHandler-&gt;sendReplyWithBody(200, 1000);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        });</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;      rawHandler-&gt;expectDetachTransaction([] {  });</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    }</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;  }</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;  <span class="keyword">auto</span> buf = <a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>.move();</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;  buf-&gt;coalesce();</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">requests_</a>.append(std::move(buf));</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">flushRequestsAndLoop</a>();</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;  std::list&lt;HTTPCodec::StreamID&gt; streams;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onMessageBegin(_, _))</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    .Times(iterations * numPriorities);</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onHeadersComplete(_, _))</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;    .Times(iterations * numPriorities);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;  <span class="comment">// body is variable and hence ignored</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">callbacks_</a>, onMessageComplete(_, _))</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      .Times(iterations * numPriorities)</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      .WillRepeatedly(Invoke([&amp;](<a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="code" href="structstream.html">stream</a>, <span class="keywordtype">bool</span> <span class="comment">/*upgrade*/</span>) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        streams.push_back(stream);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      }));</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">parseOutput</a>(*<a class="code" href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">clientCodec_</a>);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;  <span class="comment">// transactions finish in priority order (higher streamIDs first)</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;  EXPECT_EQ(streams.size(), iterations * numPriorities);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;  <span class="keyword">auto</span> txn = streams.begin();</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> band = maxPriority; band &gt;= 0; band--) {</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keyword">auto</span> upperID = iterations * 2 * (band + 1);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;    <span class="keyword">auto</span> lowerID = iterations * 2 * band;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;    <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; iterations; i++) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      EXPECT_LE(lowerID, (uint32_t)*txn);</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      EXPECT_GE(upperID, (uint32_t)*txn);</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      ++txn;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    }</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;  }</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;}</div><div class="ttc" id="classHTTPDownstreamTest_html_aa800294f65d254f30aea9fa906ff407b"><div class="ttname"><a href="classHTTPDownstreamTest.html#aa800294f65d254f30aea9fa906ff407b">HTTPDownstreamTest::parseOutput</a></div><div class="ttdeci">void parseOutput(HTTPCodec &amp;clientCodec)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00368">HTTPDownstreamSessionTest.cpp:368</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a14b4b86f26d2504888fca13ba2d69044"><div class="ttname"><a href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">HTTPDownstreamTest::sendRequest</a></div><div class="ttdeci">HTTPCodec::StreamID sendRequest(const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">HTTPDownstreamSessionTest.cpp:111</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac883526b2d777a4e131abafd7b998483"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">HTTPDownstreamTest::flushRequestsAndLoop</a></div><div class="ttdeci">void flushRequestsAndLoop(bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00205">HTTPDownstreamSessionTest.cpp:205</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a03190a599b98f1d6691dca31fb303d28"><div class="ttname"><a href="classHTTPDownstreamTest.html#a03190a599b98f1d6691dca31fb303d28">HTTPDownstreamTest::requests_</a></div><div class="ttdeci">IOBufQueue requests_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">HTTPDownstreamSessionTest.cpp:426</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a8985275878cd904b62ca6611e19a40ab"><div class="ttname"><a href="classHTTPDownstreamTest.html#a8985275878cd904b62ca6611e19a40ab">HTTPDownstreamTest::callbacks_</a></div><div class="ttdeci">NiceMock&lt; MockHTTPCodecCallback &gt; callbacks_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00428">HTTPDownstreamSessionTest.cpp:428</a></div></div>
<div class="ttc" id="structstream_html"><div class="ttname"><a href="structstream.html">stream</a></div><div class="ttdef"><b>Definition:</b> <a href="QMINScheme_8h_source.html#l00118">QMINScheme.h:118</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a36aee26f5b8dde672ff089fec7224ed8"><div class="ttname"><a href="classHTTPDownstreamTest.html#a36aee26f5b8dde672ff089fec7224ed8">HTTPDownstreamTest::clientCodec_</a></div><div class="ttdeci">unique_ptr&lt; HTTPCodec &gt; clientCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">HTTPDownstreamSessionTest.cpp:427</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a3114c5718f2c5f6eb188d2aa409b339f"><div class="ttname"><a href="classHTTPDownstreamTest.html#a3114c5718f2c5f6eb188d2aa409b339f">HTTPDownstreamTest::addSimpleNiceHandler</a></div><div class="ttdeci">std::unique_ptr&lt; testing::NiceMock&lt; MockHTTPHandler &gt; &gt; addSimpleNiceHandler()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00173">HTTPDownstreamSessionTest.cpp:173</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_addee32fd97cd4864b2a4b2f8a99c11c1"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">proxygen::HTTPCodec::StreamID</a></div><div class="ttdeci">uint64_t StreamID</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00049">HTTPCodec.h:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab700c063a3227a6ac1752fb13ee99e48"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class C &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::testSimpleUpgrade </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>upgradeHeader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a>&#160;</td>
          <td class="paramname"><em>expectedProtocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>expectedUpgradeHeader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l01868">1868</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

<p>References <a class="el" href="HTTP2Codec_8h_source.html#l00174">proxygen::HTTP2Codec::getHeaderIndexingStrategy()</a>, <a class="el" href="codec_2test_2TestUtils_8cpp_source.html#l00161">proxygen::getUpgradeRequest()</a>, and <a class="el" href="namespaceproxygen_1_1http2.html#a4a4530236990b959d14d8a16d91d99cb">proxygen::http2::kProtocolCleartextString</a>.</p>
<div class="fragment"><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                                          {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  this-&gt;<a class="code" href="classHTTPDownstreamTest.html#a385606fbd6451c9cedf3b74675d46dd3">rawCodec_</a>-&gt;setAllowedUpgradeProtocols({expectedUpgradeHeader});</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  <span class="keyword">auto</span> handler = <a class="code" href="classHTTPDownstreamTest.html#a15ca5ec8573e07ff4ec9aaec3812be41">addSimpleStrictHandler</a>();</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;  <a class="code" href="classproxygen_1_1HeaderIndexingStrategy.html">HeaderIndexingStrategy</a> testH2IndexingStrat;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;  handler-&gt;expectHeaders();</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, onSessionCodecChange(<a class="code" href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">httpSession_</a>));</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;  handler-&gt;expectEOM(</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;    [&amp;handler, expectedProtocol, expectedUpgradeHeader, &amp;testH2IndexingStrat] {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      EXPECT_FALSE(handler-&gt;txn_-&gt;getSetupTransportInfo().secure);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      EXPECT_EQ(*handler-&gt;txn_-&gt;getSetupTransportInfo().appProtocol,</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;                expectedUpgradeHeader);</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      <span class="keywordflow">if</span> (expectedProtocol == CodecProtocol::HTTP_2) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;        <span class="keyword">const</span> <a class="code" href="classproxygen_1_1HTTP2Codec.html">HTTP2Codec</a>* codec = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="classproxygen_1_1HTTP2Codec.html">HTTP2Codec</a>*<span class="keyword">&gt;</span>(</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;          &amp;handler-&gt;txn_-&gt;getTransport().getCodec());</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        ASSERT_NE(codec, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        EXPECT_EQ(codec-&gt;<a class="code" href="classproxygen_1_1HTTP2Codec.html#a18540e4ea97aace01b07ae1e0c1e2129">getHeaderIndexingStrategy</a>(), &amp;testH2IndexingStrat);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      }</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      handler-&gt;sendReplyWithBody(200, 100);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    });</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  handler-&gt;expectDetachTransaction();</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;  <span class="keywordflow">if</span> (expectedProtocol == CodecProtocol::HTTP_2) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    EXPECT_CALL(<a class="code" href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">mockController_</a>, getHeaderIndexingStrategy())</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      .WillOnce(</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        Return(&amp;testH2IndexingStrat)</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    );</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;  <a class="code" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> req = <a class="code" href="namespaceproxygen.html#a8a99c30fe4d83fe3ff501b801f8ab3ad">getUpgradeRequest</a>(upgradeHeader);</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;  <span class="keywordflow">if</span> (upgradeHeader == <a class="code" href="namespaceproxygen_1_1http2.html#a4a4530236990b959d14d8a16d91d99cb">http2::kProtocolCleartextString</a>) {</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    HTTP2Codec::requestUpgrade(req);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  }</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">sendRequest</a>(req);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">flushRequestsAndLoop</a>();</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#af6838fb25be29dd31a7ad8b7fe1fadee">expect101</a>(expectedProtocol, expectedUpgradeHeader);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#aec2d1282f50936c6e661ea21fa9e182c">expectResponse</a>();</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <a class="code" href="classHTTPDownstreamTest.html#ab03e22df6023ae6b74736af956be93a1">gracefulShutdown</a>();</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;}</div><div class="ttc" id="classHTTPDownstreamTest_html_af6838fb25be29dd31a7ad8b7fe1fadee"><div class="ttname"><a href="classHTTPDownstreamTest.html#af6838fb25be29dd31a7ad8b7fe1fadee">HTTPDownstreamTest::expect101</a></div><div class="ttdeci">void expect101(CodecProtocol expectedProtocol, const std::string &amp;expectedUpgrade, bool expect100=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00253">HTTPDownstreamSessionTest.cpp:253</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_aebc16f384387328455eaf6979cee35f9"><div class="ttname"><a href="classHTTPDownstreamTest.html#aebc16f384387328455eaf6979cee35f9">HTTPDownstreamTest::mockController_</a></div><div class="ttdeci">StrictMock&lt; MockController &gt; mockController_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">HTTPDownstreamSessionTest.cpp:424</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a14b4b86f26d2504888fca13ba2d69044"><div class="ttname"><a href="classHTTPDownstreamTest.html#a14b4b86f26d2504888fca13ba2d69044">HTTPDownstreamTest::sendRequest</a></div><div class="ttdeci">HTTPCodec::StreamID sendRequest(const std::string &amp;url=&quot;/&quot;, int8_t priority=0, bool eom=true)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00111">HTTPDownstreamSessionTest.cpp:111</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ab03e22df6023ae6b74736af956be93a1"><div class="ttname"><a href="classHTTPDownstreamTest.html#ab03e22df6023ae6b74736af956be93a1">HTTPDownstreamTest::gracefulShutdown</a></div><div class="ttdeci">void gracefulShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00242">HTTPDownstreamSessionTest.cpp:242</a></div></div>
<div class="ttc" id="classproxygen_1_1HeaderIndexingStrategy_html"><div class="ttname"><a href="classproxygen_1_1HeaderIndexingStrategy.html">proxygen::HeaderIndexingStrategy</a></div><div class="ttdef"><b>Definition:</b> <a href="HeaderIndexingStrategy_8h_source.html#l00016">HeaderIndexingStrategy.h:16</a></div></div>
<div class="ttc" id="namespaceproxygen_1_1http2_html_a4a4530236990b959d14d8a16d91d99cb"><div class="ttname"><a href="namespaceproxygen_1_1http2.html#a4a4530236990b959d14d8a16d91d99cb">proxygen::http2::kProtocolCleartextString</a></div><div class="ttdeci">const std::string kProtocolCleartextString</div></div>
<div class="ttc" id="classproxygen_1_1HTTP2Codec_html_a18540e4ea97aace01b07ae1e0c1e2129"><div class="ttname"><a href="classproxygen_1_1HTTP2Codec.html#a18540e4ea97aace01b07ae1e0c1e2129">proxygen::HTTP2Codec::getHeaderIndexingStrategy</a></div><div class="ttdeci">const HeaderIndexingStrategy * getHeaderIndexingStrategy() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Codec_8h_source.html#l00174">HTTP2Codec.h:174</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_ac883526b2d777a4e131abafd7b998483"><div class="ttname"><a href="classHTTPDownstreamTest.html#ac883526b2d777a4e131abafd7b998483">HTTPDownstreamTest::flushRequestsAndLoop</a></div><div class="ttdeci">void flushRequestsAndLoop(bool eof=false, milliseconds eofDelay=milliseconds(0), milliseconds initialDelay=milliseconds(0), std::function&lt; void()&gt; extraEventsFn=std::function&lt; void()&gt;())</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00205">HTTPDownstreamSessionTest.cpp:205</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a385606fbd6451c9cedf3b74675d46dd3"><div class="ttname"><a href="classHTTPDownstreamTest.html#a385606fbd6451c9cedf3b74675d46dd3">HTTPDownstreamTest::rawCodec_</a></div><div class="ttdeci">C::Codec * rawCodec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00431">HTTPDownstreamSessionTest.cpp:431</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_aec2d1282f50936c6e661ea21fa9e182c"><div class="ttname"><a href="classHTTPDownstreamTest.html#aec2d1282f50936c6e661ea21fa9e182c">HTTPDownstreamTest::expectResponse</a></div><div class="ttdeci">void expectResponse(uint32_t code=200, ErrorCode errorCode=ErrorCode::NO_ERROR, bool expect100=false, bool expectGoaway=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00293">HTTPDownstreamSessionTest.cpp:293</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2Codec_html"><div class="ttname"><a href="classproxygen_1_1HTTP2Codec.html">proxygen::HTTP2Codec</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Codec_8h_source.html#l00029">HTTP2Codec.h:29</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_a15ca5ec8573e07ff4ec9aaec3812be41"><div class="ttname"><a href="classHTTPDownstreamTest.html#a15ca5ec8573e07ff4ec9aaec3812be41">HTTPDownstreamTest::addSimpleStrictHandler</a></div><div class="ttdeci">std::unique_ptr&lt; testing::StrictMock&lt; MockHTTPHandler &gt; &gt; addSimpleStrictHandler()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00155">HTTPDownstreamSessionTest.cpp:155</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPMessage_html"><div class="ttname"><a href="classproxygen_1_1HTTPMessage.html">proxygen::HTTPMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPMessage_8h_source.html#l00039">HTTPMessage.h:39</a></div></div>
<div class="ttc" id="classHTTPDownstreamTest_html_abad1dfcfd461476fa7e36c2246206672"><div class="ttname"><a href="classHTTPDownstreamTest.html#abad1dfcfd461476fa7e36c2246206672">HTTPDownstreamTest::httpSession_</a></div><div class="ttdeci">HTTPDownstreamSession * httpSession_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">HTTPDownstreamSessionTest.cpp:425</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a8a99c30fe4d83fe3ff501b801f8ab3ad"><div class="ttname"><a href="namespaceproxygen.html#a8a99c30fe4d83fe3ff501b801f8ab3ad">proxygen::getUpgradeRequest</a></div><div class="ttdeci">HTTPMessage getUpgradeRequest(const std::string &amp;upgradeHeader, HTTPMethod method, uint32_t bodyLen)</div><div class="ttdef"><b>Definition:</b> <a href="codec_2test_2TestUtils_8cpp_source.html#l00161">TestUtils.cpp:161</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab1a0c2dbbc7f2f60fc446417b28eb559"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::breakParseOutput_ {false}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00430">430</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8985275878cd904b62ca6611e19a40ab"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">NiceMock&lt;<a class="el" href="classproxygen_1_1MockHTTPCodecCallback.html">MockHTTPCodecCallback</a>&gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::callbacks_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00428">428</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a36aee26f5b8dde672ff089fec7224ed8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unique_ptr&lt;<a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a>&gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::clientCodec_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00427">427</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac46b07afb5858b8e9f61a3f2fedd71f5"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">EventBase <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::eventBase_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00420">420</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ae1a64adb2ce35eb25406ec7ee75f7692"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;int64_t&gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::flowControl_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00423">423</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="abad1dfcfd461476fa7e36c2246206672"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPDownstreamSession.html">HTTPDownstreamSession</a>* <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::httpSession_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00425">425</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aebc16f384387328455eaf6979cee35f9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">StrictMock&lt;<a class="el" href="classproxygen_1_1MockController.html">MockController</a>&gt; <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::mockController_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00424">424</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0d929e4489f4e8374d7d543d972bc42e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IOBufQueue <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::parseOutputStream_ {IOBufQueue::cacheChainLength()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00429">429</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a385606fbd6451c9cedf3b74675d46dd3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">C::Codec* <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::rawCodec_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00431">431</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a03190a599b98f1d6691dca31fb303d28"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IOBufQueue <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::requests_ {IOBufQueue::cacheChainLength()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00426">426</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0a392c199fd91632e7fee519fca15423"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HeaderIndexingStrategy.html">HeaderIndexingStrategy</a> <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::testH2IndexingStrat_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00432">432</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a795ecf7e745d3067b28adc343f904360"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::HHWheelTimer::UniquePtr <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::transactionTimeouts_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00422">422</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab44b1edf6354c86649b1354696b36f68"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename C&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classTestAsyncTransport.html">TestAsyncTransport</a>* <a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a>&lt; C &gt;::transport_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00421">421</a> of file <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>proxygen/lib/http/session/test/<a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html">HTTPDownstreamSessionTest.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classHTTPDownstreamTest.html">HTTPDownstreamTest</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
