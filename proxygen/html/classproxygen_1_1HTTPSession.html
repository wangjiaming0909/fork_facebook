<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>proxygen: proxygen::HTTPSession Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">proxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classproxygen_1_1HTTPSession.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classproxygen_1_1HTTPSession-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">proxygen::HTTPSession Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for proxygen::HTTPSession:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classproxygen_1_1HTTPSession.png" usemap="#proxygen::HTTPSession_map" alt=""/>
  <map id="proxygen::HTTPSession_map" name="proxygen::HTTPSession_map">
<area href="classproxygen_1_1HTTPCodec_1_1Callback.html" alt="proxygen::HTTPCodec::Callback" shape="rect" coords="406,336,667,360"/>
<area href="classproxygen_1_1FlowControlFilter_1_1Callback.html" alt="proxygen::FlowControlFilter::Callback" shape="rect" coords="406,280,667,304"/>
<area href="classproxygen_1_1HTTPPriorityMapFactoryProvider.html" alt="proxygen::HTTPPriorityMapFactoryProvider" shape="rect" coords="406,224,667,248"/>
<area href="classproxygen_1_1ByteEventTracker_1_1Callback.html" alt="proxygen::ByteEventTracker::Callback" shape="rect" coords="406,112,667,136"/>
<area href="classproxygen_1_1HTTPTransaction_1_1Transport.html" alt="proxygen::HTTPTransaction::Transport" shape="rect" coords="406,56,667,80"/>
<area href="classproxygen_1_1HTTPSessionBase.html" alt="proxygen::HTTPSessionBase" shape="rect" coords="406,0,667,24"/>
<area href="classproxygen_1_1HTTPDownstreamSession.html" alt="proxygen::HTTPDownstreamSession" shape="rect" coords="0,616,261,640"/>
<area href="classproxygen_1_1HTTPUpstreamSession.html" alt="proxygen::HTTPUpstreamSession" shape="rect" coords="271,616,532,640"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession_1_1DrainTimeout.html">DrainTimeout</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession_1_1FlowControlTimeout.html">FlowControlTimeout</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession_1_1ShutdownTransportCallback.html">ShutdownTransportCallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html">WriteSegment</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession_1_1WriteTimeout.html">WriteTimeout</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ad099bb84051caa91e5ed30e309a8e524"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad099bb84051caa91e5ed30e309a8e524">UniquePtr</a> = std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a>, Destructor &gt;</td></tr>
<tr class="separator:ad099bb84051caa91e5ed30e309a8e524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_types_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pub_types_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Public Types inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:a1c9bb94538d5eeda59044fec7da1c21d inherit pub_types_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21d">SessionType</a> { <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21da293c9ea246ff9985dc6f62a650f78986">SessionType::HTTP</a>, 
<a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21da8fe49abfd9ab1d6620b6e84dde100789">SessionType::HQ</a>
 }</td></tr>
<tr class="separator:a1c9bb94538d5eeda59044fec7da1c21d inherit pub_types_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2969f50b8010be5a0ef38415057f92c6 inherit pub_types_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2969f50b8010be5a0ef38415057f92c6">FilterIteratorFn</a> = std::function&lt; void(<a class="el" href="namespaceproxygen.html#ac0eaae14747186a4429ac2cf1b2569cf">HTTPCodecFilter</a> *)&gt;</td></tr>
<tr class="separator:a2969f50b8010be5a0ef38415057f92c6 inherit pub_types_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5e40fcbfdc692240baee16cdf2f7f297"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21d">HTTPSessionBase::SessionType</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a5e40fcbfdc692240baee16cdf2f7f297">getType</a> () const noexceptoverride</td></tr>
<tr class="separator:a5e40fcbfdc692240baee16cdf2f7f297"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a3bd3fa8d867fec154e90a8d830af35"><td class="memItemLeft" align="right" valign="top">folly::AsyncTransportWrapper *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">getTransport</a> () override</td></tr>
<tr class="separator:a9a3bd3fa8d867fec154e90a8d830af35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6225e79bfb92a2b8b5445d02f385eb5"><td class="memItemLeft" align="right" valign="top">folly::EventBase *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af6225e79bfb92a2b8b5445d02f385eb5">getEventBase</a> () const override</td></tr>
<tr class="separator:af6225e79bfb92a2b8b5445d02f385eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab64b62af1ed594428a7aa50be35449c6"><td class="memItemLeft" align="right" valign="top">const folly::AsyncTransportWrapper *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab64b62af1ed594428a7aa50be35449c6">getTransport</a> () const override</td></tr>
<tr class="separator:ab64b62af1ed594428a7aa50be35449c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82ff05f591f90fc68145ee47cce9d7da"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a82ff05f591f90fc68145ee47cce9d7da">hasActiveTransactions</a> () const override</td></tr>
<tr class="separator:a82ff05f591f90fc68145ee47cce9d7da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e761397c1bf1a22dd1591566329d10"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a01e761397c1bf1a22dd1591566329d10">getNumOutgoingStreams</a> () const override</td></tr>
<tr class="separator:a01e761397c1bf1a22dd1591566329d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e47485f76defbdb18a2ee8046d3c8ca"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9e47485f76defbdb18a2ee8046d3c8ca">getNumIncomingStreams</a> () const override</td></tr>
<tr class="separator:a9e47485f76defbdb18a2ee8046d3c8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99a081c8679ece357e810e5615178a2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a99a081c8679ece357e810e5615178a2b">getByteEventTracker</a> ()</td></tr>
<tr class="separator:a99a081c8679ece357e810e5615178a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fec0d8847998b13b34d943e4cf61011"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2fec0d8847998b13b34d943e4cf61011">setByteEventTracker</a> (std::shared_ptr&lt; <a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a> &gt; byteEventTracker)</td></tr>
<tr class="separator:a2fec0d8847998b13b34d943e4cf61011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a480679a665d1efba1a2393a9c0608665"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a480679a665d1efba1a2393a9c0608665">setSessionStats</a> (<a class="el" href="classproxygen_1_1HTTPSessionStats.html">HTTPSessionStats</a> *stats) override</td></tr>
<tr class="separator:a480679a665d1efba1a2393a9c0608665"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf7a8f45923ceb76bcff72f6939011a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#abf7a8f45923ceb76bcff72f6939011a0">setFlowControl</a> (size_t initialReceiveWindow, size_t receiveStreamWindowSize, size_t receiveSessionWindowSize) override</td></tr>
<tr class="separator:abf7a8f45923ceb76bcff72f6939011a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9f33352327dcc51e618f007797f4c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#afd9f33352327dcc51e618f007797f4c8">setEgressSettings</a> (const <a class="el" href="namespaceproxygen.html#a178ae546fbff60576dc3e3ce2de52410">SettingsList</a> &amp;inSettings) override</td></tr>
<tr class="separator:afd9f33352327dcc51e618f007797f4c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a177d9f43b8dcd75a09ccbe02a2f00498"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">getHTTP2PrioritiesEnabled</a> () const override</td></tr>
<tr class="separator:a177d9f43b8dcd75a09ccbe02a2f00498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7146166e18d78011dcb8df8685ffa31c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7146166e18d78011dcb8df8685ffa31c">setHTTP2PrioritiesEnabled</a> (bool enabled) override</td></tr>
<tr class="separator:a7146166e18d78011dcb8df8685ffa31c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d802545b2cf56aeb3b8308c7d3a9371"><td class="memItemLeft" align="right" valign="top">const folly::SocketAddress &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4d802545b2cf56aeb3b8308c7d3a9371">getLocalAddress</a> () const noexceptoverride</td></tr>
<tr class="separator:a4d802545b2cf56aeb3b8308c7d3a9371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06f714cc6f6448b73257796d7abc551a"><td class="memItemLeft" align="right" valign="top">const folly::SocketAddress &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a06f714cc6f6448b73257796d7abc551a">getPeerAddress</a> () const noexceptoverride</td></tr>
<tr class="separator:a06f714cc6f6448b73257796d7abc551a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64beb207eb35324706b875207915087e"><td class="memItemLeft" align="right" valign="top">const wangle::TransportInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a64beb207eb35324706b875207915087e">getSetupTransportInfo</a> () const noexceptoverride</td></tr>
<tr class="separator:a64beb207eb35324706b875207915087e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82b0bd3fa4af3999b03cbccbfe136c8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa82b0bd3fa4af3999b03cbccbfe136c8">getCurrentTransportInfo</a> (wangle::TransportInfo *tinfo) override</td></tr>
<tr class="separator:aa82b0bd3fa4af3999b03cbccbfe136c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74cd3ad6f9e4755a65d7d8e5c92a2ce0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a74cd3ad6f9e4755a65d7d8e5c92a2ce0">setMaxConcurrentIncomingStreams</a> (uint32_t num) override</td></tr>
<tr class="separator:a74cd3ad6f9e4755a65d7d8e5c92a2ce0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aded2a34214bbbcaf96e07253de9131c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aded2a34214bbbcaf96e07253de9131c8">setEgressBytesLimit</a> (uint64_t bytesLimit)</td></tr>
<tr class="separator:aded2a34214bbbcaf96e07253de9131c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a89f7a8498e8afae9ee48c61f1c8bdc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9a89f7a8498e8afae9ee48c61f1c8bdc">startNow</a> () override</td></tr>
<tr class="separator:a9a89f7a8498e8afae9ee48c61f1c8bdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85a0e02025ed4dbf075761698f277f91"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a85a0e02025ed4dbf075761698f277f91">sendSettings</a> () override</td></tr>
<tr class="separator:a85a0e02025ed4dbf075761698f277f91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac21aceda7a1827089fc7cd36f49aa1a6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac21aceda7a1827089fc7cd36f49aa1a6">sendPing</a> () override</td></tr>
<tr class="separator:ac21aceda7a1827089fc7cd36f49aa1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af56ac7c2c1fa8a251141063e07f86136"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af56ac7c2c1fa8a251141063e07f86136">sendPriority</a> (<a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> pri) override</td></tr>
<tr class="separator:af56ac7c2c1fa8a251141063e07f86136"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4f24229a8ed84336d73a25133f93c30"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae4f24229a8ed84336d73a25133f93c30">sendPriority</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> pri) override</td></tr>
<tr class="separator:ae4f24229a8ed84336d73a25133f93c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81217225c4cb8a8268e5c96c80ce7196"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a81217225c4cb8a8268e5c96c80ce7196">sendCertificateRequest</a> (std::unique_ptr&lt; folly::IOBuf &gt; certificateRequestContext, std::vector&lt; fizz::Extension &gt; extensions) override</td></tr>
<tr class="separator:a81217225c4cb8a8268e5c96c80ce7196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0c2edc0dd6e8c306b814276a6f661d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aee0c2edc0dd6e8c306b814276a6f661d">timeoutExpired</a> () noexceptoverride</td></tr>
<tr class="separator:aee0c2edc0dd6e8c306b814276a6f661d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa266c1a755e4fac09edf6f1e0deba8c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa266c1a755e4fac09edf6f1e0deba8c1">describe</a> (std::ostream &amp;os) const override</td></tr>
<tr class="separator:aa266c1a755e4fac09edf6f1e0deba8c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab67702bcd40390a2b42e8404bbbdc8c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab67702bcd40390a2b42e8404bbbdc8c0">isBusy</a> () const override</td></tr>
<tr class="separator:ab67702bcd40390a2b42e8404bbbdc8c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ae035349c89f5ea79a0bc052926a837"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9ae035349c89f5ea79a0bc052926a837">notifyPendingShutdown</a> () override</td></tr>
<tr class="separator:a9ae035349c89f5ea79a0bc052926a837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17a9bd92ab6c58976923ca38235d14e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a17a9bd92ab6c58976923ca38235d14e3">closeWhenIdle</a> () override</td></tr>
<tr class="separator:a17a9bd92ab6c58976923ca38235d14e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60c801ba3d005b715d85661d0ab5e50f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a60c801ba3d005b715d85661d0ab5e50f">dropConnection</a> () override</td></tr>
<tr class="separator:a60c801ba3d005b715d85661d0ab5e50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe73197503c2bc4aa024555be2fa0338"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#abe73197503c2bc4aa024555be2fa0338">dumpConnectionState</a> (uint8_t loglevel) override</td></tr>
<tr class="separator:abe73197503c2bc4aa024555be2fa0338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835f8ccd23c3890580f3ba11a7a9b51c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a835f8ccd23c3890580f3ba11a7a9b51c">getCurrentTransportInfoWithoutUpdate</a> (wangle::TransportInfo *tinfo) const override</td></tr>
<tr class="separator:a835f8ccd23c3890580f3ba11a7a9b51c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9d59cc2df5eff2fd9e89c4ad433a9d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4d9d59cc2df5eff2fd9e89c4ad433a9d">setHeaderCodecStats</a> (<a class="el" href="classproxygen_1_1HeaderCodec_1_1Stats.html">HeaderCodec::Stats</a> *stats) override</td></tr>
<tr class="separator:a4d9d59cc2df5eff2fd9e89c4ad433a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2b5edde97da1c7321b3c1beb2e42ebd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab2b5edde97da1c7321b3c1beb2e42ebd">enableDoubleGoawayDrain</a> () override</td></tr>
<tr class="separator:ab2b5edde97da1c7321b3c1beb2e42ebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f17d905706699ce11d91ff621057575"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0f17d905706699ce11d91ff621057575">connCloseByRemote</a> () override</td></tr>
<tr class="separator:a0f17d905706699ce11d91ff621057575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a508498d569ac0f41882eb22ea7a61642"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a508498d569ac0f41882eb22ea7a61642">setSecondAuthManager</a> (std::unique_ptr&lt; <a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> &gt; secondAuthManager)</td></tr>
<tr class="separator:a508498d569ac0f41882eb22ea7a61642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6626c7d6b00d8c2a181f108aeca9dd6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a6626c7d6b00d8c2a181f108aeca9dd6b">getSecondAuthManager</a> () const </td></tr>
<tr class="separator:a6626c7d6b00d8c2a181f108aeca9dd6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b58add6b1ec1961896913447c51d232"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7b58add6b1ec1961896913447c51d232">isDetachable</a> (bool checkSocket=true) const override</td></tr>
<tr class="separator:a7b58add6b1ec1961896913447c51d232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:af8a8f609c01a88071759fd815644e2e3 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#af8a8f609c01a88071759fd815644e2e3">HTTPSessionBase</a> (const folly::SocketAddress &amp;<a class="el" href="namespaceproxygen.html#ad837ab655543e4211b38011fb932d77a">localAddr</a>, const folly::SocketAddress &amp;<a class="el" href="namespaceproxygen.html#a7e97e63571b9ca17de27bd219d3b0e18">peerAddr</a>, <a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *controller, const wangle::TransportInfo &amp;tinfo, <a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *infoCallback, std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt; codec)</td></tr>
<tr class="separator:af8a8f609c01a88071759fd815644e2e3 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a092b355386e5efda6d2ffd257bd2317b inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a092b355386e5efda6d2ffd257bd2317b">~HTTPSessionBase</a> ()</td></tr>
<tr class="separator:a092b355386e5efda6d2ffd257bd2317b inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68b4101d8e91fa7fbf3335a96ac34da0 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a68b4101d8e91fa7fbf3335a96ac34da0">setInfoCallback</a> (<a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *callback)</td></tr>
<tr class="separator:a68b4101d8e91fa7fbf3335a96ac34da0 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae829f698ff44c5184d65aaa156d20ab1 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ae829f698ff44c5184d65aaa156d20ab1">getInfoCallback</a> () const </td></tr>
<tr class="separator:ae829f698ff44c5184d65aaa156d20ab1 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9378165e6119a7c11df616a47080606c inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPTransaction.html#a7d7b33611c7b5f490fb5be4747c82561">HTTPTransaction::Handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a9378165e6119a7c11df616a47080606c">getParseErrorHandler</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;error)</td></tr>
<tr class="separator:a9378165e6119a7c11df616a47080606c inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54bf79beecf51bb3433b3224cba07dad inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a54bf79beecf51bb3433b3224cba07dad">supportsMoreTransactions</a> () const </td></tr>
<tr class="separator:a54bf79beecf51bb3433b3224cba07dad inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a067ba3e3669d928746bb003df542fd14 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a067ba3e3669d928746bb003df542fd14">getHistoricalMaxOutgoingStreams</a> () const </td></tr>
<tr class="separator:a067ba3e3669d928746bb003df542fd14 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d8af596f6840a97339179568169dc4e inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a0d8af596f6840a97339179568169dc4e">getMaxConcurrentOutgoingStreams</a> () const </td></tr>
<tr class="separator:a0d8af596f6840a97339179568169dc4e inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a907b76607c10117ea4f4a669699835eb inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a907b76607c10117ea4f4a669699835eb">getController</a> ()</td></tr>
<tr class="separator:a907b76607c10117ea4f4a669699835eb inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cbeb1b9a7416436303119be719e7caa inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2cbeb1b9a7416436303119be719e7caa">setController</a> (<a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *controller)</td></tr>
<tr class="separator:a2cbeb1b9a7416436303119be719e7caa inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab94370f0363e4f974e819b0bbf1c642b inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667">ConnectionCloseReason</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ab94370f0363e4f974e819b0bbf1c642b">getConnectionCloseReason</a> () const </td></tr>
<tr class="separator:ab94370f0363e4f974e819b0bbf1c642b inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3958ef73c590766781ea4a7a642dca33 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memTemplParams" colspan="2">template&lt;typename Filter , typename... Args&gt; </td></tr>
<tr class="memitem:a3958ef73c590766781ea4a7a642dca33 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a3958ef73c590766781ea4a7a642dca33">addCodecFilter</a> (Args &amp;&amp;...args)</td></tr>
<tr class="separator:a3958ef73c590766781ea4a7a642dca33 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7374e8253fc82f8514aef4a66a0db6 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a9e7374e8253fc82f8514aef4a66a0db6">getCodecProtocol</a> () const </td></tr>
<tr class="separator:a9e7374e8253fc82f8514aef4a66a0db6 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc6ad2830a827e37d4d9ed35adb5baa inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aabc6ad2830a827e37d4d9ed35adb5baa">setHTTP2PrioritiesEnabled</a> (bool enabled)</td></tr>
<tr class="separator:aabc6ad2830a827e37d4d9ed35adb5baa inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef6b05c5f7d87c6da499c087475faaa5 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aef6b05c5f7d87c6da499c087475faaa5">setMaxConcurrentOutgoingStreams</a> (uint32_t num)</td></tr>
<tr class="separator:aef6b05c5f7d87c6da499c087475faaa5 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2448b441f26cc399b7226db2b2613401 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2448b441f26cc399b7226db2b2613401">getWriteBufferLimit</a> () const </td></tr>
<tr class="separator:a2448b441f26cc399b7226db2b2613401 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9475eb8a559c00f81f9310b2aab42d inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a7f9475eb8a559c00f81f9310b2aab42d">setWriteBufferLimit</a> (uint32_t limit)</td></tr>
<tr class="separator:a7f9475eb8a559c00f81f9310b2aab42d inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefc99913f4b1b6886c01e86a14da7885 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aefc99913f4b1b6886c01e86a14da7885">setReadBufferLimit</a> (uint32_t limit)</td></tr>
<tr class="separator:aefc99913f4b1b6886c01e86a14da7885 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb1ea17a47de936a9fc48d69cf212c7 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1fb1ea17a47de936a9fc48d69cf212c7">getNumTxnServed</a> () const </td></tr>
<tr class="separator:a1fb1ea17a47de936a9fc48d69cf212c7 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3c0c7b7b5bd8d33d62546d3d27125a8 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">std::chrono::seconds&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ad3c0c7b7b5bd8d33d62546d3d27125a8">getLatestIdleTime</a> () const </td></tr>
<tr class="separator:ad3c0c7b7b5bd8d33d62546d3d27125a8 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95a22573ef0549e41d0d991bcf0a558a inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a95a22573ef0549e41d0d991bcf0a558a">setPrioritySampled</a> (bool sampled)</td></tr>
<tr class="separator:a95a22573ef0549e41d0d991bcf0a558a inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228fe147434c7ab4d5b78c90431c2bcc inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">const folly::SocketAddress &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a228fe147434c7ab4d5b78c90431c2bcc">getLocalAddress</a> () const noexcept</td></tr>
<tr class="separator:a228fe147434c7ab4d5b78c90431c2bcc inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea0d89fc4f306750d2f84dd044e10f6 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">const folly::SocketAddress &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#afea0d89fc4f306750d2f84dd044e10f6">getPeerAddress</a> () const noexcept</td></tr>
<tr class="separator:afea0d89fc4f306750d2f84dd044e10f6 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accdbb04fcad674eb1d709e51db2faa3f inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">const wangle::TransportInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#accdbb04fcad674eb1d709e51db2faa3f">getSetupTransportInfo</a> () const noexcept</td></tr>
<tr class="separator:accdbb04fcad674eb1d709e51db2faa3f inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bdf61d649a17acdd476ee28acd03867 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">wangle::TransportInfo &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a0bdf61d649a17acdd476ee28acd03867">getSetupTransportInfo</a> () noexcept</td></tr>
<tr class="separator:a0bdf61d649a17acdd476ee28acd03867 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e810a1d803e52061964419128fc7fc5 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a4e810a1d803e52061964419128fc7fc5">attachThreadLocals</a> (folly::EventBase *eventBase, folly::SSLContextPtr sslContext, const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;timeout, <a class="el" href="classproxygen_1_1HTTPSessionStats.html">HTTPSessionStats</a> *stats, <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2969f50b8010be5a0ef38415057f92c6">FilterIteratorFn</a> fn, <a class="el" href="classproxygen_1_1HeaderCodec_1_1Stats.html">HeaderCodec::Stats</a> *headerCodecStats, <a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *controller)=0</td></tr>
<tr class="separator:a4e810a1d803e52061964419128fc7fc5 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0ea565697840e3cceab93c8eb28462 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a6c0ea565697840e3cceab93c8eb28462">detachThreadLocals</a> (bool detachSSLContext=false)=0</td></tr>
<tr class="separator:a6c0ea565697840e3cceab93c8eb28462 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cd2bf610fd13e24dd2698329730ef61 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1cd2bf610fd13e24dd2698329730ef61">newTransaction</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html#a7d7b33611c7b5f490fb5be4747c82561">HTTPTransaction::Handler</a> *handler)=0</td></tr>
<tr class="separator:a1cd2bf610fd13e24dd2698329730ef61 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef267ab2932aab69bf25e86c1cfb72ca inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aef267ab2932aab69bf25e86c1cfb72ca">isReplaySafe</a> () const =0</td></tr>
<tr class="separator:aef267ab2932aab69bf25e86c1cfb72ca inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0569fef3ef7600b314ae7598164c38a9 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a0569fef3ef7600b314ae7598164c38a9">isReusable</a> () const =0</td></tr>
<tr class="separator:a0569fef3ef7600b314ae7598164c38a9 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af525d1c596f37b737bfa80603ce0c22d inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#af525d1c596f37b737bfa80603ce0c22d">isClosing</a> () const =0</td></tr>
<tr class="separator:af525d1c596f37b737bfa80603ce0c22d inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53f9465a37d4a9b1bad4adcd80117ea inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ac53f9465a37d4a9b1bad4adcd80117ea">enableExHeadersSettings</a> () noexcept</td></tr>
<tr class="separator:ac53f9465a37d4a9b1bad4adcd80117ea inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07bd0261e41bfd84ad1db766869ae9c5 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a07bd0261e41bfd84ad1db766869ae9c5">isExHeadersEnabled</a> () noexcept</td></tr>
<tr class="separator:a07bd0261e41bfd84ad1db766869ae9c5 inherit pub_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classproxygen_1_1HTTPTransaction_1_1Transport"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classproxygen_1_1HTTPTransaction_1_1Transport')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html">proxygen::HTTPTransaction::Transport</a></td></tr>
<tr class="memitem:a2ac7b5e0c885a68de2ca5b6a6acc7431 inherit pub_methods_classproxygen_1_1HTTPTransaction_1_1Transport"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a2ac7b5e0c885a68de2ca5b6a6acc7431">~Transport</a> ()</td></tr>
<tr class="separator:a2ac7b5e0c885a68de2ca5b6a6acc7431 inherit pub_methods_classproxygen_1_1HTTPTransaction_1_1Transport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ecfac5921c51ac23a16a0e5b3d33ad5 inherit pub_methods_classproxygen_1_1HTTPTransaction_1_1Transport"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a9ecfac5921c51ac23a16a0e5b3d33ad5">isReplaySafe</a> () const =0</td></tr>
<tr class="separator:a9ecfac5921c51ac23a16a0e5b3d33ad5 inherit pub_methods_classproxygen_1_1HTTPTransaction_1_1Transport"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classproxygen_1_1ByteEventTracker_1_1Callback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classproxygen_1_1ByteEventTracker_1_1Callback')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classproxygen_1_1ByteEventTracker_1_1Callback.html">proxygen::ByteEventTracker::Callback</a></td></tr>
<tr class="memitem:af827eb2d41e69a09ed84ffeff245eda6 inherit pub_methods_classproxygen_1_1ByteEventTracker_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1ByteEventTracker_1_1Callback.html#af827eb2d41e69a09ed84ffeff245eda6">~Callback</a> ()</td></tr>
<tr class="separator:af827eb2d41e69a09ed84ffeff245eda6 inherit pub_methods_classproxygen_1_1ByteEventTracker_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2a638217ec14e4c3a554e5f7a3705e73"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2a638217ec14e4c3a554e5f7a3705e73">HTTPSession</a> (const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;timeout, folly::AsyncTransportWrapper::UniquePtr sock, const folly::SocketAddress &amp;<a class="el" href="namespaceproxygen.html#ad837ab655543e4211b38011fb932d77a">localAddr</a>, const folly::SocketAddress &amp;<a class="el" href="namespaceproxygen.html#a7e97e63571b9ca17de27bd219d3b0e18">peerAddr</a>, <a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *controller, std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt; codec, const wangle::TransportInfo &amp;tinfo, <a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *infoCallback)</td></tr>
<tr class="separator:a2a638217ec14e4c3a554e5f7a3705e73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57528c5706f43b154e07ec638150379a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a57528c5706f43b154e07ec638150379a">HTTPSession</a> (folly::HHWheelTimer *transactionTimeouts, folly::AsyncTransportWrapper::UniquePtr sock, const folly::SocketAddress &amp;<a class="el" href="namespaceproxygen.html#ad837ab655543e4211b38011fb932d77a">localAddr</a>, const folly::SocketAddress &amp;<a class="el" href="namespaceproxygen.html#a7e97e63571b9ca17de27bd219d3b0e18">peerAddr</a>, <a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *controller, std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt; codec, const wangle::TransportInfo &amp;tinfo, <a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *infoCallback)</td></tr>
<tr class="separator:a57528c5706f43b154e07ec638150379a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187a60444f84cc7e6354844e3c5f2e01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a187a60444f84cc7e6354844e3c5f2e01">~HTTPSession</a> () override</td></tr>
<tr class="separator:a187a60444f84cc7e6354844e3c5f2e01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae180c928b2d55c4e227a1629d8b8a511"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae180c928b2d55c4e227a1629d8b8a511">setupOnHeadersComplete</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *msg)=0</td></tr>
<tr class="separator:ae180c928b2d55c4e227a1629d8b8a511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a8e7884bf77f9c5831f652ff803616"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classproxygen_1_1HTTPTransaction.html#a7d7b33611c7b5f490fb5be4747c82561">HTTPTransaction::Handler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af9a8e7884bf77f9c5831f652ff803616">getTransactionTimeoutHandler</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn)=0</td></tr>
<tr class="separator:af9a8e7884bf77f9c5831f652ff803616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9ed177276be468c39890fd444d3b38c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af9ed177276be468c39890fd444d3b38c">onHeadersSent</a> (const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;, bool)</td></tr>
<tr class="separator:af9ed177276be468c39890fd444d3b38c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5353997f3caf71049568ad2c460424c5"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">allTransactionsStarted</a> () const =0</td></tr>
<tr class="separator:a5353997f3caf71049568ad2c460424c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632376e9b73b4cdafb49de77b87e7a70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a632376e9b73b4cdafb49de77b87e7a70">setNewTransactionPauseState</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>)</td></tr>
<tr class="separator:a632376e9b73b4cdafb49de77b87e7a70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5aa7681b3dffcccf4cae4d2dbf36cfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae5aa7681b3dffcccf4cae4d2dbf36cfa">onEgressMessageFinished</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, bool withRST=false)</td></tr>
<tr class="separator:ae5aa7681b3dffcccf4cae4d2dbf36cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a609ab80e8953402ea2b13ab64f5717"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0a609ab80e8953402ea2b13ab64f5717">getNextToSend</a> (bool *cork, bool *eom)</td></tr>
<tr class="separator:a0a609ab80e8953402ea2b13ab64f5717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8db93bfcc5b41ec095428c62f23c95"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">decrementTransactionCount</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, bool ingressEOM, bool egressEOM)</td></tr>
<tr class="separator:a2e8db93bfcc5b41ec095428c62f23c95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a812803459bbdfc56b7f75cf6a5cf9916"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a812803459bbdfc56b7f75cf6a5cf9916">getCodecSendWindowSize</a> () const </td></tr>
<tr class="separator:a812803459bbdfc56b7f75cf6a5cf9916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60bf8128ff820516a76e980a1738c7c9"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a60bf8128ff820516a76e980a1738c7c9">sendPriorityImpl</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> pri)</td></tr>
<tr class="separator:a60bf8128ff820516a76e980a1738c7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21c24124cbf0b80891dadba2192c5443"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a21c24124cbf0b80891dadba2192c5443">onNativeProtocolUpgradeImpl</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> txn, std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt; codec, const std::string &amp;protocolString)</td></tr>
<tr class="separator:a21c24124cbf0b80891dadba2192c5443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53c7e76d73a80296ffab4461dd0dbb0b"><td class="memItemLeft" align="right" valign="top">virtual folly::Optional&lt; const <a class="el" href="classproxygen_1_1HTTPMessage.html#a488cdeffada45d57bf30cf2b9059bd5a">HTTPMessage::HTTPPriority</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a53c7e76d73a80296ffab4461dd0dbb0b">getHTTPPriority</a> (uint8_t) override</td></tr>
<tr class="separator:a53c7e76d73a80296ffab4461dd0dbb0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b21d699d9346a86b02f76d1bced5c38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a8b21d699d9346a86b02f76d1bced5c38">readTimeoutExpired</a> () noexcept</td></tr>
<tr class="separator:a8b21d699d9346a86b02f76d1bced5c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664004e8860ec5a5f401cda328a0762e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a664004e8860ec5a5f401cda328a0762e">writeTimeoutExpired</a> () noexcept</td></tr>
<tr class="separator:a664004e8860ec5a5f401cda328a0762e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f4e15083621ec88c260ae1494e1c51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad0f4e15083621ec88c260ae1494e1c51">flowControlTimeoutExpired</a> () noexcept</td></tr>
<tr class="separator:ad0f4e15083621ec88c260ae1494e1c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44d7eea9bf8759a4cbcf2fb1d82255bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a44d7eea9bf8759a4cbcf2fb1d82255bb">getReadBuffer</a> (void **buf, size_t *bufSize) override</td></tr>
<tr class="separator:a44d7eea9bf8759a4cbcf2fb1d82255bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48c44abccc284d6878ea73bb01feea3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad48c44abccc284d6878ea73bb01feea3">readDataAvailable</a> (size_t readSize) noexceptoverride</td></tr>
<tr class="separator:ad48c44abccc284d6878ea73bb01feea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f7082999e3f66a8a049dac93cc89120"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0f7082999e3f66a8a049dac93cc89120">isBufferMovable</a> () noexceptoverride</td></tr>
<tr class="separator:a0f7082999e3f66a8a049dac93cc89120"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e76f86ed8e366c32399e02feac3cfe6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a5e76f86ed8e366c32399e02feac3cfe6">readBufferAvailable</a> (std::unique_ptr&lt; folly::IOBuf &gt;) noexceptoverride</td></tr>
<tr class="separator:a5e76f86ed8e366c32399e02feac3cfe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0320784362dcf40c2bce6e3f0d98301"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">processReadData</a> ()</td></tr>
<tr class="separator:af0320784362dcf40c2bce6e3f0d98301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98b41eaa29cecf1b8dad11dba197c056"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a98b41eaa29cecf1b8dad11dba197c056">readEOF</a> () noexceptoverride</td></tr>
<tr class="separator:a98b41eaa29cecf1b8dad11dba197c056"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68885654760e144384fa10f8091d25c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a68885654760e144384fa10f8091d25c0">readErr</a> (const folly::AsyncSocketException &amp;) noexceptoverride</td></tr>
<tr class="separator:a68885654760e144384fa10f8091d25c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4971509542ec5d3a4812666f01752f8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab4971509542ec5d3a4812666f01752f8">getSecurityProtocol</a> () const override</td></tr>
<tr class="separator:ab4971509542ec5d3a4812666f01752f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a4087a0c6fbfbb6a419dff46c0d3517"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0a4087a0c6fbfbb6a419dff46c0d3517">onMessageBegin</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *msg) override</td></tr>
<tr class="separator:a0a4087a0c6fbfbb6a419dff46c0d3517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac22c3f0f0f6c3162a805150faeae3577"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac22c3f0f0f6c3162a805150faeae3577">onPushMessageBegin</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> assocStreamID, <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *msg) override</td></tr>
<tr class="separator:ac22c3f0f0f6c3162a805150faeae3577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a597d69aedaebffdb4c442ca9d1d6408b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a597d69aedaebffdb4c442ca9d1d6408b">onExMessageBegin</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> controlStream, bool unidirectional, <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *msg) override</td></tr>
<tr class="separator:a597d69aedaebffdb4c442ca9d1d6408b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01cf2e4876e0d44c1b7974833bef3272"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a01cf2e4876e0d44c1b7974833bef3272">onHeadersComplete</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &gt; msg) override</td></tr>
<tr class="separator:a01cf2e4876e0d44c1b7974833bef3272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef5f45a171469eadd34144f3a00802c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4ef5f45a171469eadd34144f3a00802c">onBody</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, std::unique_ptr&lt; folly::IOBuf &gt; chain, uint16_t padding) override</td></tr>
<tr class="separator:a4ef5f45a171469eadd34144f3a00802c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3137afb711666467861a8d61d9f15824"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a3137afb711666467861a8d61d9f15824">onChunkHeader</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="structstream.html">stream</a>, size_t length) override</td></tr>
<tr class="separator:a3137afb711666467861a8d61d9f15824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a201f8d42c3a6754e2743b5e5661b901e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a201f8d42c3a6754e2743b5e5661b901e">onChunkComplete</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="structstream.html">stream</a>) override</td></tr>
<tr class="separator:a201f8d42c3a6754e2743b5e5661b901e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78452f9b06f73e48e2397923fb71d0dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a78452f9b06f73e48e2397923fb71d0dd">onTrailersComplete</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPHeaders.html">HTTPHeaders</a> &gt; trailers) override</td></tr>
<tr class="separator:a78452f9b06f73e48e2397923fb71d0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a564c10e0a4a6fbf287eed792501337f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a564c10e0a4a6fbf287eed792501337f8">onMessageComplete</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, bool upgrade) override</td></tr>
<tr class="separator:a564c10e0a4a6fbf287eed792501337f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44f22d1c1900f583f4e8584fb2f0105"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">onError</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;error, bool newTxn) override</td></tr>
<tr class="separator:ab44f22d1c1900f583f4e8584fb2f0105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3183c78b441791ee835660ffb91ed9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac3183c78b441791ee835660ffb91ed9f">onAbort</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> code) override</td></tr>
<tr class="separator:ac3183c78b441791ee835660ffb91ed9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22d185dd9d6777d445ae30269345c942"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a22d185dd9d6777d445ae30269345c942">onGoaway</a> (uint64_t lastGoodStreamID, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> code, std::unique_ptr&lt; folly::IOBuf &gt; debugData=<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>) override</td></tr>
<tr class="separator:a22d185dd9d6777d445ae30269345c942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5e3ba18cca07e6e6bfff73e1d549c21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab5e3ba18cca07e6e6bfff73e1d549c21">onPingRequest</a> (uint64_t uniqueID) override</td></tr>
<tr class="separator:ab5e3ba18cca07e6e6bfff73e1d549c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ce7c717bb5a5e5410a3f7f2506cd8a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1ce7c717bb5a5e5410a3f7f2506cd8a9">onPingReply</a> (uint64_t uniqueID) override</td></tr>
<tr class="separator:a1ce7c717bb5a5e5410a3f7f2506cd8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0fb58504e91e4f38601e2fdd0cebb42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa0fb58504e91e4f38601e2fdd0cebb42">onWindowUpdate</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="structstream.html">stream</a>, uint32_t amount) override</td></tr>
<tr class="separator:aa0fb58504e91e4f38601e2fdd0cebb42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b54c75597c9ead6142aa8c26689b09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a51b54c75597c9ead6142aa8c26689b09">onSettings</a> (const <a class="el" href="namespaceproxygen.html#a178ae546fbff60576dc3e3ce2de52410">SettingsList</a> &amp;<a class="el" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a>) override</td></tr>
<tr class="separator:a51b54c75597c9ead6142aa8c26689b09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2761f5d6f21da00af36fe73385339e9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2761f5d6f21da00af36fe73385339e9a">onSettingsAck</a> () override</td></tr>
<tr class="separator:a2761f5d6f21da00af36fe73385339e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1da743cba2417a010d2d1fa7a7333f79"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1da743cba2417a010d2d1fa7a7333f79">onPriority</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="structstream.html">stream</a>, const <a class="el" href="classproxygen_1_1HTTPMessage.html#a488cdeffada45d57bf30cf2b9059bd5a">HTTPMessage::HTTPPriority</a> &amp;) override</td></tr>
<tr class="separator:a1da743cba2417a010d2d1fa7a7333f79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98209dbf84dc096fb2ace705407fd47"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae98209dbf84dc096fb2ace705407fd47">onCertificateRequest</a> (uint16_t requestId, std::unique_ptr&lt; folly::IOBuf &gt; authRequest) override</td></tr>
<tr class="separator:ae98209dbf84dc096fb2ace705407fd47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bdeeff83639f5b0afdec5b2d92ea48d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4bdeeff83639f5b0afdec5b2d92ea48d">onCertificate</a> (uint16_t certId, std::unique_ptr&lt; folly::IOBuf &gt; authenticator) override</td></tr>
<tr class="separator:a4bdeeff83639f5b0afdec5b2d92ea48d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f475ec074ab357ffeeb614cfe3f83d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac9f475ec074ab357ffeeb614cfe3f83d">numOutgoingStreams</a> () const override</td></tr>
<tr class="separator:ac9f475ec074ab357ffeeb614cfe3f83d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ded5f1b237ce4aac4dacb8d8844b6f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a32ded5f1b237ce4aac4dacb8d8844b6f">numIncomingStreams</a> () const override</td></tr>
<tr class="separator:a32ded5f1b237ce4aac4dacb8d8844b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af42a143c0ea8e8e0635cbf9f0283f953"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af42a143c0ea8e8e0635cbf9f0283f953">pauseIngress</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn) noexceptoverride</td></tr>
<tr class="separator:af42a143c0ea8e8e0635cbf9f0283f953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add14dbdf706d083bf770c2aac6566cac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#add14dbdf706d083bf770c2aac6566cac">resumeIngress</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn) noexceptoverride</td></tr>
<tr class="separator:add14dbdf706d083bf770c2aac6566cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a75b63b2d5d2e397fbf482209e6188"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a27a75b63b2d5d2e397fbf482209e6188">transactionTimeout</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn) noexceptoverride</td></tr>
<tr class="separator:a27a75b63b2d5d2e397fbf482209e6188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac70579f6c74d966cb48ce54963623d16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac70579f6c74d966cb48ce54963623d16">sendHeaders</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;headers, <a class="el" href="namespaceproxygen.html#a3229605c4d71bcf5379d0dd133870421">HTTPHeaderSize</a> *size, bool includeEOM) noexceptoverride</td></tr>
<tr class="separator:ac70579f6c74d966cb48ce54963623d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48b06bc64e49437711d8574f9facd67"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac48b06bc64e49437711d8574f9facd67">sendBody</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, std::unique_ptr&lt; folly::IOBuf &gt;, bool includeEOM, bool trackLastByteFlushed) noexceptoverride</td></tr>
<tr class="separator:ac48b06bc64e49437711d8574f9facd67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0de809896f039c83b33f96edd4b2823b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0de809896f039c83b33f96edd4b2823b">sendChunkHeader</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, size_t length) noexceptoverride</td></tr>
<tr class="separator:a0de809896f039c83b33f96edd4b2823b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae3c74e6afa642fe7db4db1cb912e44e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aae3c74e6afa642fe7db4db1cb912e44e">sendChunkTerminator</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn) noexceptoverride</td></tr>
<tr class="separator:aae3c74e6afa642fe7db4db1cb912e44e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a158fcf7cbfa48f2974db6fcd84615673"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a158fcf7cbfa48f2974db6fcd84615673">sendEOM</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, const <a class="el" href="classproxygen_1_1HTTPHeaders.html">HTTPHeaders</a> *trailers) noexceptoverride</td></tr>
<tr class="separator:a158fcf7cbfa48f2974db6fcd84615673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a759cc6ebd094ef9363a0bdfdba2e5b3d"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a759cc6ebd094ef9363a0bdfdba2e5b3d">sendAbort</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> <a class="el" href="SPDYCodec_8cpp.html#a6d7c29827e855a62945ede0ae6e82786">statusCode</a>) noexceptoverride</td></tr>
<tr class="separator:a759cc6ebd094ef9363a0bdfdba2e5b3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54e9e76f4d782afec9719e73b29a3b40"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a54e9e76f4d782afec9719e73b29a3b40">sendPriority</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, const <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> &amp;pri) noexceptoverride</td></tr>
<tr class="separator:a54e9e76f4d782afec9719e73b29a3b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cc489b64c47726cfb97f2b2d750b590"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0cc489b64c47726cfb97f2b2d750b590">detach</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn) noexceptoverride</td></tr>
<tr class="separator:a0cc489b64c47726cfb97f2b2d750b590"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad77ad308a105013cf6a7429b5a7fd224"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad77ad308a105013cf6a7429b5a7fd224">sendWindowUpdate</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, uint32_t bytes) noexceptoverride</td></tr>
<tr class="separator:ad77ad308a105013cf6a7429b5a7fd224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab181c938399f0bfff3edcb36981c1565"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab181c938399f0bfff3edcb36981c1565">notifyPendingEgress</a> () noexceptoverride</td></tr>
<tr class="separator:ab181c938399f0bfff3edcb36981c1565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a086a9f6a363899f7d83dff3e822f8bad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a086a9f6a363899f7d83dff3e822f8bad">notifyIngressBodyProcessed</a> (uint32_t bytes) noexceptoverride</td></tr>
<tr class="separator:a086a9f6a363899f7d83dff3e822f8bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abafa372cce7d6f75d99a64a9dd8d41bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#abafa372cce7d6f75d99a64a9dd8d41bb">notifyEgressBodyBuffered</a> (int64_t bytes) noexceptoverride</td></tr>
<tr class="separator:abafa372cce7d6f75d99a64a9dd8d41bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fc526a94762ffba441171c5df5e5c8a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a6fc526a94762ffba441171c5df5e5c8a">newPushedTransaction</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> assocStreamId, <a class="el" href="classproxygen_1_1HTTPTransaction.html#a4152eb2c90f579f6749811ad97d8301b">HTTPTransaction::PushHandler</a> *handler) noexceptoverride</td></tr>
<tr class="separator:a6fc526a94762ffba441171c5df5e5c8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91041fbc94aedb5e52a7d90584df32f0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a91041fbc94aedb5e52a7d90584df32f0">newExTransaction</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html#a7d7b33611c7b5f490fb5be4747c82561">HTTPTransaction::Handler</a> *handler, <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> controlStream, bool unidirectional=false) noexceptoverride</td></tr>
<tr class="separator:a91041fbc94aedb5e52a7d90584df32f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eaf7bac72499cd50c8e77e7b1b72a4d"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a6eaf7bac72499cd50c8e77e7b1b72a4d">getCodec</a> () const noexceptoverride</td></tr>
<tr class="separator:a6eaf7bac72499cd50c8e77e7b1b72a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac71867cf47b46d4da272325fcbbfe456"><td class="memItemLeft" align="right" valign="top">const folly::AsyncTransportWrapper *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac71867cf47b46d4da272325fcbbfe456">getUnderlyingTransport</a> () const noexceptoverride</td></tr>
<tr class="separator:ac71867cf47b46d4da272325fcbbfe456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a22889a5b99545ce0ca0f73bf3b622f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9a22889a5b99545ce0ca0f73bf3b622f">isDraining</a> () const override</td></tr>
<tr class="separator:a9a22889a5b99545ce0ca0f73bf3b622f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf098767599f9b93dced643dd996efb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">drain</a> () override</td></tr>
<tr class="separator:a7cf098767599f9b93dced643dd996efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7773c16e03030dca8e168a2e41564335"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a> (bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</td></tr>
<tr class="separator:a7773c16e03030dca8e168a2e41564335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adba39f5cba4a8eaa5a2c54c774fad9ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">shutdownTransportWithReset</a> (<a class="el" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a> errorCode, const std::string &amp;errorMsg=&quot;&quot;)</td></tr>
<tr class="separator:adba39f5cba4a8eaa5a2c54c774fad9ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea78aea47cceb6d7cbcf482379f3e502"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aea78aea47cceb6d7cbcf482379f3e502">runLoopCallback</a> () noexceptoverride</td></tr>
<tr class="separator:aea78aea47cceb6d7cbcf482379f3e502"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13305c84439720b53378c575827ccf4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a> ()</td></tr>
<tr class="separator:af13305c84439720b53378c575827ccf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c5714d761137dccb8d6e864b00b657f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1c5714d761137dccb8d6e864b00b657f">updateWriteCount</a> ()</td></tr>
<tr class="separator:a1c5714d761137dccb8d6e864b00b657f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cdd56f14df7e2a12dd42f7de1fc868f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">updateWriteBufSize</a> (int64_t delta)</td></tr>
<tr class="separator:a1cdd56f14df7e2a12dd42f7de1fc868f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a89c569f118b1e44ce3749c8ab2bb66"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">sessionByteOffset</a> ()</td></tr>
<tr class="separator:a0a89c569f118b1e44ce3749c8ab2bb66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15caf918295099c6396ea3266a810342"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a15caf918295099c6396ea3266a810342">immediateShutdown</a> ()</td></tr>
<tr class="separator:a15caf918295099c6396ea3266a810342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a5012bdb77ee9d24b45a075a351cdc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a> ()</td></tr>
<tr class="separator:a51a5012bdb77ee9d24b45a075a351cdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee368bf4f4005d808257939ad72234ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>)</td></tr>
<tr class="separator:aee368bf4f4005d808257939ad72234ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dfa230066871e4512642fcc63534cd6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, const folly::Optional&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> &gt; &amp;assocStreamID, const folly::Optional&lt; <a class="el" href="structproxygen_1_1HTTPCodec_1_1ExAttributes.html">HTTPCodec::ExAttributes</a> &gt; &amp;exAttributes, const <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> &amp;priority=<a class="el" href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">http2::DefaultPriority</a>)</td></tr>
<tr class="separator:a7dfa230066871e4512642fcc63534cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48514244601d32eb56208361c6d6c62e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a48514244601d32eb56208361c6d6c62e">onWriteSuccess</a> (uint64_t bytesWritten)</td></tr>
<tr class="separator:a48514244601d32eb56208361c6d6c62e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a688a4b503444c67e39e85db88fb58900"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a688a4b503444c67e39e85db88fb58900">onWriteError</a> (size_t bytesWritten, const folly::AsyncSocketException &amp;ex)</td></tr>
<tr class="separator:a688a4b503444c67e39e85db88fb58900"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af385c143cc9ad6f4930b6b045c7a69b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af385c143cc9ad6f4930b6b045c7a69b7">onWriteCompleted</a> ()</td></tr>
<tr class="separator:af385c143cc9ad6f4930b6b045c7a69b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae581da85b242f0cf6f4b657b8753894a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae581da85b242f0cf6f4b657b8753894a">pauseReads</a> ()</td></tr>
<tr class="separator:ae581da85b242f0cf6f4b657b8753894a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64dbb1a5aebced260bcd58985ed18de8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a64dbb1a5aebced260bcd58985ed18de8">onSessionParseError</a> (const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;error)</td></tr>
<tr class="separator:a64dbb1a5aebced260bcd58985ed18de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ae5da6c95ed842ddf2a0d8e83397478"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a8ae5da6c95ed842ddf2a0d8e83397478">onNewTransactionParseError</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;error)</td></tr>
<tr class="separator:a8ae5da6c95ed842ddf2a0d8e83397478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc8e06ea32500b275a03eb1b9829c39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">resumeReads</a> ()</td></tr>
<tr class="separator:a4fc8e06ea32500b275a03eb1b9829c39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc047d8e5824d2368060aec1e30fb3b6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a> () const </td></tr>
<tr class="separator:adc047d8e5824d2368060aec1e30fb3b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a313e95bd7ff25e8565b8f915bf9333ce"><td class="memTemplParams" colspan="2">template&lt;typename... Args1, typename... Args2&gt; </td></tr>
<tr class="memitem:a313e95bd7ff25e8565b8f915bf9333ce"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a> (void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</td></tr>
<tr class="separator:a313e95bd7ff25e8565b8f915bf9333ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5be562d896df4cfac6d3707dfeae5c51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a5be562d896df4cfac6d3707dfeae5c51">resumeTransactions</a> ()</td></tr>
<tr class="separator:a5be562d896df4cfac6d3707dfeae5c51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a5df5785a313ba1c7d92dcc6799648"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a76a5df5785a313ba1c7d92dcc6799648">errorOnAllTransactions</a> (<a class="el" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a> err, const std::string &amp;errorMsg)</td></tr>
<tr class="separator:a76a5df5785a313ba1c7d92dcc6799648"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c80a7af521add6b6710e4462856b700"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0c80a7af521add6b6710e4462856b700">errorOnTransactionIds</a> (const std::vector&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> &gt; &amp;ids, <a class="el" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a> err, const std::string &amp;extraErrorMsg=&quot;&quot;)</td></tr>
<tr class="separator:a0c80a7af521add6b6710e4462856b700"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36534e5e65f672c5757334d53ec2087f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a36534e5e65f672c5757334d53ec2087f">errorOnTransactionId</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> id, <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> ex)</td></tr>
<tr class="separator:a36534e5e65f672c5757334d53ec2087f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a488290b5d92a67ab804c6b0f589ad9e0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a488290b5d92a67ab804c6b0f589ad9e0">shouldShutdown</a> () const </td></tr>
<tr class="separator:a488290b5d92a67ab804c6b0f589ad9e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6047ce6e7eea6982b1e2652eaf8ad95c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a6047ce6e7eea6982b1e2652eaf8ad95c">drainImpl</a> ()</td></tr>
<tr class="separator:a6047ce6e7eea6982b1e2652eaf8ad95c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dca771911bbca787c0c7581afc3392a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7dca771911bbca787c0c7581afc3392a">pauseReadsImpl</a> ()</td></tr>
<tr class="separator:a7dca771911bbca787c0c7581afc3392a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87e06691bb3e20921980e79a25f6072a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a87e06691bb3e20921980e79a25f6072a">resumeReadsImpl</a> ()</td></tr>
<tr class="separator:a87e06691bb3e20921980e79a25f6072a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0ccab551f9639248c3a0557a04b0b47"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">readsUnpaused</a> () const </td></tr>
<tr class="separator:ac0ccab551f9639248c3a0557a04b0b47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5726d375dce946aff7f5b83c2822bc83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a5726d375dce946aff7f5b83c2822bc83">readsPaused</a> () const </td></tr>
<tr class="separator:a5726d375dce946aff7f5b83c2822bc83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7593f40c921315dbdb236c7317d793c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a> () const </td></tr>
<tr class="separator:aa7593f40c921315dbdb236c7317d793c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3022f6742364b83e3f0e2eb009996a3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af3022f6742364b83e3f0e2eb009996a3">writesUnpaused</a> () const </td></tr>
<tr class="separator:af3022f6742364b83e3f0e2eb009996a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6d20c0b92566b1a7f562b8f9501040"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aba6d20c0b92566b1a7f562b8f9501040">writesPaused</a> () const </td></tr>
<tr class="separator:aba6d20c0b92566b1a7f562b8f9501040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82766ffaff2fd71996d82c908fb5abeb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a> () const </td></tr>
<tr class="separator:a82766ffaff2fd71996d82c908fb5abeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97304741f760e4d633033902d3380910"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a97304741f760e4d633033902d3380910">rescheduleLoopCallbacks</a> ()</td></tr>
<tr class="separator:a97304741f760e4d633033902d3380910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3882f861cd96eaee8d7e853fc3639270"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a3882f861cd96eaee8d7e853fc3639270">cancelLoopCallbacks</a> ()</td></tr>
<tr class="separator:a3882f861cd96eaee8d7e853fc3639270"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:a500facae2064dce0fc02ca08d5b35c9b inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a500facae2064dce0fc02ca08d5b35c9b">handleErrorDirectly</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;error)</td></tr>
<tr class="separator:a500facae2064dce0fc02ca08d5b35c9b inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2401a9244b2ed77c3786c9eec14dd0f4 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2401a9244b2ed77c3786c9eec14dd0f4">onBodyImpl</a> (std::unique_ptr&lt; folly::IOBuf &gt; chain, size_t length, uint16_t padding, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn)</td></tr>
<tr class="separator:a2401a9244b2ed77c3786c9eec14dd0f4 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad57d9d8ca3f9020b3bd041aa1bf1c9f8 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ad57d9d8ca3f9020b3bd041aa1bf1c9f8">notifyBodyProcessed</a> (uint32_t bytes)</td></tr>
<tr class="separator:ad57d9d8ca3f9020b3bd041aa1bf1c9f8 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a156f64337575bea186fc13340dad029d inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a156f64337575bea186fc13340dad029d">setLatestActive</a> ()</td></tr>
<tr class="separator:a156f64337575bea186fc13340dad029d inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a0e79bdd0b073703b48c07966c2e35 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a88a0e79bdd0b073703b48c07966c2e35">ingressLimitExceeded</a> () const </td></tr>
<tr class="separator:a88a0e79bdd0b073703b48c07966c2e35 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237f4e26687af1cc1ed5132ecb9afbb0 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">egressLimitExceeded</a> () const </td></tr>
<tr class="separator:a237f4e26687af1cc1ed5132ecb9afbb0 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0e2203943d72d329d3fcc7a4519ddd4 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aa0e2203943d72d329d3fcc7a4519ddd4">updatePendingWriteSize</a> (int64_t delta)</td></tr>
<tr class="separator:aa0e2203943d72d329d3fcc7a4519ddd4 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac677d2665a8aa20a2b50617ec7034591 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ac677d2665a8aa20a2b50617ec7034591">onCreateTransaction</a> ()</td></tr>
<tr class="separator:ac677d2665a8aa20a2b50617ec7034591 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3fc2909c23c8451b763495fe1c4051f inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ac3fc2909c23c8451b763495fe1c4051f">incrementSeqNo</a> ()</td></tr>
<tr class="separator:ac3fc2909c23c8451b763495fe1c4051f inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99dba7212b5e3f3eb0c7f7aa5c283089 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a99dba7212b5e3f3eb0c7f7aa5c283089">isPrioritySampled</a> () const </td></tr>
<tr class="separator:a99dba7212b5e3f3eb0c7f7aa5c283089 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d80fb6cf66d3dc9d7c1b4196dfb0104 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a9d80fb6cf66d3dc9d7c1b4196dfb0104">onNewOutgoingStream</a> (uint32_t outgoingStreams)</td></tr>
<tr class="separator:a9d80fb6cf66d3dc9d7c1b4196dfb0104 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3faf722c743f296676a097511249f152 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a> (<a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667">ConnectionCloseReason</a> reason)</td></tr>
<tr class="separator:a3faf722c743f296676a097511249f152 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef99abc8fc5133456be4e073a2d7adc9 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aef99abc8fc5133456be4e073a2d7adc9">runDestroyCallbacks</a> ()</td></tr>
<tr class="separator:aef99abc8fc5133456be4e073a2d7adc9 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aa4d5ee64ecbf3041f7137dff7de265 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a5aa4d5ee64ecbf3041f7137dff7de265">onCodecChanged</a> ()</td></tr>
<tr class="separator:a5aa4d5ee64ecbf3041f7137dff7de265 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9354a41c82483b95e5b5d745d63fbb inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a7a9354a41c82483b95e5b5d745d63fbb">initCodecHeaderIndexingStrategy</a> ()</td></tr>
<tr class="separator:a7a9354a41c82483b95e5b5d745d63fbb inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7648025a9fb25c6ba01b7717aa59f3 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#acc7648025a9fb25c6ba01b7717aa59f3">attachToSessionController</a> ()</td></tr>
<tr class="separator:acc7648025a9fb25c6ba01b7717aa59f3 inherit pro_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classproxygen_1_1HTTPPriorityMapFactoryProvider"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classproxygen_1_1HTTPPriorityMapFactoryProvider')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPPriorityMapFactoryProvider.html">proxygen::HTTPPriorityMapFactoryProvider</a></td></tr>
<tr class="memitem:acef6349f49ef3f9808b85372e0857c17 inherit pro_methods_classproxygen_1_1HTTPPriorityMapFactoryProvider"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPPriorityMapFactoryProvider.html#acef6349f49ef3f9808b85372e0857c17">~HTTPPriorityMapFactoryProvider</a> ()=default</td></tr>
<tr class="separator:acef6349f49ef3f9808b85372e0857c17 inherit pro_methods_classproxygen_1_1HTTPPriorityMapFactoryProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ac1b99af891c8036812baaeb567d5e042"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSession_1_1WriteTimeout.html">WriteTimeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a></td></tr>
<tr class="separator:ac1b99af891c8036812baaeb567d5e042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6a139c1478a5d1e3b811b02dfed236d"><td class="memItemLeft" align="right" valign="top">folly::IOBufQueue&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a> {folly::IOBufQueue::cacheChainLength()}</td></tr>
<tr class="separator:ad6a139c1478a5d1e3b811b02dfed236d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5d0529cb70ae5090632b85f2684fd0"><td class="memItemLeft" align="right" valign="top">folly::IOBufQueue&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a> {folly::IOBufQueue::cacheChainLength()}</td></tr>
<tr class="separator:a7b5d0529cb70ae5090632b85f2684fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23a9806ebce88b25cdb0410e06902f9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a></td></tr>
<tr class="separator:a23a9806ebce88b25cdb0410e06902f9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c0735026efb30fefac325da7362a7b"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a></td></tr>
<tr class="separator:a67c0735026efb30fefac325da7362a7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f5ec6835388f0c485cf435bc972c81"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a> {0}</td></tr>
<tr class="separator:a47f5ec6835388f0c485cf435bc972c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f4805ceb03264def58181d9b628de92"><td class="memItemLeft" align="right" valign="top">folly::AsyncTransportWrapper::UniquePtr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a></td></tr>
<tr class="separator:a6f4805ceb03264def58181d9b628de92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19770f973e94f1a2ced58dcd064040ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a></td></tr>
<tr class="separator:a19770f973e94f1a2ced58dcd064040ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f46b55ba092df2d05b86aa7fb3c434c"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> {0}</td></tr>
<tr class="separator:a4f46b55ba092df2d05b86aa7fb3c434c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05846ac95dc0538cada7dfd6543e5e3b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a>:1</td></tr>
<tr class="separator:a05846ac95dc0538cada7dfd6543e5e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a468c2c8d059e0c0dc23bc854bfc20c09"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>:1</td></tr>
<tr class="separator:a468c2c8d059e0c0dc23bc854bfc20c09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2161afe8ad9e128e3f1640ef4e4cc234"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">writesDraining_</a>:1</td></tr>
<tr class="separator:a2161afe8ad9e128e3f1640ef4e4cc234"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec31815c425ec8ab1aa94988eb9e79a5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aec31815c425ec8ab1aa94988eb9e79a5">resetAfterDrainingWrites_</a>:1</td></tr>
<tr class="separator:aec31815c425ec8ab1aa94988eb9e79a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9b8fc565cfb8e86162b22921995e08b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">ingressError_</a>:1</td></tr>
<tr class="separator:af9b8fc565cfb8e86162b22921995e08b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:a1466339f2e2dd5bfcb4aeb3ce7c6c39b inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSessionStats.html">HTTPSessionStats</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a1466339f2e2dd5bfcb4aeb3ce7c6c39b inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc31f634b819c5a8d802ba68fa322dd6 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:adc31f634b819c5a8d802ba68fa322dd6 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad056bc3f3b5b9ed41dba80ace642f174 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">wangle::TransportInfo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a></td></tr>
<tr class="separator:ad056bc3f3b5b9ed41dba80ace642f174 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256aa0726caa81650aae4343fac7ca3d inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceproxygen.html#a3ace5f258ceebf6e188f3575b180dd4b">HTTPCodecFilterChain</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a></td></tr>
<tr class="separator:a256aa0726caa81650aae4343fac7ca3d inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d6929811e8611788785a8a690e8d673 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">folly::SocketAddress&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a3d6929811e8611788785a8a690e8d673">localAddr_</a></td></tr>
<tr class="separator:a3d6929811e8611788785a8a690e8d673 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af25d65212459d499f3ac23f39b7d36f4 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">folly::SocketAddress&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#af25d65212459d499f3ac23f39b7d36f4">peerAddr_</a></td></tr>
<tr class="separator:af25d65212459d499f3ac23f39b7d36f4 inherit pro_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ad288f49c7e19dd6f77c495534207b088"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088">SocketState</a> { <a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088a04c6aa065c3d808e1a312a5603991056">UNPAUSED</a> = 0, 
<a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088ae2204ef6c34fe2fb6089476f72c33599">PAUSED</a> = 1, 
<a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088a0950955a2c19cce39c01d459e1a82989">SHUTDOWN</a> = 2
 }</td></tr>
<tr class="separator:ad288f49c7e19dd6f77c495534207b088"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad873fa3dc448235a6d181726acb09083"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad873fa3dc448235a6d181726acb09083">WriteSegmentList</a> = folly::IntrusiveList&lt; <a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html">WriteSegment</a>,&amp;<a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html#a2d3195f8a57e7ae05710d66c99a12783">WriteSegment::listHook</a> &gt;</td></tr>
<tr class="separator:ad873fa3dc448235a6d181726acb09083"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ae793a714b3812adadb6c1610002cd7e0"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae793a714b3812adadb6c1610002cd7e0">getMaxConcurrentOutgoingStreamsRemote</a> () const override</td></tr>
<tr class="separator:ae793a714b3812adadb6c1610002cd7e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148f158cafab7dcf1d42f3281d48acb0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a> () const </td></tr>
<tr class="separator:a148f158cafab7dcf1d42f3281d48acb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac638a06769e43a6846f6e3fdcd222a2f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a> () const </td></tr>
<tr class="separator:ac638a06769e43a6846f6e3fdcd222a2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2f721e17c15de3c3b8f0e6332c71933"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab2f721e17c15de3c3b8f0e6332c71933">onEgressBuffered</a> () override</td></tr>
<tr class="separator:ab2f721e17c15de3c3b8f0e6332c71933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0bf53cea09153535c0f04b3cbaf6d21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab0bf53cea09153535c0f04b3cbaf6d21">onEgressBufferCleared</a> () override</td></tr>
<tr class="separator:ab0bf53cea09153535c0f04b3cbaf6d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6ff36da42045dd70278f3862a8ff8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1b6ff36da42045dd70278f3862a8ff8e">setupCodec</a> ()</td></tr>
<tr class="separator:a1b6ff36da42045dd70278f3862a8ff8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa124be6ff34cd03af98ac3b283ba2af9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa124be6ff34cd03af98ac3b283ba2af9">onSetSendWindow</a> (uint32_t windowSize)</td></tr>
<tr class="separator:aa124be6ff34cd03af98ac3b283ba2af9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa55102f8247091f8991987c31cad731a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa55102f8247091f8991987c31cad731a">onSetMaxInitiatedStreams</a> (uint32_t maxTxns)</td></tr>
<tr class="separator:aa55102f8247091f8991987c31cad731a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bce2a0083afab9016f69310dd035351"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a8bce2a0083afab9016f69310dd035351">getCertAuthSettingVal</a> ()</td></tr>
<tr class="separator:a8bce2a0083afab9016f69310dd035351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a183cf22d134789ec0e2c0a75ec301224"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a183cf22d134789ec0e2c0a75ec301224">verifyCertAuthSetting</a> (uint32_t value)</td></tr>
<tr class="separator:a183cf22d134789ec0e2c0a75ec301224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac39676e76e0a700cce8f22c5d9f96f0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac39676e76e0a700cce8f22c5d9f96f0d">addLastByteEvent</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, uint64_t byteNo) noexcept</td></tr>
<tr class="separator:ac39676e76e0a700cce8f22c5d9f96f0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c17d464b437d42106683ea38fcb3e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa1c17d464b437d42106683ea38fcb3e9">addAckToLastByteEvent</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, const <a class="el" href="classproxygen_1_1ByteEvent.html">ByteEvent</a> &amp;lastByteEvent)</td></tr>
<tr class="separator:aa1c17d464b437d42106683ea38fcb3e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2d1ccc7eab9fe9a157bbf0999d73a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#abf2d1ccc7eab9fe9a157bbf0999d73a4">onConnectionSendWindowOpen</a> () override</td></tr>
<tr class="separator:abf2d1ccc7eab9fe9a157bbf0999d73a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8073b08df1319efb31f35fc64268d60a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a8073b08df1319efb31f35fc64268d60a">onConnectionSendWindowClosed</a> () override</td></tr>
<tr class="separator:a8073b08df1319efb31f35fc64268d60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8fa22651a3a9a92ba6778bd377bfb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0f8fa22651a3a9a92ba6778bd377bfb3">getGracefulGoawayAck</a> () const </td></tr>
<tr class="separator:a0f8fa22651a3a9a92ba6778bd377bfb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76d95e77fe08def351d56bc501a8a014"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="el" href="structstream.html">stream</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a> code=<a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba9376c5fa7420be29ddc25c951aea1b7e">ErrorCode::_SPDY_INVALID_STREAM</a>)</td></tr>
<tr class="separator:a76d95e77fe08def351d56bc501a8a014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58e8277f3fdd50bc8496c79018b21987"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">getMessagePriority</a> (const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *msg)</td></tr>
<tr class="separator:a58e8277f3fdd50bc8496c79018b21987"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac542a7e7e5672a1eebac1c3864c562b3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac542a7e7e5672a1eebac1c3864c562b3">isConnWindowFull</a> () const </td></tr>
<tr class="separator:ac542a7e7e5672a1eebac1c3864c562b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63363dd6eb679673b1f548176994f4c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a63363dd6eb679673b1f548176994f4c9">onPingReplyLatency</a> (int64_t latency) noexceptoverride</td></tr>
<tr class="separator:a63363dd6eb679673b1f548176994f4c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a262d04adeb8feb2c1bf6ebb5159b67d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a262d04adeb8feb2c1bf6ebb5159b67d6">onLastByteEvent</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, uint64_t offset, bool eomTracked) noexceptoverride</td></tr>
<tr class="separator:a262d04adeb8feb2c1bf6ebb5159b67d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2b7bdd5d59059cee9b566553db91f1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a3d2b7bdd5d59059cee9b566553db91f1">onDeleteAckEvent</a> () noexceptoverride</td></tr>
<tr class="separator:a3d2b7bdd5d59059cee9b566553db91f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3772d377d80a1455b5e63a582cc04f3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">commonEom</a> (<a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, size_t encodedSize, bool piggybacked) noexcept</td></tr>
<tr class="separator:ab3772d377d80a1455b5e63a582cc04f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5063383ff090008d3620aa7cfc7947c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a5063383ff090008d3620aa7cfc7947c1">addWaitingForReplaySafety</a> (ReplaySafetyCallback *callback) noexceptoverride</td></tr>
<tr class="separator:a5063383ff090008d3620aa7cfc7947c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2956ee5857459577485016ea25438c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af2956ee5857459577485016ea25438c2">removeWaitingForReplaySafety</a> (ReplaySafetyCallback *callback) noexceptoverride</td></tr>
<tr class="separator:af2956ee5857459577485016ea25438c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1137af56342cbee20ecfc301d751249c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1137af56342cbee20ecfc301d751249c">needToBlockForReplaySafety</a> () const override</td></tr>
<tr class="separator:a1137af56342cbee20ecfc301d751249c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae436dca1500823b949fb266db3c2ac29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae436dca1500823b949fb266db3c2ac29">onReplaySafe</a> () noexceptoverride</td></tr>
<tr class="separator:ae436dca1500823b949fb266db3c2ac29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f79405657f8c7970a7c2aefebbfc512"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a> () const </td></tr>
<tr class="separator:a7f79405657f8c7970a7c2aefebbfc512"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a071fbeb84224d7e88ddc7a4d4c96f429"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a071fbeb84224d7e88ddc7a4d4c96f429">maybeResumePausedPipelinedTransaction</a> (size_t oldStreamCount, uint32_t txnSeqn)</td></tr>
<tr class="separator:a071fbeb84224d7e88ddc7a4d4c96f429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3591cfa6ee461e5a20ca0ffe4943157"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa3591cfa6ee461e5a20ca0ffe4943157">incrementOutgoingStreams</a> ()</td></tr>
<tr class="separator:aa3591cfa6ee461e5a20ca0ffe4943157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classproxygen_1_1FlowControlFilter_1_1Callback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classproxygen_1_1FlowControlFilter_1_1Callback')"><img src="closed.png" alt="-"/>&#160;Private Member Functions inherited from <a class="el" href="classproxygen_1_1FlowControlFilter_1_1Callback.html">proxygen::FlowControlFilter::Callback</a></td></tr>
<tr class="memitem:a74e492388b4f10f928cdfc5e8cfdd9fa inherit pub_methods_classproxygen_1_1FlowControlFilter_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1FlowControlFilter_1_1Callback.html#a74e492388b4f10f928cdfc5e8cfdd9fa">~Callback</a> ()</td></tr>
<tr class="separator:a74e492388b4f10f928cdfc5e8cfdd9fa inherit pub_methods_classproxygen_1_1FlowControlFilter_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classproxygen_1_1HTTPCodec_1_1Callback')"><img src="closed.png" alt="-"/>&#160;Private Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html">proxygen::HTTPCodec::Callback</a></td></tr>
<tr class="memitem:a43441f24ed1f9680a2909d1617822b61 inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a43441f24ed1f9680a2909d1617822b61">onFrameHeader</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">StreamID</a>, uint8_t, uint64_t, uint8_t, uint16_t=0)</td></tr>
<tr class="separator:a43441f24ed1f9680a2909d1617822b61 inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862f51146984af8fbb64d32d1d27f094 inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a862f51146984af8fbb64d32d1d27f094">onNativeProtocolUpgrade</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">StreamID</a>, <a class="el" href="namespaceproxygen.html#a470a61083ee151f964f0382f345a2b42">CodecProtocol</a>, const std::string &amp;, <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;)</td></tr>
<tr class="separator:a862f51146984af8fbb64d32d1d27f094 inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdc27546d6ace641570c28299d83898b inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#acdc27546d6ace641570c28299d83898b">onGenerateFrameHeader</a> (<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">StreamID</a>, uint8_t, uint64_t, uint16_t=0)</td></tr>
<tr class="separator:acdc27546d6ace641570c28299d83898b inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05e9e9907d24e577604f7941da8123bd inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a05e9e9907d24e577604f7941da8123bd">~Callback</a> ()</td></tr>
<tr class="separator:a05e9e9907d24e577604f7941da8123bd inherit pub_methods_classproxygen_1_1HTTPCodec_1_1Callback"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae0f18679ebd4860a833b6195b5a743e6"><td class="memItemLeft" align="right" valign="top">std::list&lt; ReplaySafetyCallback * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">waitingForReplaySafety_</a></td></tr>
<tr class="separator:ae0f18679ebd4860a833b6195b5a743e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a243fae036a60d472f8e4a5264e6a05"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSession.html#ad873fa3dc448235a6d181726acb09083">WriteSegmentList</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a></td></tr>
<tr class="separator:a7a243fae036a60d472f8e4a5264e6a05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c2b389afc4e09cf0bfdeac210ff195c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1FlowControlFilter.html">FlowControlFilter</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a9c2b389afc4e09cf0bfdeac210ff195c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5433004842e58bc21e71d0219bd2153"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a> {100000}</td></tr>
<tr class="separator:ad5433004842e58bc21e71d0219bd2153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b45a7c1cdf90d9d8e7425055d7ab24c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">maxConcurrentIncomingStreams_</a> {100}</td></tr>
<tr class="separator:a1b45a7c1cdf90d9d8e7425055d7ab24c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb0d2db14d16430ef88861c902b8d85"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a> {0}</td></tr>
<tr class="separator:a6eb0d2db14d16430ef88861c902b8d85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64491ffbd72ca47924907cf4c51aa750"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">incomingStreams_</a> {0}</td></tr>
<tr class="separator:a64491ffbd72ca47924907cf4c51aa750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08ca602333f5e1f4a17bb00918bce3f7"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a> {0}</td></tr>
<tr class="separator:a08ca602333f5e1f4a17bb00918bce3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07c84a0d9fdce8ead342f0058e8233be"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">bytesScheduled_</a> {0}</td></tr>
<tr class="separator:a07c84a0d9fdce8ead342f0058e8233be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca40d2fb247e55369cef0e1a94c4e91a"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a> {0}</td></tr>
<tr class="separator:aca40d2fb247e55369cef0e1a94c4e91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28cf2cb8599e3a919902015ab672c77a"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a28cf2cb8599e3a919902015ab672c77a">bodyBytesPerWriteBuf_</a> {0}</td></tr>
<tr class="separator:a28cf2cb8599e3a919902015ab672c77a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f9532f2d59face8b9b10294f617f2a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">HTTP2PriorityQueue::NextEgressResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a></td></tr>
<tr class="separator:a2f9532f2d59face8b9b10294f617f2a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cbbe5f3b63dec5fc66d34b96fde70db"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a> {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td></tr>
<tr class="separator:a3cbbe5f3b63dec5fc66d34b96fde70db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af101f4605f3474ccc175e3f42c5f5c81"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">egressBytesLimit_</a> {0}</td></tr>
<tr class="separator:af101f4605f3474ccc175e3f42c5f5c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413ea44bdc24970646f7de55683f2cd7"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a> {0}</td></tr>
<tr class="separator:a413ea44bdc24970646f7de55683f2cd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc226c0df6041bba580806abb129fb04"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">receiveStreamWindowSize_</a> {0}</td></tr>
<tr class="separator:abc226c0df6041bba580806abb129fb04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa73dd8103a1fb5e6872fc5be1c68074b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">receiveSessionWindowSize_</a> {0}</td></tr>
<tr class="separator:aa73dd8103a1fb5e6872fc5be1c68074b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b034c072c3eebdfea9a3718a5edb8f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPSession_1_1ShutdownTransportCallback.html">ShutdownTransportCallback</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a></td></tr>
<tr class="separator:ae8b034c072c3eebdfea9a3718a5edb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSession_1_1FlowControlTimeout.html">FlowControlTimeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a></td></tr>
<tr class="separator:a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d1984c14bd93f65bcf31ec1c2dc9f70"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSession_1_1DrainTimeout.html">DrainTimeout</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2d1984c14bd93f65bcf31ec1c2dc9f70">drainTimeout_</a></td></tr>
<tr class="separator:a2d1984c14bd93f65bcf31ec1c2dc9f70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a378187e6c569630532de4ba485bebcee"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088">SocketState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a>:2</td></tr>
<tr class="separator:a378187e6c569630532de4ba485bebcee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0350e37d74db0188183efccedee6eba7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088">SocketState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a>:2</td></tr>
<tr class="separator:a0350e37d74db0188183efccedee6eba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83695509c095c66650708aaecd21400"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#ac83695509c095c66650708aaecd21400">ingressUpgraded_</a>:1</td></tr>
<tr class="separator:ac83695509c095c66650708aaecd21400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94168a3dc69f32035b1f0bcf97897793"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">resetSocketOnShutdown_</a>:1</td></tr>
<tr class="separator:a94168a3dc69f32035b1f0bcf97897793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d6ad6ab9f62dbe8bf1afac20d86b1b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">inLoopCallback_</a>:1</td></tr>
<tr class="separator:a0d6ad6ab9f62dbe8bf1afac20d86b1b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d74976679fc043aa6a344795f303244"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">inResume_</a>:1</td></tr>
<tr class="separator:a3d74976679fc043aa6a344795f303244"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b66b11da8b330ef5b8697c649b60489"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">pendingPause_</a>:1</td></tr>
<tr class="separator:a4b66b11da8b330ef5b8697c649b60489"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f1fa1f46d328890e336be404fa4ce47"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a></td></tr>
<tr class="separator:a2f1fa1f46d328890e336be404fa4ce47"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pub_static_methods_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Static Public Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:a610702188cab9a00e8ae68a084139c13 inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a610702188cab9a00e8ae68a084139c13">setDefaultReadBufferLimit</a> (uint32_t limit)</td></tr>
<tr class="separator:a610702188cab9a00e8ae68a084139c13 inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7a041ed0fd2686949d1890bc6578880 inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ac7a041ed0fd2686949d1890bc6578880">setMaxReadBufferSize</a> (uint32_t bytes)</td></tr>
<tr class="separator:ac7a041ed0fd2686949d1890bc6578880 inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa97d37a5a6b11241de4cbcb5ae692efc inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#aa97d37a5a6b11241de4cbcb5ae692efc">setFlowControlledBodySizeLimit</a> (uint32_t limit)</td></tr>
<tr class="separator:aa97d37a5a6b11241de4cbcb5ae692efc inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad25843a7c1070d618c5f1dd2b3d5c709 inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#ad25843a7c1070d618c5f1dd2b3d5c709">setDefaultWriteBufferLimit</a> (uint32_t max)</td></tr>
<tr class="separator:ad25843a7c1070d618c5f1dd2b3d5c709 inherit pub_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_methods_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_static_methods_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Static Protected Member Functions inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:a5372b3c77328279ecdf61bae530b5643 inherit pro_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a5372b3c77328279ecdf61bae530b5643">handleLastByteEvents</a> (<a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a> *byteEventTracker, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *txn, size_t encodedSize, size_t byteOffset, bool piggybacked)</td></tr>
<tr class="separator:a5372b3c77328279ecdf61bae530b5643 inherit pro_static_methods_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td colspan="2" onclick="javascript:toggleInherit('pro_static_attribs_classproxygen_1_1HTTPSessionBase')"><img src="closed.png" alt="-"/>&#160;Static Protected Attributes inherited from <a class="el" href="classproxygen_1_1HTTPSessionBase.html">proxygen::HTTPSessionBase</a></td></tr>
<tr class="memitem:afbfcdb662934838746d7ad7ffa66ae85 inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#afbfcdb662934838746d7ad7ffa66ae85">kDefaultReadBufLimit</a> = 65536</td></tr>
<tr class="separator:afbfcdb662934838746d7ad7ffa66ae85 inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5824ec59d9bda0b85950dbc0cb168a0e inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a5824ec59d9bda0b85950dbc0cb168a0e">maxReadBufferSize_</a> = 4000</td></tr>
<tr class="separator:a5824ec59d9bda0b85950dbc0cb168a0e inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0ff0b25d137e9d386ab856a10e6f33a inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#af0ff0b25d137e9d386ab856a10e6f33a">kDefaultWriteBufLimit</a> = 65536</td></tr>
<tr class="separator:af0ff0b25d137e9d386ab856a10e6f33a inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26155f3fbc91ee2e2cc5adf8ac61f02b inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a26155f3fbc91ee2e2cc5adf8ac61f02b">egressBodySizeLimit_</a> = 4096</td></tr>
<tr class="separator:a26155f3fbc91ee2e2cc5adf8ac61f02b inherit pro_static_attribs_classproxygen_1_1HTTPSessionBase"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00043">43</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="ad099bb84051caa91e5ed30e309a8e524"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classproxygen_1_1HTTPSession.html#ad099bb84051caa91e5ed30e309a8e524">proxygen::HTTPSession::UniquePtr</a> =  std::unique_ptr&lt;<a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a>, Destructor&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00055">55</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad873fa3dc448235a6d181726acb09083"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="classproxygen_1_1HTTPSession.html#ad873fa3dc448235a6d181726acb09083">proxygen::HTTPSession::WriteSegmentList</a> =  folly::IntrusiveList&lt;<a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html">WriteSegment</a>, &amp;<a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html#a2d3195f8a57e7ae05710d66c99a12783">WriteSegment::listHook</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00909">909</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="ad288f49c7e19dd6f77c495534207b088"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088">proxygen::HTTPSession::SocketState</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ad288f49c7e19dd6f77c495534207b088a04c6aa065c3d808e1a312a5603991056"></a>UNPAUSED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ad288f49c7e19dd6f77c495534207b088ae2204ef6c34fe2fb6089476f72c33599"></a>PAUSED&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ad288f49c7e19dd6f77c495534207b088a0950955a2c19cce39c01d459e1a82989"></a>SHUTDOWN&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01037">1037</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>
<div class="fragment"><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;                   {</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088a04c6aa065c3d808e1a312a5603991056">UNPAUSED</a> = 0,</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088ae2204ef6c34fe2fb6089476f72c33599">PAUSED</a> = 1,</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088a0950955a2c19cce39c01d459e1a82989">SHUTDOWN</a> = 2,</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;  };</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ad288f49c7e19dd6f77c495534207b088a0950955a2c19cce39c01d459e1a82989"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088a0950955a2c19cce39c01d459e1a82989">proxygen::HTTPSession::SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01040">HTTPSession.h:1040</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad288f49c7e19dd6f77c495534207b088ae2204ef6c34fe2fb6089476f72c33599"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088ae2204ef6c34fe2fb6089476f72c33599">proxygen::HTTPSession::PAUSED</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01039">HTTPSession.h:1039</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad288f49c7e19dd6f77c495534207b088a04c6aa065c3d808e1a312a5603991056"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088a04c6aa065c3d808e1a312a5603991056">proxygen::HTTPSession::UNPAUSED</a></div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01038">HTTPSession.h:1038</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2a638217ec14e4c3a554e5f7a3705e73"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">proxygen::HTTPSession::HTTPSession </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> &amp;&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">folly::AsyncTransportWrapper::UniquePtr&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::SocketAddress &amp;&#160;</td>
          <td class="paramname"><em>localAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::SocketAddress &amp;&#160;</td>
          <td class="paramname"><em>peerAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt;&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wangle::TransportInfo &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *&#160;</td>
          <td class="paramname"><em>infoCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a> is an abstract base class and cannot be instantiated directly. If you want to handle requests and send responses (act as a server), construct a <a class="el" href="classproxygen_1_1HTTPDownstreamSession.html">HTTPDownstreamSession</a>. If you want to make requests and handle responses (act as a client), construct a <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html">HTTPUpstreamSession</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transactionTimeouts</td><td>Timeout for each transaction in the session. </td></tr>
    <tr><td class="paramname">sock</td><td>An open socket on which any applicable TLS handshaking has been completed already. </td></tr>
    <tr><td class="paramname">localAddr</td><td>Address and port of the local end of the socket. </td></tr>
    <tr><td class="paramname">peerAddr</td><td>Address and port of the remote end of the socket. </td></tr>
    <tr><td class="paramname">controller</td><td>Controller which can create the handler for a new transaction. </td></tr>
    <tr><td class="paramname">codec</td><td>A codec with which to parse/generate messages in whatever HTTP-like wire format this session needs. </td></tr>
    <tr><td class="paramname">tinfo</td><td>Struct containing the transport's TCP/SSL level info. </td></tr>
    <tr><td class="paramname">InfoCallback</td><td>Optional callback to be informed of session lifecycle events. </td></tr>
  </table>
  </dd>
</dl>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a57528c5706f43b154e07ec638150379a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">proxygen::HTTPSession::HTTPSession </td>
          <td>(</td>
          <td class="paramtype">folly::HHWheelTimer *&#160;</td>
          <td class="paramname"><em>transactionTimeouts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">folly::AsyncTransportWrapper::UniquePtr&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::SocketAddress &amp;&#160;</td>
          <td class="paramname"><em>localAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::SocketAddress &amp;&#160;</td>
          <td class="paramname"><em>peerAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPSessionController.html">HTTPSessionController</a> *&#160;</td>
          <td class="paramname"><em>controller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt;&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const wangle::TransportInfo &amp;&#160;</td>
          <td class="paramname"><em>tinfo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html">InfoCallback</a> *&#160;</td>
          <td class="paramname"><em>infoCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a187a60444f84cc7e6354844e3c5f2e01"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">proxygen::HTTPSession::~HTTPSession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00278">278</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00118">proxygen::HTTP2PriorityQueue::dropPriorityNodes()</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00137">proxygen::HTTP2PriorityQueue::empty()</a>, <a class="el" href="HTTPSession_8h_source.html#l01022">flowControlTimeout_</a>, <a class="el" href="HTTPSessionBase_8cpp_source.html#l00050">proxygen::HTTPSessionBase::runDestroyCallbacks()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00683">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                          {</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; closing&quot;</span>;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty());</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#aaa4cae92ec2e25ffda692e39e2215fc3">dropPriorityNodes</a>();</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>());</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  DCHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getReadCallback());</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.isScheduled()) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.cancelTimeout();</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.isScheduled()) {</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.cancelTimeout();</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  }</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#aef99abc8fc5133456be4e073a2d7adc9">runDestroyCallbacks</a>();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad0b3818288824506c5a3abb23101f439"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">proxygen::HTTP2PriorityQueue::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00137">HTTP2PriorityQueue.h:137</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_aaa4cae92ec2e25ffda692e39e2215fc3"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#aaa4cae92ec2e25ffda692e39e2215fc3">proxygen::HTTP2PriorityQueue::dropPriorityNodes</a></div><div class="ttdeci">void dropPriorityNodes()</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00118">HTTP2PriorityQueue.h:118</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac1b99af891c8036812baaeb567d5e042"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">proxygen::HTTPSession::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00683">HTTPSession.h:683</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_aef99abc8fc5133456be4e073a2d7adc9"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#aef99abc8fc5133456be4e073a2d7adc9">proxygen::HTTPSessionBase::runDestroyCallbacks</a></div><div class="ttdeci">void runDestroyCallbacks()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8cpp_source.html#l00050">HTTPSessionBase.cpp:50</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">proxygen::HTTPSession::flowControlTimeout_</a></div><div class="ttdeci">FlowControlTimeout flowControlTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01022">HTTPSession.h:1022</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa1c17d464b437d42106683ea38fcb3e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::addAckToLastByteEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1ByteEvent.html">ByteEvent</a> &amp;&#160;</td>
          <td class="paramname"><em>lastByteEvent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>.</p>

</div>
</div>
<a class="anchor" id="ac39676e76e0a700cce8f22c5d9f96f0d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::addLastByteEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>byteNo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>.</p>

</div>
</div>
<a class="anchor" id="a5063383ff090008d3620aa7cfc7947c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::addWaitingForReplaySafety </td>
          <td>(</td>
          <td class="paramtype">ReplaySafetyCallback *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Add a ReplaySafetyCallback requesting notification when the transport has replay protection.</p>
<p>Most transport-layer security protocols (like TLS) provide protection against an eavesdropper capturing data, and later replaying it to the server. However, 0-RTT security protocols allow initial data to be sent without replay protection before the security handshake completes. This function can be used when a HTTP session is in that initial non-replay safe stage, but a request requires a replay safe transport. Will trigger callback synchronously if the transport is already replay safe. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ad59fc55072f8c6dfc312abf9f39328ce">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00802">802</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00848">waitingForReplaySafety_</a>.</p>
<div class="fragment"><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                                                        {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;isReplaySafe()) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      callback-&gt;onReplaySafe();</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">waitingForReplaySafety_</a>.push_back(callback);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae0f18679ebd4860a833b6195b5a743e6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">proxygen::HTTPSession::waitingForReplaySafety_</a></div><div class="ttdeci">std::list&lt; ReplaySafetyCallback * &gt; waitingForReplaySafety_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00848">HTTPSession.h:848</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5353997f3caf71049568ad2c460424c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool proxygen::HTTPSession::allTransactionsStarted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implemented in <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html#a9dcfcdc8c22e0916ee317fbcd55ec49c">proxygen::HTTPUpstreamSession</a>, and <a class="el" href="classproxygen_1_1HTTPDownstreamSession.html#ac4df02bf0fd27a6526aee299cee857e5">proxygen::HTTPDownstreamSession</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02509">shouldShutdown()</a>.</p>

</div>
</div>
<a class="anchor" id="a3882f861cd96eaee8d7e853fc3639270"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::cancelLoopCallbacks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00663">663</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01000">shutdownTransportCb_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00198">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>.</p>
<div class="fragment"><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                             {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">if</span> (isLoopCallbackScheduled()) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      cancelLoopCallback();</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>-&gt;cancelLoopCallback();</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ae8b034c072c3eebdfea9a3718a5edb8f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">proxygen::HTTPSession::shutdownTransportCb_</a></div><div class="ttdeci">std::unique_ptr&lt; ShutdownTransportCallback &gt; shutdownTransportCb_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01000">HTTPSession.h:1000</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51a5012bdb77ee9d24b45a075a351cdc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::checkForShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check whether the socket is shut down in both directions; if it is, initiate the destruction of this <a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a>. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02447">2447</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l01050">resetSocketOnShutdown_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00479">immediateShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;                              {</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;  VLOG(10) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; checking for shutdown, readShutdown=&quot;</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;           &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>() &lt;&lt; <span class="stringliteral">&quot;, writesShutdown=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>()</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;, transaction set empty=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty();</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;  <span class="comment">// Two conditions are required to destroy the HTTPSession:</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;  <span class="comment">//   * All writes have been finished.</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;  <span class="comment">//   * There are no transactions remaining on the session.</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() &amp;&amp;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      !isLoopCallbackScheduled()) {</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;destroying &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;setReadCB(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;    <span class="keyword">auto</span> asyncSocket = <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getUnderlyingTransport&lt;folly::AsyncSocket&gt;();</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    <span class="keywordflow">if</span> (asyncSocket) {</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;      asyncSocket-&gt;setBufferCallback(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;    }</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> = <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">resetSocketOnShutdown_</a>) {</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;closeWithReset();</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;closeNow();</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    }</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    destroy();</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;  }</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a94168a3dc69f32035b1f0bcf97897793"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">proxygen::HTTPSession::resetSocketOnShutdown_</a></div><div class="ttdeci">bool resetSocketOnShutdown_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01050">HTTPSession.h:1050</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a17a9bd92ab6c58976923ca38235d14e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::closeWhenIdle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00464">464</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00675">proxygen::HTTPCodec::getLastIncomingStreamID()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00448">isBusy()</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::NO_ERROR</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="CurlClient_8cpp_source.html#l00121">CurlService::CurlClient::connectSuccess()</a>, <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>, and <a class="el" href="HTTPSession_8h_source.html#l01029">proxygen::HTTPSession::DrainTimeout::timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                           {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;  <span class="comment">// If drain() already called, this is a noop</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">drain</a>();</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  <span class="comment">// Generate the second GOAWAY now. No-op if second GOAWAY already sent.</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">generateGoaway</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                             <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">getLastIncomingStreamID</a>(),</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                             <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">ErrorCode::NO_ERROR</a>)) {</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;  }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#ab67702bcd40390a2b42e8404bbbdc8c0">isBusy</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a>()) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="comment">// if we&#39;re already idle, close now</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a60c801ba3d005b715d85661d0ab5e50f">dropConnection</a>();</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab67702bcd40390a2b42e8404bbbdc8c0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab67702bcd40390a2b42e8404bbbdc8c0">proxygen::HTTPSession::isBusy</a></div><div class="ttdeci">bool isBusy() const override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00448">HTTPSession.cpp:448</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a60c801ba3d005b715d85661d0ab5e50f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a60c801ba3d005b715d85661d0ab5e50f">proxygen::HTTPSession::dropConnection</a></div><div class="ttdeci">void dropConnection() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00493">HTTPSession.cpp:493</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::ErrorCode::NO_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7cf098767599f9b93dced643dd996efb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">proxygen::HTTPSession::drain</a></div><div class="ttdeci">void drain() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02474">HTTPSession.cpp:2474</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a206f96e3fa41268060203738be887942"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">proxygen::HTTPCodec::getLastIncomingStreamID</a></div><div class="ttdeci">virtual StreamID getLastIncomingStreamID() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00675">HTTPCodec.h:675</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a22dec1b6d4dde73ea7380a28b937e545"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway</a></div><div class="ttdeci">virtual size_t generateGoaway(folly::IOBufQueue &amp;writeBuf, StreamID lastStream, ErrorCode code, std::unique_ptr&lt; folly::IOBuf &gt; debugData=nullptr)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adc047d8e5824d2368060aec1e30fb3b6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">proxygen::HTTPSession::hasMoreWrites</a></div><div class="ttdeci">bool hasMoreWrites() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02812">HTTPSession.cpp:2812</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3772d377d80a1455b5e63a582cc04f3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::commonEom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>encodedSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>piggybacked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Common EOM process shared by sendHeaders, sendBody and sendEOM</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">txn</td><td>the transaction that's sending request </td></tr>
    <tr><td class="paramname">encodedSize</td><td>size of data frame generated by codec </td></tr>
    <tr><td class="paramname">piggybacked</td><td>whether this eom is a separate sendEOM or piggybacked in sendHeaders and sendBody </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01664">1664</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSessionBase_8cpp_source.html#l00160">proxygen::HTTPSessionBase::handleLastByteEvents()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00767">isConnWindowFull()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01769">sendEOM()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;                               {</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a5372b3c77328279ecdf61bae530b5643">HTTPSessionBase::handleLastByteEvents</a>(</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>.get(), txn, encodedSize, <a class="code" href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">sessionByteOffset</a>(),</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;    piggybacked);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ae5aa7681b3dffcccf4cae4d2dbf36cfa">onEgressMessageFinished</a>(txn);</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ae5aa7681b3dffcccf4cae4d2dbf36cfa"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae5aa7681b3dffcccf4cae4d2dbf36cfa">proxygen::HTTPSession::onEgressMessageFinished</a></div><div class="ttdeci">void onEgressMessageFinished(HTTPTransaction *txn, bool withRST=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01722">HTTPSession.cpp:1722</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a5372b3c77328279ecdf61bae530b5643"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a5372b3c77328279ecdf61bae530b5643">proxygen::HTTPSessionBase::handleLastByteEvents</a></div><div class="ttdeci">static void handleLastByteEvents(ByteEventTracker *byteEventTracker, HTTPTransaction *txn, size_t encodedSize, size_t byteOffset, bool piggybacked)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8cpp_source.html#l00160">HTTPSessionBase.cpp:160</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0a89c569f118b1e44ce3749c8ab2bb66"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">proxygen::HTTPSession::sessionByteOffset</a></div><div class="ttdeci">uint64_t sessionByteOffset()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00513">HTTPSession.h:513</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f17d905706699ce11d91ff621057575"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::connCloseByRemote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>If the connection is closed by remote end </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a271ccbb8e9438dc47040d4d78995b72c">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00215">215</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l01829">getSecondAuthManager()</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#af9a8e7884bf77f9c5831f652ff803616">getTransactionTimeoutHandler()</a>, <a class="el" href="HTTPSession_8h_source.html#l00061">getTransport()</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#a2a638217ec14e4c3a554e5f7a3705e73">HTTPSession()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, <a class="el" href="session_2test_2TestUtils_8cpp_source.html#l00019">proxygen::localAddr</a>, <a class="el" href="session_2test_2TestUtils_8cpp_source.html#l00020">proxygen::peerAddr</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01824">setSecondAuthManager()</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#ae180c928b2d55c4e227a1629d8b8a511">setupOnHeadersComplete()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">~HTTPSession()</a>.</p>
<div class="fragment"><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                    {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">auto</span> sock = <a class="code" href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">getTransport</a>()-&gt;getUnderlyingTransport&lt;folly::AsyncSocket&gt;();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (sock) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> sock-&gt;isClosedByPeer();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9a3bd3fa8d867fec154e90a8d830af35"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">proxygen::HTTPSession::getTransport</a></div><div class="ttdeci">folly::AsyncTransportWrapper * getTransport() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00061">HTTPSession.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7dfa230066871e4512642fcc63534cd6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> * proxygen::HTTPSession::createTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>streamID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::Optional&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>assocStreamID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::Optional&lt; <a class="el" href="structproxygen_1_1HTTPCodec_1_1ExAttributes.html">HTTPCodec::ExAttributes</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>exAttributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> &amp;&#160;</td>
          <td class="paramname"><em>priority</em> = <code><a class="el" href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">http2::DefaultPriority</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Create a new transaction. </p><dl class="section return"><dt>Returns</dt><dd>pointer to the transaction on success, or else nullptr if it already exists </dd></dl>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02567">2567</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00712">getCodecSendWindowSize()</a>, <a class="el" href="WheelTimerInstance_8cpp_source.html#l00051">proxygen::WheelTimerInstance::getDefaultTimeout()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00469">proxygen::HTTPTransaction::getID()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00304">proxygen::HTTPSessionBase::getNumTxnServed()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00545">proxygen::HTTPTransaction::getSessionStats()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">proxygen::HTTPCodec::getTransportDirection()</a>, <a class="el" href="WheelTimerInstance_8h_source.html#l00061">proxygen::WheelTimerInstance::getWheelTimer()</a>, <a class="el" href="HTTPSession_8h_source.html#l00940">incomingStreams_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02637">incrementOutgoingStreams()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00495">proxygen::HTTPSessionBase::incrementSeqNo()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l00976">initialReceiveWindow_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00499">proxygen::HTTPSessionBase::isPrioritySampled()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01011">proxygen::HTTPTransaction::isPushed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSession_8h_source.html#l00697">liveTransactions_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00063">proxygen::HTTPSessionBase::InfoCallback::onActivateConnection()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00488">proxygen::HTTPSessionBase::onCreateTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00977">receiveStreamWindowSize_</a>, <a class="el" href="classproxygen_1_1HTTPSessionStats.html#a17e73331812564e0474afde1f3afcc53">proxygen::HTTPSessionStats::recordSessionReused()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00543">proxygen::HTTPSessionBase::sessionStats_</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01507">proxygen::HTTPTransaction::setPrioritySampled()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01326">proxygen::HTTPTransaction::setReceiveWindow()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>, <a class="el" href="HTTPCodec_8h_source.html#l00367">proxygen::HTTPCodec::supportsStreamFlowControl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00701">timeout_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00091">proxygen::HTTPUpstreamSession::newTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00860">onExMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;                                         {</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;good() || <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.count(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>)) {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    <span class="comment">// Refuse to add a transaction on a closing session or if a</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;    <span class="comment">// transaction of that ID already exists.</span></div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;  }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty()) {</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#afdfb50c38c455b8e13de2105245dc46c">onActivateConnection</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;    }</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="keywordflow">if</span> (getConnectionManager()) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      getConnectionManager()-&gt;onActivated(*<span class="keyword">this</span>);</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;    }</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ac677d2665a8aa20a2b50617ec7034591">HTTPSessionBase::onCreateTransaction</a>();</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  }</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;  <span class="keyword">auto</span> matchPair = <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.emplace(</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    std::piecewise_construct,</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    std::forward_as_tuple(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>),</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    std::forward_as_tuple(</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">getTransportDirection</a>(), <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1fb1ea17a47de936a9fc48d69cf212c7">getNumTxnServed</a>(), *<span class="keyword">this</span>,</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>, <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#aa30f4dad548ef0cd581063068fa60966">getWheelTimer</a>(), <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#ae08df9f0a4e494abb60bc0665e43e605">getDefaultTimeout</a>(),</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a>,</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a1b6c4fc3583b01651c19c16a6eb2c12d">supportsStreamFlowControl</a>(),</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a>,</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a812803459bbdfc56b7f75cf6a5cf9916">getCodecSendWindowSize</a>(),</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      priority,</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      assocStreamID,</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      exAttributes</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    ));</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  CHECK(matchPair.second) &lt;&lt; <span class="stringliteral">&quot;Emplacement failed, despite earlier &quot;</span></div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;    <span class="stringliteral">&quot;existence check.&quot;</span>;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  HTTPTransaction* txn = &amp;matchPair.first-&gt;second;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a99dba7212b5e3f3eb0c7f7aa5c283089">isPrioritySampled</a>()) {</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;    txn-&gt;setPrioritySampled(<span class="keyword">true</span> <span class="comment">/* sampled */</span>);</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;  }</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1fb1ea17a47de936a9fc48d69cf212c7">getNumTxnServed</a>() &gt; 0) {</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;    <span class="keyword">auto</span> stats = txn-&gt;getSessionStats();</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="keywordflow">if</span> (stats != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;      stats-&gt;recordSessionReused();</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;    }</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  }</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  VLOG(5) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; adding streamID=&quot;</span> &lt;&lt; txn-&gt;getID()</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, liveTransactions_ was &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  ++<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ac3fc2909c23c8451b763495fe1c4051f">incrementSeqNo</a>();</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  txn-&gt;setReceiveWindow(<a class="code" href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">receiveStreamWindowSize_</a>);</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>() &amp;&amp; !txn-&gt;isPushed()) {</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#aa3591cfa6ee461e5a20ca0ffe4943157">incrementOutgoingStreams</a>();</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;  <span class="comment">// do not count towards MAX_CONCURRENT_STREAMS for PUSH_PROMISE</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() &amp;&amp; txn-&gt;isPushed())) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">incomingStreams_</a>++;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  }</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;  <span class="keywordflow">return</span> txn;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_afdfb50c38c455b8e13de2105245dc46c"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#afdfb50c38c455b8e13de2105245dc46c">proxygen::HTTPSessionBase::InfoCallback::onActivateConnection</a></div><div class="ttdeci">virtual void onActivateConnection(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00063">HTTPSessionBase.h:63</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a812803459bbdfc56b7f75cf6a5cf9916"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a812803459bbdfc56b7f75cf6a5cf9916">proxygen::HTTPSession::getCodecSendWindowSize</a></div><div class="ttdeci">size_t getCodecSendWindowSize() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00712">HTTPSession.cpp:712</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ac677d2665a8aa20a2b50617ec7034591"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ac677d2665a8aa20a2b50617ec7034591">proxygen::HTTPSessionBase::onCreateTransaction</a></div><div class="ttdeci">void onCreateTransaction()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00488">HTTPSessionBase.h:488</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_abc226c0df6041bba580806abb129fb04"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">proxygen::HTTPSession::receiveStreamWindowSize_</a></div><div class="ttdeci">size_t receiveStreamWindowSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00977">HTTPSession.h:977</a></div></div>
<div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_ae08df9f0a4e494abb60bc0665e43e605"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#ae08df9f0a4e494abb60bc0665e43e605">proxygen::WheelTimerInstance::getDefaultTimeout</a></div><div class="ttdeci">std::chrono::milliseconds getDefaultTimeout() const </div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8cpp_source.html#l00051">WheelTimerInstance.cpp:51</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a413ea44bdc24970646f7de55683f2cd7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">proxygen::HTTPSession::initialReceiveWindow_</a></div><div class="ttdeci">size_t initialReceiveWindow_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00976">HTTPSession.h:976</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a99dba7212b5e3f3eb0c7f7aa5c283089"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a99dba7212b5e3f3eb0c7f7aa5c283089">proxygen::HTTPSessionBase::isPrioritySampled</a></div><div class="ttdeci">bool isPrioritySampled() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00499">HTTPSessionBase.h:499</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a19770f973e94f1a2ced58dcd064040ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">proxygen::HTTPSession::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00701">HTTPSession.h:701</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a1b6c4fc3583b01651c19c16a6eb2c12d"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a1b6c4fc3583b01651c19c16a6eb2c12d">proxygen::HTTPCodec::supportsStreamFlowControl</a></div><div class="ttdeci">virtual bool supportsStreamFlowControl() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00367">HTTPCodec.h:367</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1fb1ea17a47de936a9fc48d69cf212c7"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1fb1ea17a47de936a9fc48d69cf212c7">proxygen::HTTPSessionBase::getNumTxnServed</a></div><div class="ttdeci">uint64_t getNumTxnServed() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00304">HTTPSessionBase.h:304</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa3591cfa6ee461e5a20ca0ffe4943157"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa3591cfa6ee461e5a20ca0ffe4943157">proxygen::HTTPSession::incrementOutgoingStreams</a></div><div class="ttdeci">void incrementOutgoingStreams()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02637">HTTPSession.cpp:2637</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a47f5ec6835388f0c485cf435bc972c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">proxygen::HTTPSession::liveTransactions_</a></div><div class="ttdeci">uint32_t liveTransactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00697">HTTPSession.h:697</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a64491ffbd72ca47924907cf4c51aa750"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">proxygen::HTTPSession::incomingStreams_</a></div><div class="ttdeci">uint32_t incomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00940">HTTPSession.h:940</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1466339f2e2dd5bfcb4aeb3ce7c6c39b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">proxygen::HTTPSessionBase::sessionStats_</a></div><div class="ttdeci">HTTPSessionStats * sessionStats_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00543">HTTPSessionBase.h:543</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ac3fc2909c23c8451b763495fe1c4051f"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ac3fc2909c23c8451b763495fe1c4051f">proxygen::HTTPSessionBase::incrementSeqNo</a></div><div class="ttdeci">void incrementSeqNo()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00495">HTTPSessionBase.h:495</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ae629d52a90a0a7f753e178bb0f3c973e"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">proxygen::HTTPCodec::getTransportDirection</a></div><div class="ttdeci">virtual TransportDirection getTransportDirection() const =0</div></div>
<div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_aa30f4dad548ef0cd581063068fa60966"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#aa30f4dad548ef0cd581063068fa60966">proxygen::WheelTimerInstance::getWheelTimer</a></div><div class="ttdeci">folly::HHWheelTimer * getWheelTimer() const </div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8h_source.html#l00061">WheelTimerInstance.h:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e8db93bfcc5b41ec095428c62f23c95"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::decrementTransactionCount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>ingressEOM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>egressEOM</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01866">1866</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00940">incomingStreams_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01011">proxygen::HTTPTransaction::isPushed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSession_8h_source.html#l00935">outgoingStreams_</a>, and <a class="el" href="HTTPTransaction_8h_source.html#l01116">proxygen::HTTPTransaction::testAndClearActive()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01041">onMessageComplete()</a>.</p>
<div class="fragment"><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;                                                            {</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>() &amp;&amp; !txn-&gt;isPushed()) ||</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() &amp;&amp; txn-&gt;isPushed())) {</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    <span class="keywordflow">if</span> (ingressEOM &amp;&amp; txn-&gt;testAndClearActive()) {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a>--;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span> (egressEOM &amp;&amp; txn-&gt;testAndClearActive()) {</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">incomingStreams_</a>--;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;    }</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;  }</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6eb0d2db14d16430ef88861c902b8d85"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">proxygen::HTTPSession::outgoingStreams_</a></div><div class="ttdeci">uint32_t outgoingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00935">HTTPSession.h:935</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a64491ffbd72ca47924907cf4c51aa750"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">proxygen::HTTPSession::incomingStreams_</a></div><div class="ttdeci">uint32_t incomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00940">HTTPSession.h:940</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa266c1a755e4fac09edf6f1e0deba8c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::describe </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ab1907c602f4948511e3c2f4268446364">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00435">435</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="CodecProtocol_8cpp_source.html#l00047">proxygen::getCodecProtocolString()</a>, <a class="el" href="HTTPSession_8h_source.html#l00122">getLocalAddress()</a>, <a class="el" href="HTTPSession_8h_source.html#l00126">getPeerAddress()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a0fc1b54808088c79076892d0d0d53275">proxygen::HTTPCodec::getUserAgent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                                          {</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;  os &lt;&lt; <span class="stringliteral">&quot;proto=&quot;</span> &lt;&lt; <a class="code" href="namespaceproxygen.html#a8ec3757883de31c779b3eb31497e9e4e">getCodecProtocolString</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">getProtocol</a>());</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>()) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    os &lt;&lt; <span class="stringliteral">&quot;, UA=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a0fc1b54808088c79076892d0d0d53275">getUserAgent</a>()</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;, downstream=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a06f714cc6f6448b73257796d7abc551a">getPeerAddress</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a4d802545b2cf56aeb3b8308c7d3a9371">getLocalAddress</a>()</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;=local&quot;</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    os &lt;&lt; <span class="stringliteral">&quot;, local=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a4d802545b2cf56aeb3b8308c7d3a9371">getLocalAddress</a>() &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a06f714cc6f6448b73257796d7abc551a">getPeerAddress</a>()</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;=upstream&quot;</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;  }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a3818f5333dbb3c19312984ac5f069969"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol</a></div><div class="ttdeci">virtual CodecProtocol getProtocol() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4d802545b2cf56aeb3b8308c7d3a9371"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4d802545b2cf56aeb3b8308c7d3a9371">proxygen::HTTPSession::getLocalAddress</a></div><div class="ttdeci">const folly::SocketAddress &amp; getLocalAddress() const noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00122">HTTPSession.h:122</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a06f714cc6f6448b73257796d7abc551a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a06f714cc6f6448b73257796d7abc551a">proxygen::HTTPSession::getPeerAddress</a></div><div class="ttdeci">const folly::SocketAddress &amp; getPeerAddress() const noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00126">HTTPSession.h:126</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a0fc1b54808088c79076892d0d0d53275"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a0fc1b54808088c79076892d0d0d53275">proxygen::HTTPCodec::getUserAgent</a></div><div class="ttdeci">virtual const std::string &amp; getUserAgent() const =0</div></div>
<div class="ttc" id="namespaceproxygen_html_a8ec3757883de31c779b3eb31497e9e4e"><div class="ttname"><a href="namespaceproxygen.html#a8ec3757883de31c779b3eb31497e9e4e">proxygen::getCodecProtocolString</a></div><div class="ttdeci">const std::string &amp; getCodecProtocolString(CodecProtocol proto)</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8cpp_source.html#l00047">CodecProtocol.cpp:47</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0cc489b64c47726cfb97f2b2d750b590"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::detach </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ad3a4d2e4b5ea45e424ce6eae07ba4c3f">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01904">1904</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l00697">liveTransactions_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01887">maybeResumePausedPipelinedTransaction()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00064">proxygen::HTTPSessionBase::InfoCallback::onDeactivateConnection()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00071">proxygen::HTTPSessionBase::InfoCallback::onTransactionDetached()</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01093">proxygen::HTTPTransaction::removeExTransaction()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01086">proxygen::HTTPTransaction::removePushedTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01527">resumeIngress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00467">proxygen::HTTPSessionBase::setLatestActive()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02509">shouldShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, <a class="el" href="HTTPSession_8h_source.html#l00717">writesDraining_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00158">proxygen::HTTPUpstreamSession::detachTransactions()</a>, <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00867">proxygen::HTTPSession::WriteSegment::setEOR()</a>.</p>
<div class="fragment"><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                                                 {</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  DestructorGuard guard(<span class="keyword">this</span>);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> = txn-&gt;getID();</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;  <span class="keyword">auto</span> txnSeqn = txn-&gt;getSequenceNumber();</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.find(txn-&gt;getID());</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;  DCHECK(it != <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.end());</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">if</span> (txn-&gt;isIngressPaused()) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="comment">// Someone detached a transaction that was paused.  Make the resumeIngress</span></div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <span class="comment">// call to keep liveTransactions_ in order</span></div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; detached paused transaction=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#add14dbdf706d083bf770c2aac6566cac">resumeIngress</a>(txn);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;  }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; removing streamID=&quot;</span> &lt;&lt; streamID &lt;&lt;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="stringliteral">&quot;, liveTransactions was &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;  CHECK_GT(liveTransactions_, 0);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;  liveTransactions_--;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;  <span class="keywordflow">if</span> (txn-&gt;isPushed()) {</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    <span class="keyword">auto</span> assocTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*txn-&gt;getAssocTxnId());</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    <span class="keywordflow">if</span> (assocTxn) {</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      assocTxn-&gt;<a class="code" href="classproxygen_1_1HTTPTransaction.html#afd16bfd0f4dd9626f55471dbb7686e62">removePushedTransaction</a>(streamID);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    }</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;  }</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;  <span class="keywordflow">if</span> (txn-&gt;getControlStream()) {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <span class="keyword">auto</span> controlTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*txn-&gt;getControlStream());</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <span class="keywordflow">if</span> (controlTxn) {</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      controlTxn-&gt;<a class="code" href="classproxygen_1_1HTTPTransaction.html#aab7131e658a2eacc86914685c003afe4">removeExTransaction</a>(streamID);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    }</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;  }</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;  <span class="keyword">auto</span> oldStreamCount = <a class="code" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a>();</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">decrementTransactionCount</a>(txn, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.erase(it);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty()) {</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a156f64337575bea186fc13340dad029d">HTTPSessionBase::setLatestActive</a>();</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a3997d1be34e2034adaeed6e2ad67c8b2">onDeactivateConnection</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    }</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">if</span> (getConnectionManager()) {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      getConnectionManager()-&gt;onDeactivated(*<span class="keyword">this</span>);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    }</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6de299a57867e8fc09a042e8f0456476">onTransactionDetached</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;    }</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;  }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()) {</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a071fbeb84224d7e88ddc7a4d4c96f429">maybeResumePausedPipelinedTransaction</a>(oldStreamCount, txnSeqn)) {</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <span class="comment">// this will resume reads if they were paused (eg: 0 HTTP transactions)</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">resumeReads</a>();</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;  }</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;  <span class="keywordflow">if</span> (liveTransactions_ == 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() &amp;&amp; !isScheduled()) {</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;    resetTimeout();</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;  }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;  <span class="comment">// It&#39;s possible that this is the last transaction in the session,</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;  <span class="comment">// so check whether the conditions for shutdown are satisfied.</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty()) {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a488290b5d92a67ab804c6b0f589ad9e0">shouldShutdown</a>()) {</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">writesDraining_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;    }</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;    <span class="comment">// Handle the case where we are draining writes but all remaining</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;    <span class="comment">// transactions terminated with no egress.</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">writesDraining_</a> &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a>()) {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;    }</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;  }</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a>();</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7f79405657f8c7970a7c2aefebbfc512"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">proxygen::HTTPSession::getPipelineStreamCount</a></div><div class="ttdeci">size_t getPipelineStreamCount() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00837">HTTPSession.h:837</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_add14dbdf706d083bf770c2aac6566cac"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#add14dbdf706d083bf770c2aac6566cac">proxygen::HTTPSession::resumeIngress</a></div><div class="ttdeci">void resumeIngress(HTTPTransaction *txn) noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01527">HTTPSession.cpp:1527</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2e8db93bfcc5b41ec095428c62f23c95"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">proxygen::HTTPSession::decrementTransactionCount</a></div><div class="ttdeci">void decrementTransactionCount(HTTPTransaction *txn, bool ingressEOM, bool egressEOM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01866">HTTPSession.cpp:1866</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a071fbeb84224d7e88ddc7a4d4c96f429"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a071fbeb84224d7e88ddc7a4d4c96f429">proxygen::HTTPSession::maybeResumePausedPipelinedTransaction</a></div><div class="ttdeci">bool maybeResumePausedPipelinedTransaction(size_t oldStreamCount, uint32_t txnSeqn)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01887">HTTPSession.cpp:1887</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a6de299a57867e8fc09a042e8f0456476"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6de299a57867e8fc09a042e8f0456476">proxygen::HTTPSessionBase::InfoCallback::onTransactionDetached</a></div><div class="ttdeci">virtual void onTransactionDetached(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00071">HTTPSessionBase.h:71</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2161afe8ad9e128e3f1640ef4e4cc234"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">proxygen::HTTPSession::writesDraining_</a></div><div class="ttdeci">bool writesDraining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00717">HTTPSession.h:717</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a51a5012bdb77ee9d24b45a075a351cdc"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">proxygen::HTTPSession::checkForShutdown</a></div><div class="ttdeci">void checkForShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02447">HTTPSession.cpp:2447</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a156f64337575bea186fc13340dad029d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a156f64337575bea186fc13340dad029d">proxygen::HTTPSessionBase::setLatestActive</a></div><div class="ttdeci">void setLatestActive()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00467">HTTPSessionBase.h:467</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a488290b5d92a67ab804c6b0f589ad9e0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a488290b5d92a67ab804c6b0f589ad9e0">proxygen::HTTPSession::shouldShutdown</a></div><div class="ttdeci">bool shouldShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02509">HTTPSession.cpp:2509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_afd16bfd0f4dd9626f55471dbb7686e62"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#afd16bfd0f4dd9626f55471dbb7686e62">proxygen::HTTPTransaction::removePushedTransaction</a></div><div class="ttdeci">void removePushedTransaction(HTTPCodec::StreamID pushStreamId)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8h_source.html#l01086">HTTPTransaction.h:1086</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4fc8e06ea32500b275a03eb1b9829c39"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">proxygen::HTTPSession::resumeReads</a></div><div class="ttdeci">void resumeReads()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02792">HTTPSession.cpp:2792</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a47f5ec6835388f0c485cf435bc972c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">proxygen::HTTPSession::liveTransactions_</a></div><div class="ttdeci">uint32_t liveTransactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00697">HTTPSession.h:697</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_addee32fd97cd4864b2a4b2f8a99c11c1"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">proxygen::HTTPCodec::StreamID</a></div><div class="ttdeci">uint64_t StreamID</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00049">HTTPCodec.h:49</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a3997d1be34e2034adaeed6e2ad67c8b2"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a3997d1be34e2034adaeed6e2ad67c8b2">proxygen::HTTPSessionBase::InfoCallback::onDeactivateConnection</a></div><div class="ttdeci">virtual void onDeactivateConnection(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00064">HTTPSessionBase.h:64</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_aab7131e658a2eacc86914685c003afe4"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#aab7131e658a2eacc86914685c003afe4">proxygen::HTTPTransaction::removeExTransaction</a></div><div class="ttdeci">void removeExTransaction(HTTPCodec::StreamID exStreamId)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8h_source.html#l01093">HTTPTransaction.h:1093</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adc047d8e5824d2368060aec1e30fb3b6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">proxygen::HTTPSession::hasMoreWrites</a></div><div class="ttdeci">bool hasMoreWrites() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02812">HTTPSession.cpp:2812</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7cf098767599f9b93dced643dd996efb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::drain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Drains the current transactions and prevents new transactions from being created on this session. If this is an upstream session and the number of transactions reaches zero, this session will shutdown the transport and delete itself. For downstream sessions, an explicit call to <a class="el" href="classproxygen_1_1HTTPSession.html#a60c801ba3d005b715d85661d0ab5e50f">dropConnection()</a> or <a class="el" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport()</a> is required. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a840a10b132ba952fedbd8af8aac1692d">proxygen::HTTPSessionBase</a>.</p>

<p>Reimplemented in <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html#a3fb9c14db09f1ddae0e6b30ad783516b">proxygen::HTTPUpstreamSession</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02474">2474</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">allTransactionsStarted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00713">draining_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, <a class="el" href="HTTPUpstreamSession_8h_source.html#l00135">proxygen::HTTPUpstreamSession::drain()</a>, <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00458">notifyPendingShutdown()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>.</p>
<div class="fragment"><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;                   {</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a>) {</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; draining&quot;</span>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">ConnectionCloseReason::SHUTDOWN</a>);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">allTransactionsStarted</a>()) {</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6047ce6e7eea6982b1e2652eaf8ad95c">drainImpl</a>();</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;    }</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>()) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      <span class="comment">// We don&#39;t do this for downstream since we need to wait for</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      <span class="comment">// inflight requests to arrive</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; shutdown from drain&quot;</span>;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    }</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; already draining&quot;</span>;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;  }</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6047ce6e7eea6982b1e2652eaf8ad95c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6047ce6e7eea6982b1e2652eaf8ad95c">proxygen::HTTPSession::drainImpl</a></div><div class="ttdeci">void drainImpl()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02494">HTTPSession.cpp:2494</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a5353997f3caf71049568ad2c460424c5"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">proxygen::HTTPSession::allTransactionsStarted</a></div><div class="ttdeci">virtual bool allTransactionsStarted() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a05846ac95dc0538cada7dfd6543e5e3b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">proxygen::HTTPSession::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00713">HTTPSession.h:713</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6047ce6e7eea6982b1e2652eaf8ad95c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::drainImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02494">2494</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02911">getGracefulGoawayAck()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a844f3bc01e7c20a70da5b67deffb021a">proxygen::HTTPCodec::isWaitingToDrain()</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::NO_ERROR</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                            {</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>() || <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a844f3bc01e7c20a70da5b67deffb021a">isWaitingToDrain</a>()) {</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">ConnectionCloseReason::SHUTDOWN</a>);</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;    <span class="comment">// For HTTP/2, if we haven&#39;t started yet then we cannot send a GOAWAY frame</span></div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="comment">// since we haven&#39;t sent the initial SETTINGS frame. Defer sending that</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    <span class="comment">// GOAWAY until the initial SETTINGS is sent.</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>) {</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">generateGoaway</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;                             <a class="code" href="classproxygen_1_1HTTPSession.html#a0f8fa22651a3a9a92ba6778bd377bfb3">getGracefulGoawayAck</a>(),</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;                             <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">ErrorCode::NO_ERROR</a>);</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  }</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::ErrorCode::NO_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a844f3bc01e7c20a70da5b67deffb021a"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a844f3bc01e7c20a70da5b67deffb021a">proxygen::HTTPCodec::isWaitingToDrain</a></div><div class="ttdeci">virtual bool isWaitingToDrain() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0f8fa22651a3a9a92ba6778bd377bfb3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0f8fa22651a3a9a92ba6778bd377bfb3">proxygen::HTTPSession::getGracefulGoawayAck</a></div><div class="ttdeci">HTTPCodec::StreamID getGracefulGoawayAck() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02911">HTTPSession.cpp:2911</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a22dec1b6d4dde73ea7380a28b937e545"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway</a></div><div class="ttdeci">virtual size_t generateGoaway(folly::IOBufQueue &amp;writeBuf, StreamID lastStream, ErrorCode code, std::unique_ptr&lt; folly::IOBuf &gt; debugData=nullptr)=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a60c801ba3d005b715d85661d0ab5e50f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::dropConnection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00493">493</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00479">immediateShutdown()</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorDropped</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                            {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;dropping &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a> || (<a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>())) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; already shutdown&quot;</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">ConnectionCloseReason::SHUTDOWN</a>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a>()) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="comment">// shutdownTransport might have generated a write (goaway)</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    <span class="comment">// If so, writes will not be shutdown, so fall through to</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="comment">// shutdownTransportWithReset.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>()) {</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a15caf918295099c6396ea3266a810342">immediateShutdown</a>();</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;  }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">shutdownTransportWithReset</a>(<a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60363f6e1d6e06a3573282bc189ddb65">kErrorDropped</a>);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a15caf918295099c6396ea3266a810342"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a15caf918295099c6396ea3266a810342">proxygen::HTTPSession::immediateShutdown</a></div><div class="ttdeci">void immediateShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00479">HTTPSession.cpp:479</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da60363f6e1d6e06a3573282bc189ddb65"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60363f6e1d6e06a3573282bc189ddb65">proxygen::kErrorDropped</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adba39f5cba4a8eaa5a2c54c774fad9ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">proxygen::HTTPSession::shutdownTransportWithReset</a></div><div class="ttdeci">void shutdownTransportWithReset(ProxygenError errorCode, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02403">HTTPSession.cpp:2403</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adc047d8e5824d2368060aec1e30fb3b6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">proxygen::HTTPSession::hasMoreWrites</a></div><div class="ttdeci">bool hasMoreWrites() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02812">HTTPSession.cpp:2812</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe73197503c2bc4aa024555be2fa0338"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::dumpConnectionState </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>loglevel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00515">515</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;{}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab2b5edde97da1c7321b3c1beb2e42ebd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::enableDoubleGoawayDrain </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#af39df2dc9f0103a2673b71038837ec60">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00208">208</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, and <a class="el" href="HTTPCodec_8h_source.html#l00665">proxygen::HTTPCodec::enableDoubleGoawayDrain()</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                                          {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#abbc9bab2cffe0b4dc4d9de58425efe3b">enableDoubleGoawayDrain</a>();</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_abbc9bab2cffe0b4dc4d9de58425efe3b"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#abbc9bab2cffe0b4dc4d9de58425efe3b">proxygen::HTTPCodec::enableDoubleGoawayDrain</a></div><div class="ttdeci">virtual void enableDoubleGoawayDrain()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00665">HTTPCodec.h:665</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76a5df5785a313ba1c7d92dcc6799648"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::errorOnAllTransactions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a>&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>errorMsg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function invokes a callback on all transactions. It is safe, but runs in O(n*log n) and if the callback <em>adds</em> transactions, they will not get the callback. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02824">2824</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02834">errorOnTransactionIds()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;                               {</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  std::vector&lt;HTTPCodec::StreamID&gt; ids;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; txn: <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>) {</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    ids.push_back(txn.first);</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;  }</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a0c80a7af521add6b6710e4462856b700">errorOnTransactionIds</a>(ids, err, errorMsg);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a0c80a7af521add6b6710e4462856b700"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0c80a7af521add6b6710e4462856b700">proxygen::HTTPSession::errorOnTransactionIds</a></div><div class="ttdeci">void errorOnTransactionIds(const std::vector&lt; HTTPCodec::StreamID &gt; &amp;ids, ProxygenError err, const std::string &amp;extraErrorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02834">HTTPSession.cpp:2834</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a36534e5e65f672c5757334d53ec2087f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::errorOnTransactionId </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a>&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02853">2853</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02834">errorOnTransactionIds()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>.</p>
<div class="fragment"><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;                      {</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;  <span class="keyword">auto</span> txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;  <span class="keywordflow">if</span> (txn != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    txn-&gt;onError(std::move(ex));</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;  }</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0c80a7af521add6b6710e4462856b700"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::errorOnTransactionIds </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>ids</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a>&#160;</td>
          <td class="paramname"><em>err</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>extraErrorMsg</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02834">2834</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02853">errorOnTransactionId()</a>, <a class="el" href="ProxygenErrorEnum_8cpp_source.html#l00025">proxygen::getErrorString()</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, and <a class="el" href="Exception_8h_source.html#l00046">proxygen::Exception::setProxygenError()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02824">errorOnAllTransactions()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>.</p>
<div class="fragment"><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;                             {</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;  std::string extraErrorMsg;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  <span class="keywordflow">if</span> (!errorMsg.empty()) {</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    extraErrorMsg = folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;. &quot;</span>, errorMsg);</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  }</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">id</span>: ids) {</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    HTTPException ex(<a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;      folly::to&lt;std::string&gt;(<a class="code" href="namespaceproxygen.html#a8d8e670251d6f1b9c63431fd2d9d912e">getErrorString</a>(err),</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;        <span class="stringliteral">&quot; on transaction id: &quot;</span>, <span class="keywordtype">id</span>,</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;        extraErrorMsg));</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    ex.setProxygenError(err);</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a36534e5e65f672c5757334d53ec2087f">errorOnTransactionId</a>(<span class="keywordtype">id</span>, std::move(ex));</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  }</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a36534e5e65f672c5757334d53ec2087f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a36534e5e65f672c5757334d53ec2087f">proxygen::HTTPSession::errorOnTransactionId</a></div><div class="ttdeci">void errorOnTransactionId(HTTPCodec::StreamID id, HTTPException ex)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02853">HTTPSession.cpp:2853</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a8d8e670251d6f1b9c63431fd2d9d912e"><div class="ttname"><a href="namespaceproxygen.html#a8d8e670251d6f1b9c63431fd2d9d912e">proxygen::getErrorString</a></div><div class="ttdeci">const char * getErrorString(ProxygenError error)</div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8cpp_source.html#l00025">ProxygenErrorEnum.cpp:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee368bf4f4005d808257939ad72234ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> * proxygen::HTTPSession::findTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>streamID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> for the given transaction ID, or nullptr if that transaction ID does not exist within this <a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a>. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02557">2557</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02853">errorOnTransactionId()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01163">onAbort()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01018">onChunkComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00993">onChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00860">onExMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00899">onHeadersComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01041">onMessageComplete()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00106">proxygen::HTTPDownstreamSession::onNativeProtocolUpgrade()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01330">onPriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01030">onTrailersComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01285">onWindowUpdate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01509">pauseIngress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01527">resumeIngress()</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00722">setNewTransactionPauseState()</a>.</p>
<div class="fragment"><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;                                                       {</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;  <span class="keyword">auto</span> it = <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.find(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;  <span class="keywordflow">if</span> (it == <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.end()) {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;    <span class="keywordflow">return</span> &amp;it-&gt;second;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;  }</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad0f4e15083621ec88c260ae1494e1c51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::flowControlTimeoutExpired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00425">425</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::TIMEOUT</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>, and <a class="el" href="HTTPSession_8h_source.html#l01007">proxygen::HTTPSession::FlowControlTimeout::timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                                {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Flow control timeout for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  DestructorGuard g(<span class="keyword">this</span>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">ConnectionCloseReason::TIMEOUT</a>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::ConnectionCloseReason::TIMEOUT</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a99a081c8679ece357e810e5615178a2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a>* proxygen::HTTPSession::getByteEventTracker </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00088">88</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00317">setByteEventTracker()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00351">setEgressSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00336">setFlowControl()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00329">setSessionStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>.get(); }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8bce2a0083afab9016f69310dd035351"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::getCertAuthSettingVal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00185">185</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00061">getTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                            {</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  uint32_t certAuthSettingVal = 0;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  constexpr uint16_t settingLen = 4;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  std::unique_ptr&lt;folly::IOBuf&gt; ekm;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  folly::StringPiece label;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>()) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    label = kClientLabel;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    label = kServerLabel;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="keyword">auto</span> fizzBase = <a class="code" href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">getTransport</a>()-&gt;getUnderlyingTransport&lt;AsyncFizzBase&gt;();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span> (fizzBase) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    ekm = fizzBase-&gt;getEkm(label, <span class="keyword">nullptr</span>, settingLen);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Underlying transport does not support secondary &quot;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;               <span class="stringliteral">&quot;authentication.&quot;</span>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">return</span> certAuthSettingVal;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span> (ekm &amp;&amp; ekm-&gt;computeChainDataLength() == settingLen) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    folly::io::Cursor cursor(ekm.get());</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    uint32_t ekmVal = cursor.readBE&lt;uint32_t&gt;();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    certAuthSettingVal = (ekmVal &amp; 0x3fffffff) | 0x80000000;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  <span class="keywordflow">return</span> certAuthSettingVal;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9a3bd3fa8d867fec154e90a8d830af35"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">proxygen::HTTPSession::getTransport</a></div><div class="ttdeci">folly::AsyncTransportWrapper * getTransport() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00061">HTTPSession.h:61</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6eaf7bac72499cd50c8e77e7b1b72a4d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a>&amp; proxygen::HTTPSession::getCodec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a50773010568880d549b9de1cc710f51c">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00440">440</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, and <a class="el" href="FilterChain_8h_source.html#l00255">proxygen::FilterChain&lt; T1, T2, FilterType, set_callback, TakeOwnership &gt;::getChainEnd()</a>.</p>
<div class="fragment"><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                                                      {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>.<a class="code" href="classproxygen_1_1FilterChain.html#a24ef040a55410dd9a816f57cb795cb44">getChainEnd</a>();</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1FilterChain_html_a24ef040a55410dd9a816f57cb795cb44"><div class="ttname"><a href="classproxygen_1_1FilterChain.html#a24ef040a55410dd9a816f57cb795cb44">proxygen::FilterChain::getChainEnd</a></div><div class="ttdeci">const T1 &amp; getChainEnd() const </div><div class="ttdef"><b>Definition:</b> <a href="FilterChain_8h_source.html#l00255">FilterChain.h:255</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a812803459bbdfc56b7f75cf6a5cf9916"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::getCodecSendWindowSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00712">712</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00680">proxygen::HTTPCodec::getDefaultWindowSize()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00657">proxygen::HTTPCodec::getIngressSettings()</a>, <a class="el" href="HTTPSettings_8cpp_source.html#l00033">proxygen::HTTPSettings::getSetting()</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::INITIAL_WINDOW_SIZE</a>, and <a class="el" href="test_8c_source.html#l01529">settings</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                                                 {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  <span class="keyword">const</span> HTTPSettings* <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#aedbff2455d784b58ee452d648858cc9a">getIngressSettings</a>();</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  <span class="keywordflow">if</span> (settings) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">return</span> settings-&gt;<a class="code" href="classproxygen_1_1HTTPSettings.html#a920c60367ea7f5e595d29d41677fa73d">getSetting</a>(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">SettingsId::INITIAL_WINDOW_SIZE</a>,</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                                <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#af4516328c1b427f975f86909cd3ed01e">getDefaultWindowSize</a>());</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;  }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#af4516328c1b427f975f86909cd3ed01e">getDefaultWindowSize</a>();</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_aedbff2455d784b58ee452d648858cc9a"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aedbff2455d784b58ee452d648858cc9a">proxygen::HTTPCodec::getIngressSettings</a></div><div class="ttdeci">virtual const HTTPSettings * getIngressSettings() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00657">HTTPCodec.h:657</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_af4516328c1b427f975f86909cd3ed01e"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#af4516328c1b427f975f86909cd3ed01e">proxygen::HTTPCodec::getDefaultWindowSize</a></div><div class="ttdeci">virtual uint32_t getDefaultWindowSize() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00680">HTTPCodec.h:680</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::SettingsId::INITIAL_WINDOW_SIZE</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSettings_html_a920c60367ea7f5e595d29d41677fa73d"><div class="ttname"><a href="classproxygen_1_1HTTPSettings.html#a920c60367ea7f5e595d29d41677fa73d">proxygen::HTTPSettings::getSetting</a></div><div class="ttdeci">const HTTPSetting * getSetting(SettingsId id) const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8cpp_source.html#l00033">HTTPSettings.cpp:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa82b0bd3fa4af3999b03cbccbfe136c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::getCurrentTransportInfo </td>
          <td>(</td>
          <td class="paramtype">wangle::TransportInfo *&#160;</td>
          <td class="paramname"><em>tinfo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a8164721d4bf7c3f1b9006d0bcdcfdda9">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02031">2031</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02017">getCurrentTransportInfoWithoutUpdate()</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>.</p>
<div class="fragment"><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;                                                              {</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a835f8ccd23c3890580f3ba11a7a9b51c">getCurrentTransportInfoWithoutUpdate</a>(tinfo)) {</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    <span class="comment">// some fields are the same with the setup transport info</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;    tinfo-&gt;setupTime = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.setupTime;</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    tinfo-&gt;secure = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.secure;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    tinfo-&gt;sslSetupTime = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslSetupTime;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    tinfo-&gt;sslVersion = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslVersion;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    tinfo-&gt;sslCipher = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslCipher;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    tinfo-&gt;sslResume = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslResume;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;    tinfo-&gt;appProtocol = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.appProtocol;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    tinfo-&gt;sslError = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslError;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="preprocessor">#if defined(__linux__) || defined(__FreeBSD__)</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="comment">// update connection transport info with the latest RTT</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;    <span class="keywordflow">if</span> (tinfo-&gt;tcpinfo.tcpi_rtt &gt; 0) {</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.tcpinfo.tcpi_rtt = tinfo-&gt;tcpinfo.tcpi_rtt;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.rtt = std::chrono::microseconds(tinfo-&gt;tcpinfo.tcpi_rtt);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;    }</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.rtx = tinfo-&gt;rtx;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;  }</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a835f8ccd23c3890580f3ba11a7a9b51c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a835f8ccd23c3890580f3ba11a7a9b51c">proxygen::HTTPSession::getCurrentTransportInfoWithoutUpdate</a></div><div class="ttdeci">bool getCurrentTransportInfoWithoutUpdate(wangle::TransportInfo *tinfo) const override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02017">HTTPSession.cpp:2017</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a835f8ccd23c3890580f3ba11a7a9b51c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::getCurrentTransportInfoWithoutUpdate </td>
          <td>(</td>
          <td class="paramtype">wangle::TransportInfo *&#160;</td>
          <td class="paramname"><em>tinfo</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a68a5d49e2a7d811eb423565f62877b8e">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02017">2017</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02031">getCurrentTransportInfo()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                                {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;  <span class="keyword">auto</span> sock = <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getUnderlyingTransport&lt;AsyncSocket&gt;();</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;  <span class="keywordflow">if</span> (sock) {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    tinfo-&gt;initWithSocket(sock);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;<span class="preprocessor">#if defined(__linux__) || defined(__FreeBSD__)</span></div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    tinfo-&gt;readTcpCongestionControl(sock);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    tinfo-&gt;readMaxPacingRate(sock);</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="preprocessor">#endif // defined(__linux__) || defined(__FreeBSD__)</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;  }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af6225e79bfb92a2b8b5445d02f385eb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::EventBase* proxygen::HTTPSession::getEventBase </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a60d26c60a2326428d9f4bc0e56b0f24d">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00065">65</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>) {</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase();</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    }</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f8fa22651a3a9a92ba6778bd377bfb3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> proxygen::HTTPSession::getGracefulGoawayAck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the id of the stream we should ack in a graceful GOAWAY </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02911">2911</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00675">proxygen::HTTPCodec::getLastIncomingStreamID()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a844f3bc01e7c20a70da5b67deffb021a">proxygen::HTTPCodec::isWaitingToDrain()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>.</p>
<div class="fragment"><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;                                                          {</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>() || <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a844f3bc01e7c20a70da5b67deffb021a">isWaitingToDrain</a>()) {</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <span class="comment">// TODO: just track last stream ID inside HTTPSession since this logic</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <span class="comment">// is shared between HTTP/2 and SPDY</span></div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">getLastIncomingStreamID</a>();</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;  }</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; getGracefulGoawayAck is reusable and not draining&quot;</span>;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  <span class="comment">// return the maximum possible stream id</span></div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  <span class="keywordflow">return</span> std::numeric_limits&lt;int32_t&gt;::max();</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a844f3bc01e7c20a70da5b67deffb021a"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a844f3bc01e7c20a70da5b67deffb021a">proxygen::HTTPCodec::isWaitingToDrain</a></div><div class="ttdeci">virtual bool isWaitingToDrain() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a206f96e3fa41268060203738be887942"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">proxygen::HTTPCodec::getLastIncomingStreamID</a></div><div class="ttdeci">virtual StreamID getLastIncomingStreamID() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00675">HTTPCodec.h:675</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a177d9f43b8dcd75a09ccbe02a2f00498"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::getHTTP2PrioritiesEnabled </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a6f0916403f1d1a63bc1236d2fb8b9d4d">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00114">114</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00224">proxygen::HTTPSessionBase::getHTTP2PrioritiesEnabled()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00737">getMessagePriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01330">onPriority()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                  {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a6f0916403f1d1a63bc1236d2fb8b9d4d">HTTPSessionBase::getHTTP2PrioritiesEnabled</a>();</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a6f0916403f1d1a63bc1236d2fb8b9d4d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a6f0916403f1d1a63bc1236d2fb8b9d4d">proxygen::HTTPSessionBase::getHTTP2PrioritiesEnabled</a></div><div class="ttdeci">virtual bool getHTTP2PrioritiesEnabled() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00224">HTTPSessionBase.h:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53c7e76d73a80296ffab4461dd0dbb0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual folly::Optional&lt;const <a class="el" href="classproxygen_1_1HTTPMessage.html#a488cdeffada45d57bf30cf2b9059bd5a">HTTPMessage::HTTPPriority</a>&gt; proxygen::HTTPSession::getHTTPPriority </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a98b3e5d3b9c5daef7699fa0fe5d3faeb">proxygen::HTTPSessionBase</a>.</p>

<p>Reimplemented in <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html#af70db0ee27cd989936d7421e6f667b65">proxygen::HTTPUpstreamSession</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00341">341</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l00425">flowControlTimeoutExpired()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00526">getReadBuffer()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00552">isBufferMovable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00557">readBufferAvailable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00535">readDataAvailable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00606">readEOF()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00626">readErr()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00414">writeTimeoutExpired()</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8h_source.html#l00139">proxygen::HTTPUpstreamSession::getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                      {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> folly::none;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d802545b2cf56aeb3b8308c7d3a9371"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const folly::SocketAddress&amp; proxygen::HTTPSession::getLocalAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ac7cb79f04ed2136bd09ef7e282f7b505">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00122">122</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00319">proxygen::HTTPSessionBase::getLocalAddress()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00435">describe()</a>, and <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00065">proxygen::HTTPDownstreamSession::getTransactionTimeoutHandler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                                                      {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a228fe147434c7ab4d5b78c90431c2bcc">HTTPSessionBase::getLocalAddress</a>();</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a228fe147434c7ab4d5b78c90431c2bcc"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a228fe147434c7ab4d5b78c90431c2bcc">proxygen::HTTPSessionBase::getLocalAddress</a></div><div class="ttdeci">const folly::SocketAddress &amp; getLocalAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00319">HTTPSessionBase.h:319</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae793a714b3812adadb6c1610002cd7e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::getMaxConcurrentOutgoingStreamsRemote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#af9860328645020065957a76fa95685c7">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00722">722</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba9376c5fa7420be29ddc25c951aea1b7e">proxygen::_SPDY_INVALID_STREAM</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#aa1c17d464b437d42106683ea38fcb3e9">addAckToLastByteEvent()</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#ac39676e76e0a700cce8f22c5d9f96f0d">addLastByteEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00185">getCertAuthSettingVal()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02911">getGracefulGoawayAck()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00737">getMessagePriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSession_8h_source.html#l00924">maxConcurrentOutgoingStreamsRemote_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02892">onConnectionSendWindowClosed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02886">onConnectionSendWindowOpen()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02954">onEgressBufferCleared()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02948">onEgressBuffered()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01489">onSetMaxInitiatedStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01483">onSetSendWindow()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00211">verifyCertAuthSetting()</a>.</p>
<div class="fragment"><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                                                  {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a>;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ad5433004842e58bc21e71d0219bd2153"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_</a></div><div class="ttdeci">uint32_t maxConcurrentOutgoingStreamsRemote_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00924">HTTPSession.h:924</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a58e8277f3fdd50bc8496c79018b21987"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> proxygen::HTTPSession::getMessagePriority </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00737">737</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTP2Framer_8cpp_source.html#l00021">proxygen::http2::DefaultPriority</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00087">proxygen::http2::PriorityUpdate::exclusive</a>, <a class="el" href="HTTPSession_8h_source.html#l00114">getHTTP2PrioritiesEnabled()</a>, <a class="el" href="HTTPMessage_8h_source.html#l00601">proxygen::HTTPMessage::getHTTP2Priority()</a>, <a class="el" href="HTTPMessage_8h_source.html#l00597">proxygen::HTTPMessage::getPriority()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00706">proxygen::HTTPCodec::mapPriorityToDependency()</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00086">proxygen::http2::PriorityUpdate::streamDependency</a>, and <a class="el" href="HTTP2Framer_8h_source.html#l00088">proxygen::http2::PriorityUpdate::weight</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00860">onExMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                                                      {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;  http2::PriorityUpdate h2Pri = <a class="code" href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">http2::DefaultPriority</a>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  <span class="comment">// if HTTP2 priorities are enabled, get them from the message</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// and ignore otherwise</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">getHTTP2PrioritiesEnabled</a>() &amp;&amp; msg) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keyword">auto</span> res = msg-&gt;getHTTP2Priority();</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      h2Pri.<a class="code" href="structproxygen_1_1http2_1_1PriorityUpdate.html#a679735d9727d4589b1b12fd3a2f3d8d6">streamDependency</a> = std::get&lt;0&gt;(*res);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      h2Pri.exclusive = std::get&lt;1&gt;(*res);</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      h2Pri.weight = std::get&lt;2&gt;(*res);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="comment">// HTTPMessage with setPriority called explicitly</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      h2Pri.streamDependency =</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ad3f2df6e146618da881c36c5bd68c7e3">mapPriorityToDependency</a>(msg-&gt;getPriority());</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  }</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  <span class="keywordflow">return</span> h2Pri;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a177d9f43b8dcd75a09ccbe02a2f00498"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">proxygen::HTTPSession::getHTTP2PrioritiesEnabled</a></div><div class="ttdeci">bool getHTTP2PrioritiesEnabled() const override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00114">HTTPSession.h:114</a></div></div>
<div class="ttc" id="structproxygen_1_1http2_1_1PriorityUpdate_html_a679735d9727d4589b1b12fd3a2f3d8d6"><div class="ttname"><a href="structproxygen_1_1http2_1_1PriorityUpdate.html#a679735d9727d4589b1b12fd3a2f3d8d6">proxygen::http2::PriorityUpdate::streamDependency</a></div><div class="ttdeci">HTTPCodec::StreamID streamDependency</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Framer_8h_source.html#l00086">HTTP2Framer.h:86</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ad3f2df6e146618da881c36c5bd68c7e3"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ad3f2df6e146618da881c36c5bd68c7e3">proxygen::HTTPCodec::mapPriorityToDependency</a></div><div class="ttdeci">virtual StreamID mapPriorityToDependency(uint8_t) const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00706">HTTPCodec.h:706</a></div></div>
<div class="ttc" id="namespaceproxygen_1_1http2_html_a9d6bc6481640269a7770347be1f72fd5"><div class="ttname"><a href="namespaceproxygen_1_1http2.html#a9d6bc6481640269a7770347be1f72fd5">proxygen::http2::DefaultPriority</a></div><div class="ttdeci">const PriorityUpdate DefaultPriority</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2Framer_8cpp_source.html#l00021">HTTP2Framer.cpp:21</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a609ab80e8953402ea2b13ab64f5717"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unique_ptr&lt; IOBuf &gt; proxygen::HTTPSession::getNextToSend </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>cork</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>eom</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the next IOBuf to send (either writeBuf_ or new egress from the priority queue), and sets cork appropriately </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02055">2055</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSession_8h_source.html#l00945">bytesWritten_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00571">proxygen::HTTPSessionBase::egressBodySizeLimit_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00137">proxygen::HTTP2PriorityQueue::empty()</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00085">proxygen::FlowControlFilter::getAvailableSend()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol()</a>, <a class="el" href="HTTPSession_8h_source.html#l00767">isConnWindowFull()</a>, <a class="el" href="CodecProtocol_8cpp_source.html#l00073">proxygen::isSpdyCodecProtocol()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00653">proxygen::HTTP2PriorityQueue::nextEgress()</a>, <a class="el" href="HTTPSession_8h_source.html#l00966">nextEgressResults_</a>, <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="classproxygen_1_1TTLBAStats.html#a081d0bf94f64a2f9658550bd4c7db185">proxygen::TTLBAStats::recordTTLBAIOBSplitByEom()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00543">proxygen::HTTPSessionBase::sessionStats_</a>, <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>, <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                                                                  {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;  <span class="comment">// limit ourselves to one outstanding write at a time (onWriteSuccess calls</span></div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="comment">// scheduleWrite)</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> &gt; 0 || <a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>()) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;skipping write during this loop, numActiveWrites_=&quot;</span> &lt;&lt;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> &lt;&lt; <span class="stringliteral">&quot; writesShutdown()=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>();</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;  <span class="comment">// We always tack on at least one body packet to the current write buf</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;  <span class="comment">// This ensures that a short HTTPS response will go out in a single SSL record</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>()) {</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    uint32_t toSend = kWriteReadyMax;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>) {</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">getAvailableSend</a>() == 0) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;        VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Session-level send window is full, skipping remaining &quot;</span></div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;                &lt;&lt; <span class="stringliteral">&quot;body writes this loop&quot;</span>;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      }</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      toSend = std::min(toSend, <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">getAvailableSend</a>());</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    }</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ae7a98e71ef297cccaa40e64ded686951">nextEgress</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>,</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;                               <a class="code" href="namespaceproxygen.html#adcd52a34fee2fd8cd930e4d1865e7dd7">isSpdyCodecProtocol</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">getProtocol</a>()));</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.empty()); <span class="comment">// Queue was non empty, so this must be</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="comment">// The maximum we will send for any transaction in this loop</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    uint32_t txnMaxToSend = toSend * <a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.front().second;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="keywordflow">if</span> (txnMaxToSend == 0) {</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="comment">// toSend is smaller than the number of transactions.  Give all egress</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;      <span class="comment">// to the first transaction</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.erase(++<a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.begin(),</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;                               <a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.end());</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      txnMaxToSend = std::min(toSend, <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a26155f3fbc91ee2e2cc5adf8ac61f02b">egressBodySizeLimit_</a>);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.front().second = 1;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;    }</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.size() &gt; 1 &amp;&amp; txnMaxToSend &gt; <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a26155f3fbc91ee2e2cc5adf8ac61f02b">egressBodySizeLimit_</a>) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="comment">// Cap the max to egressBodySizeLimit_, and recompute toSend accordingly</span></div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      txnMaxToSend = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a26155f3fbc91ee2e2cc5adf8ac61f02b">egressBodySizeLimit_</a>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      toSend = txnMaxToSend / <a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>.front().second;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;    }</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;    <span class="comment">// split allowed by relative weight, with some minimum</span></div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> txnPair: <a class="code" href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">nextEgressResults_</a>) {</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      uint32_t txnAllowed = txnPair.second * toSend;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;      <span class="keywordflow">if</span> (nextEgressResults_.size() &gt; 1) {</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        CHECK_LE(txnAllowed, <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a26155f3fbc91ee2e2cc5adf8ac61f02b">egressBodySizeLimit_</a>);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      }</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>) {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        CHECK_LE(txnAllowed, <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">getAvailableSend</a>());</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      }</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <span class="keywordflow">if</span> (txnAllowed == 0) {</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        <span class="comment">// The ratio * toSend was so small this txn gets nothing.</span></div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; breaking egress loop on 0 txnAllowed&quot;</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;      }</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; egressing txnID=&quot;</span> &lt;&lt; txnPair.first-&gt;getID() &lt;&lt;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        <span class="stringliteral">&quot; allowed=&quot;</span> &lt;&lt; txnAllowed;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      txnPair.first-&gt;onWriteReady(txnAllowed, txnPair.second);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    }</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    nextEgressResults_.clear();</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="comment">// it can be empty because of HTTPTransaction rate limiting.  We should</span></div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;    <span class="comment">// change rate limiting to clearPendingEgress while waiting.</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.empty()) {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;    }</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;  *eom = <span class="keyword">false</span>;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;    uint64_t needed = <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;preSend(cork, eom, <a class="code" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a>);</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <span class="keywordflow">if</span> (needed &gt; 0) {</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      VLOG(5) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; writeBuf_.chainLength(): &quot;</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;              &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.chainLength() &lt;&lt; <span class="stringliteral">&quot; txnEgressQueue_.empty(): &quot;</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;              &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>();</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;      <span class="keywordflow">if</span> (needed &lt; <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.chainLength()) {</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="comment">// split the next EOM chunk</span></div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        VLOG(5) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; splitting &quot;</span> &lt;&lt; needed &lt;&lt; <span class="stringliteral">&quot; bytes out of a &quot;</span></div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.chainLength() &lt;&lt; <span class="stringliteral">&quot; bytes IOBuf&quot;</span>;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;        *cork = <span class="keyword">true</span>;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a>) {</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;          <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a>-&gt;<a class="code" href="classproxygen_1_1TTLBAStats.html#a081d0bf94f64a2f9658550bd4c7db185">recordTTLBAIOBSplitByEom</a>();</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;        }</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.split(needed);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;        CHECK_EQ(needed, <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.chainLength());</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      }</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;    }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;  }</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;  <span class="comment">// cork if there are txns with pending egress and room to send them</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;  *cork = !<a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#ac542a7e7e5672a1eebac1c3864c562b3">isConnWindowFull</a>();</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.move();</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad0b3818288824506c5a3abb23101f439"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">proxygen::HTTP2PriorityQueue::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00137">HTTP2PriorityQueue.h:137</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f9532f2d59face8b9b10294f617f2a6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f9532f2d59face8b9b10294f617f2a6">proxygen::HTTPSession::nextEgressResults_</a></div><div class="ttdeci">HTTP2PriorityQueue::NextEgressResult nextEgressResults_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00966">HTTPSession.h:966</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a3818f5333dbb3c19312984ac5f069969"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol</a></div><div class="ttdeci">virtual CodecProtocol getProtocol() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a08ca602333f5e1f4a17bb00918bce3f7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">proxygen::HTTPSession::bytesWritten_</a></div><div class="ttdeci">uint64_t bytesWritten_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00945">HTTPSession.h:945</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac542a7e7e5672a1eebac1c3864c562b3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac542a7e7e5672a1eebac1c3864c562b3">proxygen::HTTPSession::isConnWindowFull</a></div><div class="ttdeci">bool isConnWindowFull() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00767">HTTPSession.h:767</a></div></div>
<div class="ttc" id="classproxygen_1_1TTLBAStats_html_a081d0bf94f64a2f9658550bd4c7db185"><div class="ttname"><a href="classproxygen_1_1TTLBAStats.html#a081d0bf94f64a2f9658550bd4c7db185">proxygen::TTLBAStats::recordTTLBAIOBSplitByEom</a></div><div class="ttdeci">virtual void recordTTLBAIOBSplitByEom() noexcept=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1466339f2e2dd5bfcb4aeb3ce7c6c39b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">proxygen::HTTPSessionBase::sessionStats_</a></div><div class="ttdeci">HTTPSessionStats * sessionStats_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00543">HTTPSessionBase.h:543</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="namespaceproxygen_html_adcd52a34fee2fd8cd930e4d1865e7dd7"><div class="ttname"><a href="namespaceproxygen.html#adcd52a34fee2fd8cd930e4d1865e7dd7">proxygen::isSpdyCodecProtocol</a></div><div class="ttdeci">bool isSpdyCodecProtocol(CodecProtocol protocol)</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8cpp_source.html#l00073">CodecProtocol.cpp:73</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ae7a98e71ef297cccaa40e64ded686951"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ae7a98e71ef297cccaa40e64ded686951">proxygen::HTTP2PriorityQueue::nextEgress</a></div><div class="ttdeci">void nextEgress(NextEgressResult &amp;result, bool spdyMode=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00653">HTTP2PriorityQueue.cpp:653</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_a12903e2114e8367ffebc4a8e119bca59"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">proxygen::FlowControlFilter::getAvailableSend</a></div><div class="ttdeci">uint32_t getAvailableSend() const </div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00085">FlowControlFilter.cpp:85</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a26155f3fbc91ee2e2cc5adf8ac61f02b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a26155f3fbc91ee2e2cc5adf8ac61f02b">proxygen::HTTPSessionBase::egressBodySizeLimit_</a></div><div class="ttdeci">static uint32_t egressBodySizeLimit_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00571">HTTPSessionBase.h:571</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9e47485f76defbdb18a2ee8046d3c8ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::getNumIncomingStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a7a4c7680d780f387820250e4cabe0be3">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00084">84</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00940">incomingStreams_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                                                  {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">incomingStreams_</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a64491ffbd72ca47924907cf4c51aa750"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">proxygen::HTTPSession::incomingStreams_</a></div><div class="ttdeci">uint32_t incomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00940">HTTPSession.h:940</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a01e761397c1bf1a22dd1591566329d10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::getNumOutgoingStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a11605f93fcb9a5831d55a58c96d43766">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00080">80</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00935">outgoingStreams_</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                                  {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6eb0d2db14d16430ef88861c902b8d85"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">proxygen::HTTPSession::outgoingStreams_</a></div><div class="ttdeci">uint32_t outgoingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00935">HTTPSession.h:935</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a06f714cc6f6448b73257796d7abc551a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const folly::SocketAddress&amp; proxygen::HTTPSession::getPeerAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a95a44632907c6e22cd970a359c361269">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00126">126</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00323">proxygen::HTTPSessionBase::getPeerAddress()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00435">describe()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                                     {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#afea0d89fc4f306750d2f84dd044e10f6">HTTPSessionBase::getPeerAddress</a>();</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_afea0d89fc4f306750d2f84dd044e10f6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#afea0d89fc4f306750d2f84dd044e10f6">proxygen::HTTPSessionBase::getPeerAddress</a></div><div class="ttdeci">const folly::SocketAddress &amp; getPeerAddress() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00323">HTTPSessionBase.h:323</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7f79405657f8c7970a7c2aefebbfc512"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::getPipelineStreamCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00837">837</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00940">incomingStreams_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02637">incrementOutgoingStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01887">maybeResumePausedPipelinedTransaction()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01887">maybeResumePausedPipelinedTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>.</p>
<div class="fragment"><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                                        {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() ? <a class="code" href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">incomingStreams_</a> : <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.size();</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a64491ffbd72ca47924907cf4c51aa750"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">proxygen::HTTPSession::incomingStreams_</a></div><div class="ttdeci">uint32_t incomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00940">HTTPSession.h:940</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44d7eea9bf8759a4cbcf2fb1d82255bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::getReadBuffer </td>
          <td>(</td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>bufSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00526">526</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00560">proxygen::HTTPSessionBase::maxReadBufferSize_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00689">readBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                                      {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;  FOLLY_SCOPED_TRACE_SECTION(<span class="stringliteral">&quot;HTTPSession - getReadBuffer&quot;</span>);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  pair&lt;void*,uint32_t&gt; readSpace =</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.preallocate(kMinReadSize, <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a5824ec59d9bda0b85950dbc0cb168a0e">HTTPSessionBase::maxReadBufferSize_</a>);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;  *buf = readSpace.first;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  *bufSize = readSpace.second;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a5824ec59d9bda0b85950dbc0cb168a0e"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a5824ec59d9bda0b85950dbc0cb168a0e">proxygen::HTTPSessionBase::maxReadBufferSize_</a></div><div class="ttdeci">static uint32_t maxReadBufferSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00560">HTTPSessionBase.h:560</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7b5d0529cb70ae5090632b85f2684fd0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">proxygen::HTTPSession::readBuf_</a></div><div class="ttdeci">folly::IOBufQueue readBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00689">HTTPSession.h:689</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6626c7d6b00d8c2a181f108aeca9dd6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> * proxygen::HTTPSession::getSecondAuthManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the <a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> attached to this session. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01829">1829</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01057">secondAuthManager_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;                                                              {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>.get();</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f1fa1f46d328890e336be404fa4ce47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">proxygen::HTTPSession::secondAuthManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SecondaryAuthManager &gt; secondAuthManager_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01057">HTTPSession.h:1057</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab4971509542ec5d3a4812666f01752f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string proxygen::HTTPSession::getSecurityProtocol </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a1cf1fd957cfdaba77f24fad464ad9ff1">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00360">360</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l01163">onAbort()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01384">onCertificate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01347">onCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01018">onChunkComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00993">onChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00860">onExMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00899">onHeadersComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01041">onMessageComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01278">onPingReply()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">onPingRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01330">onPriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01302">onSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01323">onSettingsAck()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01030">onTrailersComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01285">onWindowUpdate()</a>, <a class="el" href="test_8c_source.html#l01529">settings</a>, and <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                                                 {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getSecurityProtocol();</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64beb207eb35324706b875207915087e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const wangle::TransportInfo&amp; proxygen::HTTPSession::getSetupTransportInfo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ab93736e566ed2d2cdc9f58739c043a80">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00130">130</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02031">getCurrentTransportInfo()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00327">proxygen::HTTPSessionBase::getSetupTransportInfo()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01837">sendCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02517">sendPing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02525">sendPriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01503">sendSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00373">setEgressBytesLimit()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00361">setMaxConcurrentIncomingStreams()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;             {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#accdbb04fcad674eb1d709e51db2faa3f">HTTPSessionBase::getSetupTransportInfo</a>();</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_accdbb04fcad674eb1d709e51db2faa3f"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#accdbb04fcad674eb1d709e51db2faa3f">proxygen::HTTPSessionBase::getSetupTransportInfo</a></div><div class="ttdeci">const wangle::TransportInfo &amp; getSetupTransportInfo() const noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00327">HTTPSessionBase.h:327</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af9a8e7884bf77f9c5831f652ff803616"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classproxygen_1_1HTTPTransaction.html#a7d7b33611c7b5f490fb5be4747c82561">HTTPTransaction::Handler</a>* proxygen::HTTPSession::getTransactionTimeoutHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called by transactionTimeout if the transaction has no handler. </p>

<p>Implemented in <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html#a04d4ebfc2ba33f1c0dcc52221b68ea03">proxygen::HTTPUpstreamSession</a>, and <a class="el" href="classproxygen_1_1HTTPDownstreamSession.html#a771c925d1b689f25408bb90a1f2144d4">proxygen::HTTPDownstreamSession</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01545">transactionTimeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a9a3bd3fa8d867fec154e90a8d830af35"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncTransportWrapper* proxygen::HTTPSession::getTransport </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a53dc4760bd667494edb310e1fde77e2b">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00061">61</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00185">getCertAuthSettingVal()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01384">onCertificate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01347">onCertificateRequest()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00211">verifyCertAuthSetting()</a>.</p>
<div class="fragment"><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                                                      {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>.get();</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab64b62af1ed594428a7aa50be35449c6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const folly::AsyncTransportWrapper* proxygen::HTTPSession::getTransport </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2cd16f658a7a997660ed21b3ce079a39">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00072">72</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                                                  {</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>.get();</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5e40fcbfdc692240baee16cdf2f7f297"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21d">HTTPSessionBase::SessionType</a> proxygen::HTTPSession::getType </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#ada7ab028d3156a4e7b47512334b46606">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00057">57</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21da293c9ea246ff9985dc6f62a650f78986">proxygen::HTTPSessionBase::HTTP</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                               {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21da293c9ea246ff9985dc6f62a650f78986">HTTPSessionBase::SessionType::HTTP</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1c9bb94538d5eeda59044fec7da1c21da293c9ea246ff9985dc6f62a650f78986"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1c9bb94538d5eeda59044fec7da1c21da293c9ea246ff9985dc6f62a650f78986">proxygen::HTTPSessionBase::SessionType::HTTP</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac71867cf47b46d4da272325fcbbfe456"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const folly::AsyncTransportWrapper* proxygen::HTTPSession::getUnderlyingTransport </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the underlying AsyncTransportWrapper. Overrides <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ab344a20364f4a9687d7197b32251a8f9">HTTPTransaction::Transport::getUnderlyingTransport()</a>. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ab344a20364f4a9687d7197b32251a8f9">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00448">448</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                              {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>.get();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82ff05f591f90fc68145ee47cce9d7da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::hasActiveTransactions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#ac16349a13d736e043dd0f9120e542709">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00076">76</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                              {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty();</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc047d8e5824d2368060aec1e30fb3b6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::hasMoreWrites </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check whether the session has any writes in progress or upcoming </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02812">2812</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00137">proxygen::HTTP2PriorityQueue::empty()</a>, <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l00910">pendingWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00026">proxygen::HTTPUpstreamSession::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>.</p>
<div class="fragment"><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;                                 {</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;  VLOG(10) &lt;&lt; __PRETTY_FUNCTION__</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; numActiveWrites_: &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; pendingWrites_.empty(): &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.empty()</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; pendingWrites_.size(): &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.size()</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    &lt;&lt; <span class="stringliteral">&quot; txnEgressQueue_.empty(): &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>();</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> != 0) ||</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    !<a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.empty() || <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.front() ||</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    !<a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>();</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad0b3818288824506c5a3abb23101f439"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">proxygen::HTTP2PriorityQueue::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00137">HTTP2PriorityQueue.h:137</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7a243fae036a60d472f8e4a5264e6a05"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">proxygen::HTTPSession::pendingWrites_</a></div><div class="ttdeci">WriteSegmentList pendingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00910">HTTPSession.h:910</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15caf918295099c6396ea3266a810342"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::immediateShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Immediately shut down the session, by deleting the loop callbacks first </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00479">479</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l01000">shutdownTransportCb_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                                    {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  <span class="keywordflow">if</span> (isLoopCallbackScheduled()) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    cancelLoopCallback();</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>.reset();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <span class="comment">// checkForShutdown only closes the connection if these conditions are true</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  DCHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>());</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;  DCHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty());</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a>();</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ae8b034c072c3eebdfea9a3718a5edb8f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">proxygen::HTTPSession::shutdownTransportCb_</a></div><div class="ttdeci">std::unique_ptr&lt; ShutdownTransportCallback &gt; shutdownTransportCb_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01000">HTTPSession.h:1000</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a51a5012bdb77ee9d24b45a075a351cdc"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">proxygen::HTTPSession::checkForShutdown</a></div><div class="ttdeci">void checkForShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02447">HTTPSession.cpp:2447</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa3591cfa6ee461e5a20ca0ffe4943157"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::incrementOutgoingStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02637">2637</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00503">proxygen::HTTPSessionBase::onNewOutgoingStream()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00935">outgoingStreams_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;                                      {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a>++;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a9d80fb6cf66d3dc9d7c1b4196dfb0104">HTTPSessionBase::onNewOutgoingStream</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a>);</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a9d80fb6cf66d3dc9d7c1b4196dfb0104"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a9d80fb6cf66d3dc9d7c1b4196dfb0104">proxygen::HTTPSessionBase::onNewOutgoingStream</a></div><div class="ttdeci">void onNewOutgoingStream(uint32_t outgoingStreams)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00503">HTTPSessionBase.h:503</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6eb0d2db14d16430ef88861c902b8d85"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">proxygen::HTTPSession::outgoingStreams_</a></div><div class="ttdeci">uint32_t outgoingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00935">HTTPSession.h:935</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76d95e77fe08def351d56bc501a8a014"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::invalidStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a>&#160;</td>
          <td class="paramname"><em>code</em> = <code><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba9376c5fa7420be29ddc25c951aea1b7e">ErrorCode::_SPDY_INVALID_STREAM</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when the codec processes callbacks for a stream we are no longer tracking. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02922">2922</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ERROR</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPException_8h_source.html#l00098">proxygen::HTTPException::setCodecStatusCode()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01018">onChunkComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00993">onChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00860">onExMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00899">onHeadersComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01041">onMessageComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01030">onTrailersComplete()</a>.</p>
<div class="fragment"><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;                                                                        {</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;    LOG(<a class="code" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;Invalid stream on non-parallel codec.&quot;</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;  }</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;  HTTPException err(<a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;                    folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;invalid stream=&quot;</span>, <a class="code" href="structstream.html">stream</a>));</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;  <span class="comment">// TODO: Below line will change for HTTP/2 -- just call a const getter</span></div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;  <span class="comment">// function for the status code.</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;  err.setCodecStatusCode(code);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">onError</a>(<a class="code" href="structstream.html">stream</a>, err, <span class="keyword">true</span>);</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ZstdStatusType::ERROR</a></div></div>
<div class="ttc" id="structstream_html"><div class="ttname"><a href="structstream.html">stream</a></div><div class="ttdef"><b>Definition:</b> <a href="QMINScheme_8h_source.html#l00118">QMINScheme.h:118</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab44f22d1c1900f583f4e8584fb2f0105"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">proxygen::HTTPSession::onError</a></div><div class="ttdeci">void onError(HTTPCodec::StreamID streamID, const HTTPException &amp;error, bool newTxn) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01099">HTTPSession.cpp:1099</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a313e95bd7ff25e8565b8f915bf9333ce"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename... Args1, typename... Args2&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::invokeOnAllTransactions </td>
          <td>(</td>
          <td class="paramtype">void(HTTPTransaction::*)(Args1...)&#160;</td>
          <td class="paramname"><em>fn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Args2 &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function invokes a callback on all transactions. It is safe, but runs in O(n*log n) and if the callback <em>adds</em> transactions, they will not get the callback. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00586">586</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02824">errorOnAllTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02853">errorOnTransactionId()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02834">errorOnTransactionIds()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02781">pauseReadsImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02801">resumeReadsImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02509">shouldShutdown()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01483">onSetSendWindow()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                                {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    DestructorGuard g(<span class="keyword">this</span>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    std::vector&lt;HTTPCodec::StreamID&gt; ids;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; txn: <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>) {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      ids.push_back(txn.first);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> idit = ids.begin(); idit != ids.end() &amp;&amp; !transactions_.empty();</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;         ++idit) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keyword">auto</span> txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*idit);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      <span class="keywordflow">if</span> (txn != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        (txn-&gt;*fn)(std::forward&lt;Args2&gt;(args)...);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f7082999e3f66a8a049dac93cc89120"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isBufferMovable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00552">552</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                      {</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab67702bcd40390a2b42e8404bbbdc8c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isBusy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00448">448</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a342e3fd380c692a9ed1d9ad11ac73185">proxygen::HTTPCodec::isBusy()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                          {</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">return</span> !<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() || <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a342e3fd380c692a9ed1d9ad11ac73185">isBusy</a>();</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a342e3fd380c692a9ed1d9ad11ac73185"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a342e3fd380c692a9ed1d9ad11ac73185">proxygen::HTTPCodec::isBusy</a></div><div class="ttdeci">virtual bool isBusy() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac542a7e7e5672a1eebac1c3864c562b3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isConnWindowFull </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00767">767</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00085">proxygen::FlowControlFilter::getAvailableSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02942">onDeleteAckEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02974">onLastByteEvent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02936">onPingReplyLatency()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                                {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a> &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">getAvailableSend</a>() == 0;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_a12903e2114e8367ffebc4a8e119bca59"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">proxygen::FlowControlFilter::getAvailableSend</a></div><div class="ttdeci">uint32_t getAvailableSend() const </div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00085">FlowControlFilter.cpp:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7b58add6b1ec1961896913447c51d232"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isDetachable </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>checkSocket</em> = <code>true</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#ac388822ab6bddae72234d11aaf661796">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02993">2993</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01035">drainTimeout_</a>, <a class="el" href="HTTPSession_8h_source.html#l01022">flowControlTimeout_</a>, <a class="el" href="HTTPSession_8h_source.html#l00084">getNumIncomingStreams()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, <a class="el" href="HTTPSession_8h_source.html#l00644">writesPaused()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00683">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;                                                     {</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;  <span class="keywordflow">if</span> (checkSocket &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a> &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;isDetachable()) {</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  }</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.size() == 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a9e47485f76defbdb18a2ee8046d3c8ca">getNumIncomingStreams</a>() == 0 &amp;&amp;</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;    !<a class="code" href="classproxygen_1_1HTTPSession.html#aba6d20c0b92566b1a7f562b8f9501040">writesPaused</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.isScheduled() &amp;&amp;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    !<a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.isScheduled() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a2d1984c14bd93f65bcf31ec1c2dc9f70">drainTimeout_</a>.isScheduled();</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ac1b99af891c8036812baaeb567d5e042"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">proxygen::HTTPSession::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00683">HTTPSession.h:683</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aba6d20c0b92566b1a7f562b8f9501040"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aba6d20c0b92566b1a7f562b8f9501040">proxygen::HTTPSession::writesPaused</a></div><div class="ttdeci">bool writesPaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00644">HTTPSession.h:644</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2d1984c14bd93f65bcf31ec1c2dc9f70"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2d1984c14bd93f65bcf31ec1c2dc9f70">proxygen::HTTPSession::drainTimeout_</a></div><div class="ttdeci">DrainTimeout drainTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01035">HTTPSession.h:1035</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9e47485f76defbdb18a2ee8046d3c8ca"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9e47485f76defbdb18a2ee8046d3c8ca">proxygen::HTTPSession::getNumIncomingStreams</a></div><div class="ttdeci">uint32_t getNumIncomingStreams() const override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00084">HTTPSession.h:84</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">proxygen::HTTPSession::flowControlTimeout_</a></div><div class="ttdeci">FlowControlTimeout flowControlTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01022">HTTPSession.h:1022</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac638a06769e43a6846f6e3fdcd222a2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isDownstream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00521">521</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">proxygen::DOWNSTREAM</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">proxygen::HTTPCodec::getTransportDirection()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00435">describe()</a>, <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01163">onAbort()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>, <a class="el" href="HTTPSession_8h_source.html#l00988">proxygen::HTTPSession::ShutdownTransportCallback::runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                                     {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">getTransportDirection</a>() == <a class="code" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">TransportDirection::DOWNSTREAM</a>;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd"><div class="ttname"><a href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">proxygen::TransportDirection::DOWNSTREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ae629d52a90a0a7f753e178bb0f3c973e"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">proxygen::HTTPCodec::getTransportDirection</a></div><div class="ttdeci">virtual TransportDirection getTransportDirection() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9a22889a5b99545ce0ca0f73bf3b622f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isDraining </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true if this session is draining. This can happen if <a class="el" href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">drain()</a> is called explicitly, if a GOAWAY frame is received, or during shutdown. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a8c6aa03b14a2f69b5672f8b8b9e61b04">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00457">457</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8h_source.html#l00713">draining_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>.</p>
<div class="fragment"><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a>; }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a05846ac95dc0538cada7dfd6543e5e3b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">proxygen::HTTPSession::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00713">HTTPSession.h:713</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a148f158cafab7dcf1d42f3281d48acb0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::isUpstream </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00517">517</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">proxygen::HTTPCodec::getTransportDirection()</a>, and <a class="el" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">proxygen::UPSTREAM</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00185">getCertAuthSettingVal()</a>, <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01384">onCertificate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01347">onCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02509">shouldShutdown()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00211">verifyCertAuthSetting()</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                                   {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">getTransportDirection</a>() == <a class="code" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">TransportDirection::UPSTREAM</a>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518"><div class="ttname"><a href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">proxygen::TransportDirection::UPSTREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ae629d52a90a0a7f753e178bb0f3c973e"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ae629d52a90a0a7f753e178bb0f3c973e">proxygen::HTTPCodec::getTransportDirection</a></div><div class="ttdeci">virtual TransportDirection getTransportDirection() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a071fbeb84224d7e88ddc7a4d4c96f429"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::maybeResumePausedPipelinedTransaction </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>oldStreamCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>txnSeqn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01887">1887</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>.</p>
<div class="fragment"><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;                                           {</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() &amp;&amp;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a>() &lt; oldStreamCount &amp;&amp;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a>() == 1) {</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <span class="keyword">auto</span>&amp; nextTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.rbegin()-&gt;second;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    DCHECK_EQ(nextTxn.getSequenceNumber(), txnSeqn + 1);</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    DCHECK(!nextTxn.isIngressComplete());</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    DCHECK(nextTxn.isIngressPaused());</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Resuming paused pipelined txn &quot;</span> &lt;&lt; nextTxn;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    nextTxn.resumeIngress();</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7f79405657f8c7970a7c2aefebbfc512"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">proxygen::HTTPSession::getPipelineStreamCount</a></div><div class="ttdeci">size_t getPipelineStreamCount() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00837">HTTPSession.h:837</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1137af56342cbee20ecfc301d751249c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::needToBlockForReplaySafety </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is a temporary workaround until we have a better way to allocate stream IDs to waiting transactions. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ab1aee32c238a162b654a72d7418184e4">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00824">824</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02960">onReplaySafe()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00848">waitingForReplaySafety_</a>.</p>
<div class="fragment"><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                                                   {</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">waitingForReplaySafety_</a>.empty();</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ae0f18679ebd4860a833b6195b5a743e6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">proxygen::HTTPSession::waitingForReplaySafety_</a></div><div class="ttdeci">std::list&lt; ReplaySafetyCallback * &gt; waitingForReplaySafety_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00848">HTTPSession.h:848</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a91041fbc94aedb5e52a7d90584df32f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *FOLLY_NULLABLE proxygen::HTTPSession::newExTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html#a7d7b33611c7b5f490fb5be4747c82561">HTTPTransaction::Handler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>controlStream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>unidirectional</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a20b32d68bfd4c591fde51b997bf8a250">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00681">681</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00713">draining_</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a173e180931118bfa5eb34394106e923b">proxygen::ENABLE_EX_HEADERS</a>, <a class="el" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ERROR</a>, <a class="el" href="CodecProtocol_8cpp_source.html#l00047">proxygen::getCodecProtocolString()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00469">proxygen::HTTPTransaction::getID()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol()</a>, <a class="el" href="HTTPSession_8h_source.html#l00924">maxConcurrentOutgoingStreamsRemote_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00051">proxygen::HTTPCodec::NoStream</a>, <a class="el" href="HTTPSession_8h_source.html#l00935">outgoingStreams_</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00477">proxygen::HTTPTransaction::setHandler()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00722">setNewTransactionPauseState()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                                  {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  CHECK(handler &amp;&amp; controlStream &gt; 0);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keyword">auto</span> eSettings = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  <span class="keywordflow">if</span> (!eSettings || !eSettings-&gt;getSetting(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a173e180931118bfa5eb34394106e923b">SettingsId::ENABLE_EX_HEADERS</a>, 0)) {</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    LOG(<a class="code" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>) &lt;&lt; <a class="code" href="namespaceproxygen.html#a8ec3757883de31c779b3eb31497e9e4e">getCodecProtocolString</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">getProtocol</a>())</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;               &lt;&lt; <span class="stringliteral">&quot; does not support ExTransaction&quot;</span>;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a> || (<a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a> &gt;= <a class="code" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a>)) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    LOG(<a class="code" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;cannot support any more transactions in &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;  }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;  DCHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  HTTPTransaction* txn =</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">createStream</a>(),</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                      <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>,</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                      HTTPCodec::ExAttributes(controlStream, unidirectional));</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;  }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;  txn-&gt;setHandler(handler);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a632376e9b73b4cdafb49de77b87e7a70">setNewTransactionPauseState</a>(txn-&gt;getID());</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  <span class="keywordflow">return</span> txn;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dfa230066871e4512642fcc63534cd6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">proxygen::HTTPSession::createTransaction</a></div><div class="ttdeci">HTTPTransaction * createTransaction(HTTPCodec::StreamID streamID, const folly::Optional&lt; HTTPCodec::StreamID &gt; &amp;assocStreamID, const folly::Optional&lt; HTTPCodec::ExAttributes &gt; &amp;exAttributes, const http2::PriorityUpdate &amp;priority=http2::DefaultPriority)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02567">HTTPSession.cpp:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_acf86dd965f7732f70403449d11bddcbe"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream</a></div><div class="ttdeci">virtual StreamID createStream()=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045a173e180931118bfa5eb34394106e923b"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a173e180931118bfa5eb34394106e923b">proxygen::SettingsId::ENABLE_EX_HEADERS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a632376e9b73b4cdafb49de77b87e7a70"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a632376e9b73b4cdafb49de77b87e7a70">proxygen::HTTPSession::setNewTransactionPauseState</a></div><div class="ttdeci">void setNewTransactionPauseState(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00722">HTTPSession.cpp:722</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a3818f5333dbb3c19312984ac5f069969"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol</a></div><div class="ttdeci">virtual CodecProtocol getProtocol() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6eb0d2db14d16430ef88861c902b8d85"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">proxygen::HTTPSession::outgoingStreams_</a></div><div class="ttdeci">uint32_t outgoingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00935">HTTPSession.h:935</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad5433004842e58bc21e71d0219bd2153"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_</a></div><div class="ttdeci">uint32_t maxConcurrentOutgoingStreamsRemote_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00924">HTTPSession.h:924</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a8ec3757883de31c779b3eb31497e9e4e"><div class="ttname"><a href="namespaceproxygen.html#a8ec3757883de31c779b3eb31497e9e4e">proxygen::getCodecProtocolString</a></div><div class="ttdeci">const std::string &amp; getCodecProtocolString(CodecProtocol proto)</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8cpp_source.html#l00047">CodecProtocol.cpp:47</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ZstdStatusType::ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab551ec1bec2f37c3e83b8da35634b48c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">proxygen::HTTPCodec::NoStream</a></div><div class="ttdeci">static const folly::Optional&lt; StreamID &gt; NoStream</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00051">HTTPCodec.h:51</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a05846ac95dc0538cada7dfd6543e5e3b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">proxygen::HTTPSession::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00713">HTTPSession.h:713</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6fc526a94762ffba441171c5df5e5c8a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> * proxygen::HTTPSession::newPushedTransaction </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>assocStreamId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html#a4152eb2c90f579f6749811ad97d8301b">HTTPTransaction::PushHandler</a> *&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#aab6408cb6f66484b35618207fc5cc47d">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00649">649</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00713">draining_</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00469">proxygen::HTTPTransaction::getID()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="HTTPSession_8h_source.html#l00924">maxConcurrentOutgoingStreamsRemote_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00066">proxygen::HTTPCodec::NoExAttributes</a>, <a class="el" href="HTTPSession_8h_source.html#l00935">outgoingStreams_</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00477">proxygen::HTTPTransaction::setHandler()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00722">setNewTransactionPauseState()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#aa43f8d4ffd6e30bf9e2c176fa5b9188c">proxygen::HTTPCodec::supportsPushTransactions()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                                                {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#aa43f8d4ffd6e30bf9e2c176fa5b9188c">supportsPushTransactions</a>()) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>());</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  CHECK_NOTNULL(handler);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a> || (<a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a> &gt;= <a class="code" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a>)) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="comment">// This session doesn&#39;t support any more push transactions</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="comment">// This could be an actual problem - since a single downstream SPDY session</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="comment">// might be connected to N upstream hosts, each of which send M pushes,</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="comment">// which exceeds the limit.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="comment">// should we queue?</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  }</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">createStream</a>(),</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                                           assocStreamId,</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                                           <a class="code" href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">HTTPCodec::NoExAttributes</a>);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  <span class="keyword">auto</span> txnID = txn-&gt;getID();</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  txn-&gt;setHandler(handler);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a632376e9b73b4cdafb49de77b87e7a70">setNewTransactionPauseState</a>(txnID);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  <span class="keywordflow">return</span> txn;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dfa230066871e4512642fcc63534cd6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">proxygen::HTTPSession::createTransaction</a></div><div class="ttdeci">HTTPTransaction * createTransaction(HTTPCodec::StreamID streamID, const folly::Optional&lt; HTTPCodec::StreamID &gt; &amp;assocStreamID, const folly::Optional&lt; HTTPCodec::ExAttributes &gt; &amp;exAttributes, const http2::PriorityUpdate &amp;priority=http2::DefaultPriority)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02567">HTTPSession.cpp:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_acf86dd965f7732f70403449d11bddcbe"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream</a></div><div class="ttdeci">virtual StreamID createStream()=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_aa43f8d4ffd6e30bf9e2c176fa5b9188c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aa43f8d4ffd6e30bf9e2c176fa5b9188c">proxygen::HTTPCodec::supportsPushTransactions</a></div><div class="ttdeci">virtual bool supportsPushTransactions() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a632376e9b73b4cdafb49de77b87e7a70"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a632376e9b73b4cdafb49de77b87e7a70">proxygen::HTTPSession::setNewTransactionPauseState</a></div><div class="ttdeci">void setNewTransactionPauseState(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00722">HTTPSession.cpp:722</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6eb0d2db14d16430ef88861c902b8d85"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">proxygen::HTTPSession::outgoingStreams_</a></div><div class="ttdeci">uint32_t outgoingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00935">HTTPSession.h:935</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad5433004842e58bc21e71d0219bd2153"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_</a></div><div class="ttdeci">uint32_t maxConcurrentOutgoingStreamsRemote_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00924">HTTPSession.h:924</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a05846ac95dc0538cada7dfd6543e5e3b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">proxygen::HTTPSession::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00713">HTTPSession.h:713</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_aeef645636d1d9736d1006c58313500ad"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">proxygen::HTTPCodec::NoExAttributes</a></div><div class="ttdeci">static const folly::Optional&lt; ExAttributes &gt; NoExAttributes</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00066">HTTPCodec.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abafa372cce7d6f75d99a64a9dd8d41bb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::notifyEgressBodyBuffered </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a9ac88e461ed34742fde46678d52392fc">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02005">2005</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00956">pendingWriteSizeDelta_</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;                                                            {</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a> += bytes;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;  <span class="comment">// any net change requires us to update pause/resume state in the</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;  <span class="comment">// loop callback</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a> &gt; 0) {</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;    <span class="comment">// pause inline, resume in loop</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">updateWriteBufSize</a>(0);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isLoopCallbackScheduled()) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop(<span class="keyword">this</span>);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;  }</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aca40d2fb247e55369cef0e1a94c4e91a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">proxygen::HTTPSession::pendingWriteSizeDelta_</a></div><div class="ttdeci">int64_t pendingWriteSizeDelta_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00956">HTTPSession.h:956</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1cdd56f14df7e2a12dd42f7de1fc868f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">proxygen::HTTPSession::updateWriteBufSize</a></div><div class="ttdeci">void updateWriteBufSize(int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02261">HTTPSession.cpp:2261</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a086a9f6a363899f7d83dff3e822f8bad"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::notifyIngressBodyProcessed </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a81b96f75e461f7e176e3178040486b56">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01994">1994</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00069">proxygen::FlowControlFilter::ingressBytesProcessed()</a>, <a class="el" href="HTTPSessionBase_8cpp_source.html#l00102">proxygen::HTTPSessionBase::notifyBodyProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;                                                               {</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad57d9d8ca3f9020b3bd041aa1bf1c9f8">HTTPSessionBase::notifyBodyProcessed</a>(bytes)) {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">resumeReads</a>();</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;  }</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a> &amp;&amp;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#ab23466dac5f1a5c5cf202d975ce41f2c">ingressBytesProcessed</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, bytes)) {</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;  }</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4fc8e06ea32500b275a03eb1b9829c39"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">proxygen::HTTPSession::resumeReads</a></div><div class="ttdeci">void resumeReads()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02792">HTTPSession.cpp:2792</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad57d9d8ca3f9020b3bd041aa1bf1c9f8"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad57d9d8ca3f9020b3bd041aa1bf1c9f8">proxygen::HTTPSessionBase::notifyBodyProcessed</a></div><div class="ttdeci">bool notifyBodyProcessed(uint32_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8cpp_source.html#l00102">HTTPSessionBase.cpp:102</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_ab23466dac5f1a5c5cf202d975ce41f2c"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#ab23466dac5f1a5c5cf202d975ce41f2c">proxygen::FlowControlFilter::ingressBytesProcessed</a></div><div class="ttdeci">bool ingressBytesProcessed(folly::IOBufQueue &amp;writeBuf, uint32_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00069">FlowControlFilter.cpp:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab181c938399f0bfff3edcb36981c1565"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::notifyPendingEgress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a6f89b92fa724cb3a2591ab01332c18b8">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00453">453</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                                          {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9ae035349c89f5ea79a0bc052926a837"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::notifyPendingShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00458">458</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                                   {</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; notified pending shutdown&quot;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">drain</a>();</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7cf098767599f9b93dced643dd996efb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">proxygen::HTTPSession::drain</a></div><div class="ttdeci">void drain() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02474">HTTPSession.cpp:2474</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a32ded5f1b237ce4aac4dacb8d8844b6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::numIncomingStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of open streams started by the remote side. Parallel codecs with a maximum number of streams will invoke this to determine if a new stream exceeds the limit. </p>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#aad2decb51a53dc21448547ba34b0409a">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00403">403</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8h_source.html#l00940">incomingStreams_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02005">notifyEgressBodyBuffered()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01994">notifyIngressBodyProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00453">notifyPendingEgress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01509">pauseIngress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01527">resumeIngress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01791">sendAbort()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01704">sendChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01713">sendChunkTerminator()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01769">sendEOM()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02525">sendPriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01984">sendWindowUpdate()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00110">statusCode</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01545">transactionTimeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                                               {</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">incomingStreams_</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a64491ffbd72ca47924907cf4c51aa750"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a64491ffbd72ca47924907cf4c51aa750">proxygen::HTTPSession::incomingStreams_</a></div><div class="ttdeci">uint32_t incomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00940">HTTPSession.h:940</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9f475ec074ab357ffeeb614cfe3f83d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::numOutgoingStreams </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the number of open streams started by this codec callback. Parallel codecs with a maximum number of streams will invoke this to determine if a new stream exceeds the limit. </p>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a65779e4b1763aa1daa424f02a5ca3f05">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00400">400</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00935">outgoingStreams_</a>.</p>
<div class="fragment"><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                               {</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">outgoingStreams_</a>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6eb0d2db14d16430ef88861c902b8d85"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6eb0d2db14d16430ef88861c902b8d85">proxygen::HTTPSession::outgoingStreams_</a></div><div class="ttdeci">uint32_t outgoingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00935">HTTPSession.h:935</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3183c78b441791ee835660ffb91ed9f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onAbort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the peer has asked to shut down a stream immediately. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">code</td><td>The code the stream was aborted with </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Not applicable to all protocols. </dd></dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a110afc4d5324a47b9b2f6356afc70bbf">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01163">1163</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36">proxygen::CANCEL</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01048">proxygen::HTTPTransaction::getAssocTxnId()</a>, <a class="el" href="ErrorCode_8cpp_source.html#l00018">proxygen::getErrorCodeString()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01078">proxygen::HTTPTransaction::getExTransactions()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01071">proxygen::HTTPTransaction::getPushedTransactions()</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorStreamAbort</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00535">proxygen::HTTPTransaction::onError()</a>, <a class="el" href="HTTPException_8h_source.html#l00098">proxygen::HTTPException::setCodecStatusCode()</a>, <a class="el" href="Exception_8h_source.html#l00046">proxygen::Exception::setProxygenError()</a>, and <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;                                          {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;stream abort on &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, code=&quot;</span> &lt;&lt; <a class="code" href="namespaceproxygen.html#a000e83246d338052187588fb60069f31">getErrorCodeString</a>(code);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; abort for unrecognized transaction, streamID= &quot;</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;  }</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;  HTTPException ex(<a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;Stream aborted, streamID=&quot;</span>,</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <span class="stringliteral">&quot;, code=&quot;</span>, <a class="code" href="namespaceproxygen.html#a000e83246d338052187588fb60069f31">getErrorCodeString</a>(code)));</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;  ex.setProxygenError(<a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da6e26e85744e3af152c1be71750ec85b0">kErrorStreamAbort</a>);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;  ex.setCodecStatusCode(code);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() &amp;&amp; !txn-&gt;getAssocTxnId() &amp;&amp; code == <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36">ErrorCode::CANCEL</a>) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    <span class="comment">// Cancelling the assoc txn cancels all push txns</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = txn-&gt;getPushedTransactions().begin();</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;         it != txn-&gt;getPushedTransactions().end(); ) {</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;      <span class="keyword">auto</span> pushTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*it);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      ++it;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;      DCHECK(pushTxn != <span class="keyword">nullptr</span>);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      pushTxn-&gt;onError(ex);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;    }</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;  }</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;  <span class="keyword">auto</span> exTxns = txn-&gt;getExTransactions();</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = exTxns.begin(); it != exTxns.end(); ++it) {</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;    <span class="keyword">auto</span> exTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*it);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;    <span class="keywordflow">if</span> (exTxn) {</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;      exTxn-&gt;onError(ex);</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    }</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;  }</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;  txn-&gt;onError(ex);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a000e83246d338052187588fb60069f31"><div class="ttname"><a href="namespaceproxygen.html#a000e83246d338052187588fb60069f31">proxygen::getErrorCodeString</a></div><div class="ttdeci">const char * getErrorCodeString(ErrorCode error)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorCode_8cpp_source.html#l00018">ErrorCode.cpp:18</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba2027c027133e22c8929e2874dc44dd36">proxygen::ErrorCode::CANCEL</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da6e26e85744e3af152c1be71750ec85b0"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da6e26e85744e3af152c1be71750ec85b0">proxygen::kErrorStreamAbort</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4ef5f45a171469eadd34144f3a00802c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname"><em>chain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>padding</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called for each block of message body data </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">chain</td><td>One or more buffers of body data. The codec will remove any protocol framing, such as HTTP/1.1 chunk headers, from the buffers before calling this function. </td></tr>
    <tr><td class="paramname">padding</td><td>Number of pad bytes that came with the data segment </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#af6661786cb419aa6b0138ed1d8085d52">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00970">970</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00069">proxygen::FlowControlFilter::ingressBytesProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPSessionBase_8cpp_source.html#l00079">proxygen::HTTPSessionBase::onBodyImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02769">pauseReads()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                                                               {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;  FOLLY_SCOPED_TRACE_SECTION(<span class="stringliteral">&quot;HTTPSession - onBody&quot;</span>);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;  <span class="comment">// The codec&#39;s parser detected part of the ingress message&#39;s</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;  <span class="comment">// entity-body.</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;  uint64_t length = chain-&gt;computeChainDataLength();</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a> &amp;&amp;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#ab23466dac5f1a5c5cf202d975ce41f2c">ingressBytesProcessed</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, length)) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;  }</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a2401a9244b2ed77c3786c9eec14dd0f4">HTTPSessionBase::onBodyImpl</a>(std::move(chain), length, padding, txn)) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; pausing due to read limit exceeded.&quot;</span>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ae581da85b242f0cf6f4b657b8753894a">pauseReads</a>();</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;  }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae581da85b242f0cf6f4b657b8753894a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae581da85b242f0cf6f4b657b8753894a">proxygen::HTTPSession::pauseReads</a></div><div class="ttdeci">void pauseReads()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02769">HTTPSession.cpp:2769</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a2401a9244b2ed77c3786c9eec14dd0f4"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a2401a9244b2ed77c3786c9eec14dd0f4">proxygen::HTTPSessionBase::onBodyImpl</a></div><div class="ttdeci">bool onBodyImpl(std::unique_ptr&lt; folly::IOBuf &gt; chain, size_t length, uint16_t padding, HTTPTransaction *txn)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8cpp_source.html#l00079">HTTPSessionBase.cpp:79</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_ab23466dac5f1a5c5cf202d975ce41f2c"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#ab23466dac5f1a5c5cf202d975ce41f2c">proxygen::FlowControlFilter::ingressBytesProcessed</a></div><div class="ttdeci">bool ingressBytesProcessed(folly::IOBufQueue &amp;writeBuf, uint32_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00069">FlowControlFilter.cpp:69</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4bdeeff83639f5b0afdec5b2d92ea48d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onCertificate </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of an authenticator, for protocols that support secondary certificate authentication. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">certId</td><td>The Cert-ID identifying this authenticator </td></tr>
    <tr><td class="paramname">authenticator</td><td>The authenticator request </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Not all protocols support secondary certificate authentication. HTTP/2 does, but HTTP/1.1 doesn't. </dd></dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a39962dfe4038936e8042e725e50c2d45">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01384">1384</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">proxygen::DOWNSTREAM</a>, <a class="el" href="HTTPSession_8h_source.html#l00061">getTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSession_8h_source.html#l01057">secondAuthManager_</a>, and <a class="el" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">proxygen::UPSTREAM</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                                                                    {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;CERTIFICATE on&quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, certId=&quot;</span> &lt;&lt; certId;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;  }</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;  <span class="keywordtype">bool</span> isValid = <span class="keyword">false</span>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;  <span class="keyword">auto</span> fizzBase = <a class="code" href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">getTransport</a>()-&gt;getUnderlyingTransport&lt;AsyncFizzBase&gt;();</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;  <span class="keywordflow">if</span> (fizzBase) {</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>()) {</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      isValid = <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>-&gt;validateAuthenticator(</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;          *fizzBase,</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;          <a class="code" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">TransportDirection::UPSTREAM</a>,</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;          certId,</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;          std::move(authenticator));</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      isValid = <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>-&gt;validateAuthenticator(</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;          *fizzBase,</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;          <a class="code" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">TransportDirection::DOWNSTREAM</a>,</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;          certId,</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;          std::move(authenticator));</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    }</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Underlying transport does not support secondary &quot;</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;               <span class="stringliteral">&quot;authentication.&quot;</span>;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;  }</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;  <span class="keywordflow">if</span> (isValid) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Successfully validated the authenticator provided by the peer.&quot;</span>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Failed to validate the authenticator provided by the peer&quot;</span>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;  }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9a3bd3fa8d867fec154e90a8d830af35"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">proxygen::HTTPSession::getTransport</a></div><div class="ttdeci">folly::AsyncTransportWrapper * getTransport() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00061">HTTPSession.h:61</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd"><div class="ttname"><a href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">proxygen::TransportDirection::DOWNSTREAM</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518"><div class="ttname"><a href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">proxygen::TransportDirection::UPSTREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f1fa1f46d328890e336be404fa4ce47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">proxygen::HTTPSession::secondAuthManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SecondaryAuthManager &gt; secondAuthManager_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01057">HTTPSession.h:1057</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae98209dbf84dc096fb2ace705407fd47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onCertificateRequest </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a certificate request frame, for protocols that support secondary certificate authentication. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">requestId</td><td>The Request-ID identifying the certificate request </td></tr>
    <tr><td class="paramname">authRequest</td><td>The authenticator request </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Not all protocols support secondary certificate authentication. HTTP/2 does, but HTTP/1.1 doesn't. </dd></dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a982896bcd896ea45a10b03a294ded590">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01347">1347</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">proxygen::DOWNSTREAM</a>, <a class="el" href="HTTPCodec_8h_source.html#l00642">proxygen::HTTPCodec::generateCertificate()</a>, <a class="el" href="HTTPSession_8h_source.html#l00061">getTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8h_source.html#l01057">secondAuthManager_</a>, <a class="el" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">proxygen::UPSTREAM</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                                                                         {</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;CERTIFICATE_REQUEST on&quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, requestId=&quot;</span> &lt;&lt; requestId;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;  }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;  std::pair&lt;uint16_t, std::unique_ptr&lt;folly::IOBuf&gt;&gt; authenticator;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;  <span class="keyword">auto</span> fizzBase = <a class="code" href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">getTransport</a>()-&gt;getUnderlyingTransport&lt;AsyncFizzBase&gt;();</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;  <span class="keywordflow">if</span> (fizzBase) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>()) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;      authenticator =</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;          <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>-&gt;getAuthenticator(*fizzBase,</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                                               <a class="code" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">TransportDirection::UPSTREAM</a>,</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                                               requestId,</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;                                               std::move(authRequest));</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      authenticator =</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;          <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>-&gt;getAuthenticator(*fizzBase,</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;                                               <a class="code" href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">TransportDirection::DOWNSTREAM</a>,</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;                                               requestId,</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;                                               std::move(authRequest));</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;    }</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Underlying transport does not support secondary &quot;</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;               <span class="stringliteral">&quot;authentication.&quot;</span>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;  }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a42e1829f46f87baab24becc3ec93b0c8">generateCertificate</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;                                  authenticator.first,</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;                                  std::move(authenticator.second)) &gt; 0) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  }</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9a3bd3fa8d867fec154e90a8d830af35"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">proxygen::HTTPSession::getTransport</a></div><div class="ttdeci">folly::AsyncTransportWrapper * getTransport() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00061">HTTPSession.h:61</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd"><div class="ttname"><a href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daf8e7627f40cd51bcb234401511c640fd">proxygen::TransportDirection::DOWNSTREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a42e1829f46f87baab24becc3ec93b0c8"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a42e1829f46f87baab24becc3ec93b0c8">proxygen::HTTPCodec::generateCertificate</a></div><div class="ttdeci">virtual size_t generateCertificate(folly::IOBufQueue &amp;, uint16_t, std::unique_ptr&lt; folly::IOBuf &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00642">HTTPCodec.h:642</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518"><div class="ttname"><a href="namespaceproxygen.html#a00b4cbb0c54e966bfd87e0e7cb1cb33daef9d7023c0ca8728326a6a7205686518">proxygen::TransportDirection::UPSTREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f1fa1f46d328890e336be404fa4ce47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">proxygen::HTTPSession::secondAuthManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SecondaryAuthManager &gt; secondAuthManager_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01057">HTTPSession.h:1057</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a201f8d42c3a6754e2743b5e5661b901e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onChunkComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when the terminating CRLF is received to end a chunk of HTTP body data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#aad1fa297ee8929ea5032b7037956198b">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01018">1018</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, and <a class="el" href="HTTPTransaction_8cpp_source.html#l00335">proxygen::HTTPTransaction::onIngressChunkComplete()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                                                            {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;  <span class="comment">// The codec&#39;s parser detected the end of the message body chunk</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;  <span class="comment">// associated with the most recent call to onChunkHeader().</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;  }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;  txn-&gt;onIngressChunkComplete();</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3137afb711666467861a8d61d9f15824"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onChunkHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called for each HTTP chunk header.</p>
<p><a class="el" href="classproxygen_1_1HTTPSession.html#a3137afb711666467861a8d61d9f15824">onChunkHeader()</a> will be called when the chunk header is received. As the chunk data arrives, it will be passed to the callback normally with <a class="el" href="classproxygen_1_1HTTPSession.html#a4ef5f45a171469eadd34144f3a00802c">onBody()</a> calls. Note that the chunk data may arrive in multiple <a class="el" href="classproxygen_1_1HTTPSession.html#a4ef5f45a171469eadd34144f3a00802c">onBody()</a> calls: it is not guaranteed to arrive in a single <a class="el" href="classproxygen_1_1HTTPSession.html#a4ef5f45a171469eadd34144f3a00802c">onBody()</a> call.</p>
<p>After the chunk data has been received and the terminating CRLF has been received, <a class="el" href="classproxygen_1_1HTTPSession.html#a201f8d42c3a6754e2743b5e5661b901e">onChunkComplete()</a> will be called.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">length</td><td>The chunk length. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#ae106b662c7e855b4677ec55d4235e66d">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00993">993</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, and <a class="el" href="HTTPTransaction_8cpp_source.html#l00309">proxygen::HTTPTransaction::onIngressChunkHeader()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                                               {</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;  <span class="comment">// The codec&#39;s parser detected a chunk header (meaning that this</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;  <span class="comment">// connection probably is HTTP/1.1).</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;  <span class="comment">// After calling onChunkHeader(), the codec will call onBody() zero</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;  <span class="comment">// or more times and then call onChunkComplete().</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;  <span class="comment">// The reason for this callback on the chunk header is to support</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;  <span class="comment">// an optimization.  In general, the job of the codec is to present</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;  <span class="comment">// the HTTPSession with an abstract view of a message,</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;  <span class="comment">// with all the details of wire formatting hidden.  However, there&#39;s</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;  <span class="comment">// one important case where we want to know about chunking: reverse</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;  <span class="comment">// proxying where both the client and server streams are HTTP/1.1.</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;  <span class="comment">// In that scenario, we preserve the server&#39;s chunk boundaries when</span></div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;  <span class="comment">// sending the response to the client, in order to avoid possibly</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;  <span class="comment">// making the egress packetization worse by rechunking.</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;  }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;  txn-&gt;onIngressChunkHeader(length);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8073b08df1319efb31f35fc64268d60a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onConnectionSendWindowClosed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1FlowControlFilter_1_1Callback.html#ab226241c68d175d41d4465af4c2cf757">proxygen::FlowControlFilter::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02892">2892</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00137">proxygen::HTTP2PriorityQueue::empty()</a>, <a class="el" href="HTTPSession_8h_source.html#l01022">flowControlTimeout_</a>, <a class="el" href="HTTPSession_8h_source.html#l01011">proxygen::HTTPSession::FlowControlTimeout::getTimeoutDuration()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00076">proxygen::HTTPSessionBase::InfoCallback::onFlowControlWindowClosed()</a>, <a class="el" href="classproxygen_1_1HTTPSessionStats.html#a0dcc0a5eb3676131ed6128d680052108">proxygen::HTTPSessionStats::recordSessionStalled()</a>, <a class="el" href="WheelTimerInstance_8cpp_source.html#l00059">proxygen::WheelTimerInstance::scheduleTimeout()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00543">proxygen::HTTPSessionBase::sessionStats_</a>, <a class="el" href="HTTPSession_8h_source.html#l00701">timeout_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;                                               {</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>()) {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; session stalled by flow control&quot;</span>;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a>) {</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionStats.html#a0dcc0a5eb3676131ed6128d680052108">recordSessionStalled</a>();</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    }</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  }</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;  DCHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.isScheduled());</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ab66b8a8337d478b390ac8688c4d903b4">onFlowControlWindowClosed</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  }</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;  <span class="keyword">auto</span> timeout = <a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.<a class="code" href="classproxygen_1_1HTTPSession_1_1FlowControlTimeout.html#a2541f897a1161dd1ac4ad0160295310e">getTimeoutDuration</a>();</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;  <span class="keywordflow">if</span> (timeout != std::chrono::milliseconds(0)) {</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">scheduleTimeout</a>(&amp;<a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>, timeout);</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">scheduleTimeout</a>(&amp;<a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>);</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;  }</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad0b3818288824506c5a3abb23101f439"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">proxygen::HTTP2PriorityQueue::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00137">HTTP2PriorityQueue.h:137</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionStats_html_a0dcc0a5eb3676131ed6128d680052108"><div class="ttname"><a href="classproxygen_1_1HTTPSessionStats.html#a0dcc0a5eb3676131ed6128d680052108">proxygen::HTTPSessionStats::recordSessionStalled</a></div><div class="ttdeci">virtual void recordSessionStalled() noexcept=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_1_1FlowControlTimeout_html_a2541f897a1161dd1ac4ad0160295310e"><div class="ttname"><a href="classproxygen_1_1HTTPSession_1_1FlowControlTimeout.html#a2541f897a1161dd1ac4ad0160295310e">proxygen::HTTPSession::FlowControlTimeout::getTimeoutDuration</a></div><div class="ttdeci">std::chrono::milliseconds getTimeoutDuration() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01011">HTTPSession.h:1011</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_a9c1db79a186f24aee623e9d46b91e898"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">proxygen::WheelTimerInstance::scheduleTimeout</a></div><div class="ttdeci">void scheduleTimeout(folly::HHWheelTimer::Callback *callback, std::chrono::milliseconds timeout)</div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8cpp_source.html#l00059">WheelTimerInstance.cpp:59</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a19770f973e94f1a2ced58dcd064040ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">proxygen::HTTPSession::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00701">HTTPSession.h:701</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1466339f2e2dd5bfcb4aeb3ce7c6c39b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">proxygen::HTTPSessionBase::sessionStats_</a></div><div class="ttdeci">HTTPSessionStats * sessionStats_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00543">HTTPSessionBase.h:543</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">proxygen::HTTPSession::flowControlTimeout_</a></div><div class="ttdeci">FlowControlTimeout flowControlTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01022">HTTPSession.h:1022</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_ab66b8a8337d478b390ac8688c4d903b4"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ab66b8a8337d478b390ac8688c4d903b4">proxygen::HTTPSessionBase::InfoCallback::onFlowControlWindowClosed</a></div><div class="ttdeci">virtual void onFlowControlWindowClosed(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00076">HTTPSessionBase.h:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf2d1ccc7eab9fe9a157bbf0999d73a4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onConnectionSendWindowOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Callback function from the flow control filter if the full window becomes not full. </p>

<p>Implements <a class="el" href="classproxygen_1_1FlowControlFilter_1_1Callback.html#a177ffe967dcc7969454c1a42ebc6f0d0">proxygen::FlowControlFilter::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02886">2886</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01022">flowControlTimeout_</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;                                             {</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.cancelTimeout();</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  <span class="comment">// We can write more now. Schedule a write.</span></div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">proxygen::HTTPSession::flowControlTimeout_</a></div><div class="ttdeci">FlowControlTimeout flowControlTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01022">HTTPSession.h:1022</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3d2b7bdd5d59059cee9b566553db91f1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onDeleteAckEvent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1ByteEventTracker_1_1Callback.html#a66e469488f7fc0ea0ccd333a7b90ecbe">proxygen::ByteEventTracker::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02942">2942</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00767">isConnWindowFull()</a>.</p>
<div class="fragment"><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;                                            {</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()) {</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty());</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  }</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab0bf53cea09153535c0f04b3cbaf6d21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onEgressBufferCleared </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02954">2954</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00078">proxygen::HTTPSessionBase::InfoCallback::onEgressBufferCleared()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;                                        {</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#af8dc68bb0ec10bd02db3bde20997487a">onEgressBufferCleared</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  }</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_af8dc68bb0ec10bd02db3bde20997487a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#af8dc68bb0ec10bd02db3bde20997487a">proxygen::HTTPSessionBase::InfoCallback::onEgressBufferCleared</a></div><div class="ttdeci">virtual void onEgressBufferCleared(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00078">HTTPSessionBase.h:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab2f721e17c15de3c3b8f0e6332c71933"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onEgressBuffered </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02948">2948</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00077">proxygen::HTTPSessionBase::InfoCallback::onEgressBuffered()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;                                   {</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6cdbdca31f5dd40a4c25935f48dc0d67">onEgressBuffered</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;  }</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a6cdbdca31f5dd40a4c25935f48dc0d67"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6cdbdca31f5dd40a4c25935f48dc0d67">proxygen::HTTPSessionBase::InfoCallback::onEgressBuffered</a></div><div class="ttdeci">virtual void onEgressBuffered(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00077">HTTPSessionBase.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5aa7681b3dffcccf4cae4d2dbf36cfa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onEgressMessageFinished </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>withRST</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when the transaction finishes sending a message and appropriately shuts down reads and/or writes with respect to downstream or upstream semantics. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01722">1722</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00576">proxygen::HTTPTransaction::getMaxDeferredSize()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00471">proxygen::HTTPTransaction::getSequenceNumber()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01887">maybeResumePausedPipelinedTransaction()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00061">proxygen::HTTPSessionBase::InfoCallback::onRequestEnd()</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l00718">resetAfterDrainingWrites_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8h_source.html#l01000">shutdownTransportCb_</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02">proxygen::TRANSACTION_ABORT</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01791">sendAbort()</a>.</p>
<div class="fragment"><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;                                                                       {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;  <span class="comment">// If the semantics of the protocol don&#39;t permit more messages</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;  <span class="comment">// to be read or sent on this connection, close the socket in one or</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;  <span class="comment">// more directions.</span></div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty());</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a8c4d2a9bbead78138714918c20e558d5">onRequestEnd</a>(*<span class="keyword">this</span>, txn-&gt;getMaxDeferredSize());</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;  }</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  <span class="keyword">auto</span> oldStreamCount = <a class="code" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a>();</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">decrementTransactionCount</a>(txn, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;  <span class="keywordflow">if</span> (withRST || ((!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>() || <a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()) &amp;&amp;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                  <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.size() == 1)) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;    <span class="comment">// We should shutdown reads if we are closing with RST or we aren&#39;t</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;    <span class="comment">// interested in any further messages (ie if we are a downstream session).</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;    <span class="comment">// Upgraded sessions have independent ingress and egress, and the reads</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="comment">// need not be shutdown on egress finish.</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">if</span> (withRST) {</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <span class="comment">// Let any queued writes complete, but send a RST when done.</span></div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;      VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; resetting egress after this message&quot;</span>;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aec31815c425ec8ab1aa94988eb9e79a5">resetAfterDrainingWrites_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02">ConnectionCloseReason::TRANSACTION_ABORT</a>);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;      <span class="comment">// the reason is already set (either not reusable or readshutdown).</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      <span class="comment">// Defer normal shutdowns until the end of the loop.  This</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="comment">// handles an edge case with direct responses with Connection:</span></div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="comment">// close served before ingress EOM.  The remainder of the ingress</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="comment">// message may be in the parse loop, so give it a chance to</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;      <span class="comment">// finish out and avoid a kErrorEOF</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="comment">// we can get here during shutdown, in that case do not schedule a</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      <span class="comment">// shutdown callback again</span></div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        <span class="comment">// Just for safety, the following bumps the refcount on this session</span></div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;        <span class="comment">// to keep it live until the loopCb runs</span></div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>.reset(<span class="keyword">new</span> ShutdownTransportCallback(<span class="keyword">this</span>));</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop(<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>.get(), <span class="keyword">true</span>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      }</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    }</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a071fbeb84224d7e88ddc7a4d4c96f429">maybeResumePausedPipelinedTransaction</a>(oldStreamCount,</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                                          txn-&gt;getSequenceNumber());</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;  }</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7f79405657f8c7970a7c2aefebbfc512"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">proxygen::HTTPSession::getPipelineStreamCount</a></div><div class="ttdeci">size_t getPipelineStreamCount() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00837">HTTPSession.h:837</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02">proxygen::ConnectionCloseReason::TRANSACTION_ABORT</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2e8db93bfcc5b41ec095428c62f23c95"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">proxygen::HTTPSession::decrementTransactionCount</a></div><div class="ttdeci">void decrementTransactionCount(HTTPTransaction *txn, bool ingressEOM, bool egressEOM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01866">HTTPSession.cpp:1866</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aec31815c425ec8ab1aa94988eb9e79a5"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aec31815c425ec8ab1aa94988eb9e79a5">proxygen::HTTPSession::resetAfterDrainingWrites_</a></div><div class="ttdeci">bool resetAfterDrainingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00718">HTTPSession.h:718</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a071fbeb84224d7e88ddc7a4d4c96f429"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a071fbeb84224d7e88ddc7a4d4c96f429">proxygen::HTTPSession::maybeResumePausedPipelinedTransaction</a></div><div class="ttdeci">bool maybeResumePausedPipelinedTransaction(size_t oldStreamCount, uint32_t txnSeqn)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01887">HTTPSession.cpp:1887</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae8b034c072c3eebdfea9a3718a5edb8f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">proxygen::HTTPSession::shutdownTransportCb_</a></div><div class="ttdeci">std::unique_ptr&lt; ShutdownTransportCallback &gt; shutdownTransportCb_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01000">HTTPSession.h:1000</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a8c4d2a9bbead78138714918c20e558d5"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a8c4d2a9bbead78138714918c20e558d5">proxygen::HTTPSessionBase::InfoCallback::onRequestEnd</a></div><div class="ttdeci">virtual void onRequestEnd(const HTTPSessionBase &amp;, uint32_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00061">HTTPSessionBase.h:61</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab44f22d1c1900f583f4e8584fb2f0105"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>newTxn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a parsing or protocol error has occurred </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">error</td><td>Description of the error </td></tr>
    <tr><td class="paramname">newTxn</td><td>true if onMessageBegin has not been called for txn </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a39e04260da7dd1a074393fe473d6ac34">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01099">1099</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00503">proxygen::HTTPTransaction::getEgressState()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00484">proxygen::HTTPTransaction::getHandler()</a>, <a class="el" href="HTTPSessionBase_8cpp_source.html#l00117">proxygen::HTTPSessionBase::handleErrorDirectly()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l00719">ingressError_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorMessage</a>, <a class="el" href="HTTPCodec_8h_source.html#l00066">proxygen::HTTPCodec::NoExAttributes</a>, <a class="el" href="HTTPCodec_8h_source.html#l00051">proxygen::HTTPCodec::NoStream</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00535">proxygen::HTTPTransaction::onError()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00056">proxygen::HTTPSessionBase::InfoCallback::onIngressError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02754">onNewTransactionParseError()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00060">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02738">onSessionParseError()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">proxygen::SESSION_PARSE_ERROR</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00899">onHeadersComplete()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00813">onPushMessageBegin()</a>.</p>
<div class="fragment"><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                                                                   {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;  <span class="comment">// The codec detected an error in the ingress stream, possibly bad</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;  <span class="comment">// syntax, a truncated message, or bad semantics in the frame.  If reads</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;  <span class="comment">// are paused, queue up the event; otherwise, process it now.</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Error on &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; error;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">ingressError_</a>) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;  }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">// this error should only prevent us from reading/handling more errors</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;    <span class="comment">// on serial streams</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">ingressError_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">ConnectionCloseReason::SESSION_PARSE_ERROR</a>);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;  }</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;  <span class="keywordflow">if</span> ((<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> == 0) &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">onIngressError</a>(*<span class="keyword">this</span>, <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da89951aa9e35076b79ba9d7ec254a32ab">kErrorMessage</a>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;  }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">ingressError_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a64dbb1a5aebced260bcd58985ed18de8">onSessionParseError</a>(error);</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;  }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    <span class="keywordflow">if</span> (error.hasHttpStatusCode() &amp;&amp; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> != 0) {</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="comment">// If the error has an HTTP code, then parsing was fine, it just was</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="comment">// illegal in a higher level way</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      txn = <a class="code" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>,</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                              <a class="code" href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">HTTPCodec::NoExAttributes</a>);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">onRequestBegin</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      }</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <span class="keywordflow">if</span> (txn) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a500facae2064dce0fc02ca08d5b35c9b">handleErrorDirectly</a>(txn, error);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;      }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (newTxn) {</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a8ae5da6c95ed842ddf2a0d8e83397478">onNewTransactionParseError</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, error);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; parse error with invalid transaction&quot;</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;  }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;  <span class="keywordflow">if</span> (!txn-&gt;getHandler() &amp;&amp;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      txn-&gt;getEgressState() == HTTPTransactionEgressSM::State::Start) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a500facae2064dce0fc02ca08d5b35c9b">handleErrorDirectly</a>(txn, error);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  txn-&gt;onError(error);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty()) {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;shutdown from onError&quot;</span>;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">ConnectionCloseReason::SESSION_PARSE_ERROR</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;  }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dfa230066871e4512642fcc63534cd6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">proxygen::HTTPSession::createTransaction</a></div><div class="ttdeci">HTTPTransaction * createTransaction(HTTPCodec::StreamID streamID, const folly::Optional&lt; HTTPCodec::StreamID &gt; &amp;assocStreamID, const folly::Optional&lt; HTTPCodec::ExAttributes &gt; &amp;exAttributes, const http2::PriorityUpdate &amp;priority=http2::DefaultPriority)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02567">HTTPSession.cpp:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da89951aa9e35076b79ba9d7ec254a32ab"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da89951aa9e35076b79ba9d7ec254a32ab">proxygen::kErrorMessage</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a8ae5da6c95ed842ddf2a0d8e83397478"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a8ae5da6c95ed842ddf2a0d8e83397478">proxygen::HTTPSession::onNewTransactionParseError</a></div><div class="ttdeci">void onNewTransactionParseError(HTTPCodec::StreamID streamID, const HTTPException &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02754">HTTPSession.cpp:2754</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a70c2187725e9ed9504596dfbb3bd8c1a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">proxygen::HTTPSessionBase::InfoCallback::onIngressError</a></div><div class="ttdeci">virtual void onIngressError(const HTTPSessionBase &amp;, ProxygenError)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00056">HTTPSessionBase.h:56</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">proxygen::ConnectionCloseReason::SESSION_PARSE_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a500facae2064dce0fc02ca08d5b35c9b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a500facae2064dce0fc02ca08d5b35c9b">proxygen::HTTPSessionBase::handleErrorDirectly</a></div><div class="ttdeci">void handleErrorDirectly(HTTPTransaction *txn, const HTTPException &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8cpp_source.html#l00117">HTTPSessionBase.cpp:117</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a64dbb1a5aebced260bcd58985ed18de8"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a64dbb1a5aebced260bcd58985ed18de8">proxygen::HTTPSession::onSessionParseError</a></div><div class="ttdeci">void onSessionParseError(const HTTPException &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02738">HTTPSession.cpp:2738</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab551ec1bec2f37c3e83b8da35634b48c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">proxygen::HTTPCodec::NoStream</a></div><div class="ttdeci">static const folly::Optional&lt; StreamID &gt; NoStream</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00051">HTTPCodec.h:51</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af9b8fc565cfb8e86162b22921995e08b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">proxygen::HTTPSession::ingressError_</a></div><div class="ttdeci">bool ingressError_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00719">HTTPSession.h:719</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_aa3829f04f4f5503f5ef10f57ff781ae9"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin</a></div><div class="ttdeci">virtual void onRequestBegin(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00060">HTTPSessionBase.h:60</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_aeef645636d1d9736d1006c58313500ad"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">proxygen::HTTPCodec::NoExAttributes</a></div><div class="ttdeci">static const folly::Optional&lt; ExAttributes &gt; NoExAttributes</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00066">HTTPCodec.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a597d69aedaebffdb4c442ca9d1d6408b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onExMessageBegin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a new extended message is seen while parsing the ingress.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">controlStream</td><td>The stream ID of the associated stream, which can never be 0 </td></tr>
    <tr><td class="paramname">msg</td><td>A newly allocated <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#abe873557040a9184715f7f5a47c863a1">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00860">860</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ERROR</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00737">getMessagePriority()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00905">proxygen::HTTPTransaction::isIngressPaused()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00051">proxygen::HTTPCodec::NoStream</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00060">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin()</a>, and <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">proxygen::PROTOCOL_ERROR</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                                                {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;processing new ExMessage=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; on controlStream=&quot;</span> &lt;&lt; controlStream &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">onRequestBegin</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  <span class="keywordflow">if</span> (controlStream == 0) {</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    LOG(<a class="code" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;ExMessage=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &lt;&lt; <span class="stringliteral">&quot; should have an active control &quot;</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;               &lt;&lt; <span class="stringliteral">&quot;stream=&quot;</span> &lt;&lt; controlStream &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">ErrorCode::PROTOCOL_ERROR</a>);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  HTTPTransaction* controlTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(controlStream);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keywordflow">if</span> (!controlTxn) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment">// control stream is broken, or remote sends a bogus stream id</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    LOG(<a class="code" href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">ERROR</a>) &lt;&lt; <span class="stringliteral">&quot;no control stream=&quot;</span> &lt;&lt; controlStream &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;  }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  http2::PriorityUpdate messagePriority = <a class="code" href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">getMessagePriority</a>(msg);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  <span class="keyword">auto</span> txn = <a class="code" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>,</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                               <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>,</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                               HTTPCodec::ExAttributes(controlStream,</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                                                       unidirectional),</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                               messagePriority);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// This could happen if the socket is bad.</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;  }</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;  <span class="comment">// control stream may be paused if the upstream is not ready yet</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;  <span class="keywordflow">if</span> (controlTxn-&gt;isIngressPaused()) {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    txn-&gt;pauseIngress();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;  }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dfa230066871e4512642fcc63534cd6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">proxygen::HTTPSession::createTransaction</a></div><div class="ttdeci">HTTPTransaction * createTransaction(HTTPCodec::StreamID streamID, const folly::Optional&lt; HTTPCodec::StreamID &gt; &amp;assocStreamID, const folly::Optional&lt; HTTPCodec::ExAttributes &gt; &amp;exAttributes, const http2::PriorityUpdate &amp;priority=http2::DefaultPriority)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02567">HTTPSession.cpp:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">proxygen::ErrorCode::PROTOCOL_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a58e8277f3fdd50bc8496c79018b21987"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">proxygen::HTTPSession::getMessagePriority</a></div><div class="ttdeci">http2::PriorityUpdate getMessagePriority(const HTTPMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00737">HTTPSession.cpp:737</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5"><div class="ttname"><a href="namespaceproxygen.html#ab18179a16a0bebed81cf3f62dff11064abb1ca97ec761fc37101737ba0aa2e7c5">proxygen::ZstdStatusType::ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab551ec1bec2f37c3e83b8da35634b48c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">proxygen::HTTPCodec::NoStream</a></div><div class="ttdeci">static const folly::Optional&lt; StreamID &gt; NoStream</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00051">HTTPCodec.h:51</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_aa3829f04f4f5503f5ef10f57ff781ae9"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin</a></div><div class="ttdeci">virtual void onRequestBegin(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00060">HTTPSessionBase.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a22d185dd9d6777d445ae30269345c942"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onGoaway </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname"> = <code><a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a goaway. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lastGoodStreamID</td><td>Last successful stream created by the receiver </td></tr>
    <tr><td class="paramname">code</td><td>The code the connection was aborted with </td></tr>
    <tr><td class="paramname">debugData</td><td>The additional debug data for diagnostic purpose </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Not all protocols have goaways. SPDY does, but HTTP/1.1 doesn't. </dd></dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a782493dc0d063e7f5c626db2617d042b">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01199">1199</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02853">errorOnTransactionId()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02834">errorOnTransactionIds()</a>, <a class="el" href="ErrorCode_8cpp_source.html#l00018">proxygen::getErrorCodeString()</a>, <a class="el" href="ProxygenErrorEnum_8cpp_source.html#l00025">proxygen::getErrorString()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a21c426cbdb92c2439053c570eb511c30">proxygen::GOAWAY</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorStreamUnacknowledged</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::NO_ERROR</a>, <a class="el" href="HTTPCodec_8h_source.html#l00051">proxygen::HTTPCodec::NoStream</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00609">proxygen::HTTPTransaction::onGoaway()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="Exception_8h_source.html#l00046">proxygen::Exception::setProxygenError()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;                                                                {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;  DestructorGuard g(<span class="keyword">this</span>);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;GOAWAY on &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, code=&quot;</span> &lt;&lt; <a class="code" href="namespaceproxygen.html#a000e83246d338052187588fb60069f31">getErrorCodeString</a>(code);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a21c426cbdb92c2439053c570eb511c30">ConnectionCloseReason::GOAWAY</a>);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;  <span class="comment">// Drain active transactions and prevent new transactions</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">drain</a>();</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;  <span class="comment">// We give the less-forceful onGoaway() first so that transactions have</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;  <span class="comment">// a chance to do stat tracking before potentially getting a forceful</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;  <span class="comment">// onError().</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(&amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#a5aa84f5d6023b600935a8ff16177e28a">HTTPTransaction::onGoaway</a>, code);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;  <span class="comment">// Abort transactions which have been initiated but not created</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;  <span class="comment">// successfully at the remote end. Upstream transactions are created</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;  <span class="comment">// with odd transaction IDs and downstream transactions with even IDs.</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;  vector&lt;HTTPCodec::StreamID&gt; ids;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;  <span class="keyword">auto</span> firstStream = <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; txn: <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>) {</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keyword">auto</span> <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> = txn.first;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">if</span> (((<span class="keywordtype">bool</span>)(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &amp; 0x01) == <a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>()) &amp;&amp;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        (<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &gt; lastGoodStreamID)) {</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      <span class="keywordflow">if</span> (firstStream == <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        <span class="comment">// transactions_ is a set so it should be sorted by stream id.</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;        <span class="comment">// We will defer adding the firstStream to the id list until</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="comment">// we can determine whether we have a codec error code.</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;        firstStream = <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      ids.push_back(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    }</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;  }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;  <span class="keywordflow">if</span> (firstStream != <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a> &amp;&amp; code != <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">ErrorCode::NO_ERROR</a>) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <span class="comment">// If we get a codec error, we will attempt to blame the first stream</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <span class="comment">// by delivering a specific error to it and let the rest of the streams</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <span class="comment">// get a normal unacknowledged stream error.</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;    <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a> err = <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dae17549298750704ddfd2c5bd68dd0684">kErrorStreamUnacknowledged</a>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="keywordtype">string</span> debugInfo = (debugData) ?</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      folly::to&lt;string&gt;(<span class="stringliteral">&quot; with debug info: &quot;</span>, (<span class="keywordtype">char</span>*)debugData-&gt;data()) : <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    HTTPException ex(<a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      folly::to&lt;std::string&gt;(<a class="code" href="namespaceproxygen.html#a8d8e670251d6f1b9c63431fd2d9d912e">getErrorString</a>(err),</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;        <span class="stringliteral">&quot; on transaction id: &quot;</span>, *firstStream,</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;        <span class="stringliteral">&quot; with codec error: &quot;</span>, <a class="code" href="namespaceproxygen.html#a000e83246d338052187588fb60069f31">getErrorCodeString</a>(code),</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;        debugInfo));</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    ex.setProxygenError(err);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a36534e5e65f672c5757334d53ec2087f">errorOnTransactionId</a>(*firstStream, std::move(ex));</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (firstStream != <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    ids.push_back(*firstStream);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;  }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a0c80a7af521add6b6710e4462856b700">errorOnTransactionIds</a>(ids, <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dae17549298750704ddfd2c5bd68dd0684">kErrorStreamUnacknowledged</a>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a313e95bd7ff25e8565b8f915bf9333ce"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">proxygen::HTTPSession::invokeOnAllTransactions</a></div><div class="ttdeci">void invokeOnAllTransactions(void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00586">HTTPSession.h:586</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a36534e5e65f672c5757334d53ec2087f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a36534e5e65f672c5757334d53ec2087f">proxygen::HTTPSession::errorOnTransactionId</a></div><div class="ttdeci">void errorOnTransactionId(HTTPCodec::StreamID id, HTTPException ex)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02853">HTTPSession.cpp:2853</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a21c426cbdb92c2439053c570eb511c30"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a21c426cbdb92c2439053c570eb511c30">proxygen::ConnectionCloseReason::GOAWAY</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::ErrorCode::NO_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_a5aa84f5d6023b600935a8ff16177e28a"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#a5aa84f5d6023b600935a8ff16177e28a">proxygen::HTTPTransaction::onGoaway</a></div><div class="ttdeci">void onGoaway(ErrorCode code)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l00609">HTTPTransaction.cpp:609</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956dae17549298750704ddfd2c5bd68dd0684"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dae17549298750704ddfd2c5bd68dd0684">proxygen::kErrorStreamUnacknowledged</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7cf098767599f9b93dced643dd996efb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7cf098767599f9b93dced643dd996efb">proxygen::HTTPSession::drain</a></div><div class="ttdeci">void drain() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02474">HTTPSession.cpp:2474</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a000e83246d338052187588fb60069f31"><div class="ttname"><a href="namespaceproxygen.html#a000e83246d338052187588fb60069f31">proxygen::getErrorCodeString</a></div><div class="ttdeci">const char * getErrorCodeString(ErrorCode error)</div><div class="ttdef"><b>Definition:</b> <a href="ErrorCode_8cpp_source.html#l00018">ErrorCode.cpp:18</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0c80a7af521add6b6710e4462856b700"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0c80a7af521add6b6710e4462856b700">proxygen::HTTPSession::errorOnTransactionIds</a></div><div class="ttdeci">void errorOnTransactionIds(const std::vector&lt; HTTPCodec::StreamID &gt; &amp;ids, ProxygenError err, const std::string &amp;extraErrorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02834">HTTPSession.cpp:2834</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab551ec1bec2f37c3e83b8da35634b48c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">proxygen::HTTPCodec::NoStream</a></div><div class="ttdeci">static const folly::Optional&lt; StreamID &gt; NoStream</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00051">HTTPCodec.h:51</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956d"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">proxygen::ProxygenError</a></div><div class="ttdeci">ProxygenError</div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00075">ProxygenErrorEnum.h:75</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a8d8e670251d6f1b9c63431fd2d9d912e"><div class="ttname"><a href="namespaceproxygen.html#a8d8e670251d6f1b9c63431fd2d9d912e">proxygen::getErrorString</a></div><div class="ttdeci">const char * getErrorString(ProxygenError error)</div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8cpp_source.html#l00025">ProxygenErrorEnum.cpp:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a01cf2e4876e0d44c1b7974833bef3272"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onHeadersComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &gt;&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when all the headers of an ingress message have been parsed </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">msg</td><td>The message </td></tr>
    <tr><td class="paramname">size</td><td>Size of the ingress header </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a7c462d2b3485d0d1077a9ba775f90ebc">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00899">899</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01056">proxygen::HTTPTransaction::getControlStream()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00760">proxygen::HTTPTransaction::isRemoteInitiated()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00067">proxygen::HTTPSessionBase::InfoCallback::onIngressMessage()</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374">proxygen::REFUSED_STREAM</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a8286701e6ad7f545d758e3fb34aabb84">proxygen::REQ_NOTREUSABLE</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPException_8h_source.html#l00098">proxygen::HTTPException::setCodecStatusCode()</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#ae180c928b2d55c4e227a1629d8b8a511">setupOnHeadersComplete()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                                                            {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;  <span class="comment">// The codec&#39;s parser detected the end of an ingress message&#39;s</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;  <span class="comment">// headers.</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;processing ingress headers complete for &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="stringliteral">&quot;, streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>()) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a8286701e6ad7f545d758e3fb34aabb84">ConnectionCloseReason::REQ_NOTREUSABLE</a>);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;  }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa702f67c5f2f1a181e7de903f0f5668d">onIngressMessage</a>(*<span class="keyword">this</span>, *msg.get());</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;  }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* sslCipher =</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslCipher ? <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslCipher-&gt;c_str() : <span class="keyword">nullptr</span>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;  msg-&gt;setSecureInfo(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslVersion, sslCipher);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;  msg-&gt;setSecure(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.secure);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;  <span class="keyword">auto</span> controlStreamID = txn-&gt;getControlStream();</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;  <span class="keywordflow">if</span> (controlStreamID) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keyword">auto</span> controlTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*controlStreamID);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (!controlTxn) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      VLOG(2) &lt;&lt; <span class="stringliteral">&quot;txn=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &lt;&lt; <span class="stringliteral">&quot; with a broken controlTxn=&quot;</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;              &lt;&lt; *controlStreamID &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      HTTPException ex(</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;          <a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;          folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;broken controlTxn &quot;</span>, *controlStreamID));</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">onError</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, ex, <span class="keyword">true</span>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// Call onExTransaction() only for requests.</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordflow">if</span> (txn-&gt;isRemoteInitiated() &amp;&amp; !controlTxn-&gt;onExTransaction(txn)) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      VLOG(2) &lt;&lt; <span class="stringliteral">&quot;Failed to add exTxn=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; to controlTxn=&quot;</span> &lt;&lt; *controlStreamID &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      HTTPException ex(</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;          <a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;          folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;Fail to add exTxn &quot;</span>, <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>));</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      ex.setCodecStatusCode(<a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374">ErrorCode::REFUSED_STREAM</a>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">onError</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, ex, <span class="keyword">true</span>);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ae180c928b2d55c4e227a1629d8b8a511">setupOnHeadersComplete</a>(txn, msg.get());</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;  }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;  <span class="comment">// The txn may have already been aborted by the handler.</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;  <span class="comment">// Verify that the txn still exists before ingress callbacks.</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;  txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;  }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;  <span class="keywordflow">if</span> (!txn-&gt;getHandler()) {</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    txn-&gt;sendAbort();</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;  }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;  <span class="comment">// Tell the Transaction to start processing the message now</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;  <span class="comment">// that the full ingress headers have arrived.</span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;  txn-&gt;onIngressHeadersComplete(std::move(msg));</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae180c928b2d55c4e227a1629d8b8a511"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae180c928b2d55c4e227a1629d8b8a511">proxygen::HTTPSession::setupOnHeadersComplete</a></div><div class="ttdeci">virtual void setupOnHeadersComplete(HTTPTransaction *txn, HTTPMessage *msg)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_aa702f67c5f2f1a181e7de903f0f5668d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa702f67c5f2f1a181e7de903f0f5668d">proxygen::HTTPSessionBase::InfoCallback::onIngressMessage</a></div><div class="ttdeci">virtual void onIngressMessage(const HTTPSessionBase &amp;, const HTTPMessage &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00067">HTTPSessionBase.h:67</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374">proxygen::ErrorCode::REFUSED_STREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a8286701e6ad7f545d758e3fb34aabb84"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a8286701e6ad7f545d758e3fb34aabb84">proxygen::ConnectionCloseReason::REQ_NOTREUSABLE</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab44f22d1c1900f583f4e8584fb2f0105"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">proxygen::HTTPSession::onError</a></div><div class="ttdeci">void onError(HTTPCodec::StreamID streamID, const HTTPException &amp;error, bool newTxn) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01099">HTTPSession.cpp:1099</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af9ed177276be468c39890fd444d3b38c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proxygen::HTTPSession::onHeadersSent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked when headers have been sent. </p>

<p>Reimplemented in <a class="el" href="classproxygen_1_1HTTPDownstreamSession.html#a31074b29a9d0287158c721de87b5ba58">proxygen::HTTPDownstreamSession</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00302">302</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">allTransactionsStarted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00712">getCodecSendWindowSize()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02543">sendPriorityImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00722">setNewTransactionPauseState()</a>, and <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;              {}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a262d04adeb8feb2c1bf6ebb5159b67d6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onLastByteEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>eomTracked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1ByteEventTracker_1_1Callback.html#a2089b3b9335dbc03598f35a007821883">proxygen::ByteEventTracker::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02974">2974</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00767">isConnWindowFull()</a>.</p>
<div class="fragment"><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;                                                                        {</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;isEorTrackingEnabled() || !eomTracked) {</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;  }</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;  <span class="keywordflow">if</span> (eomOffset != <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getAppBytesWritten()) {</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;tracking ack to last app byte &quot;</span> &lt;&lt; eomOffset</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; while &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getAppBytesWritten()</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; app bytes have already been written&quot;</span>;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;  }</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;tracking raw last byte &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getRawBytesWritten()</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; while the app last byte is &quot;</span> &lt;&lt; eomOffset;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;addAckByteEvent(<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getRawBytesWritten(), txn);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a4087a0c6fbfbb6a419dff46c0d3517"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onMessageBegin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a new message is seen while parsing the ingress </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">msg</td><td>A newly allocated <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a7bcd0c639fd05f92b31806cee4f4b1aa">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00758">758</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00737">getMessagePriority()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l01011">proxygen::HTTPTransaction::isPushed()</a>, <a class="el" href="HTTPSession_8h_source.html#l00697">liveTransactions_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00066">proxygen::HTTPCodec::NoExAttributes</a>, <a class="el" href="HTTPCodec_8h_source.html#l00051">proxygen::HTTPCodec::NoStream</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00535">proxygen::HTTPTransaction::onError()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00060">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin()</a>, <a class="el" href="HTTPSession_8h_source.html#l00632">readsPaused()</a>, <a class="el" href="HTTPSession_8h_source.html#l00628">readsUnpaused()</a>, <a class="el" href="HTTPException_8h_source.html#l00098">proxygen::HTTPException::setCodecStatusCode()</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba795fcd4a9695a63ff230ad23d4122917">proxygen::STREAM_CLOSED</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                                                                        {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;processing new msg streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">onRequestBegin</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">if</span> (txn) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() &amp;&amp; txn-&gt;isPushed()) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <span class="comment">// Push streams are unidirectional (half-closed). If the downstream</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="comment">// attempts to send ingress, abort with STREAM_CLOSED error.</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      HTTPException ex(<a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                       <span class="stringliteral">&quot;Downstream attempts to send ingress, abort.&quot;</span>);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      ex.setCodecStatusCode(<a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba795fcd4a9695a63ff230ad23d4122917">ErrorCode::STREAM_CLOSED</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      txn-&gt;onError(ex);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// If this transaction is already registered, no need to add it now</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;  }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;  http2::PriorityUpdate messagePriority = <a class="code" href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">getMessagePriority</a>(msg);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  txn = <a class="code" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">HTTPCodec::NoStream</a>,</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                          <a class="code" href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">HTTPCodec::NoExAttributes</a>, messagePriority);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// This could happen if the socket is bad.</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;  }</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a>() &gt; 1) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="comment">// The previous transaction hasn&#39;t completed yet. Pause reads until</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    <span class="comment">// it completes; this requires pausing both transactions.</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    <span class="comment">// HTTP/1.1 pipeline is detected, and which is incompactible with</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;    <span class="comment">// ByteEventTracker. Drain all the ByteEvents</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;drainByteEvents();</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="comment">// drainByteEvents() may detach txn(s). Don&#39;t pause read if one txn left</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">getPipelineStreamCount</a>() &lt; 2) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      DCHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">readsUnpaused</a>());</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    }</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="comment">// There must be at least two transactions (we just checked). The previous</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    <span class="comment">// txns haven&#39;t completed yet. Pause reads until they complete</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    DCHECK_GE(<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.size(), 2);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = ++<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.rbegin(); it != <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.rend(); ++it) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      DCHECK(it-&gt;second.isIngressEOMSeen());</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      it-&gt;second.pauseIngress();</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.rbegin()-&gt;second.pauseIngress();</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    DCHECK_EQ(<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>, 0);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    DCHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a5726d375dce946aff7f5b83c2822bc83">readsPaused</a>());</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7f79405657f8c7970a7c2aefebbfc512"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7f79405657f8c7970a7c2aefebbfc512">proxygen::HTTPSession::getPipelineStreamCount</a></div><div class="ttdeci">size_t getPipelineStreamCount() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00837">HTTPSession.h:837</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac0ccab551f9639248c3a0557a04b0b47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">proxygen::HTTPSession::readsUnpaused</a></div><div class="ttdeci">bool readsUnpaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00628">HTTPSession.h:628</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dfa230066871e4512642fcc63534cd6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">proxygen::HTTPSession::createTransaction</a></div><div class="ttdeci">HTTPTransaction * createTransaction(HTTPCodec::StreamID streamID, const folly::Optional&lt; HTTPCodec::StreamID &gt; &amp;assocStreamID, const folly::Optional&lt; HTTPCodec::ExAttributes &gt; &amp;exAttributes, const http2::PriorityUpdate &amp;priority=http2::DefaultPriority)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02567">HTTPSession.cpp:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a5726d375dce946aff7f5b83c2822bc83"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a5726d375dce946aff7f5b83c2822bc83">proxygen::HTTPSession::readsPaused</a></div><div class="ttdeci">bool readsPaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00632">HTTPSession.h:632</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a58e8277f3fdd50bc8496c79018b21987"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">proxygen::HTTPSession::getMessagePriority</a></div><div class="ttdeci">http2::PriorityUpdate getMessagePriority(const HTTPMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00737">HTTPSession.cpp:737</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a47f5ec6835388f0c485cf435bc972c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">proxygen::HTTPSession::liveTransactions_</a></div><div class="ttdeci">uint32_t liveTransactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00697">HTTPSession.h:697</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba795fcd4a9695a63ff230ad23d4122917"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba795fcd4a9695a63ff230ad23d4122917">proxygen::ErrorCode::STREAM_CLOSED</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab551ec1bec2f37c3e83b8da35634b48c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab551ec1bec2f37c3e83b8da35634b48c">proxygen::HTTPCodec::NoStream</a></div><div class="ttdeci">static const folly::Optional&lt; StreamID &gt; NoStream</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00051">HTTPCodec.h:51</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_aeef645636d1d9736d1006c58313500ad"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">proxygen::HTTPCodec::NoExAttributes</a></div><div class="ttdeci">static const folly::Optional&lt; ExAttributes &gt; NoExAttributes</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00066">HTTPCodec.h:66</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_aa3829f04f4f5503f5ef10f57ff781ae9"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin</a></div><div class="ttdeci">virtual void onRequestBegin(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00060">HTTPSessionBase.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a564c10e0a4a6fbf287eed792501337f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onMessageComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>upgrade</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called at end of a message (including body and trailers, if applicable) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">upgrade</td><td>Whether the connection has been upgraded to another protocol. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a8b42c169cc7f48b42be7f97b463db08e">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01041">1041</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00554">proxygen::HTTPTransaction::extraResponseExpected()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l01049">ingressUpgraded_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00515">proxygen::HTTPTransaction::isDownstream()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00413">proxygen::HTTPTransaction::onIngressEOM()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00388">proxygen::HTTPTransaction::onIngressUpgrade()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00131">streamID</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>, and <a class="el" href="namespaceproxygen.html#a7feed732013b7cc0e2213b19c7b82745ab136ef5f6a01d816991fe3cf7a6ac763">proxygen::TCP</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                                             {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;  <span class="comment">// The codec&#39;s parser detected the end of the ingress message for</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;  <span class="comment">// this transaction.</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;processing ingress message complete for &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    <span class="stringliteral">&quot;, streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;  }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;  <span class="keywordflow">if</span> (upgrade) {</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <span class="comment">/* Send the upgrade callback to the transaction and the handler.</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">     * Currently we support upgrades for only HTTP sessions and not SPDY</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">     * sessions.</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ac83695509c095c66650708aaecd21400">ingressUpgraded_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    txn-&gt;onIngressUpgrade(<a class="code" href="namespaceproxygen.html#a7feed732013b7cc0e2213b19c7b82745ab136ef5f6a01d816991fe3cf7a6ac763">UpgradeProtocol::TCP</a>);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;  }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;  <span class="comment">// txnIngressFinished = !1xx response</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> txnIngressFinished =</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    txn-&gt;isDownstream() || !txn-&gt;extraResponseExpected();</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;  <span class="keywordflow">if</span> (txnIngressFinished) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">decrementTransactionCount</a>(txn, <span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;  }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;  txn-&gt;onIngressEOM();</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;  <span class="comment">// The codec knows, based on the semantics of whatever protocol it</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;  <span class="comment">// supports, whether it&#39;s valid for any more ingress messages to arrive</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;  <span class="comment">// after this one.  For example, an HTTP/1.1 request containing</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;  <span class="comment">// &quot;Connection: close&quot; indicates the end of the ingress, whereas a</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;  <span class="comment">// SPDY session generally can handle more messages at any time.</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;  <span class="comment">// If the connection is not reusable, we close the read side of it</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;  <span class="comment">// but not the write side.  There are two reasons why more writes</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;  <span class="comment">// may occur after this point:</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;  <span class="comment">//   * If there are previous writes buffered up in the pendingWrites_</span></div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;  <span class="comment">//     queue, we need to attempt to complete them.</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;  <span class="comment">//   * The Handler associated with the transaction may want to</span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;  <span class="comment">//     produce more egress data when the ingress message is fully</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;  <span class="comment">//     complete.  (As a common example, an application that handles</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;  <span class="comment">//     form POSTs may not be able to even start generating a response</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;  <span class="comment">//     until it has received the full request body.)</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">// There may be additional checks that need to be performed that are</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;  <span class="comment">// specific to requests or responses, so we call the subclass too.</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>() &amp;&amp;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      txnIngressFinished &amp;&amp;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      !<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; cannot reuse ingress&quot;</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;  }</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a7feed732013b7cc0e2213b19c7b82745ab136ef5f6a01d816991fe3cf7a6ac763"><div class="ttname"><a href="namespaceproxygen.html#a7feed732013b7cc0e2213b19c7b82745ab136ef5f6a01d816991fe3cf7a6ac763">proxygen::UpgradeProtocol::TCP</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2e8db93bfcc5b41ec095428c62f23c95"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2e8db93bfcc5b41ec095428c62f23c95">proxygen::HTTPSession::decrementTransactionCount</a></div><div class="ttdeci">void decrementTransactionCount(HTTPTransaction *txn, bool ingressEOM, bool egressEOM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01866">HTTPSession.cpp:1866</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac83695509c095c66650708aaecd21400"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac83695509c095c66650708aaecd21400">proxygen::HTTPSession::ingressUpgraded_</a></div><div class="ttdeci">bool ingressUpgraded_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01049">HTTPSession.h:1049</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a21c24124cbf0b80891dadba2192c5443"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::onNativeProtocolUpgradeImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPCodec.html">HTTPCodec</a> &gt;&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>protocolString</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01421">1421</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00712">getCodecSendWindowSize()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00680">proxygen::HTTPCodec::getDefaultWindowSize()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::INITIAL_WINDOW_SIZE</a>, <a class="el" href="HTTPSession_8h_source.html#l00976">initialReceiveWindow_</a>, <a class="el" href="HTTPSession_8h_source.html#l00930">maxConcurrentIncomingStreams_</a>, <a class="el" href="HTTPSession_8h_source.html#l00924">maxConcurrentOutgoingStreamsRemote_</a>, <a class="el" href="HTTPSessionBase_8cpp_source.html#l00060">proxygen::HTTPSessionBase::onCodecChanged()</a>, <a class="el" href="HTTPSession_8h_source.html#l00978">receiveSessionWindowSize_</a>, <a class="el" href="HTTPSession_8h_source.html#l00977">receiveStreamWindowSize_</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00149">proxygen::HTTPTransaction::reset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01503">sendSettings()</a>, <a class="el" href="FilterChain_8h_source.html#l00260">proxygen::FilterChain&lt; T1, T2, FilterType, set_callback, TakeOwnership &gt;::setDestination()</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00044">proxygen::FlowControlFilter::setReceiveWindowSize()</a>, <a class="el" href="HTTPSettings_8cpp_source.html#l00016">proxygen::HTTPSettings::setSetting()</a>, <a class="el" href="test_8c_source.html#l01529">settings</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00367">proxygen::HTTPCodec::supportsStreamFlowControl()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00106">proxygen::HTTPDownstreamSession::onNativeProtocolUpgrade()</a>, and <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00128">proxygen::HTTPUpstreamSession::onNativeProtocolUpgrade()</a>.</p>
<div class="fragment"><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;                                   {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;  CHECK_EQ(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, 1);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;  CHECK(txn);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;  <span class="comment">// only HTTP1xCodec calls onNativeProtocolUpgrade</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>());</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;  <span class="comment">// Reset to  defaults</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">maxConcurrentIncomingStreams_</a> = 100;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a> = 10000;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;  <span class="comment">// overwrite destination, delay current codec deletion until the end</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;  <span class="comment">// of the event loop</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;  <span class="keyword">auto</span> oldCodec = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>.<a class="code" href="classproxygen_1_1FilterChain.html#a9fb71919f20e105649530b95a3170b8f">setDestination</a>(std::move(codec));</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop([oldCodec = std::move(oldCodec)] () {});</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a5aa4d5ee64ecbf3041f7137dff7de265">onCodecChanged</a>();</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a1b6ff36da42045dd70278f3862a8ff8e">setupCodec</a>();</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;  <span class="comment">// txn will be streamID=1, have to make a placeholder</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;  (void)<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">createStream</a>();</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;  <span class="comment">// This can happen if flow control was not explicitly set, and it got the</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;  <span class="comment">// HTTP1xCodec defaults.  Reset to the new codec default</span></div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a> == 0 || <a class="code" href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">receiveStreamWindowSize_</a> == 0 ||</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">receiveSessionWindowSize_</a> == 0) {</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a> = <a class="code" href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">receiveStreamWindowSize_</a> =</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">receiveSessionWindowSize_</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#af4516328c1b427f975f86909cd3ed01e">getDefaultWindowSize</a>();</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;  }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;  <span class="comment">// trigger settings frame that would have gone out in startNow()</span></div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;  HTTPSettings* <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;  <span class="keywordflow">if</span> (settings) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;    settings-&gt;<a class="code" href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">setSetting</a>(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">SettingsId::INITIAL_WINDOW_SIZE</a>,</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                         <a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a>);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;  }</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a85a0e02025ed4dbf075761698f277f91">sendSettings</a>();</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>) {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a1a9cd3f414379ab670d92cd59cf2a43e">setReceiveWindowSize</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                                           <a class="code" href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">receiveSessionWindowSize_</a>);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;  }</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;  <span class="comment">// Convert the transaction that contained the Upgrade header</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;  txn-&gt;reset(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a1b6c4fc3583b01651c19c16a6eb2c12d">supportsStreamFlowControl</a>(),</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;             <a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a>,</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;             <a class="code" href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">receiveStreamWindowSize_</a>,</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;             <a class="code" href="classproxygen_1_1HTTPSession.html#a812803459bbdfc56b7f75cf6a5cf9916">getCodecSendWindowSize</a>());</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.secure &amp;&amp;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;      (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.appProtocol ||</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;       <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.appProtocol-&gt;empty())) {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.appProtocol = std::make_shared&lt;string&gt;(</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      protocolString);</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;  }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a85a0e02025ed4dbf075761698f277f91"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a85a0e02025ed4dbf075761698f277f91">proxygen::HTTPSession::sendSettings</a></div><div class="ttdeci">size_t sendSettings() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01503">HTTPSession.cpp:1503</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a5aa4d5ee64ecbf3041f7137dff7de265"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a5aa4d5ee64ecbf3041f7137dff7de265">proxygen::HTTPSessionBase::onCodecChanged</a></div><div class="ttdeci">void onCodecChanged()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8cpp_source.html#l00060">HTTPSessionBase.cpp:60</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_acf86dd965f7732f70403449d11bddcbe"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream</a></div><div class="ttdeci">virtual StreamID createStream()=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa73dd8103a1fb5e6872fc5be1c68074b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">proxygen::HTTPSession::receiveSessionWindowSize_</a></div><div class="ttdeci">size_t receiveSessionWindowSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00978">HTTPSession.h:978</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_a1a9cd3f414379ab670d92cd59cf2a43e"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#a1a9cd3f414379ab670d92cd59cf2a43e">proxygen::FlowControlFilter::setReceiveWindowSize</a></div><div class="ttdeci">void setReceiveWindowSize(folly::IOBufQueue &amp;writeBuf, uint32_t capacity)</div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00044">FlowControlFilter.cpp:44</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a812803459bbdfc56b7f75cf6a5cf9916"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a812803459bbdfc56b7f75cf6a5cf9916">proxygen::HTTPSession::getCodecSendWindowSize</a></div><div class="ttdeci">size_t getCodecSendWindowSize() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00712">HTTPSession.cpp:712</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_abc226c0df6041bba580806abb129fb04"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">proxygen::HTTPSession::receiveStreamWindowSize_</a></div><div class="ttdeci">size_t receiveStreamWindowSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00977">HTTPSession.h:977</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a413ea44bdc24970646f7de55683f2cd7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">proxygen::HTTPSession::initialReceiveWindow_</a></div><div class="ttdeci">size_t initialReceiveWindow_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00976">HTTPSession.h:976</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1b45a7c1cdf90d9d8e7425055d7ab24c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">proxygen::HTTPSession::maxConcurrentIncomingStreams_</a></div><div class="ttdeci">uint32_t maxConcurrentIncomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00930">HTTPSession.h:930</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad5433004842e58bc21e71d0219bd2153"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_</a></div><div class="ttdeci">uint32_t maxConcurrentOutgoingStreamsRemote_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00924">HTTPSession.h:924</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a1b6c4fc3583b01651c19c16a6eb2c12d"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a1b6c4fc3583b01651c19c16a6eb2c12d">proxygen::HTTPCodec::supportsStreamFlowControl</a></div><div class="ttdeci">virtual bool supportsStreamFlowControl() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00367">HTTPCodec.h:367</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_af4516328c1b427f975f86909cd3ed01e"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#af4516328c1b427f975f86909cd3ed01e">proxygen::HTTPCodec::getDefaultWindowSize</a></div><div class="ttdeci">virtual uint32_t getDefaultWindowSize() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00680">HTTPCodec.h:680</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1b6ff36da42045dd70278f3862a8ff8e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1b6ff36da42045dd70278f3862a8ff8e">proxygen::HTTPSession::setupCodec</a></div><div class="ttdeci">void setupCodec()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00243">HTTPSession.cpp:243</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::SettingsId::INITIAL_WINDOW_SIZE</a></div></div>
<div class="ttc" id="classproxygen_1_1FilterChain_html_a9fb71919f20e105649530b95a3170b8f"><div class="ttname"><a href="classproxygen_1_1FilterChain.html#a9fb71919f20e105649530b95a3170b8f">proxygen::FilterChain::setDestination</a></div><div class="ttdeci">std::unique_ptr&lt; T1 &gt; setDestination(std::unique_ptr&lt; T1 &gt; destination)</div><div class="ttdef"><b>Definition:</b> <a href="FilterChain_8h_source.html#l00260">FilterChain.h:260</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSettings_html_af5fd0957f06ce721b9749c5f2e7f78f4"><div class="ttname"><a href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">proxygen::HTTPSettings::setSetting</a></div><div class="ttdeci">void setSetting(SettingsId id, SettingsValue val)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8cpp_source.html#l00016">HTTPSettings.cpp:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ae5da6c95ed842ddf2a0d8e83397478"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onNewTransactionParseError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>streamID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send a transaction abort and leave the session and transport intact. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02754">2754</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#adfb41670b50d0608a8beb934494109be">proxygen::HTTPCodec::generateRstStream()</a>, <a class="el" href="HTTPException_8h_source.html#l00101">proxygen::HTTPException::getCodecStatusCode()</a>, <a class="el" href="HTTPException_8h_source.html#l00095">proxygen::HTTPException::hasCodecStatusCode()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">proxygen::SESSION_PARSE_ERROR</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                                                                         {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; parse error with new transaction&quot;</span>;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;  <span class="keywordflow">if</span> (error.hasCodecStatusCode()) {</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#adfb41670b50d0608a8beb934494109be">generateRstStream</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, error.getCodecStatusCode());</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  }</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>()) {</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;    <span class="comment">// HTTP 1x codec does not support per stream abort so this will</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;    <span class="comment">// render the codec not reusable</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">ConnectionCloseReason::SESSION_PARSE_ERROR</a>);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  }</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">proxygen::ConnectionCloseReason::SESSION_PARSE_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_adfb41670b50d0608a8beb934494109be"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#adfb41670b50d0608a8beb934494109be">proxygen::HTTPCodec::generateRstStream</a></div><div class="ttdeci">virtual size_t generateRstStream(folly::IOBufQueue &amp;writeBuf, StreamID stream, ErrorCode code)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1ce7c717bb5a5e5410a3f7f2506cd8a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onPingReply </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a ping reply </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uniqueID</td><td>Unique identifier for the ping </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Not all protocols have pings. SPDY does, but HTTP/1.1 doesn't. </dd></dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a6ebe6de42080d9b8834f48add6f63553">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01278">1278</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00073">proxygen::HTTPSessionBase::InfoCallback::onPingReplyReceived()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                                               {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; got ping reply with id=&quot;</span> &lt;&lt; uniqueID;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ad7617353818d3256e6d78fdba0ed1de3">onPingReplyReceived</a>();</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;  }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_ad7617353818d3256e6d78fdba0ed1de3"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ad7617353818d3256e6d78fdba0ed1de3">proxygen::HTTPSessionBase::InfoCallback::onPingReplyReceived</a></div><div class="ttdeci">virtual void onPingReplyReceived()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00073">HTTPSessionBase.h:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a63363dd6eb679673b1f548176994f4c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onPingReplyLatency </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>latency</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1ByteEventTracker_1_1Callback.html#a2dbef0abec0b00ac3a2a53eafaf19bcd">proxygen::ByteEventTracker::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02936">2936</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00072">proxygen::HTTPSessionBase::InfoCallback::onPingReplySent()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00767">isConnWindowFull()</a>.</p>
<div class="fragment"><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;                                                             {</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a> &amp;&amp; latency &gt;= 0) {</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a874680017fa938358bf73fc8d0d5f894">onPingReplySent</a>(latency);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  }</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a874680017fa938358bf73fc8d0d5f894"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a874680017fa938358bf73fc8d0d5f894">proxygen::HTTPSessionBase::InfoCallback::onPingReplySent</a></div><div class="ttdeci">virtual void onPingReplySent(int64_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00072">HTTPSessionBase.h:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab5e3ba18cca07e6e6bfff73e1d549c21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onPingRequest </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a ping request </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">uniqueID</td><td>Unique identifier for the ping </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Not all protocols have pings. SPDY does, but HTTP/1.1 doesn't. </dd></dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a1740eddb4466d8d9a411f558d37c7d39">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01259">1259</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSession_8h_source.html#l00950">bytesScheduled_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00584">proxygen::HTTPCodec::generatePingReply()</a>, <a class="el" href="Time_8h_source.html#l00041">proxygen::getCurrentTime()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                                                 {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; got ping request with id=&quot;</span> &lt;&lt; uniqueID;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <a class="code" href="namespaceproxygen.html#ab1ccd825f69c99dd89b92765687b8d27">TimePoint</a> timestamp = <a class="code" href="namespaceproxygen.html#a09b325f9c0aa18197dfeebb7f0533a49">getCurrentTime</a>();</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="comment">// Insert the ping reply to the head of writeBuf_</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;  folly::IOBufQueue pingBuf(folly::IOBufQueue::cacheChainLength());</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#aeb8c597c8604bc7159e58b74c1874de3">generatePingReply</a>(pingBuf, uniqueID);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;  <span class="keywordtype">size_t</span> pingSize = pingBuf.chainLength();</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;  pingBuf.append(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.move());</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.append(pingBuf.move());</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;addPingByteEvent(pingSize, timestamp, <a class="code" href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">bytesScheduled_</a>);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;  }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_aeb8c597c8604bc7159e58b74c1874de3"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aeb8c597c8604bc7159e58b74c1874de3">proxygen::HTTPCodec::generatePingReply</a></div><div class="ttdeci">virtual size_t generatePingReply(folly::IOBufQueue &amp;, uint64_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00584">HTTPCodec.h:584</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a07c84a0d9fdce8ead342f0058e8233be"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">proxygen::HTTPSession::bytesScheduled_</a></div><div class="ttdeci">uint64_t bytesScheduled_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00950">HTTPSession.h:950</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ab1ccd825f69c99dd89b92765687b8d27"><div class="ttname"><a href="namespaceproxygen.html#ab1ccd825f69c99dd89b92765687b8d27">proxygen::TimePoint</a></div><div class="ttdeci">SteadyClock::time_point TimePoint</div><div class="ttdef"><b>Definition:</b> <a href="Time_8h_source.html#l00025">Time.h:25</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a09b325f9c0aa18197dfeebb7f0533a49"><div class="ttname"><a href="namespaceproxygen.html#a09b325f9c0aa18197dfeebb7f0533a49">proxygen::getCurrentTime</a></div><div class="ttdeci">std::chrono::time_point&lt; ClockType &gt; getCurrentTime()</div><div class="ttdef"><b>Definition:</b> <a href="Time_8h_source.html#l00041">Time.h:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1da743cba2417a010d2d1fa7a7333f79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onPriority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPMessage.html#a488cdeffada45d57bf30cf2b9059bd5a">HTTPMessage::HTTPPriority</a> &amp;&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a priority frame, for protocols that support dynamic priority </p>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#aa3960bf891965283f9a99797af9e99b3">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01330">1330</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00444">proxygen::HTTP2PriorityQueue::addOrUpdatePriorityNode()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00114">getHTTP2PrioritiesEnabled()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                                                                 {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">getHTTP2PrioritiesEnabled</a>()) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;  }</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;  http2::PriorityUpdate h2Pri{std::get&lt;0&gt;(pri), std::get&lt;1&gt;(pri),</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      std::get&lt;2&gt;(pri)};</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;  <span class="keywordflow">if</span> (txn) {</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;    <span class="comment">// existing txn, change pri</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    txn-&gt;onPriorityUpdate(h2Pri);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    <span class="comment">// virtual node</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a67e4c47f7b598513ecf028605336135a">addOrUpdatePriorityNode</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, h2Pri);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;  }</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a177d9f43b8dcd75a09ccbe02a2f00498"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">proxygen::HTTPSession::getHTTP2PrioritiesEnabled</a></div><div class="ttdeci">bool getHTTP2PrioritiesEnabled() const override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00114">HTTPSession.h:114</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a67e4c47f7b598513ecf028605336135a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a67e4c47f7b598513ecf028605336135a">proxygen::HTTP2PriorityQueue::addOrUpdatePriorityNode</a></div><div class="ttdeci">void addOrUpdatePriorityNode(HTTPCodec::StreamID id, http2::PriorityUpdate pri)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00444">HTTP2PriorityQueue.cpp:444</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac22c3f0f0f6c3162a805150faeae3577"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onPushMessageBegin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when a new push message is seen while parsing the ingress.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">assocStream</td><td>The stream ID of the associated stream, which can never be 0 </td></tr>
    <tr><td class="paramname">msg</td><td>A newly allocated <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a2a54bb421215a2929e2c8ee0d2112032">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00813">813</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00737">getMessagePriority()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="HTTPTransaction_8h_source.html#l00731">proxygen::HTTPTransaction::isIngressEOMSeen()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00066">proxygen::HTTPCodec::NoExAttributes</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01274">proxygen::HTTPTransaction::onPushedTransaction()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00060">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin()</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">proxygen::PROTOCOL_ERROR</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374">proxygen::REFUSED_STREAM</a>, and <a class="el" href="HTTPException_8h_source.html#l00098">proxygen::HTTPException::setCodecStatusCode()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                                                  {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;processing new push promise streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; on assocStreamID=&quot;</span> &lt;&lt; assocStreamID &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">onRequestBegin</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;  }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;  <span class="keywordflow">if</span> (assocStreamID == 0) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;push promise &quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &lt;&lt; <span class="stringliteral">&quot; should be associated with &quot;</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;an active stream=&quot;</span> &lt;&lt; assocStreamID &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">ErrorCode::PROTOCOL_ERROR</a>);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  }</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>()) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;push promise cannot be sent to upstream &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">ErrorCode::PROTOCOL_ERROR</a>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;  }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;  HTTPTransaction* assocTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(assocStreamID);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;  <span class="keywordflow">if</span> (!assocTxn || assocTxn-&gt;isIngressEOMSeen()) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    VLOG(2) &lt;&lt; <span class="stringliteral">&quot;cannot find the assocTxn=&quot;</span> &lt;&lt; assocTxn</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, or assoc stream is already closed by upstream&quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">ErrorCode::PROTOCOL_ERROR</a>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;  }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;  http2::PriorityUpdate messagePriority = <a class="code" href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">getMessagePriority</a>(msg);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  <span class="keyword">auto</span> txn = <a class="code" href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">createTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, assocStreamID,</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                               <a class="code" href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">HTTPCodec::NoExAttributes</a>, messagePriority);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <span class="keywordflow">return</span>;  <span class="comment">// This could happen if the socket is bad.</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  <span class="keywordflow">if</span> (!assocTxn-&gt;onPushedTransaction(txn)) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    VLOG(1) &lt;&lt; <span class="stringliteral">&quot;Failed to add pushed txn &quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; to assoc txn &quot;</span> &lt;&lt; assocStreamID &lt;&lt; <span class="stringliteral">&quot; on &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    HTTPException ex(<a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a>,</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;Failed to add pushed transaction &quot;</span>, <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>));</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    ex.setCodecStatusCode(<a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374">ErrorCode::REFUSED_STREAM</a>);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">onError</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>, ex, <span class="keyword">true</span>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dfa230066871e4512642fcc63534cd6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dfa230066871e4512642fcc63534cd6">proxygen::HTTPSession::createTransaction</a></div><div class="ttdeci">HTTPTransaction * createTransaction(HTTPCodec::StreamID streamID, const folly::Optional&lt; HTTPCodec::StreamID &gt; &amp;assocStreamID, const folly::Optional&lt; HTTPCodec::ExAttributes &gt; &amp;exAttributes, const http2::PriorityUpdate &amp;priority=http2::DefaultPriority)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02567">HTTPSession.cpp:2567</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba23f149f0f9ae9ed9e0119e7209178a5d">proxygen::ErrorCode::PROTOCOL_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a58e8277f3fdd50bc8496c79018b21987"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">proxygen::HTTPSession::getMessagePriority</a></div><div class="ttdeci">http2::PriorityUpdate getMessagePriority(const HTTPMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00737">HTTPSession.cpp:737</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9ba3e2449dc6a7f4aee6278f70865604374">proxygen::ErrorCode::REFUSED_STREAM</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab44f22d1c1900f583f4e8584fb2f0105"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab44f22d1c1900f583f4e8584fb2f0105">proxygen::HTTPSession::onError</a></div><div class="ttdeci">void onError(HTTPCodec::StreamID streamID, const HTTPException &amp;error, bool newTxn) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01099">HTTPSession.cpp:1099</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_aeef645636d1d9736d1006c58313500ad"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aeef645636d1d9736d1006c58313500ad">proxygen::HTTPCodec::NoExAttributes</a></div><div class="ttdeci">static const folly::Optional&lt; ExAttributes &gt; NoExAttributes</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00066">HTTPCodec.h:66</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_aa3829f04f4f5503f5ef10f57ff781ae9"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#aa3829f04f4f5503f5ef10f57ff781ae9">proxygen::HTTPSessionBase::InfoCallback::onRequestBegin</a></div><div class="ttdeci">virtual void onRequestBegin(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00060">HTTPSessionBase.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae436dca1500823b949fb266db3c2ac29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onReplaySafe </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Callback from the transport to this <a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a> to signal when the transport has become replay safe. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02960">2960</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00055">proxygen::HTTPSessionBase::InfoCallback::onFullHandshakeCompletion()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00848">waitingForReplaySafety_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00824">needToBlockForReplaySafety()</a>.</p>
<div class="fragment"><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;                                        {</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;setReplaySafetyCallback(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a395c152f9be3a661cc6de07ce43c2475">onFullHandshakeCompletion</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;  }</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> callback : <a class="code" href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">waitingForReplaySafety_</a>) {</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;    callback-&gt;onReplaySafe();</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;  }</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;  waitingForReplaySafety_.clear();</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a395c152f9be3a661cc6de07ce43c2475"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a395c152f9be3a661cc6de07ce43c2475">proxygen::HTTPSessionBase::InfoCallback::onFullHandshakeCompletion</a></div><div class="ttdeci">virtual void onFullHandshakeCompletion(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00055">HTTPSessionBase.h:55</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae0f18679ebd4860a833b6195b5a743e6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">proxygen::HTTPSession::waitingForReplaySafety_</a></div><div class="ttdeci">std::list&lt; ReplaySafetyCallback * &gt; waitingForReplaySafety_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00848">HTTPSession.h:848</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a64dbb1a5aebced260bcd58985ed18de8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onSessionParseError </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPException.html">HTTPException</a> &amp;&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send a session layer abort and shutdown the transport for reads and writes. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02738">2738</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway()</a>, <a class="el" href="HTTPException_8h_source.html#l00101">proxygen::HTTPException::getCodecStatusCode()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00675">proxygen::HTTPCodec::getLastIncomingStreamID()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol()</a>, <a class="el" href="HTTPException_8h_source.html#l00095">proxygen::HTTPException::hasCodecStatusCode()</a>, <a class="el" href="CodecProtocol_8cpp_source.html#l00078">proxygen::isHTTP2CodecProtocol()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">proxygen::SESSION_PARSE_ERROR</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="Exception_8cpp_source.html#l00026">proxygen::Exception::what()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                                                                {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; session layer parse error. Terminate the session.&quot;</span>;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;  <span class="keywordflow">if</span> (error.hasCodecStatusCode()) {</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;    std::unique_ptr&lt;folly::IOBuf&gt; errorMsg =</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;      folly::IOBuf::copyBuffer(error.what());</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">generateGoaway</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;                           <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">getLastIncomingStreamID</a>(),</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;                           error.getCodecStatusCode(),</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                           <a class="code" href="namespaceproxygen.html#a805a889c6d02d3310e7f45ab5174f0b5">isHTTP2CodecProtocol</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">getProtocol</a>()) ?</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;                           std::move(errorMsg) : <a class="code" href="http__parser_8c.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>);</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;  }</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">ConnectionCloseReason::SESSION_PARSE_ERROR</a>);</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667abc8291e3bfd7bc90d6b646914e71e20a">proxygen::ConnectionCloseReason::SESSION_PARSE_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a3818f5333dbb3c19312984ac5f069969"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol</a></div><div class="ttdeci">virtual CodecProtocol getProtocol() const =0</div></div>
<div class="ttc" id="http__parser_8c_html_ab979d9d4b4923f7c54d6caa6e1a61936"><div class="ttname"><a href="http__parser_8c.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a></div><div class="ttdeci">#define nullptr</div><div class="ttdef"><b>Definition:</b> <a href="http__parser_8c_source.html#l00041">http_parser.c:41</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a206f96e3fa41268060203738be887942"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">proxygen::HTTPCodec::getLastIncomingStreamID</a></div><div class="ttdeci">virtual StreamID getLastIncomingStreamID() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00675">HTTPCodec.h:675</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a805a889c6d02d3310e7f45ab5174f0b5"><div class="ttname"><a href="namespaceproxygen.html#a805a889c6d02d3310e7f45ab5174f0b5">proxygen::isHTTP2CodecProtocol</a></div><div class="ttdeci">bool isHTTP2CodecProtocol(CodecProtocol protocol)</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8cpp_source.html#l00078">CodecProtocol.cpp:78</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a22dec1b6d4dde73ea7380a28b937e545"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway</a></div><div class="ttdeci">virtual size_t generateGoaway(folly::IOBufQueue &amp;writeBuf, StreamID lastStream, ErrorCode code, std::unique_ptr&lt; folly::IOBuf &gt; debugData=nullptr)=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa55102f8247091f8991987c31cad731a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onSetMaxInitiatedStreams </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxTxns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01489">1489</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l00924">maxConcurrentOutgoingStreamsRemote_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00074">proxygen::HTTPSessionBase::InfoCallback::onSettingsOutgoingStreamsFull()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00075">proxygen::HTTPSessionBase::InfoCallback::onSettingsOutgoingStreamsNotFull()</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00153">proxygen::HTTPSessionBase::supportsMoreTransactions()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01302">onSettings()</a>.</p>
<div class="fragment"><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;                                                           {</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; got new maximum number of concurrent txns &quot;</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;we can initiate: &quot;</span> &lt;&lt; maxTxns;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> didSupport = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a54bf79beecf51bb3433b3224cba07dad">supportsMoreTransactions</a>();</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a> = maxTxns;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a> &amp;&amp; didSupport != <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a54bf79beecf51bb3433b3224cba07dad">supportsMoreTransactions</a>()) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    <span class="keywordflow">if</span> (didSupport) {</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ac0b777230749faa0889d7f3db1461c7a">onSettingsOutgoingStreamsFull</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ad709a8213d1fdb58253711c53bf387d3">onSettingsOutgoingStreamsNotFull</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    }</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;  }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_ad709a8213d1fdb58253711c53bf387d3"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ad709a8213d1fdb58253711c53bf387d3">proxygen::HTTPSessionBase::InfoCallback::onSettingsOutgoingStreamsNotFull</a></div><div class="ttdeci">virtual void onSettingsOutgoingStreamsNotFull(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00075">HTTPSessionBase.h:75</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad5433004842e58bc21e71d0219bd2153"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_</a></div><div class="ttdeci">uint32_t maxConcurrentOutgoingStreamsRemote_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00924">HTTPSession.h:924</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_ac0b777230749faa0889d7f3db1461c7a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#ac0b777230749faa0889d7f3db1461c7a">proxygen::HTTPSessionBase::InfoCallback::onSettingsOutgoingStreamsFull</a></div><div class="ttdeci">virtual void onSettingsOutgoingStreamsFull(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00074">HTTPSessionBase.h:74</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a54bf79beecf51bb3433b3224cba07dad"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a54bf79beecf51bb3433b3224cba07dad">proxygen::HTTPSessionBase::supportsMoreTransactions</a></div><div class="ttdeci">bool supportsMoreTransactions() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00153">HTTPSessionBase.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa124be6ff34cd03af98ac3b283ba2af9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onSetSendWindow </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>windowSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01483">1483</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPTransaction_8cpp_source.html#l00664">proxygen::HTTPTransaction::onIngressSetSendWindow()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01302">onSettings()</a>.</p>
<div class="fragment"><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                                                     {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; got send window size adjustment. new=&quot;</span> &lt;&lt; windowSize;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(&amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#a2e8861dbc6a86b7cb4b569737c2768cf">HTTPTransaction::onIngressSetSendWindow</a>,</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;                          windowSize);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a313e95bd7ff25e8565b8f915bf9333ce"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">proxygen::HTTPSession::invokeOnAllTransactions</a></div><div class="ttdeci">void invokeOnAllTransactions(void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00586">HTTPSession.h:586</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_a2e8861dbc6a86b7cb4b569737c2768cf"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#a2e8861dbc6a86b7cb4b569737c2768cf">proxygen::HTTPTransaction::onIngressSetSendWindow</a></div><div class="ttdeci">void onIngressSetSendWindow(uint32_t newWindowSize)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l00664">HTTPTransaction.cpp:664</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51b54c75597c9ead6142aa8c26689b09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onSettings </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceproxygen.html#a178ae546fbff60576dc3e3ce2de52410">SettingsList</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a settings frame, for protocols that support settings.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">settings</td><td>a list of settings that were sent in the settings frame </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a74342e68c4a6845289a3385f947d1b65">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01302">1302</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00600">proxygen::HTTPCodec::generateSettingsAck()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::INITIAL_WINDOW_SIZE</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">proxygen::MAX_CONCURRENT_STREAMS</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01489">onSetMaxInitiatedStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01483">onSetSendWindow()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00079">proxygen::HTTPSessionBase::InfoCallback::onSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">proxygen::SETTINGS_HTTP_CERT_AUTH</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00211">verifyCertAuthSetting()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;                                                         {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;  DestructorGuard g(<span class="keyword">this</span>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; setting : <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a>) {</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;    <span class="keywordflow">if</span> (setting.id == <a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">SettingsId::INITIAL_WINDOW_SIZE</a>) {</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aa124be6ff34cd03af98ac3b283ba2af9">onSetSendWindow</a>(setting.value);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (setting.id == <a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">SettingsId::MAX_CONCURRENT_STREAMS</a>) {</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aa55102f8247091f8991987c31cad731a">onSetMaxInitiatedStreams</a>(setting.value);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (setting.id == <a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">SettingsId::SETTINGS_HTTP_CERT_AUTH</a>) {</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      <span class="keywordflow">if</span> (!(<a class="code" href="classproxygen_1_1HTTPSession.html#a183cf22d134789ec0e2c0a75ec301224">verifyCertAuthSetting</a>(setting.value))) {</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      }</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;  }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a7773a5b8b6902a5bc6211e4d2b1961b7">generateSettingsAck</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>) &gt; 0) {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;  }</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a77e443577b341c61a9e73ddbdd3c312e">onSettings</a>(*<span class="keyword">this</span>, settings);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;  }</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">proxygen::SettingsId::SETTINGS_HTTP_CERT_AUTH</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">proxygen::SettingsId::MAX_CONCURRENT_STREAMS</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa124be6ff34cd03af98ac3b283ba2af9"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa124be6ff34cd03af98ac3b283ba2af9">proxygen::HTTPSession::onSetSendWindow</a></div><div class="ttdeci">void onSetSendWindow(uint32_t windowSize)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01483">HTTPSession.cpp:1483</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa55102f8247091f8991987c31cad731a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa55102f8247091f8991987c31cad731a">proxygen::HTTPSession::onSetMaxInitiatedStreams</a></div><div class="ttdeci">void onSetMaxInitiatedStreams(uint32_t maxTxns)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01489">HTTPSession.cpp:1489</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a7773a5b8b6902a5bc6211e4d2b1961b7"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a7773a5b8b6902a5bc6211e4d2b1961b7">proxygen::HTTPCodec::generateSettingsAck</a></div><div class="ttdeci">virtual size_t generateSettingsAck(folly::IOBufQueue &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00600">HTTPCodec.h:600</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::SettingsId::INITIAL_WINDOW_SIZE</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a183cf22d134789ec0e2c0a75ec301224"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a183cf22d134789ec0e2c0a75ec301224">proxygen::HTTPSession::verifyCertAuthSetting</a></div><div class="ttdeci">bool verifyCertAuthSetting(uint32_t value)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00211">HTTPSession.cpp:211</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a77e443577b341c61a9e73ddbdd3c312e"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a77e443577b341c61a9e73ddbdd3c312e">proxygen::HTTPSessionBase::InfoCallback::onSettings</a></div><div class="ttdeci">virtual void onSettings(const HTTPSessionBase &amp;, const SettingsList &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00079">HTTPSessionBase.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2761f5d6f21da00af36fe73385339e9a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onSettingsAck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a settings frame with ACK set, for protocols that support settings ack. </p>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a9ec9c7daad56b25852e4d7b31ffc1ae7">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01323">1323</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00080">proxygen::HTTPSessionBase::InfoCallback::onSettingsAck()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                                {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; received settings ack&quot;</span>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a5f38947e3b1fdce80eb3a870bc20b52a">onSettingsAck</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;  }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a5f38947e3b1fdce80eb3a870bc20b52a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a5f38947e3b1fdce80eb3a870bc20b52a">proxygen::HTTPSessionBase::InfoCallback::onSettingsAck</a></div><div class="ttdeci">virtual void onSettingsAck(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00080">HTTPSessionBase.h:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78452f9b06f73e48e2397923fb71d0dd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onTrailersComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1HTTPHeaders.html">HTTPHeaders</a> &gt;&#160;</td>
          <td class="paramname"><em>trailers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called when all the trailers of an ingress message have been parsed, but only if the number of trailers is nonzero. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stream</td><td>The stream ID </td></tr>
    <tr><td class="paramname">trailers</td><td>The message trailers </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#aa3ecee42ce8c09840aa67ee824c5cfe3">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01030">1030</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02922">invalidStream()</a>, and <a class="el" href="HTTPTransaction_8cpp_source.html#l00361">proxygen::HTTPTransaction::onIngressTrailers()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;                                                                  {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">invalidStream</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;  }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;  txn-&gt;onIngressTrailers(std::move(trailers));</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76d95e77fe08def351d56bc501a8a014"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76d95e77fe08def351d56bc501a8a014">proxygen::HTTPSession::invalidStream</a></div><div class="ttdeci">void invalidStream(HTTPCodec::StreamID stream, ErrorCode code=ErrorCode::_SPDY_INVALID_STREAM)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02922">HTTPSession.cpp:2922</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa0fb58504e91e4f38601e2fdd0cebb42"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onWindowUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called upon receipt of a window update, for protocols that support flow control. For instance spdy/3 and higher. </p>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPCodec_1_1Callback.html#a2e07b2b70565c4f2782d8767abf0e780">proxygen::HTTPCodec::Callback</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01285">1285</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, and <a class="el" href="HTTPTransaction_8cpp_source.html#l00646">proxygen::HTTPTransaction::onIngressWindowUpdate()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>.</p>
<div class="fragment"><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                                                  {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; got window update on streamID=&quot;</span> &lt;&lt; <a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a> &lt;&lt; <span class="stringliteral">&quot; for &quot;</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;          &lt;&lt; amount &lt;&lt; <span class="stringliteral">&quot; bytes.&quot;</span>;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;  HTTPTransaction* txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;  <span class="keywordflow">if</span> (!txn) {</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="comment">// We MUST be using SPDY/3+ if we got WINDOW_UPDATE. The spec says that -</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="comment">// A sender should ignore all the WINDOW_UPDATE frames associated with the</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="comment">// stream after it send the last frame for the stream.</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <span class="comment">// TODO: Only ignore if this is from some past transaction</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;  }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;  txn-&gt;onIngressWindowUpdate(amount);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af385c143cc9ad6f4930b6b045c7a69b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onWriteCompleted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check whether to shut down the transport after a write completes. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02720">2720</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l00910">pendingWrites_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00717">writesDraining_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;                              {</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">writesDraining_</a>) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a>) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  }</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <span class="comment">// Don&#39;t shutdown if there might be more writes</span></div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.empty()) {</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  }</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <span class="comment">// All finished draining writes, so shut down the egress</span></div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7a243fae036a60d472f8e4a5264e6a05"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">proxygen::HTTPSession::pendingWrites_</a></div><div class="ttdeci">WriteSegmentList pendingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00910">HTTPSession.h:910</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2161afe8ad9e128e3f1640ef4e4cc234"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">proxygen::HTTPSession::writesDraining_</a></div><div class="ttdeci">bool writesDraining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00717">HTTPSession.h:717</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a688a4b503444c67e39e85db88fb58900"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onWriteError </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bytesWritten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const folly::AsyncSocketException &amp;&#160;</td>
          <td class="paramname"><em>ex</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked by <a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html">WriteSegment</a> on write failure. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02702">2702</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb">proxygen::IO_WRITE_ERROR</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorWrite</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00059">proxygen::HTTPSessionBase::InfoCallback::onWrite()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>
<div class="fragment"><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;                                                          {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; write error: &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6e99282f46710c2cd57822a8fbf349ff">onWrite</a>(*<span class="keyword">this</span>, bytesWritten);</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;  }</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;  <span class="keyword">auto</span> sslEx = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>folly::SSLException*<span class="keyword">&gt;</span>(&amp;ex);</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  <span class="comment">// Save the SSL error, if there was one.  It will be recorded later</span></div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  <span class="keywordflow">if</span> (sslEx &amp;&amp; sslEx-&gt;getSSLError() == folly::SSLError::SSL_ERROR) {</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslError = ex.what();</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  }</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb">ConnectionCloseReason::IO_WRITE_ERROR</a>);</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">shutdownTransportWithReset</a>(<a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da77ba7bef1a60134b557f8988a8d7009a">kErrorWrite</a>, ex.what());</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a6e99282f46710c2cd57822a8fbf349ff"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6e99282f46710c2cd57822a8fbf349ff">proxygen::HTTPSessionBase::InfoCallback::onWrite</a></div><div class="ttdeci">virtual void onWrite(const HTTPSessionBase &amp;, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00059">HTTPSessionBase.h:59</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da77ba7bef1a60134b557f8988a8d7009a"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da77ba7bef1a60134b557f8988a8d7009a">proxygen::kErrorWrite</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adba39f5cba4a8eaa5a2c54c774fad9ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">proxygen::HTTPSession::shutdownTransportWithReset</a></div><div class="ttdeci">void shutdownTransportWithReset(ProxygenError errorCode, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02403">HTTPSession.cpp:2403</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb">proxygen::ConnectionCloseReason::IO_WRITE_ERROR</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a48514244601d32eb56208361c6d6c62e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::onWriteSuccess </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>bytesWritten</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Invoked by <a class="el" href="classproxygen_1_1HTTPSession_1_1WriteSegment.html">WriteSegment</a> on completion of a write. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02643">2643</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSession_8h_source.html#l00945">bytesWritten_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00973">egressBytesLimit_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l01052">inLoopCallback_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00059">proxygen::HTTPSessionBase::InfoCallback::onWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02720">onWriteCompleted()</a>, <a class="el" href="HTTPSession_8h_source.html#l00910">pendingWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="WheelTimerInstance_8cpp_source.html#l00059">proxygen::WheelTimerInstance::scheduleTimeout()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8h_source.html#l00701">timeout_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3">proxygen::UNKNOWN</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00683">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00084">proxygen::HTTPSession::WriteSegment::writeSuccess()</a>.</p>
<div class="fragment"><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;                                                 {</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a> += bytesWritten;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.totalBytes += bytesWritten;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.isScheduled());</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.empty()) {</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    VLOG(10) &lt;&lt; <span class="stringliteral">&quot;Cancel write timer on last successful write&quot;</span>;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.cancelTimeout();</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    VLOG(10) &lt;&lt; <span class="stringliteral">&quot;Refresh write timer on writeSuccess&quot;</span>;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">scheduleTimeout</a>(&amp;<a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;  }</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6e99282f46710c2cd57822a8fbf349ff">onWrite</a>(*<span class="keyword">this</span>, bytesWritten);</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;  }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;total bytesWritten_: &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a>;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;  <span class="comment">// processByteEvents will return true if it has been replaced with another</span></div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;  <span class="comment">// tracker in the middle and needs to be re-run.  Should happen at most</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;  <span class="comment">// once.  while with no body is intentional</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a> &amp;&amp;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;         <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;processByteEvents(</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;           <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>, <a class="code" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a>)) {} <span class="comment">// pass</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;  <span class="keywordflow">if</span> ((!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>() || <a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()) &amp;&amp; (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty())) {</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>()) {</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;      <span class="comment">// Shouldn&#39;t happen unless there is a bug. This can only happen when</span></div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <span class="comment">// someone calls shutdownTransport, but did not specify a reason before.</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3">ConnectionCloseReason::UNKNOWN</a>);</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    }</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; shutdown from onWriteSuccess&quot;</span>;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;  }</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a>--;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">inLoopCallback_</a>) {</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a1c5714d761137dccb8d6e864b00b657f">updateWriteCount</a>();</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;    <span class="comment">// safe to resume here:</span></div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">updateWriteBufSize</a>(-folly::to&lt;int64_t&gt;(bytesWritten));</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;    <span class="comment">// PRIO_FIXME: this is done because of the corking business...</span></div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;    <span class="comment">//             in the future we may want to have a pull model</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;    <span class="comment">//             whereby the socket asks us for a given amount of</span></div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;    <span class="comment">//             data to send...</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> == 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a>()) {</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aea78aea47cceb6d7cbcf482379f3e502">runLoopCallback</a>();</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;    }</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;  }</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af385c143cc9ad6f4930b6b045c7a69b7">onWriteCompleted</a>();</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">egressBytesLimit_</a> &gt; 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a> &gt;= <a class="code" href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">egressBytesLimit_</a>) {</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Egress limit reached, shutting down &quot;</span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <span class="stringliteral">&quot;session (egressed &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">bytesWritten_</a> &lt;&lt; <span class="stringliteral">&quot;, limit set to &quot;</span></div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">egressBytesLimit_</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  }</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a6e99282f46710c2cd57822a8fbf349ff"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a6e99282f46710c2cd57822a8fbf349ff">proxygen::HTTPSessionBase::InfoCallback::onWrite</a></div><div class="ttdeci">virtual void onWrite(const HTTPSessionBase &amp;, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00059">HTTPSessionBase.h:59</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac1b99af891c8036812baaeb567d5e042"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">proxygen::HTTPSession::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00683">HTTPSession.h:683</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0d6ad6ab9f62dbe8bf1afac20d86b1b2"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">proxygen::HTTPSession::inLoopCallback_</a></div><div class="ttdeci">bool inLoopCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01052">HTTPSession.h:1052</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1c5714d761137dccb8d6e864b00b657f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1c5714d761137dccb8d6e864b00b657f">proxygen::HTTPSession::updateWriteCount</a></div><div class="ttdeci">void updateWriteCount()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02248">HTTPSession.cpp:2248</a></div></div>
<div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_a9c1db79a186f24aee623e9d46b91e898"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">proxygen::WheelTimerInstance::scheduleTimeout</a></div><div class="ttdeci">void scheduleTimeout(folly::HHWheelTimer::Callback *callback, std::chrono::milliseconds timeout)</div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8cpp_source.html#l00059">WheelTimerInstance.cpp:59</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a19770f973e94f1a2ced58dcd064040ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">proxygen::HTTPSession::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00701">HTTPSession.h:701</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7a243fae036a60d472f8e4a5264e6a05"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">proxygen::HTTPSession::pendingWrites_</a></div><div class="ttdeci">WriteSegmentList pendingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00910">HTTPSession.h:910</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a08ca602333f5e1f4a17bb00918bce3f7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a08ca602333f5e1f4a17bb00918bce3f7">proxygen::HTTPSession::bytesWritten_</a></div><div class="ttdeci">uint64_t bytesWritten_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00945">HTTPSession.h:945</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aea78aea47cceb6d7cbcf482379f3e502"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aea78aea47cceb6d7cbcf482379f3e502">proxygen::HTTPSession::runLoopCallback</a></div><div class="ttdeci">void runLoopCallback() noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02149">HTTPSession.cpp:2149</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af385c143cc9ad6f4930b6b045c7a69b7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af385c143cc9ad6f4930b6b045c7a69b7">proxygen::HTTPSession::onWriteCompleted</a></div><div class="ttdeci">void onWriteCompleted()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02720">HTTPSession.cpp:2720</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af101f4605f3474ccc175e3f42c5f5c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">proxygen::HTTPSession::egressBytesLimit_</a></div><div class="ttdeci">uint64_t egressBytesLimit_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00973">HTTPSession.h:973</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1cdd56f14df7e2a12dd42f7de1fc868f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">proxygen::HTTPSession::updateWriteBufSize</a></div><div class="ttdeci">void updateWriteBufSize(int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02261">HTTPSession.cpp:2261</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3">proxygen::ConnectionCloseReason::UNKNOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adc047d8e5824d2368060aec1e30fb3b6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">proxygen::HTTPSession::hasMoreWrites</a></div><div class="ttdeci">bool hasMoreWrites() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02812">HTTPSession.cpp:2812</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af42a143c0ea8e8e0635cbf9f0283f953"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::pauseIngress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a854efe446d5edff65c09243eed1bfbb5">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01509">1509</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00697">liveTransactions_</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02769">pauseReads()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                                                            {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; pausing streamID=&quot;</span> &lt;&lt; txn-&gt;getID() &lt;&lt;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    <span class="stringliteral">&quot;, liveTransactions_ was &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;  CHECK_GT(<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>, 0);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;  --<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;  <span class="keyword">auto</span> exTxns = txn-&gt;getExTransactions();</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = exTxns.begin(); it != exTxns.end(); ++it) {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <span class="keyword">auto</span> exTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*it);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <span class="keywordflow">if</span> (exTxn) {</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      exTxn-&gt;pauseIngress();</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    }</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;  }</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a> == 0) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ae581da85b242f0cf6f4b657b8753894a">pauseReads</a>();</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;  }</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae581da85b242f0cf6f4b657b8753894a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae581da85b242f0cf6f4b657b8753894a">proxygen::HTTPSession::pauseReads</a></div><div class="ttdeci">void pauseReads()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02769">HTTPSession.cpp:2769</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a47f5ec6835388f0c485cf435bc972c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">proxygen::HTTPSession::liveTransactions_</a></div><div class="ttdeci">uint32_t liveTransactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00697">HTTPSession.h:697</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae581da85b242f0cf6f4b657b8753894a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::pauseReads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Stop reading from the transport until <a class="el" href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">resumeReads()</a> is called </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02769">2769</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00471">proxygen::HTTPSessionBase::ingressLimitExceeded()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02781">pauseReadsImpl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00628">readsUnpaused()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01509">pauseIngress()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>
<div class="fragment"><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;                        {</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <span class="comment">// Make sure the parser is paused.  Note that if reads are shutdown</span></div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;  <span class="comment">// before they are paused, we never make it past the if.</span></div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">setParserPaused</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">readsUnpaused</a>() ||</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>() &amp;&amp;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;       !<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a88a0e79bdd0b073703b48c07966c2e35">ingressLimitExceeded</a>())) {</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  }</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7dca771911bbca787c0c7581afc3392a">pauseReadsImpl</a>();</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ac0ccab551f9639248c3a0557a04b0b47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">proxygen::HTTPSession::readsUnpaused</a></div><div class="ttdeci">bool readsUnpaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00628">HTTPSession.h:628</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a88a0e79bdd0b073703b48c07966c2e35"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a88a0e79bdd0b073703b48c07966c2e35">proxygen::HTTPSessionBase::ingressLimitExceeded</a></div><div class="ttdeci">bool ingressLimitExceeded() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00471">HTTPSessionBase.h:471</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7dca771911bbca787c0c7581afc3392a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7dca771911bbca787c0c7581afc3392a">proxygen::HTTPSession::pauseReadsImpl</a></div><div class="ttdeci">void pauseReadsImpl()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02781">HTTPSession.cpp:2781</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a82bd0706831dfc83898b162f58750e73"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused</a></div><div class="ttdeci">virtual void setParserPaused(bool paused)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7dca771911bbca787c0c7581afc3392a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::pauseReadsImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02781">2781</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00070">proxygen::HTTPSessionBase::InfoCallback::onIngressPaused()</a>, <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00198">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02769">pauseReads()</a>.</p>
<div class="fragment"><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;                                 {</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: pausing reads&quot;</span>;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a0448bf2d781ababb55b0eb1b1aad1785">onIngressPaused</a>(*<span class="keyword">this</span>);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  }</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  cancelTimeout();</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;setReadCB(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> = SocketState::PAUSED;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a0448bf2d781ababb55b0eb1b1aad1785"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a0448bf2d781ababb55b0eb1b1aad1785">proxygen::HTTPSessionBase::InfoCallback::onIngressPaused</a></div><div class="ttdeci">virtual void onIngressPaused(const HTTPSessionBase &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00070">HTTPSessionBase.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af0320784362dcf40c2bce6e3f0d98301"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::processReadData </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00575">575</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00719">ingressError_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a44a623c547735db83ae472ba7f1af6df">proxygen::HTTPCodec::onIngress()</a>, <a class="el" href="HTTPSession_8h_source.html#l00689">readBuf_</a>, <a class="el" href="HTTPSession_8h_source.html#l00628">readsUnpaused()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00557">readBufferAvailable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00535">readDataAvailable()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                             {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  FOLLY_SCOPED_TRACE_SECTION(<span class="stringliteral">&quot;HTTPSession - processReadData&quot;</span>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  <span class="comment">// skip any empty IOBufs before feeding CODEC.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.front() != <span class="keyword">nullptr</span> &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.front()-&gt;length() == 0) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.pop_front();</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// Pass the ingress data through the codec to parse it. The codec</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// will invoke various methods of the HTTPSession as callbacks.</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  <span class="keyword">const</span> IOBuf* currentReadBuf;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  <span class="comment">// It&#39;s possible for the last buffer in a chain to be empty here.</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  <span class="comment">// AsyncTransport saw fd activity so asked for a read buffer, but it was</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <span class="comment">// SSL traffic and not enough to decrypt a whole record.  Later we invoke</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <span class="comment">// this function from the loop callback.</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;  <span class="keywordflow">while</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">ingressError_</a> &amp;&amp;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <a class="code" href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">readsUnpaused</a>() &amp;&amp;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         ((currentReadBuf = <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.front()) != <span class="keyword">nullptr</span> &amp;&amp;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          currentReadBuf-&gt;length() != 0)) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="comment">// We&#39;re about to parse, make sure the parser is not paused</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">setParserPaused</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">size_t</span> bytesParsed = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a44a623c547735db83ae472ba7f1af6df">onIngress</a>(*currentReadBuf);</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keywordflow">if</span> (bytesParsed == 0) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="comment">// If the codec didn&#39;t make any progress with current input, we</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="comment">// better get more.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.trimStart(bytesParsed);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ac0ccab551f9639248c3a0557a04b0b47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">proxygen::HTTPSession::readsUnpaused</a></div><div class="ttdeci">bool readsUnpaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00628">HTTPSession.h:628</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a44a623c547735db83ae472ba7f1af6df"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a44a623c547735db83ae472ba7f1af6df">proxygen::HTTPCodec::onIngress</a></div><div class="ttdeci">virtual size_t onIngress(const folly::IOBuf &amp;buf)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7b5d0529cb70ae5090632b85f2684fd0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">proxygen::HTTPSession::readBuf_</a></div><div class="ttdeci">folly::IOBufQueue readBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00689">HTTPSession.h:689</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a82bd0706831dfc83898b162f58750e73"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused</a></div><div class="ttdeci">virtual void setParserPaused(bool paused)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af9b8fc565cfb8e86162b22921995e08b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">proxygen::HTTPSession::ingressError_</a></div><div class="ttdeci">bool ingressError_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00719">HTTPSession.h:719</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5e76f86ed8e366c32399e02feac3cfe6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::readBufferAvailable </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00557">557</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00058">proxygen::HTTPSessionBase::InfoCallback::onRead()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00689">readBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                                                                      {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  <span class="keywordtype">size_t</span> readSize = readBuf-&gt;computeChainDataLength();</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;  FOLLY_SCOPED_TRACE_SECTION(</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="stringliteral">&quot;HTTPSession - readBufferAvailable&quot;</span>, <span class="stringliteral">&quot;readSize&quot;</span>, readSize);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;  VLOG(5) &lt;&lt; <span class="stringliteral">&quot;read completed on &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, bytes=&quot;</span> &lt;&lt; readSize;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  resetTimeout();</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.append(std::move(readBuf));</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a0883d775a224c70fa67a4b97ee554cc7">onRead</a>(*<span class="keyword">this</span>, readSize);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">processReadData</a>();</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7b5d0529cb70ae5090632b85f2684fd0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">proxygen::HTTPSession::readBuf_</a></div><div class="ttdeci">folly::IOBufQueue readBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00689">HTTPSession.h:689</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af0320784362dcf40c2bce6e3f0d98301"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">proxygen::HTTPSession::processReadData</a></div><div class="ttdeci">void processReadData()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00575">HTTPSession.cpp:575</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a0883d775a224c70fa67a4b97ee554cc7"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a0883d775a224c70fa67a4b97ee554cc7">proxygen::HTTPSessionBase::InfoCallback::onRead</a></div><div class="ttdeci">virtual void onRead(const HTTPSessionBase &amp;, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00058">HTTPSessionBase.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad48c44abccc284d6878ea73bb01feea3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::readDataAvailable </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>readSize</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00535">535</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00058">proxygen::HTTPSessionBase::InfoCallback::onRead()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00689">readBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                                       {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;  FOLLY_SCOPED_TRACE_SECTION(</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="stringliteral">&quot;HTTPSession - readDataAvailable&quot;</span>, <span class="stringliteral">&quot;readSize&quot;</span>, readSize);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;  VLOG(10) &lt;&lt; <span class="stringliteral">&quot;read completed on &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;, bytes=&quot;</span> &lt;&lt; readSize;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  resetTimeout();</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.postallocate(readSize);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a0883d775a224c70fa67a4b97ee554cc7">onRead</a>(*<span class="keyword">this</span>, readSize);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;  }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">processReadData</a>();</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7b5d0529cb70ae5090632b85f2684fd0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">proxygen::HTTPSession::readBuf_</a></div><div class="ttdeci">folly::IOBufQueue readBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00689">HTTPSession.h:689</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af0320784362dcf40c2bce6e3f0d98301"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">proxygen::HTTPSession::processReadData</a></div><div class="ttdeci">void processReadData()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00575">HTTPSession.cpp:575</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a0883d775a224c70fa67a4b97ee554cc7"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a0883d775a224c70fa67a4b97ee554cc7">proxygen::HTTPSessionBase::InfoCallback::onRead</a></div><div class="ttdeci">virtual void onRead(const HTTPSessionBase &amp;, size_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00058">HTTPSessionBase.h:58</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a98b41eaa29cecf1b8dad11dba197c056"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::readEOF </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00606">606</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00304">proxygen::HTTPSessionBase::getNumTxnServed()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorClientSilent</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00056">proxygen::HTTPSessionBase::InfoCallback::onIngressError()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ada99ff010941809df479eeee1686f05b">proxygen::READ_EOF</a>, <a class="el" href="HTTPSession_8h_source.html#l00689">readBuf_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                              {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  DestructorGuard guard(<span class="keyword">this</span>);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;EOF on &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="comment">// for SSL only: error without any bytes from the client might happen</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  <span class="comment">// due to client-side issues with the SSL cert. Note that it can also</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;  <span class="comment">// happen if the client sends a SPDY frame header but no body.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.secure &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1fb1ea17a47de936a9fc48d69cf212c7">getNumTxnServed</a>() == 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">readBuf_</a>.empty()) {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">onIngressError</a>(*<span class="keyword">this</span>, <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da40f9dc4f4360525ec452e864be70737e">kErrorClientSilent</a>);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;  <span class="comment">// Shut down reads, and also shut down writes if there are no</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;  <span class="comment">// transactions.  (If there are active transactions, leave the</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// write side of the socket open so those transactions can</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <span class="comment">// finish generating responses.)</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ada99ff010941809df479eeee1686f05b">ConnectionCloseReason::READ_EOF</a>);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty());</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a70c2187725e9ed9504596dfbb3bd8c1a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">proxygen::HTTPSessionBase::InfoCallback::onIngressError</a></div><div class="ttdeci">virtual void onIngressError(const HTTPSessionBase &amp;, ProxygenError)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00056">HTTPSessionBase.h:56</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7b5d0529cb70ae5090632b85f2684fd0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7b5d0529cb70ae5090632b85f2684fd0">proxygen::HTTPSession::readBuf_</a></div><div class="ttdeci">folly::IOBufQueue readBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00689">HTTPSession.h:689</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1fb1ea17a47de936a9fc48d69cf212c7"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1fb1ea17a47de936a9fc48d69cf212c7">proxygen::HTTPSessionBase::getNumTxnServed</a></div><div class="ttdeci">uint64_t getNumTxnServed() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00304">HTTPSessionBase.h:304</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ada99ff010941809df479eeee1686f05b"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ada99ff010941809df479eeee1686f05b">proxygen::ConnectionCloseReason::READ_EOF</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da40f9dc4f4360525ec452e864be70737e"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da40f9dc4f4360525ec452e864be70737e">proxygen::kErrorClientSilent</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a68885654760e144384fa10f8091d25c0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::readErr </td>
          <td>(</td>
          <td class="paramtype">const folly::AsyncSocketException &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00626">626</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a162a7cc9ea71b6da4c955edbec3648c3">proxygen::IO_READ_ERROR</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorClientRenegotiation</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00056">proxygen::HTTPSessionBase::InfoCallback::onIngressError()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                                            {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;  DestructorGuard guard(<span class="keyword">this</span>);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;read error on &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; ex.what();</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <span class="keyword">auto</span> sslEx = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>folly::SSLException*<span class="keyword">&gt;</span>(&amp;ex);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a> &amp;&amp; sslEx) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> (sslEx-&gt;getSSLError() == folly::SSLError::CLIENT_RENEGOTIATION) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">onIngressError</a>(*<span class="keyword">this</span>, <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da3fe049adc866c130ce0a28ff24c9020f">kErrorClientRenegotiation</a>);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    }</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;  }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  <span class="comment">// We&#39;re definitely finished reading. Don&#39;t close the write side</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  <span class="comment">// of the socket if there are outstanding transactions, though.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  <span class="comment">// Instead, give the transactions a chance to produce any remaining</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;  <span class="comment">// output.</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  <span class="keywordflow">if</span> (sslEx &amp;&amp; sslEx-&gt;getSSLError() == folly::SSLError::SSL_ERROR) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslError = ex.what();</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a162a7cc9ea71b6da4c955edbec3648c3">ConnectionCloseReason::IO_READ_ERROR</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">shutdownTransport</a>(<span class="keyword">true</span>, <a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty(), ex.what());</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7773c16e03030dca8e168a2e41564335"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7773c16e03030dca8e168a2e41564335">proxygen::HTTPSession::shutdownTransport</a></div><div class="ttdeci">void shutdownTransport(bool shutdownReads=true, bool shutdownWrites=true, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02295">HTTPSession.cpp:2295</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a70c2187725e9ed9504596dfbb3bd8c1a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">proxygen::HTTPSessionBase::InfoCallback::onIngressError</a></div><div class="ttdeci">virtual void onIngressError(const HTTPSessionBase &amp;, ProxygenError)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00056">HTTPSessionBase.h:56</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a162a7cc9ea71b6da4c955edbec3648c3"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a162a7cc9ea71b6da4c955edbec3648c3">proxygen::ConnectionCloseReason::IO_READ_ERROR</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da3fe049adc866c130ce0a28ff24c9020f"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da3fe049adc866c130ce0a28ff24c9020f">proxygen::kErrorClientRenegotiation</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5726d375dce946aff7f5b83c2822bc83"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::readsPaused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00632">632</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>.</p>
<div class="fragment"><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                           {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> == SocketState::PAUSED;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa7593f40c921315dbdb236c7317d793c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::readsShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00636">636</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>, and <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00052">proxygen::HTTPUpstreamSession::isClosing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02942">onDeleteAckEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                             {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> == <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;  }</div><div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac0ccab551f9639248c3a0557a04b0b47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::readsUnpaused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00628">628</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02769">pauseReads()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                             {</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> == SocketState::UNPAUSED;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b21d699d9346a86b02f76d1bced5c38"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::readTimeoutExpired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00379">379</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01035">drainTimeout_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00174">proxygen::HTTPSessionBase::getController()</a>, <a class="el" href="HTTPSessionController_8h_source.html#l00082">proxygen::HTTPSessionController::getGracefulShutdownTimeout()</a>, <a class="el" href="HTTPSession_8h_source.html#l00697">liveTransactions_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00458">notifyPendingShutdown()</a>, <a class="el" href="WheelTimerInstance_8cpp_source.html#l00059">proxygen::WheelTimerInstance::scheduleTimeout()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::TIMEOUT</a>, <a class="el" href="HTTPSession_8h_source.html#l00701">timeout_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00190">timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                         {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  VLOG(3) &lt;&lt; <span class="stringliteral">&quot;session-level timeout on &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a> != 0) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// There&#39;s at least one open transaction with a read timeout scheduled.</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="comment">// We got here because the session timeout == the transaction timeout.</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// Ignore, since the transaction is going to timeout very soon.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="stringliteral">&quot;ignoring session timeout, transaction timeout imminent&quot;</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    resetTimeout();</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty()) {</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="comment">// There are one or more transactions, but none of them are live.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// That&#39;s valid if they&#39;ve all received their full ingress messages</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="comment">// and are waiting for their Handlers to process those messages.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="stringliteral">&quot;ignoring session timeout, no transactions awaiting reads&quot;</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    resetTimeout();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; Timeout with nothing pending&quot;</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">ConnectionCloseReason::TIMEOUT</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  <span class="keyword">auto</span> controller = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a907b76607c10117ea4f4a669699835eb">getController</a>();</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  <span class="keywordflow">if</span> (controller) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">scheduleTimeout</a>(&amp;<a class="code" href="classproxygen_1_1HTTPSession.html#a2d1984c14bd93f65bcf31ec1c2dc9f70">drainTimeout_</a>,</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                             controller-&gt;getGracefulShutdownTimeout());</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a9ae035349c89f5ea79a0bc052926a837">notifyPendingShutdown</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_a9c1db79a186f24aee623e9d46b91e898"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">proxygen::WheelTimerInstance::scheduleTimeout</a></div><div class="ttdeci">void scheduleTimeout(folly::HHWheelTimer::Callback *callback, std::chrono::milliseconds timeout)</div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8cpp_source.html#l00059">WheelTimerInstance.cpp:59</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a19770f973e94f1a2ced58dcd064040ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">proxygen::HTTPSession::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00701">HTTPSession.h:701</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a907b76607c10117ea4f4a669699835eb"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a907b76607c10117ea4f4a669699835eb">proxygen::HTTPSessionBase::getController</a></div><div class="ttdeci">HTTPSessionController * getController()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00174">HTTPSessionBase.h:174</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::ConnectionCloseReason::TIMEOUT</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a47f5ec6835388f0c485cf435bc972c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">proxygen::HTTPSession::liveTransactions_</a></div><div class="ttdeci">uint32_t liveTransactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00697">HTTPSession.h:697</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9ae035349c89f5ea79a0bc052926a837"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9ae035349c89f5ea79a0bc052926a837">proxygen::HTTPSession::notifyPendingShutdown</a></div><div class="ttdeci">void notifyPendingShutdown() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00458">HTTPSession.cpp:458</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2d1984c14bd93f65bcf31ec1c2dc9f70"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2d1984c14bd93f65bcf31ec1c2dc9f70">proxygen::HTTPSession::drainTimeout_</a></div><div class="ttdeci">DrainTimeout drainTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01035">HTTPSession.h:1035</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af2956ee5857459577485016ea25438c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::removeWaitingForReplaySafety </td>
          <td>(</td>
          <td class="paramtype">ReplaySafetyCallback *&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Remove a ReplaySafetyCallback that had been waiting for replay safety (eg if a transaction waiting for replay safety is canceled). </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a7e0526ba72d521fb439af0437a3800cd">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00815">815</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00848">waitingForReplaySafety_</a>.</p>
<div class="fragment"><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                                                        {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">waitingForReplaySafety_</a>.remove(callback);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ae0f18679ebd4860a833b6195b5a743e6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae0f18679ebd4860a833b6195b5a743e6">proxygen::HTTPSession::waitingForReplaySafety_</a></div><div class="ttdeci">std::list&lt; ReplaySafetyCallback * &gt; waitingForReplaySafety_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00848">HTTPSession.h:848</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a97304741f760e4d633033902d3380910"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::rescheduleLoopCallbacks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00652">652</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01000">shutdownTransportCb_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00166">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>.</p>
<div class="fragment"><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                 {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keywordflow">if</span> (!isLoopCallbackScheduled()) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop(<span class="keyword">this</span>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    }</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a> &amp;&amp;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        !<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>-&gt;isLoopCallbackScheduled()) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop(<a class="code" href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">shutdownTransportCb_</a>.get(), <span class="keyword">true</span>);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae8b034c072c3eebdfea9a3718a5edb8f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae8b034c072c3eebdfea9a3718a5edb8f">proxygen::HTTPSession::shutdownTransportCb_</a></div><div class="ttdeci">std::unique_ptr&lt; ShutdownTransportCallback &gt; shutdownTransportCb_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01000">HTTPSession.h:1000</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="add14dbdf706d083bf770c2aac6566cac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::resumeIngress </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a2d5fbaa7d2eb616f56541d3189553cc6">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01527">1527</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00697">liveTransactions_</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                                                             {</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; resuming streamID=&quot;</span> &lt;&lt; txn-&gt;getID() &lt;&lt;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="stringliteral">&quot;, liveTransactions_ was &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;  ++<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a>;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;  <span class="keyword">auto</span> exTxns = txn-&gt;getExTransactions();</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;  <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = exTxns.begin(); it != exTxns.end(); ++it) {</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <span class="keyword">auto</span> exTxn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(*it);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;    <span class="keywordflow">if</span> (exTxn) {</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      exTxn-&gt;resumeIngress();</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;  }</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">liveTransactions_</a> == 1) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">resumeReads</a>();</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;  }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4fc8e06ea32500b275a03eb1b9829c39"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">proxygen::HTTPSession::resumeReads</a></div><div class="ttdeci">void resumeReads()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02792">HTTPSession.cpp:2792</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a47f5ec6835388f0c485cf435bc972c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a47f5ec6835388f0c485cf435bc972c81">proxygen::HTTPSession::liveTransactions_</a></div><div class="ttdeci">uint32_t liveTransactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00697">HTTPSession.h:697</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4fc8e06ea32500b275a03eb1b9829c39"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::resumeReads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unpause reading from the transport. </p><dl class="section note"><dt>Note</dt><dd>If any codec callbacks arrived while reads were paused, they will be processed before network reads resume. </dd></dl>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02792">2792</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00471">proxygen::HTTPSessionBase::ingressLimitExceeded()</a>, <a class="el" href="HTTPSession_8h_source.html#l00632">readsPaused()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02801">resumeReadsImpl()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01994">notifyIngressBodyProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01527">resumeIngress()</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>.</p>
<div class="fragment"><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;                         {</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a5726d375dce946aff7f5b83c2822bc83">readsPaused</a>() ||</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;      (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>() &amp;&amp;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;       <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a88a0e79bdd0b073703b48c07966c2e35">ingressLimitExceeded</a>())) {</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;  }</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a87e06691bb3e20921980e79a25f6072a">resumeReadsImpl</a>();</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a5726d375dce946aff7f5b83c2822bc83"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a5726d375dce946aff7f5b83c2822bc83">proxygen::HTTPSession::readsPaused</a></div><div class="ttdeci">bool readsPaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00632">HTTPSession.h:632</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a87e06691bb3e20921980e79a25f6072a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a87e06691bb3e20921980e79a25f6072a">proxygen::HTTPSession::resumeReadsImpl</a></div><div class="ttdeci">void resumeReadsImpl()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02801">HTTPSession.cpp:2801</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a88a0e79bdd0b073703b48c07966c2e35"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a88a0e79bdd0b073703b48c07966c2e35">proxygen::HTTPSessionBase::ingressLimitExceeded</a></div><div class="ttdeci">bool ingressLimitExceeded() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00471">HTTPSessionBase.h:471</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a87e06691bb3e20921980e79a25f6072a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::resumeReadsImpl </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02801">2801</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00166">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>.</p>
<div class="fragment"><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;                                  {</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: resuming reads&quot;</span>;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  resetTimeout();</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> = SocketState::UNPAUSED;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">setParserPaused</a>(<span class="keyword">false</span>);</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <span class="keywordflow">if</span> (!isLoopCallbackScheduled()) {</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop(<span class="keyword">this</span>);</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  }</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a82bd0706831dfc83898b162f58750e73"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused</a></div><div class="ttdeci">virtual void setParserPaused(bool paused)=0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5be562d896df4cfac6d3707dfeae5c51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::resumeTransactions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02862">2862</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00478">proxygen::HTTPSessionBase::egressLimitExceeded()</a>, <a class="el" href="HTTPSession_8h_source.html#l01053">inResume_</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00621">proxygen::HTTP2PriorityQueue::iterateBFS()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01159">proxygen::HTTPTransaction::pauseEgress()</a>, <a class="el" href="HTTPSession_8h_source.html#l01054">pendingPause_</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>.</p>
<div class="fragment"><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;                                     {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">inResume_</a>);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">inResume_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  DestructorGuard g(<span class="keyword">this</span>);</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;  <span class="keyword">auto</span> resumeFn = [] (HTTP2PriorityQueue&amp;, <a class="code" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>,</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                      HTTPTransaction *txn, double) {</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    <span class="keywordflow">if</span> (txn) {</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;      txn-&gt;resumeEgress();</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    }</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;  };</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;  <span class="keyword">auto</span> stopFn = [<span class="keyword">this</span>] {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() || <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">egressLimitExceeded</a>());</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;  };</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#adcbbcfcc49189030798249dc896fcac7">iterateBFS</a>(resumeFn, stopFn, <span class="keyword">true</span> <span class="comment">/* all */</span>);</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">inResume_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">pendingPause_</a>) {</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Pausing txn egress for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">pendingPause_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(&amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#a9aa4ccd2421c67151b8bbf151e21f320">HTTPTransaction::pauseEgress</a>);</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a237f4e26687af1cc1ed5132ecb9afbb0"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">proxygen::HTTPSessionBase::egressLimitExceeded</a></div><div class="ttdeci">bool egressLimitExceeded() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00478">HTTPSessionBase.h:478</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a313e95bd7ff25e8565b8f915bf9333ce"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">proxygen::HTTPSession::invokeOnAllTransactions</a></div><div class="ttdeci">void invokeOnAllTransactions(void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00586">HTTPSession.h:586</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_a9aa4ccd2421c67151b8bbf151e21f320"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#a9aa4ccd2421c67151b8bbf151e21f320">proxygen::HTTPTransaction::pauseEgress</a></div><div class="ttdeci">void pauseEgress()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l01159">HTTPTransaction.cpp:1159</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_adcbbcfcc49189030798249dc896fcac7"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#adcbbcfcc49189030798249dc896fcac7">proxygen::HTTP2PriorityQueue::iterateBFS</a></div><div class="ttdeci">void iterateBFS(const std::function&lt; bool(HTTP2PriorityQueue &amp;, HTTPCodec::StreamID, HTTPTransaction *, double)&gt; &amp;fn, const std::function&lt; bool()&gt; &amp;stopFn, bool all)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00621">HTTP2PriorityQueue.cpp:621</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_addee32fd97cd4864b2a4b2f8a99c11c1"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">proxygen::HTTPCodec::StreamID</a></div><div class="ttdeci">uint64_t StreamID</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00049">HTTPCodec.h:49</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4b66b11da8b330ef5b8697c649b60489"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">proxygen::HTTPSession::pendingPause_</a></div><div class="ttdeci">bool pendingPause_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01054">HTTPSession.h:1054</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3d74976679fc043aa6a344795f303244"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">proxygen::HTTPSession::inResume_</a></div><div class="ttdeci">bool inResume_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01053">HTTPSession.h:1053</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea78aea47cceb6d7cbcf482379f3e502"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::runLoopCallback </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02149">2149</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00961">bodyBytesPerWriteBuf_</a>, <a class="el" href="HTTPSession_8h_source.html#l00950">bytesScheduled_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00085">proxygen::FlowControlFilter::getAvailableSend()</a>, <a class="el" href="HTTPSession_8h_source.html#l00881">proxygen::HTTPSession::WriteSegment::getFlags()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8h_source.html#l01052">inLoopCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00499">proxygen::HTTPSessionBase::isPrioritySampled()</a>, <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00142">proxygen::HTTP2PriorityQueue::numPendingEgress()</a>, <a class="el" href="HTTPSession_8h_source.html#l00910">pendingWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l00956">pendingWriteSizeDelta_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, <a class="el" href="HTTPSession_8h_source.html#l00628">readsUnpaused()</a>, <a class="el" href="WheelTimerInstance_8cpp_source.html#l00059">proxygen::WheelTimerInstance::scheduleTimeout()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8h_source.html#l00859">proxygen::HTTPSession::WriteSegment::setCork()</a>, <a class="el" href="HTTPSession_8h_source.html#l00867">proxygen::HTTPSession::WriteSegment::setEOR()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00701">timeout_</a>, <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01515">proxygen::HTTPTransaction::updateContentionsCount()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01526">proxygen::HTTPTransaction::updateSessionBytesSheduled()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00063">proxygen::HTTPSession::WriteSegment::WriteSegment()</a>, <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00683">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>.</p>
<div class="fragment"><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                                      {</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;  <span class="comment">// We schedule this callback to run at the end of an event</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;  <span class="comment">// loop iteration if either of two conditions has happened:</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  <span class="comment">//   * The session has generated some egress data (see scheduleWrite())</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;  <span class="comment">//   * Reads have become unpaused (see resumeReads())</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;  DestructorGuard dg(<span class="keyword">this</span>);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">inLoopCallback_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;  <span class="keyword">auto</span> scopeg = folly::makeGuard([<span class="keyword">this</span>] {</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">inLoopCallback_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      <span class="comment">// This ScopeGuard needs to be under the above DestructorGuard</span></div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a>) {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">updateWriteBufSize</a>(0);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      }</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a>();</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;    });</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;  VLOG(5) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; in loop callback&quot;</span>;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; kMaxWritesPerLoop; ++i) {</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a28cf2cb8599e3a919902015ab672c77a">bodyBytesPerWriteBuf_</a> = 0;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a99dba7212b5e3f3eb0c7f7aa5c283089">isPrioritySampled</a>()) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        &amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#a3bf5690949bf654120ea1302f01e1d43">HTTPTransaction::updateContentionsCount</a>,</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a30544c5f16c80484c7ef3d32f155f490">numPendingEgress</a>());</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;    }</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordtype">bool</span> cork = <span class="keyword">true</span>;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <span class="keywordtype">bool</span> eom = <span class="keyword">false</span>;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    unique_ptr&lt;IOBuf&gt; writeBuf = <a class="code" href="classproxygen_1_1HTTPSession.html#a0a609ab80e8953402ea2b13ab64f5717">getNextToSend</a>(&amp;cork, &amp;eom);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    <span class="keywordflow">if</span> (!writeBuf) {</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;    }</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    uint64_t len = writeBuf-&gt;computeChainDataLength();</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;    VLOG(11) &lt;&lt; *<span class="keyword">this</span></div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; bytes of egress to be written: &quot;</span> &lt;&lt; len</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; cork:&quot;</span> &lt;&lt; cork &lt;&lt; <span class="stringliteral">&quot; eom:&quot;</span> &lt;&lt; eom;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">if</span> (len == 0) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a>();</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a99dba7212b5e3f3eb0c7f7aa5c283089">isPrioritySampled</a>()) {</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        &amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#a8087cecb501660955abf898a7ed8e0e0">HTTPTransaction::updateSessionBytesSheduled</a>,</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a28cf2cb8599e3a919902015ab672c77a">bodyBytesPerWriteBuf_</a>);</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;    }</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;    WriteSegment* segment = <span class="keyword">new</span> WriteSegment(<span class="keyword">this</span>, len);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;    segment-&gt;setCork(cork);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    segment-&gt;setEOR(eom);</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.push_back(*segment);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.isScheduled()) {</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;      <span class="comment">// Any performance concern here?</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">timeout_</a>.<a class="code" href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">scheduleTimeout</a>(&amp;<a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    }</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a>++;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; writing &quot;</span> &lt;&lt; len &lt;&lt; <span class="stringliteral">&quot;, activeWrites=&quot;</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;             &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> &lt;&lt; <span class="stringliteral">&quot; cork=&quot;</span> &lt;&lt; cork &lt;&lt; <span class="stringliteral">&quot; eom=&quot;</span> &lt;&lt; eom;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">bytesScheduled_</a> += len;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;writeChain(segment, std::move(writeBuf), segment-&gt;getFlags());</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> &gt; 0) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a1c5714d761137dccb8d6e864b00b657f">updateWriteCount</a>();</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a> += len;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="comment">// updateWriteBufSize called in scope guard</span></div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    }</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;    <span class="comment">// writeChain can result in a writeError and trigger the shutdown code path</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  }</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> == 0 &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a>() &amp;&amp;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      (!<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a> || <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">getAvailableSend</a>())) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;  }</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">readsUnpaused</a>()) {</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">processReadData</a>();</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;    <span class="comment">// Install the read callback if necessary</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">readsUnpaused</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getReadCallback()) {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;setReadCB(<span class="keyword">this</span>);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;  }</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;  <span class="comment">// checkForShutdown is now in ScopeGuard</span></div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_ac0ccab551f9639248c3a0557a04b0b47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac0ccab551f9639248c3a0557a04b0b47">proxygen::HTTPSession::readsUnpaused</a></div><div class="ttdeci">bool readsUnpaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00628">HTTPSession.h:628</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a313e95bd7ff25e8565b8f915bf9333ce"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">proxygen::HTTPSession::invokeOnAllTransactions</a></div><div class="ttdeci">void invokeOnAllTransactions(void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00586">HTTPSession.h:586</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0a609ab80e8953402ea2b13ab64f5717"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0a609ab80e8953402ea2b13ab64f5717">proxygen::HTTPSession::getNextToSend</a></div><div class="ttdeci">std::unique_ptr&lt; folly::IOBuf &gt; getNextToSend(bool *cork, bool *eom)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02055">HTTPSession.cpp:2055</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac1b99af891c8036812baaeb567d5e042"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">proxygen::HTTPSession::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00683">HTTPSession.h:683</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0d6ad6ab9f62dbe8bf1afac20d86b1b2"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">proxygen::HTTPSession::inLoopCallback_</a></div><div class="ttdeci">bool inLoopCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01052">HTTPSession.h:1052</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1c5714d761137dccb8d6e864b00b657f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1c5714d761137dccb8d6e864b00b657f">proxygen::HTTPSession::updateWriteCount</a></div><div class="ttdeci">void updateWriteCount()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02248">HTTPSession.cpp:2248</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a99dba7212b5e3f3eb0c7f7aa5c283089"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a99dba7212b5e3f3eb0c7f7aa5c283089">proxygen::HTTPSessionBase::isPrioritySampled</a></div><div class="ttdeci">bool isPrioritySampled() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00499">HTTPSessionBase.h:499</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_a8087cecb501660955abf898a7ed8e0e0"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#a8087cecb501660955abf898a7ed8e0e0">proxygen::HTTPTransaction::updateSessionBytesSheduled</a></div><div class="ttdeci">void updateSessionBytesSheduled(uint64_t bytes)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l01526">HTTPTransaction.cpp:1526</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a07c84a0d9fdce8ead342f0058e8233be"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">proxygen::HTTPSession::bytesScheduled_</a></div><div class="ttdeci">uint64_t bytesScheduled_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00950">HTTPSession.h:950</a></div></div>
<div class="ttc" id="classproxygen_1_1WheelTimerInstance_html_a9c1db79a186f24aee623e9d46b91e898"><div class="ttname"><a href="classproxygen_1_1WheelTimerInstance.html#a9c1db79a186f24aee623e9d46b91e898">proxygen::WheelTimerInstance::scheduleTimeout</a></div><div class="ttdeci">void scheduleTimeout(folly::HHWheelTimer::Callback *callback, std::chrono::milliseconds timeout)</div><div class="ttdef"><b>Definition:</b> <a href="WheelTimerInstance_8cpp_source.html#l00059">WheelTimerInstance.cpp:59</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a19770f973e94f1a2ced58dcd064040ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a19770f973e94f1a2ced58dcd064040ed">proxygen::HTTPSession::timeout_</a></div><div class="ttdeci">WheelTimerInstance timeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00701">HTTPSession.h:701</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7a243fae036a60d472f8e4a5264e6a05"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">proxygen::HTTPSession::pendingWrites_</a></div><div class="ttdeci">WriteSegmentList pendingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00910">HTTPSession.h:910</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a28cf2cb8599e3a919902015ab672c77a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a28cf2cb8599e3a919902015ab672c77a">proxygen::HTTPSession::bodyBytesPerWriteBuf_</a></div><div class="ttdeci">uint64_t bodyBytesPerWriteBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00961">HTTPSession.h:961</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aca40d2fb247e55369cef0e1a94c4e91a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">proxygen::HTTPSession::pendingWriteSizeDelta_</a></div><div class="ttdeci">int64_t pendingWriteSizeDelta_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00956">HTTPSession.h:956</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a51a5012bdb77ee9d24b45a075a351cdc"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">proxygen::HTTPSession::checkForShutdown</a></div><div class="ttdeci">void checkForShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02447">HTTPSession.cpp:2447</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af0320784362dcf40c2bce6e3f0d98301"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af0320784362dcf40c2bce6e3f0d98301">proxygen::HTTPSession::processReadData</a></div><div class="ttdeci">void processReadData()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00575">HTTPSession.cpp:575</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a30544c5f16c80484c7ef3d32f155f490"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a30544c5f16c80484c7ef3d32f155f490">proxygen::HTTP2PriorityQueue::numPendingEgress</a></div><div class="ttdeci">uint64_t numPendingEgress() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00142">HTTP2PriorityQueue.h:142</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_a12903e2114e8367ffebc4a8e119bca59"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#a12903e2114e8367ffebc4a8e119bca59">proxygen::FlowControlFilter::getAvailableSend</a></div><div class="ttdeci">uint32_t getAvailableSend() const </div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00085">FlowControlFilter.cpp:85</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1cdd56f14df7e2a12dd42f7de1fc868f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1cdd56f14df7e2a12dd42f7de1fc868f">proxygen::HTTPSession::updateWriteBufSize</a></div><div class="ttdeci">void updateWriteBufSize(int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02261">HTTPSession.cpp:2261</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_a3bf5690949bf654120ea1302f01e1d43"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#a3bf5690949bf654120ea1302f01e1d43">proxygen::HTTPTransaction::updateContentionsCount</a></div><div class="ttdeci">void updateContentionsCount(uint64_t contentions)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l01515">HTTPTransaction.cpp:1515</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adc047d8e5824d2368060aec1e30fb3b6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">proxygen::HTTPSession::hasMoreWrites</a></div><div class="ttdeci">bool hasMoreWrites() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02812">HTTPSession.cpp:2812</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af13305c84439720b53378c575827ccf4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::scheduleWrite </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Schedule a write to occur at the end of this event loop. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02235">2235</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8h_source.html#l00137">proxygen::HTTP2PriorityQueue::empty()</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01994">notifyIngressBodyProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00453">notifyPendingEgress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01347">onCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02886">onConnectionSendWindowOpen()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00128">proxygen::HTTPUpstreamSession::onNativeProtocolUpgrade()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02754">onNewTransactionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">onPingRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02738">onSessionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01302">onSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01791">sendAbort()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01837">sendCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01704">sendChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01713">sendChunkTerminator()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02517">sendPing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02543">sendPriorityImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01503">sendSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01984">sendWindowUpdate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00069">proxygen::HTTPUpstreamSession::startNow()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>.</p>
<div class="fragment"><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                           {</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;  <span class="comment">// Do all the network writes for this connection in one batch at</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;  <span class="comment">// the end of the current event loop iteration.  Writing in a</span></div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;  <span class="comment">// batch helps us packetize the network traffic more efficiently,</span></div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;  <span class="comment">// as well as saving a few system calls.</span></div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;  <span class="keywordflow">if</span> (!isLoopCallbackScheduled() &amp;&amp;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      (<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.front() || !<a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">empty</a>())) {</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    VLOG(5) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; scheduling write callback&quot;</span>;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;getEventBase()-&gt;runInLoop(<span class="keyword">this</span>);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;  }</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_ad0b3818288824506c5a3abb23101f439"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#ad0b3818288824506c5a3abb23101f439">proxygen::HTTP2PriorityQueue::empty</a></div><div class="ttdeci">bool empty() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8h_source.html#l00137">HTTP2PriorityQueue.h:137</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a759cc6ebd094ef9363a0bdfdba2e5b3d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendAbort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9b">ErrorCode</a>&#160;</td>
          <td class="paramname"><em>statusCode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a196ee69eed048b43bdc900bb97c080fa">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01791">1791</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#adfb41670b50d0608a8beb934494109be">proxygen::HTTPCodec::generateRstStream()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="SPDYCodec_8cpp_source.html#l00110">statusCode</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02">proxygen::TRANSACTION_ABORT</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;                                                             {</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;  <span class="comment">// Ask the codec to generate an abort indicator for the transaction.</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;  <span class="comment">// Depending on the protocol, this may be a no-op.</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;  <span class="comment">// Schedule a network write to send out whatever egress we might</span></div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;  <span class="comment">// have queued up.</span></div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; sending abort for streamID=&quot;</span> &lt;&lt; txn-&gt;getID();</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;  <span class="comment">// drain this transaction&#39;s writeBuf instead of flushing it</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;  <span class="comment">// then enqueue the abort directly into the Session buffer,</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;  <span class="comment">// hence with max priority.</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;  <span class="keywordtype">size_t</span> encodedSize = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#adfb41670b50d0608a8beb934494109be">generateRstStream</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;                                                 txn-&gt;getID(),</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;                                                 <a class="code" href="SPDYCodec_8cpp.html#a6d7c29827e855a62945ede0ae6e82786">statusCode</a>);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>()) {</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="comment">// HTTP 1x codec does not support per stream abort so this will</span></div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="comment">// render the codec not reusable</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02">ConnectionCloseReason::TRANSACTION_ABORT</a>);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;  }</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;  <span class="comment">// If the codec wasn&#39;t able to write a L7 message for the abort, then</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;  <span class="comment">// fall back to closing the transport with a TCP level RST</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ae5aa7681b3dffcccf4cae4d2dbf36cfa">onEgressMessageFinished</a>(txn, !encodedSize);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordflow">return</span> encodedSize;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;}</div><div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667aaf5a2dd0c659c4547760d2d9acc3bc02">proxygen::ConnectionCloseReason::TRANSACTION_ABORT</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_a6d7c29827e855a62945ede0ae6e82786"><div class="ttname"><a href="SPDYCodec_8cpp.html#a6d7c29827e855a62945ede0ae6e82786">statusCode</a></div><div class="ttdeci">spdy::GoawayStatusCode statusCode</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00110">SPDYCodec.cpp:110</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ae5aa7681b3dffcccf4cae4d2dbf36cfa"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ae5aa7681b3dffcccf4cae4d2dbf36cfa">proxygen::HTTPSession::onEgressMessageFinished</a></div><div class="ttdeci">void onEgressMessageFinished(HTTPTransaction *txn, bool withRST=false)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01722">HTTPSession.cpp:1722</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_adfb41670b50d0608a8beb934494109be"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#adfb41670b50d0608a8beb934494109be">proxygen::HTTPCodec::generateRstStream</a></div><div class="ttdeci">virtual size_t generateRstStream(folly::IOBufQueue &amp;writeBuf, StreamID stream, ErrorCode code)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac48b06bc64e49437711d8574f9facd67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendBody </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeEOM</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>trackLastByteFlushed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a0c3f6ac1245cf283d586e216740e5b7d">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01675">1675</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00961">bodyBytesPerWriteBuf_</a>, <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#ad914e07a10cf00dc93e9cb9e0c0205b3">proxygen::HTTPCodec::generateBody()</a>, <a class="el" href="HTTPSession_8h_source.html#l01052">inLoopCallback_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00053">proxygen::HTTPCodec::NoPadding</a>, <a class="el" href="HTTPSession_8h_source.html#l00956">pendingWriteSizeDelta_</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;                                                          {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;  uint64_t offset = <a class="code" href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">sessionByteOffset</a>();</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;  <span class="keywordtype">size_t</span> bodyLen = body ? body-&gt;computeChainDataLength(): 0;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;  <span class="keywordtype">size_t</span> encodedSize = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ad914e07a10cf00dc93e9cb9e0c0205b3">generateBody</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                                            txn-&gt;getID(),</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;                                            std::move(body),</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                                            <a class="code" href="classproxygen_1_1HTTPCodec.html#a4e89135b63d8cf74e3edf6448344c8d9">HTTPCodec::NoPadding</a>,</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                                            includeEOM);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">inLoopCallback_</a>);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a> -= bodyLen;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a28cf2cb8599e3a919902015ab672c77a">bodyBytesPerWriteBuf_</a> += bodyLen;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;  <span class="keywordflow">if</span> (encodedSize &gt; 0 &amp;&amp; !txn-&gt;testAndSetFirstByteSent() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;addFirstBodyByteEvent(offset, txn);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;  }</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;  <span class="keywordflow">if</span> (trackLastByteFlushed &amp;&amp; encodedSize &gt; 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;addTrackedByteEvent(txn, offset + encodedSize);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;  }</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;  <span class="keywordflow">if</span> (includeEOM) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    VLOG(5) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; sending EOM in body for streamID=&quot;</span> &lt;&lt; txn-&gt;getID();</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">commonEom</a>(txn, encodedSize, <span class="keyword">true</span>);</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;  }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;  <span class="keywordflow">return</span> encodedSize;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_a4e89135b63d8cf74e3edf6448344c8d9"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a4e89135b63d8cf74e3edf6448344c8d9">proxygen::HTTPCodec::NoPadding</a></div><div class="ttdeci">static const folly::Optional&lt; uint8_t &gt; NoPadding</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00053">HTTPCodec.h:53</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0d6ad6ab9f62dbe8bf1afac20d86b1b2"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0d6ad6ab9f62dbe8bf1afac20d86b1b2">proxygen::HTTPSession::inLoopCallback_</a></div><div class="ttdeci">bool inLoopCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01052">HTTPSession.h:1052</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ad914e07a10cf00dc93e9cb9e0c0205b3"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ad914e07a10cf00dc93e9cb9e0c0205b3">proxygen::HTTPCodec::generateBody</a></div><div class="ttdeci">virtual size_t generateBody(folly::IOBufQueue &amp;writeBuf, StreamID stream, std::unique_ptr&lt; folly::IOBuf &gt; chain, folly::Optional&lt; uint8_t &gt; padding, bool eom)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab3772d377d80a1455b5e63a582cc04f3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">proxygen::HTTPSession::commonEom</a></div><div class="ttdeci">void commonEom(HTTPTransaction *txn, size_t encodedSize, bool piggybacked) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01664">HTTPSession.cpp:1664</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a28cf2cb8599e3a919902015ab672c77a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a28cf2cb8599e3a919902015ab672c77a">proxygen::HTTPSession::bodyBytesPerWriteBuf_</a></div><div class="ttdeci">uint64_t bodyBytesPerWriteBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00961">HTTPSession.h:961</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aca40d2fb247e55369cef0e1a94c4e91a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">proxygen::HTTPSession::pendingWriteSizeDelta_</a></div><div class="ttdeci">int64_t pendingWriteSizeDelta_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00956">HTTPSession.h:956</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0a89c569f118b1e44ce3749c8ab2bb66"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">proxygen::HTTPSession::sessionByteOffset</a></div><div class="ttdeci">uint64_t sessionByteOffset()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00513">HTTPSession.h:513</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a81217225c4cb8a8268e5c96c80ce7196"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendCertificateRequest </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; folly::IOBuf &gt;&#160;</td>
          <td class="paramname"><em>certificateRequestContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; fizz::Extension &gt;&#160;</td>
          <td class="paramname"><em>extensions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send a CERTIFICATE_REQUEST frame. If the underlying protocol doesn't support secondary authentication, this is a no-op and 0 is returned. </p>

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPSessionBase.html#ae0d22bef37bd1144995ea4a9715f9f6b">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01837">1837</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00631">proxygen::HTTPCodec::generateCertificateRequest()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00657">proxygen::HTTPCodec::getIngressSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8h_source.html#l01057">secondAuthManager_</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">proxygen::SETTINGS_HTTP_CERT_AUTH</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>.</p>
<div class="fragment"><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                                         {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;  <span class="comment">// Check if both sending and receiving peer have advertised valid</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;  <span class="comment">// SETTINGS_HTTP_CERT_AUTH setting. Otherwise, the frames for secondary</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;  <span class="comment">// authentication should not be sent.</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;  <span class="keyword">auto</span> ingressSettings = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#aedbff2455d784b58ee452d648858cc9a">getIngressSettings</a>();</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;  <span class="keyword">auto</span> egressSettings = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;  <span class="keywordflow">if</span> (ingressSettings &amp;&amp; egressSettings) {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;    <span class="keywordflow">if</span> (ingressSettings-&gt;getSetting(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">SettingsId::SETTINGS_HTTP_CERT_AUTH</a>, 0) ==</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            0 ||</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        egressSettings-&gt;getSetting(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">SettingsId::SETTINGS_HTTP_CERT_AUTH</a>, 0) ==</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            0) {</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Secondary certificate authentication is not supported.&quot;</span>;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    }</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;  }</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;  <span class="keyword">auto</span> authRequest = <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>-&gt;createAuthRequest(</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      std::move(certificateRequestContext), std::move(extensions));</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="keyword">auto</span> encodedSize = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8a77434d064a55376acef338e068ef86">generateCertificateRequest</a>(</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, authRequest.first, std::move(authRequest.second));</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;  <span class="keywordflow">if</span> (encodedSize &gt; 0) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Failed to generate CERTIFICATE_REQUEST frame.&quot;</span>;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;  }</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;  <span class="keywordflow">return</span> encodedSize;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_aedbff2455d784b58ee452d648858cc9a"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aedbff2455d784b58ee452d648858cc9a">proxygen::HTTPCodec::getIngressSettings</a></div><div class="ttdeci">virtual const HTTPSettings * getIngressSettings() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00657">HTTPCodec.h:657</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">proxygen::SettingsId::SETTINGS_HTTP_CERT_AUTH</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f1fa1f46d328890e336be404fa4ce47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">proxygen::HTTPSession::secondAuthManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SecondaryAuthManager &gt; secondAuthManager_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01057">HTTPSession.h:1057</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8a77434d064a55376acef338e068ef86"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8a77434d064a55376acef338e068ef86">proxygen::HTTPCodec::generateCertificateRequest</a></div><div class="ttdeci">virtual size_t generateCertificateRequest(folly::IOBufQueue &amp;, uint16_t, std::unique_ptr&lt; folly::IOBuf &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00631">HTTPCodec.h:631</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0de809896f039c83b33f96edd4b2823b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendChunkHeader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#af21bcdf1b2e19d5817252a8af9bcc1d6">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01704">1704</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a10a3cf44e3748bddd22d260a028c152c">proxygen::HTTPCodec::generateChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;                            {</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;  <span class="keywordtype">size_t</span> encodedSize = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a10a3cf44e3748bddd22d260a028c152c">generateChunkHeader</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;                                                   txn-&gt;getID(),</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;                                                   length);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;  <span class="keywordflow">return</span> encodedSize;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a10a3cf44e3748bddd22d260a028c152c"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a10a3cf44e3748bddd22d260a028c152c">proxygen::HTTPCodec::generateChunkHeader</a></div><div class="ttdeci">virtual size_t generateChunkHeader(folly::IOBufQueue &amp;writeBuf, StreamID stream, size_t length)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae3c74e6afa642fe7db4db1cb912e44e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendChunkTerminator </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#af62ff7bd7b8f57ee839d95fcbdecd498">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01713">1713</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a6e20271ad023252b6fa877d95b413f26">proxygen::HTTPCodec::generateChunkTerminator()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                                   {</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordtype">size_t</span> encodedSize = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a6e20271ad023252b6fa877d95b413f26">generateChunkTerminator</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;                                                       txn-&gt;getID());</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;  <span class="keywordflow">return</span> encodedSize;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a6e20271ad023252b6fa877d95b413f26"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a6e20271ad023252b6fa877d95b413f26">proxygen::HTTPCodec::generateChunkTerminator</a></div><div class="ttdeci">virtual size_t generateChunkTerminator(folly::IOBufQueue &amp;writeBuf, StreamID stream)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a158fcf7cbfa48f2974db6fcd84615673"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendEOM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPHeaders.html">HTTPHeaders</a> *&#160;</td>
          <td class="paramname"><em>trailers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ad3e8c25f82c1ab3d38602ce696fcfe70">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01769">1769</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#aefa134de8aff8e9000092a9996546bd5">proxygen::HTTPCodec::generateEOM()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a097d1fa44f042101b2eeeb775de65289">proxygen::HTTPCodec::generateTrailers()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol()</a>, <a class="el" href="CodecProtocol_8cpp_source.html#l00078">proxygen::isHTTP2CodecProtocol()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;                                                                  {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;  VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; sending EOM for streamID=&quot;</span> &lt;&lt; txn-&gt;getID()</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;          &lt;&lt; <span class="stringliteral">&quot; trailers=&quot;</span> &lt;&lt; (trailers ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;  <span class="keywordtype">size_t</span> encodedSize = 0;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  <span class="keywordflow">if</span> (trailers) {</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;    encodedSize = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a097d1fa44f042101b2eeeb775de65289">generateTrailers</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, txn-&gt;getID(), *trailers);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;  }</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;  <span class="comment">// Don&#39;t send EOM for HTTP2, when trailers sent.</span></div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;  <span class="comment">// sendTrailers already flagged end of stream.</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="keywordtype">bool</span> http2Trailers = trailers &amp;&amp; <a class="code" href="namespaceproxygen.html#a805a889c6d02d3310e7f45ab5174f0b5">isHTTP2CodecProtocol</a>(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">getProtocol</a>());</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">if</span> (!http2Trailers) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;    encodedSize += <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#aefa134de8aff8e9000092a9996546bd5">generateEOM</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, txn-&gt;getID());</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;  }</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">commonEom</a>(txn, encodedSize, <span class="keyword">false</span>);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;  <span class="keywordflow">return</span> encodedSize;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a3818f5333dbb3c19312984ac5f069969"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a3818f5333dbb3c19312984ac5f069969">proxygen::HTTPCodec::getProtocol</a></div><div class="ttdeci">virtual CodecProtocol getProtocol() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a097d1fa44f042101b2eeeb775de65289"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a097d1fa44f042101b2eeeb775de65289">proxygen::HTTPCodec::generateTrailers</a></div><div class="ttdeci">virtual size_t generateTrailers(folly::IOBufQueue &amp;writeBuf, StreamID stream, const HTTPHeaders &amp;trailers)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab3772d377d80a1455b5e63a582cc04f3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">proxygen::HTTPSession::commonEom</a></div><div class="ttdeci">void commonEom(HTTPTransaction *txn, size_t encodedSize, bool piggybacked) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01664">HTTPSession.cpp:1664</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_aefa134de8aff8e9000092a9996546bd5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#aefa134de8aff8e9000092a9996546bd5">proxygen::HTTPCodec::generateEOM</a></div><div class="ttdeci">virtual size_t generateEOM(folly::IOBufQueue &amp;writeBuf, StreamID stream)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a805a889c6d02d3310e7f45ab5174f0b5"><div class="ttname"><a href="namespaceproxygen.html#a805a889c6d02d3310e7f45ab5174f0b5">proxygen::isHTTP2CodecProtocol</a></div><div class="ttdeci">bool isHTTP2CodecProtocol(CodecProtocol protocol)</div><div class="ttdef"><b>Definition:</b> <a href="CodecProtocol_8cpp_source.html#l00078">CodecProtocol.cpp:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac70579f6c74d966cb48ce54963623d16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::sendHeaders </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>headers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#a3229605c4d71bcf5379d0dd133870421">HTTPHeaderSize</a> *&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>includeEOM</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a4471d40c95555b058e2721955e432fea">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01584">1584</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00499">proxygen::HTTPCodec::generateExHeader()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a572e25a01e0d36bb527db2dc39ca26b3">proxygen::HTTPCodec::generateHeader()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00492">proxygen::HTTPCodec::generatePushPromise()</a>, <a class="el" href="HTTPSession_8h_source.html#l00114">getHTTP2PrioritiesEnabled()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00737">getMessagePriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02637">incrementOutgoingStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02509">shouldShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                                                        {</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;  CHECK(<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;  unique_ptr&lt;IOBuf&gt; goawayBuf;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a488290b5d92a67ab804c6b0f589ad9e0">shouldShutdown</a>()) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;    <span class="comment">// For HTTP/1.1, add Connection: close</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;    <span class="comment">// For SPDY, save the goaway for AFTER the request</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;    <span class="keyword">auto</span> writeBuf = <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.move();</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6047ce6e7eea6982b1e2652eaf8ad95c">drainImpl</a>();</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    goawayBuf = <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.move();</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.append(std::move(writeBuf));</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;  }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>() || (txn-&gt;isPushed() &amp;&amp; headers.isRequest())) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    <span class="comment">// upstream picks priority</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">getHTTP2PrioritiesEnabled</a>()) {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      <span class="keyword">auto</span> pri = <a class="code" href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">getMessagePriority</a>(&amp;headers);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      txn-&gt;onPriorityUpdate(pri);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;    }</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;  }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> wasReusable = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>();</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;  <span class="keyword">const</span> uint64_t oldOffset = <a class="code" href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">sessionByteOffset</a>();</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;  <span class="keyword">auto</span> exAttributes = txn-&gt;getExAttributes();</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;  <span class="keyword">auto</span> assocStream = txn-&gt;getAssocTxnId();</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;  <span class="keywordflow">if</span> (exAttributes) {</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#af7c397a651c7e848fdef4015f6d166d3">generateExHeader</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;                             txn-&gt;getID(),</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                             headers,</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;                             *exAttributes,</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;                             includeEOM,</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;                             size);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (headers.isRequest() &amp;&amp; assocStream) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="comment">// Only PUSH_PROMISE (not push response) has an associated stream</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a087b49a9fb21bf2219125ce63a96ea11">generatePushPromise</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;                                txn-&gt;getID(),</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;                                headers,</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;                                *assocStream,</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;                                includeEOM,</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;                                size);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a572e25a01e0d36bb527db2dc39ca26b3">generateHeader</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;                           txn-&gt;getID(),</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                           headers,</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                           includeEOM,</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;                           size);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;  }</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;  <span class="keyword">const</span> uint64_t newOffset = <a class="code" href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">sessionByteOffset</a>();</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;  <span class="comment">// for push response count towards the MAX_CONCURRENT_STREAMS limit</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() &amp;&amp; headers.isResponse() &amp;&amp; txn-&gt;isPushed()) {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#aa3591cfa6ee461e5a20ca0ffe4943157">incrementOutgoingStreams</a>();</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;  }</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;  <span class="comment">// For all upstream headers, addFirstHeaderByteEvent should be added</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;  <span class="comment">// For all downstream, only response headers need addFirstHeaderByteEvent</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;  <span class="keywordtype">bool</span> shouldAddFirstHeaderByteEvent = <a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>() ||</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;                                       (<a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() &amp;&amp; headers.isResponse());</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;  <span class="keywordflow">if</span> (shouldAddFirstHeaderByteEvent &amp;&amp; newOffset &gt; oldOffset &amp;&amp;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      !txn-&gt;testAndSetFirstHeaderByteSent() &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;addFirstHeaderByteEvent(newOffset, txn);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;  }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;  <span class="keywordflow">if</span> (size) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; sending headers, size=&quot;</span> &lt;&lt; size-&gt;compressed</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;, uncompressedSize=&quot;</span> &lt;&lt; size-&gt;uncompressed;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;  }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;  <span class="keywordflow">if</span> (goawayBuf) {</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; moved GOAWAY to end of writeBuf&quot;</span>;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.append(std::move(goawayBuf));</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  }</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  <span class="keywordflow">if</span> (includeEOM) {</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">commonEom</a>(txn, 0, <span class="keyword">true</span>);</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af9ed177276be468c39890fd444d3b38c">onHeadersSent</a>(headers, wasReusable);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a572e25a01e0d36bb527db2dc39ca26b3"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a572e25a01e0d36bb527db2dc39ca26b3">proxygen::HTTPCodec::generateHeader</a></div><div class="ttdeci">virtual void generateHeader(folly::IOBufQueue &amp;writeBuf, StreamID stream, const HTTPMessage &amp;msg, bool eom=false, HTTPHeaderSize *size=nullptr)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6047ce6e7eea6982b1e2652eaf8ad95c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6047ce6e7eea6982b1e2652eaf8ad95c">proxygen::HTTPSession::drainImpl</a></div><div class="ttdeci">void drainImpl()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02494">HTTPSession.cpp:2494</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a087b49a9fb21bf2219125ce63a96ea11"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a087b49a9fb21bf2219125ce63a96ea11">proxygen::HTTPCodec::generatePushPromise</a></div><div class="ttdeci">virtual void generatePushPromise(folly::IOBufQueue &amp;, StreamID, const HTTPMessage &amp;, StreamID, bool, HTTPHeaderSize *)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00492">HTTPCodec.h:492</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ab3772d377d80a1455b5e63a582cc04f3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ab3772d377d80a1455b5e63a582cc04f3">proxygen::HTTPSession::commonEom</a></div><div class="ttdeci">void commonEom(HTTPTransaction *txn, size_t encodedSize, bool piggybacked) noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l01664">HTTPSession.cpp:1664</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a177d9f43b8dcd75a09ccbe02a2f00498"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a177d9f43b8dcd75a09ccbe02a2f00498">proxygen::HTTPSession::getHTTP2PrioritiesEnabled</a></div><div class="ttdeci">bool getHTTP2PrioritiesEnabled() const override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00114">HTTPSession.h:114</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af9ed177276be468c39890fd444d3b38c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af9ed177276be468c39890fd444d3b38c">proxygen::HTTPSession::onHeadersSent</a></div><div class="ttdeci">virtual void onHeadersSent(const HTTPMessage &amp;, bool)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00302">HTTPSession.h:302</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa3591cfa6ee461e5a20ca0ffe4943157"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa3591cfa6ee461e5a20ca0ffe4943157">proxygen::HTTPSession::incrementOutgoingStreams</a></div><div class="ttdeci">void incrementOutgoingStreams()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02637">HTTPSession.cpp:2637</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_af7c397a651c7e848fdef4015f6d166d3"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#af7c397a651c7e848fdef4015f6d166d3">proxygen::HTTPCodec::generateExHeader</a></div><div class="ttdeci">virtual void generateExHeader(folly::IOBufQueue &amp;, StreamID, const HTTPMessage &amp;, const HTTPCodec::ExAttributes &amp;, bool, HTTPHeaderSize *)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00499">HTTPCodec.h:499</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a58e8277f3fdd50bc8496c79018b21987"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a58e8277f3fdd50bc8496c79018b21987">proxygen::HTTPSession::getMessagePriority</a></div><div class="ttdeci">http2::PriorityUpdate getMessagePriority(const HTTPMessage *msg)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00737">HTTPSession.cpp:737</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a488290b5d92a67ab804c6b0f589ad9e0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a488290b5d92a67ab804c6b0f589ad9e0">proxygen::HTTPSession::shouldShutdown</a></div><div class="ttdeci">bool shouldShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02509">HTTPSession.cpp:2509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0a89c569f118b1e44ce3749c8ab2bb66"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0a89c569f118b1e44ce3749c8ab2bb66">proxygen::HTTPSession::sessionByteOffset</a></div><div class="ttdeci">uint64_t sessionByteOffset()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00513">HTTPSession.h:513</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac21aceda7a1827089fc7cd36f49aa1a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendPing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Causes a ping to be sent on the session. If the underlying protocol doesn't support pings, this will return 0. Otherwise, it will return the number of bytes written on the transport to send the ping. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a3509c8946b85d98bbd20fba77b410430">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02517">2517</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00576">proxygen::HTTPCodec::generatePingRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>.</p>
<div class="fragment"><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                             {</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> bytes = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a70731ca9f30fe9890817034be4e78c28">generatePingRequest</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;  <span class="keywordflow">if</span> (bytes) {</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="keywordflow">return</span> bytes;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a70731ca9f30fe9890817034be4e78c28"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a70731ca9f30fe9890817034be4e78c28">proxygen::HTTPCodec::generatePingRequest</a></div><div class="ttdeci">virtual size_t generatePingRequest(folly::IOBufQueue &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00576">HTTPCodec.h:576</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af56ac7c2c1fa8a251141063e07f86136"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a> proxygen::HTTPSession::sendPriority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td>
          <td class="paramname"><em>pri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends a priority message on this session. If the underlying protocol doesn't support priority, this is a no-op. A new stream identifier will be selected and returned. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPPriorityMapFactoryProvider.html#a1651381ee22e843bfca90b8d46064361">proxygen::HTTPPriorityMapFactoryProvider</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02525">2525</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                                                                   {</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;    <span class="comment">// For HTTP/1.1, don&#39;t call createStream()</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  }</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <span class="keyword">auto</span> <span class="keywordtype">id</span> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">createStream</a>();</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af56ac7c2c1fa8a251141063e07f86136">sendPriority</a>(<span class="keywordtype">id</span>, pri);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <span class="keywordflow">return</span> id;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_acf86dd965f7732f70403449d11bddcbe"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#acf86dd965f7732f70403449d11bddcbe">proxygen::HTTPCodec::createStream</a></div><div class="ttdeci">virtual StreamID createStream()=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af56ac7c2c1fa8a251141063e07f86136"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af56ac7c2c1fa8a251141063e07f86136">proxygen::HTTPSession::sendPriority</a></div><div class="ttdeci">HTTPCodec::StreamID sendPriority(http2::PriorityUpdate pri) override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02525">HTTPSession.cpp:2525</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae4f24229a8ed84336d73a25133f93c30"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendPriority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td>
          <td class="paramname"><em>pri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>As above, but updates an existing priority node. Do not use for real nodes, prefer HTTPTransaction::changePriority. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a4f7dcd3ed81f7c3600c4394436b42cdf">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02535">2535</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTP2PriorityQueue_8cpp_source.html#l00444">proxygen::HTTP2PriorityQueue::addOrUpdatePriorityNode()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02543">sendPriorityImpl()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00692">txnEgressQueue_</a>.</p>
<div class="fragment"><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;                                                          {</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <span class="keyword">auto</span> res = <a class="code" href="classproxygen_1_1HTTPSession.html#a60bf8128ff820516a76e980a1738c7c9">sendPriorityImpl</a>(<span class="keywordtype">id</span>, pri);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">txnEgressQueue_</a>.<a class="code" href="classproxygen_1_1HTTP2PriorityQueue.html#a67e4c47f7b598513ecf028605336135a">addOrUpdatePriorityNode</a>(<span class="keywordtype">id</span>, pri);</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a23a9806ebce88b25cdb0410e06902f9e"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a23a9806ebce88b25cdb0410e06902f9e">proxygen::HTTPSession::txnEgressQueue_</a></div><div class="ttdeci">HTTP2PriorityQueue txnEgressQueue_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00692">HTTPSession.h:692</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a60bf8128ff820516a76e980a1738c7c9"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a60bf8128ff820516a76e980a1738c7c9">proxygen::HTTPSession::sendPriorityImpl</a></div><div class="ttdeci">size_t sendPriorityImpl(HTTPCodec::StreamID streamID, http2::PriorityUpdate pri)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02543">HTTPSession.cpp:2543</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTP2PriorityQueue_html_a67e4c47f7b598513ecf028605336135a"><div class="ttname"><a href="classproxygen_1_1HTTP2PriorityQueue.html#a67e4c47f7b598513ecf028605336135a">proxygen::HTTP2PriorityQueue::addOrUpdatePriorityNode</a></div><div class="ttdeci">void addOrUpdatePriorityNode(HTTPCodec::StreamID id, http2::PriorityUpdate pri)</div><div class="ttdef"><b>Definition:</b> <a href="HTTP2PriorityQueue_8cpp_source.html#l00444">HTTP2PriorityQueue.cpp:444</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a54e9e76f4d782afec9719e73b29a3b40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendPriority </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a> &amp;&#160;</td>
          <td class="paramname"><em>pri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#aaf57400170e2afde845b45288c4f5609">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01819">1819</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l02543">sendPriorityImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;                                                                          {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a60bf8128ff820516a76e980a1738c7c9">sendPriorityImpl</a>(txn-&gt;getID(), pri);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a60bf8128ff820516a76e980a1738c7c9"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a60bf8128ff820516a76e980a1738c7c9">proxygen::HTTPSession::sendPriorityImpl</a></div><div class="ttdeci">size_t sendPriorityImpl(HTTPCodec::StreamID streamID, http2::PriorityUpdate pri)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02543">HTTPSession.cpp:2543</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a60bf8128ff820516a76e980a1738c7c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendPriorityImpl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>streamID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structproxygen_1_1http2_1_1PriorityUpdate.html">http2::PriorityUpdate</a>&#160;</td>
          <td class="paramname"><em>pri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Sends a priority message on this session. If the underlying protocol doesn't support priority, this is a no-op. Returns the number of bytes written on the transport </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02543">2543</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00087">proxygen::http2::PriorityUpdate::exclusive</a>, <a class="el" href="HTTPCodec_8h_source.html#l00620">proxygen::HTTPCodec::generatePriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00086">proxygen::http2::PriorityUpdate::streamDependency</a>, <a class="el" href="HTTP2Framer_8h_source.html#l00088">proxygen::http2::PriorityUpdate::weight</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01819">sendPriority()</a>.</p>
<div class="fragment"><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;                                                              {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;  CHECK_NE(<span class="keywordtype">id</span>, 0);</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">size_t</span> bytes = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a6315ba48314ddbe30a9b5aeb231f4c37">generatePriority</a>(</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, <span class="keywordtype">id</span>, std::make_tuple(pri.streamDependency,</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;                                   pri.exclusive,</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;                                   pri.weight));</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;  <span class="keywordflow">if</span> (bytes) {</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;  }</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <span class="keywordflow">return</span> bytes;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a6315ba48314ddbe30a9b5aeb231f4c37"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a6315ba48314ddbe30a9b5aeb231f4c37">proxygen::HTTPCodec::generatePriority</a></div><div class="ttdeci">virtual size_t generatePriority(folly::IOBufQueue &amp;, StreamID, const HTTPMessage::HTTPPriority &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00620">HTTPCodec.h:620</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85a0e02025ed4dbf075761698f277f91"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Send a settings frame </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a2a00c57228b4a8cbfc4bfcf97fa79fe8">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01503">1503</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00592">proxygen::HTTPCodec::generateSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>.</p>
<div class="fragment"><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                                 {</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;  <span class="keywordtype">size_t</span> size = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ab55cd5f8412d9d930ff6a28e0aa711b6">generateSettings</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;  <span class="keywordflow">return</span> size;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab55cd5f8412d9d930ff6a28e0aa711b6"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab55cd5f8412d9d930ff6a28e0aa711b6">proxygen::HTTPCodec::generateSettings</a></div><div class="ttdeci">virtual size_t generateSettings(folly::IOBufQueue &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00592">HTTPCodec.h:592</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad77ad308a105013cf6a7429b5a7fd224"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::sendWindowUpdate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#aa7b9f0ba2b4f6743a746cb796be14760">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01984">1984</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00610">proxygen::HTTPCodec::generateWindowUpdate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;                                                       {</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;  <span class="keywordtype">size_t</span> sent = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8b80a75b703ace1377f76bd574d81b00">generateWindowUpdate</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, txn-&gt;getID(), bytes);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;  <span class="keywordflow">if</span> (sent) {</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;  }</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;  <span class="keywordflow">return</span> sent;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8b80a75b703ace1377f76bd574d81b00"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8b80a75b703ace1377f76bd574d81b00">proxygen::HTTPCodec::generateWindowUpdate</a></div><div class="ttdeci">virtual size_t generateWindowUpdate(folly::IOBufQueue &amp;, StreamID, uint32_t)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00610">HTTPCodec.h:610</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a89c569f118b1e44ce3749c8ab2bb66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t proxygen::HTTPSession::sessionByteOffset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Tells us what would be the offset of the next byte to be enqueued within the whole session. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00513">513</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00950">bytesScheduled_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTP2Framer_8cpp_source.html#l00021">proxygen::http2::DefaultPriority</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00479">immediateShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02754">onNewTransactionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02738">onSessionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02720">onWriteCompleted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02702">onWriteError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02769">pauseReads()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                                      {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">bytesScheduled_</a> + <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.chainLength();</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a07c84a0d9fdce8ead342f0058e8233be"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a07c84a0d9fdce8ead342f0058e8233be">proxygen::HTTPSession::bytesScheduled_</a></div><div class="ttdeci">uint64_t bytesScheduled_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00950">HTTPSession.h:950</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2fec0d8847998b13b34d943e4cf61011"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setByteEventTracker </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a> &gt;&#160;</td>
          <td class="paramname"><em>byteEventTracker</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00317">317</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00543">proxygen::HTTPSessionBase::sessionStats_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00088">getByteEventTracker()</a>, and <a class="el" href="HTTPDownstreamSessionTest_8cpp_source.html#l00853">TEST()</a>.</p>
<div class="fragment"><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                                                    {</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span> (byteEventTracker &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    byteEventTracker-&gt;absorb(std::move(*<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>));</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a> = byteEventTracker;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;setCallback(<span class="keyword">this</span>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;setTTLBAStats(<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">sessionStats_</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;  }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a1466339f2e2dd5bfcb4aeb3ce7c6c39b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a1466339f2e2dd5bfcb4aeb3ce7c6c39b">proxygen::HTTPSessionBase::sessionStats_</a></div><div class="ttdeci">HTTPSessionStats * sessionStats_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00543">HTTPSessionBase.h:543</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aded2a34214bbbcaf96e07253de9131c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setEgressBytesLimit </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>bytesLimit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the maximum number of bytes allowed to be egressed in the session before cutting it off </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00373">373</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00973">egressBytesLimit_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>.</p>
<div class="fragment"><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                                                         {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">egressBytesLimit_</a> = bytesLimit;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af101f4605f3474ccc175e3f42c5f5c81"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af101f4605f3474ccc175e3f42c5f5c81">proxygen::HTTPSession::egressBytesLimit_</a></div><div class="ttdeci">uint64_t egressBytesLimit_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00973">HTTPSession.h:973</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afd9f33352327dcc51e618f007797f4c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setEgressSettings </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaceproxygen.html#a178ae546fbff60576dc3e3ce2de52410">SettingsList</a> &amp;&#160;</td>
          <td class="paramname"><em>inSettings</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set outgoing settings for this session </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a4eb00f161f175ca1a631e580ac7e86fb">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00351">351</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="HTTPSettings_8cpp_source.html#l00016">proxygen::HTTPSettings::setSetting()</a>, <a class="el" href="test_8c_source.html#l01529">settings</a>, and <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00088">getByteEventTracker()</a>, and <a class="el" href="HTTPSessionAcceptor_8cpp_source.html#l00058">proxygen::HTTPSessionAcceptor::onNewConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                                                                  {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  VLOG_IF(4, <a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>) &lt;&lt; <span class="stringliteral">&quot;Must flush egress settings to peer&quot;</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  HTTPSettings* <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="keywordflow">if</span> (settings) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; setting: inSettings) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      settings-&gt;<a class="code" href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">setSetting</a>(setting.id, setting.value);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSettings_html_af5fd0957f06ce721b9749c5f2e7f78f4"><div class="ttname"><a href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">proxygen::HTTPSettings::setSetting</a></div><div class="ttdeci">void setSetting(SettingsId id, SettingsValue val)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8cpp_source.html#l00016">HTTPSettings.cpp:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf7a8f45923ceb76bcff72f6939011a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setFlowControl </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>initialReceiveWindow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>receiveStreamWindowSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>receiveSessionWindowSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set flow control properties on the session.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initialReceiveWindow</td><td>size of initial receive window for all ingress streams; set via the initial SETTINGS frame </td></tr>
    <tr><td class="paramname">receiveStreamWindowSize</td><td>per-stream receive window for NEW streams; sent via a WINDOW_UPDATE frame </td></tr>
    <tr><td class="paramname">receiveSessionWindowSize</td><td>per-session receive window; sent via a WINDOW_UPDATE frame </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#ae2e92325faa2256085a583798647392c">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00336">336</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::INITIAL_WINDOW_SIZE</a>, <a class="el" href="HTTPSession_8h_source.html#l00976">initialReceiveWindow_</a>, <a class="el" href="HTTPSession_8h_source.html#l00978">receiveSessionWindowSize_</a>, <a class="el" href="HTTPSession_8h_source.html#l00977">receiveStreamWindowSize_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00256">proxygen::HTTPSessionBase::setReadBufferLimit()</a>, <a class="el" href="HTTPSettings_8cpp_source.html#l00016">proxygen::HTTPSettings::setSetting()</a>, <a class="el" href="test_8c_source.html#l01529">settings</a>, and <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSessionTest_8cpp_source.html#l00191">HTTPUpstreamTest&lt; SPDY3CodecPair &gt;::commonSetUp()</a>, <a class="el" href="CurlClient_8cpp_source.html#l00121">CurlService::CurlClient::connectSuccess()</a>, <a class="el" href="HTTPSession_8h_source.html#l00088">getByteEventTracker()</a>, and <a class="el" href="HTTPSessionAcceptor_8cpp_source.html#l00058">proxygen::HTTPSessionAcceptor::onNewConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                                                                  {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a> = initialReceiveWindow;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">receiveStreamWindowSize_</a> = receiveStreamWindowSize;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">receiveSessionWindowSize_</a> = receiveSessionWindowSize;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#aefc99913f4b1b6886c01e86a14da7885">HTTPSessionBase::setReadBufferLimit</a>(receiveSessionWindowSize);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  HTTPSettings* <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <span class="keywordflow">if</span> (settings) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    settings-&gt;<a class="code" href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">setSetting</a>(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">SettingsId::INITIAL_WINDOW_SIZE</a>,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                         <a class="code" href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">initialReceiveWindow_</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa73dd8103a1fb5e6872fc5be1c68074b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">proxygen::HTTPSession::receiveSessionWindowSize_</a></div><div class="ttdeci">size_t receiveSessionWindowSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00978">HTTPSession.h:978</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_aefc99913f4b1b6886c01e86a14da7885"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#aefc99913f4b1b6886c01e86a14da7885">proxygen::HTTPSessionBase::setReadBufferLimit</a></div><div class="ttdeci">void setReadBufferLimit(uint32_t limit)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00256">HTTPSessionBase.h:256</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_abc226c0df6041bba580806abb129fb04"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#abc226c0df6041bba580806abb129fb04">proxygen::HTTPSession::receiveStreamWindowSize_</a></div><div class="ttdeci">size_t receiveStreamWindowSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00977">HTTPSession.h:977</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a413ea44bdc24970646f7de55683f2cd7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a413ea44bdc24970646f7de55683f2cd7">proxygen::HTTPSession::initialReceiveWindow_</a></div><div class="ttdeci">size_t initialReceiveWindow_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00976">HTTPSession.h:976</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045addacca0555b4339b6e9dd1818d95e338">proxygen::SettingsId::INITIAL_WINDOW_SIZE</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSettings_html_af5fd0957f06ce721b9749c5f2e7f78f4"><div class="ttname"><a href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">proxygen::HTTPSettings::setSetting</a></div><div class="ttdeci">void setSetting(SettingsId id, SettingsValue val)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8cpp_source.html#l00016">HTTPSettings.cpp:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4d9d59cc2df5eff2fd9e89c4ad433a9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setHeaderCodecStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HeaderCodec_1_1Stats.html">HeaderCodec::Stats</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a0a1a79eed3a8ed36e51a2723656348f6">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00204">204</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, and <a class="el" href="HTTPCodec_8h_source.html#l00670">proxygen::HTTPCodec::setHeaderCodecStats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                                             {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a0177b39d7554a85c702a2e20ebce2db0">setHeaderCodecStats</a>(stats);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a0177b39d7554a85c702a2e20ebce2db0"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a0177b39d7554a85c702a2e20ebce2db0">proxygen::HTTPCodec::setHeaderCodecStats</a></div><div class="ttdeci">virtual void setHeaderCodecStats(HeaderCodec::Stats *)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00670">HTTPCodec.h:670</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7146166e18d78011dcb8df8685ffa31c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setHTTP2PrioritiesEnabled </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#ad10b65e55937ef9a905786e48133edf0">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00118">118</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00220">proxygen::HTTPSessionBase::setHTTP2PrioritiesEnabled()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSessionAcceptor_8cpp_source.html#l00058">proxygen::HTTPSessionAcceptor::onNewConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                                        {</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#aabc6ad2830a827e37d4d9ed35adb5baa">HTTPSessionBase::setHTTP2PrioritiesEnabled</a>(enabled);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_aabc6ad2830a827e37d4d9ed35adb5baa"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#aabc6ad2830a827e37d4d9ed35adb5baa">proxygen::HTTPSessionBase::setHTTP2PrioritiesEnabled</a></div><div class="ttdeci">void setHTTP2PrioritiesEnabled(bool enabled)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00220">HTTPSessionBase.h:220</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a74cd3ad6f9e4755a65d7d8e5c92a2ce0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setMaxConcurrentIncomingStreams </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Set the maximum number of transactions the remote can open at once. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a961c0ea702af3c201dd0c83f24b87ee6">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00361">361</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">proxygen::MAX_CONCURRENT_STREAMS</a>, <a class="el" href="HTTPSession_8h_source.html#l00930">maxConcurrentIncomingStreams_</a>, <a class="el" href="HTTPSettings_8cpp_source.html#l00016">proxygen::HTTPSettings::setSetting()</a>, <a class="el" href="test_8c_source.html#l01529">settings</a>, <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>, and <a class="el" href="HTTPSessionAcceptor_8cpp_source.html#l00058">proxygen::HTTPSessionAcceptor::onNewConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                                                              {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>);</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">maxConcurrentIncomingStreams_</a> = num;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    HTTPSettings* <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (settings) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      settings-&gt;<a class="code" href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">setSetting</a>(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">SettingsId::MAX_CONCURRENT_STREAMS</a>,</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                           <a class="code" href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">maxConcurrentIncomingStreams_</a>);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">proxygen::SettingsId::MAX_CONCURRENT_STREAMS</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1b45a7c1cdf90d9d8e7425055d7ab24c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">proxygen::HTTPSession::maxConcurrentIncomingStreams_</a></div><div class="ttdeci">uint32_t maxConcurrentIncomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00930">HTTPSession.h:930</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSettings_html_af5fd0957f06ce721b9749c5f2e7f78f4"><div class="ttname"><a href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">proxygen::HTTPSettings::setSetting</a></div><div class="ttdeci">void setSetting(SettingsId id, SettingsValue val)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8cpp_source.html#l00016">HTTPSettings.cpp:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a632376e9b73b4cdafb49de77b87e7a70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setNewTransactionPauseState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>&#160;</td>
          <td class="paramname"><em>streamID</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00722">722</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00478">proxygen::HTTPSessionBase::egressLimitExceeded()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00091">proxygen::HTTPUpstreamSession::newTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00302">onHeadersSent()</a>, and <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00033">proxygen::HTTPDownstreamSession::setupOnHeadersComplete()</a>.</p>
<div class="fragment"><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                                                                   {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">egressLimitExceeded</a>()) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;  <span class="keyword">auto</span> txn = <a class="code" href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">findTransaction</a>(<a class="code" href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  <span class="keywordflow">if</span> (txn) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">// If writes are paused, start this txn off in the egress paused state</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; starting streamID=&quot;</span> &lt;&lt; txn-&gt;getID()</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; egress paused, numActiveWrites_=&quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    txn-&gt;pauseEgress();</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a237f4e26687af1cc1ed5132ecb9afbb0"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">proxygen::HTTPSessionBase::egressLimitExceeded</a></div><div class="ttdeci">bool egressLimitExceeded() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00478">HTTPSessionBase.h:478</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aee368bf4f4005d808257939ad72234ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aee368bf4f4005d808257939ad72234ed">proxygen::HTTPSession::findTransaction</a></div><div class="ttdeci">HTTPTransaction * findTransaction(HTTPCodec::StreamID streamID)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02557">HTTPSession.cpp:2557</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="SPDYCodec_8cpp_html_afa72d8fe10c82e854f975c64b49585de"><div class="ttname"><a href="SPDYCodec_8cpp.html#afa72d8fe10c82e854f975c64b49585de">streamID</a></div><div class="ttdeci">uint32_t streamID</div><div class="ttdef"><b>Definition:</b> <a href="SPDYCodec_8cpp_source.html#l00131">SPDYCodec.cpp:131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a508498d569ac0f41882eb22ea7a61642"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setSecondAuthManager </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> &gt;&#160;</td>
          <td class="paramname"><em>secondAuthManager</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attach a <a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a> to this session to control secondary certificate authentication in HTTP/2. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01824">1824</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01057">secondAuthManager_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>.</p>
<div class="fragment"><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;                                                           {</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a> = std::move(secondAuthManager);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f1fa1f46d328890e336be404fa4ce47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">proxygen::HTTPSession::secondAuthManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SecondaryAuthManager &gt; secondAuthManager_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01057">HTTPSession.h:1057</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a480679a665d1efba1a2393a9c0608665"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setSessionStats </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPSessionStats.html">HTTPSessionStats</a> *&#160;</td>
          <td class="paramname"><em>stats</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classproxygen_1_1HTTPSessionBase.html#a077f02e05a034b8e282f81753edfea25">proxygen::HTTPSessionBase</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00329">329</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00129">proxygen::HTTPSessionBase::setSessionStats()</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00166">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00198">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>, <a class="el" href="HTTPSession_8h_source.html#l00088">getByteEventTracker()</a>, and <a class="el" href="HTTPSessionAcceptor_8cpp_source.html#l00058">proxygen::HTTPSessionAcceptor::onNewConnection()</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                                         {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a077f02e05a034b8e282f81753edfea25">HTTPSessionBase::setSessionStats</a>(stats);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;setTTLBAStats(stats);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a077f02e05a034b8e282f81753edfea25"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a077f02e05a034b8e282f81753edfea25">proxygen::HTTPSessionBase::setSessionStats</a></div><div class="ttdeci">virtual void setSessionStats(HTTPSessionStats *stats)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00129">HTTPSessionBase.h:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1b6ff36da42045dd70278f3862a8ff8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::setupCodec </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00243">243</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="FilterChain_8h_source.html#l00301">proxygen::FilterChain&lt; T1, T2, FilterType, set_callback, TakeOwnership &gt;::addFilters()</a>, <a class="el" href="FilterChain_8h_source.html#l00242">proxygen::FilterChain&lt; T1, T2, FilterType, set_callback, TakeOwnership &gt;::call()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="HTTPCodec_8h_source.html#l00475">proxygen::HTTPCodec::generateConnectionPreface()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00185">getCertAuthSettingVal()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00653">proxygen::HTTPCodec::getEgressSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00521">isDownstream()</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">proxygen::MAX_CONCURRENT_STREAMS</a>, <a class="el" href="HTTPSession_8h_source.html#l00930">maxConcurrentIncomingStreams_</a>, <a class="el" href="HTTPSession_8h_source.html#l00924">maxConcurrentOutgoingStreamsRemote_</a>, <a class="el" href="HTTPSession_8h_source.html#l01057">secondAuthManager_</a>, <a class="el" href="FilterChain_8h_source.html#l00235">proxygen::FilterChain&lt; T1, T2, FilterType, set_callback, TakeOwnership &gt;::setCallback()</a>, <a class="el" href="HTTPSettings_8cpp_source.html#l00016">proxygen::HTTPSettings::setSetting()</a>, <a class="el" href="test_8c_source.html#l01529">settings</a>, <a class="el" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">proxygen::SETTINGS_HTTP_CERT_AUTH</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00374">proxygen::HTTPCodec::supportsSessionFlowControl()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                             {</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// until we support upstream pipelining</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">maxConcurrentIncomingStreams_</a> = 1;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">maxConcurrentOutgoingStreamsRemote_</a> = <a class="code" href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">isDownstream</a>() ? 0 : 1;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  }</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// If a secondary authentication manager is configured for this session, set</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// the SETTINGS_HTTP_CERT_AUTH to indicate support for HTTP-layer certificate</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="comment">// authentication.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  uint32_t certAuthSettingVal = 0;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">secondAuthManager_</a>) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    certAuthSettingVal = <a class="code" href="classproxygen_1_1HTTPSession.html#a8bce2a0083afab9016f69310dd035351">getCertAuthSettingVal</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  HTTPSettings* <a class="code" href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a> = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">getEgressSettings</a>();</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">if</span> (settings) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    settings-&gt;<a class="code" href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">setSetting</a>(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">SettingsId::MAX_CONCURRENT_STREAMS</a>,</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                         <a class="code" href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">maxConcurrentIncomingStreams_</a>);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (certAuthSettingVal != 0) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      settings-&gt;setSetting(<a class="code" href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">SettingsId::SETTINGS_HTTP_CERT_AUTH</a>,</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                           certAuthSettingVal);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a6ae912c73dd75b2d3fb992c458809096">generateConnectionPreface</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ab83490eea5bfcae036b7da8b1a3a0afd">supportsSessionFlowControl</a>() &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a> = <span class="keyword">new</span> FlowControlFilter(*<span class="keyword">this</span>, <a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>, <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>.<a class="code" href="classproxygen_1_1FilterChain.html#a097978132f89f0d76537a83daecfa960">call</a>());</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>.<a class="code" href="classproxygen_1_1FilterChain.html#a156f7de0f5af0dbddfe240c12d0ef27b">addFilters</a>(std::unique_ptr&lt;FlowControlFilter&gt;(<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>));</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment">// if we really support switching from spdy &lt;-&gt; h2, we need to update</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="comment">// existing flow control filter</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>.<a class="code" href="classproxygen_1_1FilterChain.html#a26eec92e23c4bede04208d8996cad587">setCallback</a>(<span class="keyword">this</span>);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPCodec_html_a13245f4e4f749a752c87275396cf9879"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a13245f4e4f749a752c87275396cf9879">proxygen::HTTPCodec::getEgressSettings</a></div><div class="ttdeci">virtual HTTPSettings * getEgressSettings()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00653">HTTPCodec.h:653</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab83490eea5bfcae036b7da8b1a3a0afd"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab83490eea5bfcae036b7da8b1a3a0afd">proxygen::HTTPCodec::supportsSessionFlowControl</a></div><div class="ttdeci">virtual bool supportsSessionFlowControl() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00374">HTTPCodec.h:374</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1FilterChain_html_a156f7de0f5af0dbddfe240c12d0ef27b"><div class="ttname"><a href="classproxygen_1_1FilterChain.html#a156f7de0f5af0dbddfe240c12d0ef27b">proxygen::FilterChain::addFilters</a></div><div class="ttdeci">std::enable_if&lt; std::is_constructible&lt; C &gt;::value &gt;::type addFilters()</div><div class="ttdef"><b>Definition:</b> <a href="FilterChain_8h_source.html#l00301">FilterChain.h:301</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045a0a527b0ec93777ae403ac7831c5b2ae7">proxygen::SettingsId::SETTINGS_HTTP_CERT_AUTH</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967"><div class="ttname"><a href="namespaceproxygen.html#a89466eaf4f6bbc394ccf41acbef3e045af6fa2500b99d7b98c0bb4479135f7967">proxygen::SettingsId::MAX_CONCURRENT_STREAMS</a></div></div>
<div class="ttc" id="test_8c_html_a1dec008fbb156669ec30f7f5f5d10d5c"><div class="ttname"><a href="test_8c.html#a1dec008fbb156669ec30f7f5f5d10d5c">settings</a></div><div class="ttdeci">static http_parser_settings settings</div><div class="ttdef"><b>Definition:</b> <a href="test_8c_source.html#l01529">test.c:1529</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a1b45a7c1cdf90d9d8e7425055d7ab24c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a1b45a7c1cdf90d9d8e7425055d7ab24c">proxygen::HTTPSession::maxConcurrentIncomingStreams_</a></div><div class="ttdeci">uint32_t maxConcurrentIncomingStreams_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00930">HTTPSession.h:930</a></div></div>
<div class="ttc" id="classproxygen_1_1FilterChain_html_a097978132f89f0d76537a83daecfa960"><div class="ttname"><a href="classproxygen_1_1FilterChain.html#a097978132f89f0d76537a83daecfa960">proxygen::FilterChain::call</a></div><div class="ttdeci">T1 * call()</div><div class="ttdef"><b>Definition:</b> <a href="FilterChain_8h_source.html#l00242">FilterChain.h:242</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad5433004842e58bc21e71d0219bd2153"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad5433004842e58bc21e71d0219bd2153">proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_</a></div><div class="ttdeci">uint32_t maxConcurrentOutgoingStreamsRemote_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00924">HTTPSession.h:924</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a6ae912c73dd75b2d3fb992c458809096"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a6ae912c73dd75b2d3fb992c458809096">proxygen::HTTPCodec::generateConnectionPreface</a></div><div class="ttdeci">virtual size_t generateConnectionPreface(folly::IOBufQueue &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00475">HTTPCodec.h:475</a></div></div>
<div class="ttc" id="classproxygen_1_1FilterChain_html_a26eec92e23c4bede04208d8996cad587"><div class="ttname"><a href="classproxygen_1_1FilterChain.html#a26eec92e23c4bede04208d8996cad587">proxygen::FilterChain::setCallback</a></div><div class="ttdeci">void setCallback(T2 *cb) override</div><div class="ttdef"><b>Definition:</b> <a href="FilterChain_8h_source.html#l00235">FilterChain.h:235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a8bce2a0083afab9016f69310dd035351"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a8bce2a0083afab9016f69310dd035351">proxygen::HTTPSession::getCertAuthSettingVal</a></div><div class="ttdeci">uint32_t getCertAuthSettingVal()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00185">HTTPSession.cpp:185</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac638a06769e43a6846f6e3fdcd222a2f"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac638a06769e43a6846f6e3fdcd222a2f">proxygen::HTTPSession::isDownstream</a></div><div class="ttdeci">bool isDownstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00521">HTTPSession.cpp:521</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2f1fa1f46d328890e336be404fa4ce47"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2f1fa1f46d328890e336be404fa4ce47">proxygen::HTTPSession::secondAuthManager_</a></div><div class="ttdeci">std::unique_ptr&lt; SecondaryAuthManager &gt; secondAuthManager_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01057">HTTPSession.h:1057</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSettings_html_af5fd0957f06ce721b9749c5f2e7f78f4"><div class="ttname"><a href="classproxygen_1_1HTTPSettings.html#af5fd0957f06ce721b9749c5f2e7f78f4">proxygen::HTTPSettings::setSetting</a></div><div class="ttdeci">void setSetting(SettingsId id, SettingsValue val)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSettings_8cpp_source.html#l00016">HTTPSettings.cpp:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae180c928b2d55c4e227a1629d8b8a511"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void proxygen::HTTPSession::setupOnHeadersComplete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPMessage.html">HTTPMessage</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Called by <a class="el" href="classproxygen_1_1HTTPSession.html#a01cf2e4876e0d44c1b7974833bef3272">onHeadersComplete()</a>. This function allows downstream and upstream to do any setup (like preparing a handler) when headers are first received from the remote side on a given transaction. </p>

<p>Implemented in <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html#a0bba6b0115f517de0fce6cd64a5cdfbb">proxygen::HTTPUpstreamSession</a>, and <a class="el" href="classproxygen_1_1HTTPDownstreamSession.html#a93c34ca69d797f3e31b11da08bd64a91">proxygen::HTTPDownstreamSession</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00215">connCloseByRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00899">onHeadersComplete()</a>.</p>

</div>
</div>
<a class="anchor" id="a488290b5d92a67ab804c6b0f589ad9e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::shouldShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true iff this session should shutdown at this time. Default behavior is to not shutdown. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02509">2509</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">allTransactionsStarted()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00713">draining_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>.</p>
<div class="fragment"><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                                       {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a> &amp;&amp;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">allTransactionsStarted</a>() &amp;&amp;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>() ||</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;     <a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>() ||</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;     !<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">isReusable</a>());</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a5353997f3caf71049568ad2c460424c5"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a5353997f3caf71049568ad2c460424c5">proxygen::HTTPSession::allTransactionsStarted</a></div><div class="ttdeci">virtual bool allTransactionsStarted() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a66436379f33e2510871cadeb4512f0b5"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a66436379f33e2510871cadeb4512f0b5">proxygen::HTTPCodec::isReusable</a></div><div class="ttdeci">virtual bool isReusable() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a05846ac95dc0538cada7dfd6543e5e3b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">proxygen::HTTPSession::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00713">HTTPSession.h:713</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7773c16e03030dca8e168a2e41564335"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::shutdownTransport </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shutdownReads</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>shutdownWrites</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start closing the socket. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shutdownReads</td><td>Whether to close the read side of the socket. All transactions which are not ingress complete will receive an error. </td></tr>
    <tr><td class="paramname">shutdownWrites</td><td>Whether to close the write side of the socket. All transactions which are not egress complete will receive an error. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>additional error information to pass to each transaction </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02295">2295</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a4f32afc7d536aba32c44d78e183abfbf">proxygen::HTTPCodec::closeOnEgressComplete()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a5ba463f336572a8840e1e782bb0be238">proxygen::HTTPException::EGRESS</a>, <a class="el" href="HTTPSession_8h_source.html#l01022">flowControlTimeout_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00183">proxygen::HTTPSessionBase::getConnectionCloseReason()</a>, <a class="el" href="ProxygenErrorEnum_8cpp_source.html#l00025">proxygen::getErrorString()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00675">proxygen::HTTPCodec::getLastIncomingStreamID()</a>, <a class="el" href="HTTPSession_8h_source.html#l00126">getPeerAddress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954aedb8d33af4486e6873c54224f6cc10ef">proxygen::HTTPException::INGRESS</a>, <a class="el" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::INGRESS_AND_EGRESS</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb">proxygen::IO_WRITE_ERROR</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorConnectionReset</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorEOF</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorSSL</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorTimeout</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorWrite</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::NO_ERROR</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l00535">proxygen::HTTPTransaction::onError()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00057">proxygen::HTTPSessionBase::InfoCallback::onIngressEOF()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a23e624f386bd4f4740acb27cb72df169">proxygen::HTTPCodec::onIngressEOF()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00056">proxygen::HTTPSessionBase::InfoCallback::onIngressError()</a>, <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l00718">resetAfterDrainingWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l01050">resetSocketOnShutdown_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused()</a>, <a class="el" href="Exception_8h_source.html#l00046">proxygen::Exception::setProxygenError()</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::TIMEOUT</a>, <a class="el" href="HTTPSession_8h_source.html#l00694">transactions_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00547">proxygen::HTTPSessionBase::transportInfo_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3">proxygen::UNKNOWN</a>, <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>, <a class="el" href="HTTPSession_8h_source.html#l01044">writes_</a>, <a class="el" href="HTTPSession_8h_source.html#l00717">writesDraining_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00425">flowControlTimeoutExpired()</a>, <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02942">onDeleteAckEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01041">onMessageComplete()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02738">onSessionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02720">onWriteCompleted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00606">readEOF()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00626">readErr()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00988">proxygen::HTTPSession::ShutdownTransportCallback::runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                                                          {</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;  DestructorGuard guard(<span class="keyword">this</span>);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;  <span class="comment">// shutdowns not accounted for, shouldn&#39;t see any</span></div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3">ConnectionCloseReason::UNKNOWN</a>);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;shutdown request for &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot;: reads=&quot;</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;          &lt;&lt; shutdownReads &lt;&lt; <span class="stringliteral">&quot; (currently &quot;</span> &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;          &lt;&lt; <span class="stringliteral">&quot;), writes=&quot;</span> &lt;&lt; shutdownWrites &lt;&lt; <span class="stringliteral">&quot; (currently &quot;</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;          &lt;&lt; <a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;  <span class="keywordtype">bool</span> notifyEgressShutdown = <span class="keyword">false</span>;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;  <span class="keywordtype">bool</span> notifyIngressShutdown = <span class="keyword">false</span>;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;  <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a> error;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">transportInfo_</a>.sslError.empty()) {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    error = <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da24f83ab6d120b0032608d6159f7c2f1c">kErrorSSL</a>;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;error()) {</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;    VLOG(3) &lt;&lt; <span class="stringliteral">&quot;shutdown request for &quot;</span> &lt;&lt; *<span class="keyword">this</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      &lt;&lt; <span class="stringliteral">&quot; on bad socket. Shutting down writes too.&quot;</span>;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ab94370f0363e4f974e819b0bbf1c642b">getConnectionCloseReason</a>() == <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb">ConnectionCloseReason::IO_WRITE_ERROR</a>) {</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      error = <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da77ba7bef1a60134b557f8988a8d7009a">kErrorWrite</a>;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      error = <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956daf75d49c617a4ea8c27d4bf1b432cd42a">kErrorConnectionReset</a>;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    }</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    shutdownWrites = <span class="keyword">true</span>;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#ab94370f0363e4f974e819b0bbf1c642b">getConnectionCloseReason</a>() == <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">ConnectionCloseReason::TIMEOUT</a>) {</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;    error = <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dac8d82d9d46b9904442f90190d8aeb099">kErrorTimeout</a>;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    error = <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60f7c9e48bcca567facd26654ed3b4d8">kErrorEOF</a>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;  }</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;  <span class="keywordflow">if</span> (shutdownReads &amp;&amp; !shutdownWrites &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">flowControlTimeout_</a>.isScheduled()) {</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    <span class="comment">// reads are dead and writes are blocked on a window update that will never</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="comment">// come.  shutdown writes too.</span></div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; Converting read shutdown to read/write due to&quot;</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="stringliteral">&quot; flow control&quot;</span>;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    shutdownWrites = <span class="keyword">true</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;  }</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;  <span class="keywordflow">if</span> (shutdownWrites &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>()) {</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">generateGoaway</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                               <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">getLastIncomingStreamID</a>(),</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                               <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">ErrorCode::NO_ERROR</a>)) {</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    }</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">hasMoreWrites</a>() &amp;&amp;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;        (<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() || <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a4f32afc7d536aba32c44d78e183abfbf">closeOnEgressComplete</a>())) {</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> = <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;drainByteEvents();</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      }</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#aec31815c425ec8ab1aa94988eb9e79a5">resetAfterDrainingWrites_</a>) {</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; writes drained, sending RST&quot;</span>;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">resetSocketOnShutdown_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;        shutdownReads = <span class="keyword">true</span>;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; writes drained, closing&quot;</span>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;shutdownWriteNow();</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      }</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      notifyEgressShutdown = <span class="keyword">true</span>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">writesDraining_</a>) {</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">writesDraining_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      notifyEgressShutdown = <span class="keyword">true</span>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;    } <span class="comment">// else writes are already draining; don&#39;t double notify</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;  }</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;  <span class="keywordflow">if</span> (shutdownReads &amp;&amp; !<a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()) {</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;    notifyIngressShutdown = <span class="keyword">true</span>;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;    <span class="comment">// TODO: send an RST if readBuf_ is non empty?</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;setReadCB(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> = <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">transactions_</a>.empty() &amp;&amp; error == <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956daf75d49c617a4ea8c27d4bf1b432cd42a">kErrorConnectionReset</a>) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a> != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">onIngressError</a>(*<span class="keyword">this</span>, error);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      }</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (error == <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60f7c9e48bcca567facd26654ed3b4d8">kErrorEOF</a>) {</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      <span class="comment">// Report to the codec that the ingress stream has ended</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a23e624f386bd4f4740acb27cb72df169">onIngressEOF</a>();</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a07c229322393c70fa79304ebe986f51c">onIngressEOF</a>();</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      }</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    }</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="comment">// Once reads are shutdown the parser should stop processing</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">setParserPaused</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;  }</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;  <span class="keywordflow">if</span> (notifyIngressShutdown || notifyEgressShutdown) {</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keyword">auto</span> dir = (notifyIngressShutdown &amp;&amp; notifyEgressShutdown)</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                   ? <a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">HTTPException::Direction::INGRESS_AND_EGRESS</a></div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;                   : (notifyIngressShutdown ? <a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954aedb8d33af4486e6873c54224f6cc10ef">HTTPException::Direction::INGRESS</a></div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;                                            : <a class="code" href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a5ba463f336572a8840e1e782bb0be238">HTTPException::Direction::EGRESS</a>);</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    HTTPException ex(</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        dir,</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        folly::to&lt;std::string&gt;(<span class="stringliteral">&quot;Shutdown transport: &quot;</span>, <a class="code" href="namespaceproxygen.html#a8d8e670251d6f1b9c63431fd2d9d912e">getErrorString</a>(error),</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;                               errorMsg.empty() ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; &quot;</span>, errorMsg, <span class="stringliteral">&quot;, &quot;</span>,</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;                               <a class="code" href="classproxygen_1_1HTTPSession.html#a06f714cc6f6448b73257796d7abc551a">getPeerAddress</a>().describe()));</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;    ex.setProxygenError(error);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(&amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#ac1d43f93fad6acb9c5764e0b0dc8bd16">HTTPTransaction::onError</a>, ex);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;  }</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;  <span class="comment">// Close the socket only after the onError() callback on the txns</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;  <span class="comment">// and handler has been detached.</span></div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a>();</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPTransaction_html_ac1d43f93fad6acb9c5764e0b0dc8bd16"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#ac1d43f93fad6acb9c5764e0b0dc8bd16">proxygen::HTTPTransaction::onError</a></div><div class="ttdeci">void onError(const HTTPException &amp;error)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l00535">HTTPTransaction.cpp:535</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956daf75d49c617a4ea8c27d4bf1b432cd42a"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956daf75d49c617a4ea8c27d4bf1b432cd42a">proxygen::kErrorConnectionReset</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a313e95bd7ff25e8565b8f915bf9333ce"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">proxygen::HTTPSession::invokeOnAllTransactions</a></div><div class="ttdeci">void invokeOnAllTransactions(void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00586">HTTPSession.h:586</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a4f32afc7d536aba32c44d78e183abfbf"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a4f32afc7d536aba32c44d78e183abfbf">proxygen::HTTPCodec::closeOnEgressComplete</a></div><div class="ttdeci">virtual bool closeOnEgressComplete() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a94168a3dc69f32035b1f0bcf97897793"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">proxygen::HTTPSession::resetSocketOnShutdown_</a></div><div class="ttdeci">bool resetSocketOnShutdown_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01050">HTTPSession.h:1050</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da77ba7bef1a60134b557f8988a8d7009a"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da77ba7bef1a60134b557f8988a8d7009a">proxygen::kErrorWrite</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a70c2187725e9ed9504596dfbb3bd8c1a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">proxygen::HTTPSessionBase::InfoCallback::onIngressError</a></div><div class="ttdeci">virtual void onIngressError(const HTTPSessionBase &amp;, ProxygenError)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00056">HTTPSessionBase.h:56</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a5ba463f336572a8840e1e782bb0be238"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a5ba463f336572a8840e1e782bb0be238">proxygen::HTTPException::Direction::EGRESS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da24f83ab6d120b0032608d6159f7c2f1c"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da24f83ab6d120b0032608d6159f7c2f1c">proxygen::kErrorSSL</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a07c229322393c70fa79304ebe986f51c"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a07c229322393c70fa79304ebe986f51c">proxygen::HTTPSessionBase::InfoCallback::onIngressEOF</a></div><div class="ttdeci">virtual void onIngressEOF()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00057">HTTPSessionBase.h:57</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::ErrorCode::NO_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aec31815c425ec8ab1aa94988eb9e79a5"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aec31815c425ec8ab1aa94988eb9e79a5">proxygen::HTTPSession::resetAfterDrainingWrites_</a></div><div class="ttdeci">bool resetAfterDrainingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00718">HTTPSession.h:718</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a06f714cc6f6448b73257796d7abc551a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a06f714cc6f6448b73257796d7abc551a">proxygen::HTTPSession::getPeerAddress</a></div><div class="ttdeci">const folly::SocketAddress &amp; getPeerAddress() const noexceptoverride</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00126">HTTPSession.h:126</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ab94370f0363e4f974e819b0bbf1c642b"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ab94370f0363e4f974e819b0bbf1c642b">proxygen::HTTPSessionBase::getConnectionCloseReason</a></div><div class="ttdeci">ConnectionCloseReason getConnectionCloseReason() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00183">HTTPSessionBase.h:183</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a23e624f386bd4f4740acb27cb72df169"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a23e624f386bd4f4740acb27cb72df169">proxygen::HTTPCodec::onIngressEOF</a></div><div class="ttdeci">virtual void onIngressEOF()=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a2161afe8ad9e128e3f1640ef4e4cc234"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a2161afe8ad9e128e3f1640ef4e4cc234">proxygen::HTTPSession::writesDraining_</a></div><div class="ttdeci">bool writesDraining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00717">HTTPSession.h:717</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a51a5012bdb77ee9d24b45a075a351cdc"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">proxygen::HTTPSession::checkForShutdown</a></div><div class="ttdeci">void checkForShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02447">HTTPSession.cpp:2447</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954aedb8d33af4486e6873c54224f6cc10ef"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954aedb8d33af4486e6873c54224f6cc10ef">proxygen::HTTPException::Direction::INGRESS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::ConnectionCloseReason::TIMEOUT</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956dac8d82d9d46b9904442f90190d8aeb099"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dac8d82d9d46b9904442f90190d8aeb099">proxygen::kErrorTimeout</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a67c0735026efb30fefac325da7362a7b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a67c0735026efb30fefac325da7362a7b">proxygen::HTTPSession::transactions_</a></div><div class="ttdeci">std::map&lt; HTTPCodec::StreamID, HTTPTransaction &gt; transactions_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00694">HTTPSession.h:694</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0350e37d74db0188183efccedee6eba7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">proxygen::HTTPSession::writes_</a></div><div class="ttdeci">SocketState writes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01044">HTTPSession.h:1044</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a206f96e3fa41268060203738be887942"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a206f96e3fa41268060203738be887942">proxygen::HTTPCodec::getLastIncomingStreamID</a></div><div class="ttdeci">virtual StreamID getLastIncomingStreamID() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00675">HTTPCodec.h:675</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956d"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">proxygen::ProxygenError</a></div><div class="ttdeci">ProxygenError</div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00075">ProxygenErrorEnum.h:75</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da60f7c9e48bcca567facd26654ed3b4d8"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60f7c9e48bcca567facd26654ed3b4d8">proxygen::kErrorEOF</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a22dec1b6d4dde73ea7380a28b937e545"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway</a></div><div class="ttdeci">virtual size_t generateGoaway(folly::IOBufQueue &amp;writeBuf, StreamID lastStream, ErrorCode code, std::unique_ptr&lt; folly::IOBuf &gt; debugData=nullptr)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9aaa7a89fa2b7ee4ab992ce8fa8c2733"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9aaa7a89fa2b7ee4ab992ce8fa8c2733">proxygen::HTTPSession::flowControlTimeout_</a></div><div class="ttdeci">FlowControlTimeout flowControlTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01022">HTTPSession.h:1022</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a82bd0706831dfc83898b162f58750e73"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a82bd0706831dfc83898b162f58750e73">proxygen::HTTPCodec::setParserPaused</a></div><div class="ttdeci">virtual void setParserPaused(bool paused)=0</div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a696b031073e74bf2cb98e5ef201d4aa3">proxygen::ConnectionCloseReason::UNKNOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adc047d8e5824d2368060aec1e30fb3b6"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adc047d8e5824d2368060aec1e30fb3b6">proxygen::HTTPSession::hasMoreWrites</a></div><div class="ttdeci">bool hasMoreWrites() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02812">HTTPSession.cpp:2812</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPException_html_a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb"><div class="ttname"><a href="classproxygen_1_1HTTPException.html#a63d32340ce3200c654122f8e40d27954a0a0e79f0c191fea76fe119a78a42e0eb">proxygen::HTTPException::Direction::INGRESS_AND_EGRESS</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_ad056bc3f3b5b9ed41dba80ace642f174"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#ad056bc3f3b5b9ed41dba80ace642f174">proxygen::HTTPSessionBase::transportInfo_</a></div><div class="ttdeci">wangle::TransportInfo transportInfo_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00547">HTTPSessionBase.h:547</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ae7b30c1de0f6fd86fc42cd43e23bb8cb">proxygen::ConnectionCloseReason::IO_WRITE_ERROR</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a8d8e670251d6f1b9c63431fd2d9d912e"><div class="ttname"><a href="namespaceproxygen.html#a8d8e670251d6f1b9c63431fd2d9d912e">proxygen::getErrorString</a></div><div class="ttdeci">const char * getErrorString(ProxygenError error)</div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8cpp_source.html#l00025">ProxygenErrorEnum.cpp:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adba39f5cba4a8eaa5a2c54c774fad9ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::shutdownTransportWithReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956d">ProxygenError</a>&#160;</td>
          <td class="paramname"><em>errorCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>errorMsg</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Immediately close the socket in both directions, discarding any queued writes that haven't yet been transferred to the kernel, and send a RST to the client. All transactions receive onWriteError.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">errorCode</td><td>Error code sent with the onWriteError to transactions. </td></tr>
    <tr><td class="paramname">errorMsg</td><td>Error string included in the final error msg. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02403">2403</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00968">byteEventTracker_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02824">errorOnAllTransactions()</a>, <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l00910">pendingWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l01043">reads_</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l01050">resetSocketOnShutdown_</a>, <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, <a class="el" href="HTTPSession_8h_source.html#l00699">sock_</a>, <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>, <a class="el" href="HTTPSession_8h_source.html#l01044">writes_</a>, <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00683">writeTimeout_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02702">onWriteError()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00414">writeTimeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                               {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;  DestructorGuard guard(<span class="keyword">this</span>);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;shutdownTransportWithReset&quot;</span>;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">readsShutdown</a>()) {</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">sock_</a>-&gt;setReadCB(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">reads_</a> = <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;  }</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">writesShutdown</a>()) {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> = <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    IOBuf::destroy(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>.move());</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    <span class="keywordflow">while</span> (!<a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.empty()) {</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.front().detach();</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a>--;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;    }</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; cancel write timer&quot;</span>;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">writeTimeout_</a>.cancelTimeout();</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">resetSocketOnShutdown_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;  }</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a76a5df5785a313ba1c7d92dcc6799648">errorOnAllTransactions</a>(errorCode, errorMsg);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;  <span class="comment">// drainByteEvents() can call detach(txn), which can in turn call</span></div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;  <span class="comment">// shutdownTransport if we were already draining. To prevent double</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;  <span class="comment">// calling onError() to the transactions, we call drainByteEvents()</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;  <span class="comment">// after we&#39;ve given the explicit error.</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>) {</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">byteEventTracker_</a>-&gt;drainByteEvents();</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;  }</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;  <span class="comment">// HTTPTransaction::onError could theoretically schedule more callbacks,</span></div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;  <span class="comment">// so do this last.</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;  <span class="keywordflow">if</span> (isLoopCallbackScheduled()) {</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    cancelLoopCallback();</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;  }</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;  <span class="comment">// onError() callbacks or drainByteEvents() could result in txns detaching</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;  <span class="comment">// due to CallbackGuards going out of scope. Close the socket only after</span></div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;  <span class="comment">// the txns are detached.</span></div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">checkForShutdown</a>();</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a94168a3dc69f32035b1f0bcf97897793"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a94168a3dc69f32035b1f0bcf97897793">proxygen::HTTPSession::resetSocketOnShutdown_</a></div><div class="ttdeci">bool resetSocketOnShutdown_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01050">HTTPSession.h:1050</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a76a5df5785a313ba1c7d92dcc6799648"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a76a5df5785a313ba1c7d92dcc6799648">proxygen::HTTPSession::errorOnAllTransactions</a></div><div class="ttdeci">void errorOnAllTransactions(ProxygenError err, const std::string &amp;errorMsg)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02824">HTTPSession.cpp:2824</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ac1b99af891c8036812baaeb567d5e042"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ac1b99af891c8036812baaeb567d5e042">proxygen::HTTPSession::writeTimeout_</a></div><div class="ttdeci">WriteTimeout writeTimeout_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00683">HTTPSession.h:683</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a6f4805ceb03264def58181d9b628de92"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a6f4805ceb03264def58181d9b628de92">proxygen::HTTPSession::sock_</a></div><div class="ttdeci">folly::AsyncTransportWrapper::UniquePtr sock_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00699">HTTPSession.h:699</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a7a243fae036a60d472f8e4a5264e6a05"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">proxygen::HTTPSession::pendingWrites_</a></div><div class="ttdeci">WriteSegmentList pendingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00910">HTTPSession.h:910</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a51a5012bdb77ee9d24b45a075a351cdc"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a51a5012bdb77ee9d24b45a075a351cdc">proxygen::HTTPSession::checkForShutdown</a></div><div class="ttdeci">void checkForShutdown()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02447">HTTPSession.cpp:2447</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa7593f40c921315dbdb236c7317d793c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa7593f40c921315dbdb236c7317d793c">proxygen::HTTPSession::readsShutdown</a></div><div class="ttdeci">bool readsShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00636">HTTPSession.h:636</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a82766ffaff2fd71996d82c908fb5abeb"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a82766ffaff2fd71996d82c908fb5abeb">proxygen::HTTPSession::writesShutdown</a></div><div class="ttdeci">bool writesShutdown() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00648">HTTPSession.h:648</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a378187e6c569630532de4ba485bebcee"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a378187e6c569630532de4ba485bebcee">proxygen::HTTPSession::reads_</a></div><div class="ttdeci">SocketState reads_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01043">HTTPSession.h:1043</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0350e37d74db0188183efccedee6eba7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">proxygen::HTTPSession::writes_</a></div><div class="ttdeci">SocketState writes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01044">HTTPSession.h:1044</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3cbbe5f3b63dec5fc66d34b96fde70db"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3cbbe5f3b63dec5fc66d34b96fde70db">proxygen::HTTPSession::byteEventTracker_</a></div><div class="ttdeci">std::shared_ptr&lt; ByteEventTracker &gt; byteEventTracker_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00968">HTTPSession.h:968</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9a89f7a8498e8afae9ee48c61f1c8bdc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::startNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Start reading from the transport and send any introductory messages to the remote side. This function must be called once per session to begin reads. </p>

<p>Implements <a class="el" href="classproxygen_1_1HTTPSessionBase.html#afb0355245a0beec339f0e493870a6114">proxygen::HTTPSessionBase</a>.</p>

<p>Reimplemented in <a class="el" href="classproxygen_1_1HTTPUpstreamSession.html#a242b4223b8ff63d7dd7407cc8e312365">proxygen::HTTPUpstreamSession</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00297">297</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="HTTPSession_8h_source.html#l00915">connFlowControl_</a>, <a class="el" href="HTTPSession_8h_source.html#l00713">draining_</a>, <a class="el" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway()</a>, <a class="el" href="HTTPCodec_8h_source.html#l00592">proxygen::HTTPCodec::generateSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02911">getGracefulGoawayAck()</a>, <a class="el" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::NO_ERROR</a>, <a class="el" href="HTTPSession_8h_source.html#l00978">receiveSessionWindowSize_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02792">resumeReads()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="FlowControlFilter_8cpp_source.html#l00044">proxygen::FlowControlFilter::setReceiveWindowSize()</a>, <a class="el" href="HTTPSession_8h_source.html#l00715">started_</a>, and <a class="el" href="HTTPSession_8h_source.html#l00686">writeBuf_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00130">getSetupTransportInfo()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00024">proxygen::HTTPDownstreamSession::startNow()</a>, and <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00069">proxygen::HTTPUpstreamSession::startNow()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                           {</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">started_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#ab55cd5f8412d9d930ff6a28e0aa711b6">generateSettings</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">connFlowControl_</a>-&gt;<a class="code" href="classproxygen_1_1FlowControlFilter.html#a1a9cd3f414379ab670d92cd59cf2a43e">setReceiveWindowSize</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                                           <a class="code" href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">receiveSessionWindowSize_</a>);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// For HTTP/2 if we are currently draining it means we got notified to</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="comment">// shutdown before we sent a SETTINGS frame, so we defer sending a GOAWAY</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;  <span class="comment">// util we&#39;ve started and sent SETTINGS.</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">draining_</a>) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">generateGoaway</a>(<a class="code" href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">writeBuf_</a>,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                           <a class="code" href="classproxygen_1_1HTTPSession.html#a0f8fa22651a3a9a92ba6778bd377bfb3">getGracefulGoawayAck</a>(),</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                           <a class="code" href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">ErrorCode::NO_ERROR</a>);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">scheduleWrite</a>();</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">resumeReads</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a468c2c8d059e0c0dc23bc854bfc20c09"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a468c2c8d059e0c0dc23bc854bfc20c09">proxygen::HTTPSession::started_</a></div><div class="ttdeci">bool started_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00715">HTTPSession.h:715</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aa73dd8103a1fb5e6872fc5be1c68074b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aa73dd8103a1fb5e6872fc5be1c68074b">proxygen::HTTPSession::receiveSessionWindowSize_</a></div><div class="ttdeci">size_t receiveSessionWindowSize_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00978">HTTPSession.h:978</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a9c2b389afc4e09cf0bfdeac210ff195c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9c2b389afc4e09cf0bfdeac210ff195c">proxygen::HTTPSession::connFlowControl_</a></div><div class="ttdeci">FlowControlFilter * connFlowControl_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00915">HTTPSession.h:915</a></div></div>
<div class="ttc" id="classproxygen_1_1FlowControlFilter_html_a1a9cd3f414379ab670d92cd59cf2a43e"><div class="ttname"><a href="classproxygen_1_1FlowControlFilter.html#a1a9cd3f414379ab670d92cd59cf2a43e">proxygen::FlowControlFilter::setReceiveWindowSize</a></div><div class="ttdeci">void setReceiveWindowSize(folly::IOBufQueue &amp;writeBuf, uint32_t capacity)</div><div class="ttdef"><b>Definition:</b> <a href="FlowControlFilter_8cpp_source.html#l00044">FlowControlFilter.cpp:44</a></div></div>
<div class="ttc" id="namespaceproxygen_html_a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c"><div class="ttname"><a href="namespaceproxygen.html#a3d6f6c837ecc1ee254de4e790826ae9bad306b6fdee05fe87455110ddf6501e6c">proxygen::ErrorCode::NO_ERROR</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af13305c84439720b53378c575827ccf4"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af13305c84439720b53378c575827ccf4">proxygen::HTTPSession::scheduleWrite</a></div><div class="ttdeci">void scheduleWrite()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02235">HTTPSession.cpp:2235</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0f8fa22651a3a9a92ba6778bd377bfb3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0f8fa22651a3a9a92ba6778bd377bfb3">proxygen::HTTPSession::getGracefulGoawayAck</a></div><div class="ttdeci">HTTPCodec::StreamID getGracefulGoawayAck() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02911">HTTPSession.cpp:2911</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4fc8e06ea32500b275a03eb1b9829c39"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4fc8e06ea32500b275a03eb1b9829c39">proxygen::HTTPSession::resumeReads</a></div><div class="ttdeci">void resumeReads()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02792">HTTPSession.cpp:2792</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_ad6a139c1478a5d1e3b811b02dfed236d"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#ad6a139c1478a5d1e3b811b02dfed236d">proxygen::HTTPSession::writeBuf_</a></div><div class="ttdeci">folly::IOBufQueue writeBuf_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00686">HTTPSession.h:686</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_ab55cd5f8412d9d930ff6a28e0aa711b6"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#ab55cd5f8412d9d930ff6a28e0aa711b6">proxygen::HTTPCodec::generateSettings</a></div><div class="ttdeci">virtual size_t generateSettings(folly::IOBufQueue &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPCodec_8h_source.html#l00592">HTTPCodec.h:592</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a22dec1b6d4dde73ea7380a28b937e545"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a22dec1b6d4dde73ea7380a28b937e545">proxygen::HTTPCodec::generateGoaway</a></div><div class="ttdeci">virtual size_t generateGoaway(folly::IOBufQueue &amp;writeBuf, StreamID lastStream, ErrorCode code, std::unique_ptr&lt; folly::IOBuf &gt; debugData=nullptr)=0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a05846ac95dc0538cada7dfd6543e5e3b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a05846ac95dc0538cada7dfd6543e5e3b">proxygen::HTTPSession::draining_</a></div><div class="ttdeci">bool draining_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00713">HTTPSession.h:713</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee0c2edc0dd6e8c306b814276a6f661d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::timeoutExpired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00190">190</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00435">describe()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00515">dumpConnectionState()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02017">getCurrentTransportInfoWithoutUpdate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00448">isBusy()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00458">notifyPendingShutdown()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                          {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a8b21d699d9346a86b02f76d1bced5c38">readTimeoutExpired</a>();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a8b21d699d9346a86b02f76d1bced5c38"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a8b21d699d9346a86b02f76d1bced5c38">proxygen::HTTPSession::readTimeoutExpired</a></div><div class="ttdeci">void readTimeoutExpired() noexcept</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00379">HTTPSession.cpp:379</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a27a75b63b2d5d2e397fbf482209e6188"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::transactionTimeout </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a> *&#160;</td>
          <td class="paramname"><em>txn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classproxygen_1_1HTTPTransaction_1_1Transport.html#a4805d62c2895d90c91bd43b396a6fa68">proxygen::HTTPTransaction::Transport</a>.</p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l01545">1545</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00549">proxygen::HTTPSessionBase::codec_</a>, <a class="el" href="classproxygen_1_1HTTPSession.html#af9a8e7884bf77f9c5831f652ff803616">getTransactionTimeoutHandler()</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00545">proxygen::HTTPSessionBase::infoCallback_</a>, <a class="el" href="HTTPSession_8h_source.html#l00719">ingressError_</a>, <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorTimeout</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00056">proxygen::HTTPSessionBase::InfoCallback::onIngressError()</a>, and <a class="el" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>
<div class="fragment"><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;                                                             {</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;  <span class="comment">// A transaction has timed out.  If the transaction does not have</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;  <span class="comment">// a Handler yet, because we haven&#39;t yet received the full request</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;  <span class="comment">// headers, we give it a DirectResponseHandler that generates an</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;  <span class="comment">// error page.</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;  VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Transaction timeout for streamID=&quot;</span> &lt;&lt; txn-&gt;getID();</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;    <span class="comment">// this error should only prevent us from reading/handling more errors</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;    <span class="comment">// on serial streams</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">ingressError_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;  }</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;  <span class="keywordflow">if</span> (!txn-&gt;getHandler() &amp;&amp;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      txn-&gt;getEgressState() == HTTPTransactionEgressSM::State::Start) {</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; Timed out receiving headers&quot;</span>;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">infoCallback_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">onIngressError</a>(*<span class="keyword">this</span>, <a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dac8d82d9d46b9904442f90190d8aeb099">kErrorTimeout</a>);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">codec_</a>-&gt;<a class="code" href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">supportsParallelRequests</a>()) {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="comment">// This can only happen with HTTP/2 where the HEADERS frame is incomplete</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;      <span class="comment">// and we time out waiting for the CONTINUATION.  Abort the request.</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      <span class="comment">//</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="comment">// It would maybe be a little nicer to use the timeout handler for these</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <span class="comment">// also.</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      txn-&gt;sendAbort();</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    }</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    VLOG(4) &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; creating direct error handler&quot;</span>;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    <span class="keyword">auto</span> handler = <a class="code" href="classproxygen_1_1HTTPSession.html#af9a8e7884bf77f9c5831f652ff803616">getTransactionTimeoutHandler</a>(txn);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    txn-&gt;setHandler(handler);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;  }</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;  <span class="comment">// Tell the transaction about the timeout.  The transaction will</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;  <span class="comment">// communicate the timeout to the handler, and the handler will</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;  <span class="comment">// decide how to proceed.</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;  txn-&gt;onIngressTimeout();</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_adc31f634b819c5a8d802ba68fa322dd6"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#adc31f634b819c5a8d802ba68fa322dd6">proxygen::HTTPSessionBase::infoCallback_</a></div><div class="ttdeci">InfoCallback * infoCallback_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00545">HTTPSessionBase.h:545</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a256aa0726caa81650aae4343fac7ca3d"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a256aa0726caa81650aae4343fac7ca3d">proxygen::HTTPSessionBase::codec_</a></div><div class="ttdeci">HTTPCodecFilterChain codec_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00549">HTTPSessionBase.h:549</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_1_1InfoCallback_html_a70c2187725e9ed9504596dfbb3bd8c1a"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase_1_1InfoCallback.html#a70c2187725e9ed9504596dfbb3bd8c1a">proxygen::HTTPSessionBase::InfoCallback::onIngressError</a></div><div class="ttdeci">virtual void onIngressError(const HTTPSessionBase &amp;, ProxygenError)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00056">HTTPSessionBase.h:56</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af9a8e7884bf77f9c5831f652ff803616"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af9a8e7884bf77f9c5831f652ff803616">proxygen::HTTPSession::getTransactionTimeoutHandler</a></div><div class="ttdeci">virtual HTTPTransaction::Handler * getTransactionTimeoutHandler(HTTPTransaction *txn)=0</div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956dac8d82d9d46b9904442f90190d8aeb099"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956dac8d82d9d46b9904442f90190d8aeb099">proxygen::kErrorTimeout</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPCodec_html_a8dfbc8c5bee0947e718742e541259be2"><div class="ttname"><a href="classproxygen_1_1HTTPCodec.html#a8dfbc8c5bee0947e718742e541259be2">proxygen::HTTPCodec::supportsParallelRequests</a></div><div class="ttdeci">virtual bool supportsParallelRequests() const =0</div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af9b8fc565cfb8e86162b22921995e08b"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af9b8fc565cfb8e86162b22921995e08b">proxygen::HTTPSession::ingressError_</a></div><div class="ttdeci">bool ingressError_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00719">HTTPSession.h:719</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1cdd56f14df7e2a12dd42f7de1fc868f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::updateWriteBufSize </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>delta</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02261">2261</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSessionBase_8h_source.html#l00478">proxygen::HTTPSessionBase::egressLimitExceeded()</a>, <a class="el" href="HTTPSession_8h_source.html#l01053">inResume_</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="HTTPTransaction_8cpp_source.html#l01159">proxygen::HTTPTransaction::pauseEgress()</a>, <a class="el" href="HTTPSession_8h_source.html#l01054">pendingPause_</a>, <a class="el" href="HTTPSession_8h_source.html#l00956">pendingWriteSizeDelta_</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, and <a class="el" href="HTTPSessionBase_8h_source.html#l00483">proxygen::HTTPSessionBase::updatePendingWriteSize()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02005">notifyEgressBodyBuffered()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                                             {</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;  <span class="comment">// This is the sum of body bytes buffered within transactions_ and in</span></div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;  <span class="comment">// the sock_&#39;s write buffer.</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;  delta += <a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a>;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">pendingWriteSizeDelta_</a> = 0;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;  <span class="keywordtype">bool</span> wasExceeded = <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">egressLimitExceeded</a>();</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#aa0e2203943d72d329d3fcc7a4519ddd4">updatePendingWriteSize</a>(delta);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">egressLimitExceeded</a>() &amp;&amp; !wasExceeded) {</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;    <span class="comment">// Exceeded limit. Pause reading on the incoming stream.</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">inResume_</a>) {</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Pausing txn egress for &quot;</span> &lt;&lt; *<span class="keyword">this</span> &lt;&lt; <span class="stringliteral">&quot; deferred&quot;</span>;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">pendingPause_</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Pausing txn egress for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">invokeOnAllTransactions</a>(&amp;<a class="code" href="classproxygen_1_1HTTPTransaction.html#a9aa4ccd2421c67151b8bbf151e21f320">HTTPTransaction::pauseEgress</a>);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    }</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">egressLimitExceeded</a>() &amp;&amp; wasExceeded) {</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="comment">// Dropped below limit. Resume reading on the incoming stream if needed.</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">inResume_</a>) {</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">pendingPause_</a>) {</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;        VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Cancel deferred txn egress pause for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <a class="code" href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">pendingPause_</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;        VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Ignoring redundant resume for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      }</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Resuming txn egress for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      <a class="code" href="classproxygen_1_1HTTPSession.html#a5be562d896df4cfac6d3707dfeae5c51">resumeTransactions</a>();</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;    }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;  }</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a237f4e26687af1cc1ed5132ecb9afbb0"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a237f4e26687af1cc1ed5132ecb9afbb0">proxygen::HTTPSessionBase::egressLimitExceeded</a></div><div class="ttdeci">bool egressLimitExceeded() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00478">HTTPSessionBase.h:478</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a313e95bd7ff25e8565b8f915bf9333ce"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a313e95bd7ff25e8565b8f915bf9333ce">proxygen::HTTPSession::invokeOnAllTransactions</a></div><div class="ttdeci">void invokeOnAllTransactions(void(HTTPTransaction::*fn)(Args1...), Args2 &amp;&amp;...args)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00586">HTTPSession.h:586</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_aa0e2203943d72d329d3fcc7a4519ddd4"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#aa0e2203943d72d329d3fcc7a4519ddd4">proxygen::HTTPSessionBase::updatePendingWriteSize</a></div><div class="ttdeci">void updatePendingWriteSize(int64_t delta)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00483">HTTPSessionBase.h:483</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a5be562d896df4cfac6d3707dfeae5c51"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a5be562d896df4cfac6d3707dfeae5c51">proxygen::HTTPSession::resumeTransactions</a></div><div class="ttdeci">void resumeTransactions()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02862">HTTPSession.cpp:2862</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_aca40d2fb247e55369cef0e1a94c4e91a"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aca40d2fb247e55369cef0e1a94c4e91a">proxygen::HTTPSession::pendingWriteSizeDelta_</a></div><div class="ttdeci">int64_t pendingWriteSizeDelta_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00956">HTTPSession.h:956</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPTransaction_html_a9aa4ccd2421c67151b8bbf151e21f320"><div class="ttname"><a href="classproxygen_1_1HTTPTransaction.html#a9aa4ccd2421c67151b8bbf151e21f320">proxygen::HTTPTransaction::pauseEgress</a></div><div class="ttdeci">void pauseEgress()</div><div class="ttdef"><b>Definition:</b> <a href="HTTPTransaction_8cpp_source.html#l01159">HTTPTransaction.cpp:1159</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4b66b11da8b330ef5b8697c649b60489"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4b66b11da8b330ef5b8697c649b60489">proxygen::HTTPSession::pendingPause_</a></div><div class="ttdeci">bool pendingPause_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01054">HTTPSession.h:1054</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a3d74976679fc043aa6a344795f303244"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a3d74976679fc043aa6a344795f303244">proxygen::HTTPSession::inResume_</a></div><div class="ttdeci">bool inResume_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01053">HTTPSession.h:1053</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1c5714d761137dccb8d6e864b00b657f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::updateWriteCount </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Update the size of the unwritten egress data and invoke callbacks if the size has crossed the buffering limit. </p>

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l02248">2248</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00707">numActiveWrites_</a>, <a class="el" href="HTTPSession_8h_source.html#l01044">writes_</a>, <a class="el" href="HTTPSession_8h_source.html#l00644">writesPaused()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00640">writesUnpaused()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                              {</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> &gt; 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#af3022f6742364b83e3f0e2eb009996a3">writesUnpaused</a>()) {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;    <span class="comment">// Exceeded limit. Pause reading on the incoming stream.</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Pausing egress for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> = SocketState::PAUSED;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">numActiveWrites_</a> == 0 &amp;&amp; <a class="code" href="classproxygen_1_1HTTPSession.html#aba6d20c0b92566b1a7f562b8f9501040">writesPaused</a>()) {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    <span class="comment">// Dropped below limit. Resume reading on the incoming stream if needed.</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;    VLOG(3) &lt;&lt; <span class="stringliteral">&quot;Resuming egress for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> = SocketState::UNPAUSED;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;  }</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_aba6d20c0b92566b1a7f562b8f9501040"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#aba6d20c0b92566b1a7f562b8f9501040">proxygen::HTTPSession::writesPaused</a></div><div class="ttdeci">bool writesPaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00644">HTTPSession.h:644</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_af3022f6742364b83e3f0e2eb009996a3"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#af3022f6742364b83e3f0e2eb009996a3">proxygen::HTTPSession::writesUnpaused</a></div><div class="ttdeci">bool writesUnpaused() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00640">HTTPSession.h:640</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a4f46b55ba092df2d05b86aa7fb3c434c"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a4f46b55ba092df2d05b86aa7fb3c434c">proxygen::HTTPSession::numActiveWrites_</a></div><div class="ttdeci">unsigned numActiveWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00707">HTTPSession.h:707</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0350e37d74db0188183efccedee6eba7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">proxygen::HTTPSession::writes_</a></div><div class="ttdeci">SocketState writes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01044">HTTPSession.h:1044</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a183cf22d134789ec0e2c0a75ec301224"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::verifyCertAuthSetting </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00211">211</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l00061">getTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00517">isUpstream()</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01302">onSettings()</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                                      {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  uint32_t certAuthSettingVal = 0;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  constexpr uint16_t settingLen = 4;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  std::unique_ptr&lt;folly::IOBuf&gt; ekm;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  folly::StringPiece label;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">isUpstream</a>()) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    label = kServerLabel;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    label = kClientLabel;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keyword">auto</span> fizzBase = <a class="code" href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">getTransport</a>()-&gt;getUnderlyingTransport&lt;AsyncFizzBase&gt;();</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">if</span> (fizzBase) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    ekm = fizzBase-&gt;getEkm(label, <span class="keyword">nullptr</span>, settingLen);</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Underlying transport does not support secondary &quot;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;               <span class="stringliteral">&quot;authentication.&quot;</span>;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">if</span> (ekm &amp;&amp; ekm-&gt;computeChainDataLength() == settingLen) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    folly::io::Cursor cursor(ekm.get());</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    uint32_t ekmVal = cursor.readBE&lt;uint32_t&gt;();</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    certAuthSettingVal = (ekmVal &amp; 0x3fffffff) | 0x80000000;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">if</span> (certAuthSettingVal == value) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a9a3bd3fa8d867fec154e90a8d830af35"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a9a3bd3fa8d867fec154e90a8d830af35">proxygen::HTTPSession::getTransport</a></div><div class="ttdeci">folly::AsyncTransportWrapper * getTransport() override</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00061">HTTPSession.h:61</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a148f158cafab7dcf1d42f3281d48acb0"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a148f158cafab7dcf1d42f3281d48acb0">proxygen::HTTPSession::isUpstream</a></div><div class="ttdeci">bool isUpstream() const </div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l00517">HTTPSession.cpp:517</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aba6d20c0b92566b1a7f562b8f9501040"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::writesPaused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00644">644</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01044">writes_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>.</p>
<div class="fragment"><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                            {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> == SocketState::PAUSED;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a0350e37d74db0188183efccedee6eba7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">proxygen::HTTPSession::writes_</a></div><div class="ttdeci">SocketState writes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01044">HTTPSession.h:1044</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a82766ffaff2fd71996d82c908fb5abeb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::writesShutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00648">648</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::SHUTDOWN</a>, and <a class="el" href="HTTPSession_8h_source.html#l01044">writes_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00479">immediateShutdown()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00052">proxygen::HTTPUpstreamSession::isClosing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>.</p>
<div class="fragment"><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                              {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> == <a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">SocketState::SHUTDOWN</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  }</div><div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667ab9984206799a7f9fe4bd1b6c18db8112">proxygen::ConnectionCloseReason::SHUTDOWN</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_a0350e37d74db0188183efccedee6eba7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">proxygen::HTTPSession::writes_</a></div><div class="ttdeci">SocketState writes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01044">HTTPSession.h:1044</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af3022f6742364b83e3f0e2eb009996a3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::writesUnpaused </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00640">640</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>References <a class="el" href="HTTPSession_8h_source.html#l01044">writes_</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>.</p>
<div class="fragment"><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                              {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">writes_</a> == SocketState::UNPAUSED;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  }</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a0350e37d74db0188183efccedee6eba7"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a0350e37d74db0188183efccedee6eba7">proxygen::HTTPSession::writes_</a></div><div class="ttdeci">SocketState writes_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l01044">HTTPSession.h:1044</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a664004e8860ec5a5f401cda328a0762e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proxygen::HTTPSession::writeTimeoutExpired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8cpp_source.html#l00414">414</a> of file <a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a>.</p>

<p>References <a class="el" href="ProxygenErrorEnum_8h_source.html#l00076">proxygen::kErrorWriteTimeout</a>, <a class="el" href="HTTPSession_8h_source.html#l00910">pendingWrites_</a>, <a class="el" href="HTTPSessionBase_8h_source.html#l00509">proxygen::HTTPSessionBase::setCloseReason()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::TIMEOUT</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00341">getHTTPPriority()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00679">proxygen::HTTPSession::WriteTimeout::timeoutExpired()</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                          {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  VLOG(4) &lt;&lt; <span class="stringliteral">&quot;Write timeout for &quot;</span> &lt;&lt; *<span class="keyword">this</span>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  CHECK(!<a class="code" href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">pendingWrites_</a>.empty());</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  DestructorGuard g(<span class="keyword">this</span>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">setCloseReason</a>(<a class="code" href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">ConnectionCloseReason::TIMEOUT</a>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;  <a class="code" href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">shutdownTransportWithReset</a>(<a class="code" href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60580b04a0444f809e2270068d934fa5">kErrorWriteTimeout</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div><div class="ttc" id="classproxygen_1_1HTTPSession_html_a7a243fae036a60d472f8e4a5264e6a05"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#a7a243fae036a60d472f8e4a5264e6a05">proxygen::HTTPSession::pendingWrites_</a></div><div class="ttdeci">WriteSegmentList pendingWrites_</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8h_source.html#l00910">HTTPSession.h:910</a></div></div>
<div class="ttc" id="namespaceproxygen_html_ac167448283d2eb2403c01822410d956da60580b04a0444f809e2270068d934fa5"><div class="ttname"><a href="namespaceproxygen.html#ac167448283d2eb2403c01822410d956da60580b04a0444f809e2270068d934fa5">proxygen::kErrorWriteTimeout</a></div><div class="ttdef"><b>Definition:</b> <a href="ProxygenErrorEnum_8h_source.html#l00076">ProxygenErrorEnum.h:76</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSessionBase_html_a3faf722c743f296676a097511249f152"><div class="ttname"><a href="classproxygen_1_1HTTPSessionBase.html#a3faf722c743f296676a097511249f152">proxygen::HTTPSessionBase::setCloseReason</a></div><div class="ttdeci">void setCloseReason(ConnectionCloseReason reason)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSessionBase_8h_source.html#l00509">HTTPSessionBase.h:509</a></div></div>
<div class="ttc" id="namespaceproxygen_html_aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff"><div class="ttname"><a href="namespaceproxygen.html#aa4a7ba4818c6145c6ec3879c3dd9f667a070a0fb40f6c308ab544b227660aadff">proxygen::ConnectionCloseReason::TIMEOUT</a></div></div>
<div class="ttc" id="classproxygen_1_1HTTPSession_html_adba39f5cba4a8eaa5a2c54c774fad9ed"><div class="ttname"><a href="classproxygen_1_1HTTPSession.html#adba39f5cba4a8eaa5a2c54c774fad9ed">proxygen::HTTPSession::shutdownTransportWithReset</a></div><div class="ttdeci">void shutdownTransportWithReset(ProxygenError errorCode, const std::string &amp;errorMsg=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="HTTPSession_8cpp_source.html#l02403">HTTPSession.cpp:2403</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a28cf2cb8599e3a919902015ab672c77a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t proxygen::HTTPSession::bodyBytesPerWriteBuf_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of body un-encoded bytes in the write buffer per write iteration. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00961">961</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>.</p>

</div>
</div>
<a class="anchor" id="a3cbbe5f3b63dec5fc66d34b96fde70db"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classproxygen_1_1ByteEventTracker.html">ByteEventTracker</a>&gt; proxygen::HTTPSession::byteEventTracker_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00968">968</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01664">commonEom()</a>, <a class="el" href="HTTPSession_8h_source.html#l00088">getByteEventTracker()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02974">onLastByteEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">onPingRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00317">setByteEventTracker()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00329">setSessionStats()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a07c84a0d9fdce8ead342f0058e8233be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t proxygen::HTTPSession::bytesScheduled_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of bytes scheduled so far. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00950">950</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01259">onPingRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>.</p>

</div>
</div>
<a class="anchor" id="a08ca602333f5e1f4a17bb00918bce3f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t proxygen::HTTPSession::bytesWritten_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of bytes written so far. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00945">945</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>.</p>

</div>
</div>
<a class="anchor" id="a9c2b389afc4e09cf0bfdeac210ff195c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1FlowControlFilter.html">FlowControlFilter</a>* proxygen::HTTPSession::connFlowControl_ {<a class="el" href="http__parser__cpp_8cpp.html#ab979d9d4b4923f7c54d6caa6e1a61936">nullptr</a>}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Connection level flow control for SPDY &gt;= 3.1 and HTTP/2 </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00915">915</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8h_source.html#l00767">isConnWindowFull()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01994">notifyIngressBodyProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>.</p>

</div>
</div>
<a class="anchor" id="a05846ac95dc0538cada7dfd6543e5e3b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::draining_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indicates if the session is waiting for existing transactions to close. Once all transactions close, the session will be deleted. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00713">713</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00052">proxygen::HTTPUpstreamSession::isClosing()</a>, <a class="el" href="HTTPSession_8h_source.html#l00457">isDraining()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00091">proxygen::HTTPUpstreamSession::newTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02509">shouldShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d1984c14bd93f65bcf31ec1c2dc9f70"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSession_1_1DrainTimeout.html">DrainTimeout</a> proxygen::HTTPSession::drainTimeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01035">1035</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="af101f4605f3474ccc175e3f42c5f5c81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t proxygen::HTTPSession::egressBytesLimit_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Max number of bytes to egress per session </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00973">973</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00373">setEgressBytesLimit()</a>.</p>

</div>
</div>
<a class="anchor" id="a9aaa7a89fa2b7ee4ab992ce8fa8c2733"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSession_1_1FlowControlTimeout.html">FlowControlTimeout</a> proxygen::HTTPSession::flowControlTimeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01022">1022</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02892">onConnectionSendWindowClosed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02886">onConnectionSendWindowOpen()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">~HTTPSession()</a>.</p>

</div>
</div>
<a class="anchor" id="a64491ffbd72ca47924907cf4c51aa750"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::incomingStreams_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The number of concurrent transactions initiated by this sessions's peer </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00940">940</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPSession_8h_source.html#l00084">getNumIncomingStreams()</a>, <a class="el" href="HTTPSession_8h_source.html#l00837">getPipelineStreamCount()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00403">numIncomingStreams()</a>.</p>

</div>
</div>
<a class="anchor" id="af9b8fc565cfb8e86162b22921995e08b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::ingressError_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00719">719</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00026">proxygen::HTTPUpstreamSession::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01545">transactionTimeout()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="ac83695509c095c66650708aaecd21400"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::ingressUpgraded_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Indicates whether an upgrade request has been received from the codec. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01049">1049</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01041">onMessageComplete()</a>, <a class="el" href="HTTPSession_8h_source.html#l00988">proxygen::HTTPSession::ShutdownTransportCallback::runLoopCallback()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a413ea44bdc24970646f7de55683f2cd7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::initialReceiveWindow_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00976">976</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00336">setFlowControl()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a0d6ad6ab9f62dbe8bf1afac20d86b1b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::inLoopCallback_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01052">1052</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a3d74976679fc043aa6a344795f303244"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::inResume_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01053">1053</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a47f5ec6835388f0c485cf435bc972c81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::liveTransactions_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Count of transactions awaiting input </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00697">697</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00026">proxygen::HTTPUpstreamSession::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01509">pauseIngress()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l01527">resumeIngress()</a>.</p>

</div>
</div>
<a class="anchor" id="a1b45a7c1cdf90d9d8e7425055d7ab24c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::maxConcurrentIncomingStreams_ {100}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The maximum number of concurrent transactions that this session's peer may create. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00930">930</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00361">setMaxConcurrentIncomingStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="ad5433004842e58bc21e71d0219bd2153"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::maxConcurrentOutgoingStreamsRemote_ {100000}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The received setting for the maximum number of concurrent transactions that this session may create. We may assume the remote allows unlimited transactions until we get a SETTINGS frame, but to be reasonable, assume the remote doesn't allow more than 100K concurrent transactions on one connection. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00924">924</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00722">getMaxConcurrentOutgoingStreamsRemote()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01489">onSetMaxInitiatedStreams()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>.</p>

</div>
</div>
<a class="anchor" id="a2f9532f2d59face8b9b10294f617f2a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#a35f9381d8797bb0edbad64bc3b078047">HTTP2PriorityQueue::NextEgressResult</a> proxygen::HTTPSession::nextEgressResults_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Container to hold the results of <a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html#ae7a98e71ef297cccaa40e64ded686951">HTTP2PriorityQueue::nextEgress</a> </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00966">966</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a4f46b55ba092df2d05b86aa7fb3c434c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned proxygen::HTTPSession::numActiveWrites_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Number of writes submitted to the transport for which we haven't yet received completion or failure callbacks. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00707">707</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00026">proxygen::HTTPUpstreamSession::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02720">onWriteCompleted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00722">setNewTransactionPauseState()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>.</p>

</div>
</div>
<a class="anchor" id="a6eb0d2db14d16430ef88861c902b8d85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t proxygen::HTTPSession::outgoingStreams_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The number concurrent transactions initiated by this session </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00935">935</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01866">decrementTransactionCount()</a>, <a class="el" href="HTTPSession_8h_source.html#l00080">getNumOutgoingStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02637">incrementOutgoingStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00649">newPushedTransaction()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00400">numOutgoingStreams()</a>.</p>

</div>
</div>
<a class="anchor" id="a4b66b11da8b330ef5b8697c649b60489"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::pendingPause_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01054">1054</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a7a243fae036a60d472f8e4a5264e6a05"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSession.html#ad873fa3dc448235a6d181726acb09083">WriteSegmentList</a> proxygen::HTTPSession::pendingWrites_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00910">910</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02720">onWriteCompleted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00414">writeTimeoutExpired()</a>.</p>

</div>
</div>
<a class="anchor" id="aca40d2fb247e55369cef0e1a94c4e91a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int64_t proxygen::HTTPSession::pendingWriteSizeDelta_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The net change this event loop in the amount of buffered bytes for all this session's txns and socket write buffer. </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00956">956</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02005">notifyEgressBodyBuffered()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l02261">updateWriteBufSize()</a>.</p>

</div>
</div>
<a class="anchor" id="a7b5d0529cb70ae5090632b85f2684fd0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::IOBufQueue proxygen::HTTPSession::readBuf_ {folly::IOBufQueue::cacheChainLength()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Chain of ingress IOBufs </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00689">689</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00526">getReadBuffer()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00575">processReadData()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00557">readBufferAvailable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00535">readDataAvailable()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00606">readEOF()</a>.</p>

</div>
</div>
<a class="anchor" id="a378187e6c569630532de4ba485bebcee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088">SocketState</a> proxygen::HTTPSession::reads_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01043">1043</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02781">pauseReadsImpl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00632">readsPaused()</a>, <a class="el" href="HTTPSession_8h_source.html#l00636">readsShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l00628">readsUnpaused()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02801">resumeReadsImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="aa73dd8103a1fb5e6872fc5be1c68074b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::receiveSessionWindowSize_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00978">978</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00336">setFlowControl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="abc226c0df6041bba580806abb129fb04"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t proxygen::HTTPSession::receiveStreamWindowSize_ {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00977">977</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00336">setFlowControl()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="aec31815c425ec8ab1aa94988eb9e79a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::resetAfterDrainingWrites_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00718">718</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00052">proxygen::HTTPUpstreamSession::isClosing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a94168a3dc69f32035b1f0bcf97897793"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::resetSocketOnShutdown_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01050">1050</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a2f1fa1f46d328890e336be404fa4ce47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classproxygen_1_1SecondaryAuthManager.html">SecondaryAuthManager</a>&gt; proxygen::HTTPSession::secondAuthManager_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01057">1057</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01829">getSecondAuthManager()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01384">onCertificate()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01347">onCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01837">sendCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01824">setSecondAuthManager()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>.</p>

</div>
</div>
<a class="anchor" id="ae8b034c072c3eebdfea9a3718a5edb8f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classproxygen_1_1HTTPSession_1_1ShutdownTransportCallback.html">ShutdownTransportCallback</a>&gt; proxygen::HTTPSession::shutdownTransportCb_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01000">1000</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00663">cancelLoopCallbacks()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00479">immediateShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00652">rescheduleLoopCallbacks()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f4805ceb03264def58181d9b628de92"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::AsyncTransportWrapper::UniquePtr proxygen::HTTPSession::sock_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00699">699</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00166">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00198">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02017">getCurrentTransportInfoWithoutUpdate()</a>, <a class="el" href="HTTPSession_8h_source.html#l00065">getEventBase()</a>, <a class="el" href="HTTPSession_8h_source.html#l00360">getSecurityProtocol()</a>, <a class="el" href="HTTPSession_8h_source.html#l00061">getTransport()</a>, <a class="el" href="HTTPSession_8h_source.html#l00448">getUnderlyingTransport()</a>, <a class="el" href="HTTPUpstreamSession_8h_source.html#l00034">proxygen::HTTPUpstreamSession::HTTPUpstreamSession()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00052">proxygen::HTTPUpstreamSession::isClosing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00022">proxygen::HTTPUpstreamSession::isReplaySafe()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00026">proxygen::HTTPUpstreamSession::isReusable()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00187">proxygen::HTTPUpstreamSession::maybeAttachSSLContext()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00220">proxygen::HTTPUpstreamSession::maybeDetachSSLContext()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02005">notifyEgressBodyBuffered()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02974">onLastByteEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02960">onReplaySafe()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02781">pauseReadsImpl()</a>, <a class="el" href="HTTPSession_8h_source.html#l00652">rescheduleLoopCallbacks()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02801">resumeReadsImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">~HTTPSession()</a>.</p>

</div>
</div>
<a class="anchor" id="a468c2c8d059e0c0dc23bc854bfc20c09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::started_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00715">715</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00681">newExTransaction()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00091">proxygen::HTTPUpstreamSession::newTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00373">setEgressBytesLimit()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00351">setEgressSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00336">setFlowControl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00361">setMaxConcurrentIncomingStreams()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a19770f973e94f1a2ced58dcd064040ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1WheelTimerInstance.html">WheelTimerInstance</a> proxygen::HTTPSession::timeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00701">701</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00166">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02892">onConnectionSendWindowClosed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="a67c0735026efb30fefac325da7362a7b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="classproxygen_1_1HTTPCodec.html#addee32fd97cd4864b2a4b2f8a99c11c1">HTTPCodec::StreamID</a>, <a class="el" href="classproxygen_1_1HTTPTransaction.html">HTTPTransaction</a>&gt; proxygen::HTTPSession::transactions_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00694">694</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00096">proxygen::HTTPDownstreamSession::allTransactionsStarted()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00119">proxygen::HTTPUpstreamSession::allTransactionsStarted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02447">checkForShutdown()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00198">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00158">proxygen::HTTPUpstreamSession::detachTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02474">drain()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00493">dropConnection()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02824">errorOnAllTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02557">findTransaction()</a>, <a class="el" href="HTTPSession_8h_source.html#l00076">hasActiveTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00479">immediateShutdown()</a>, <a class="el" href="HTTPSession_8h_source.html#l00586">invokeOnAllTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00448">isBusy()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01887">maybeResumePausedPipelinedTransaction()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02942">onDeleteAckEvent()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01722">onEgressMessageFinished()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01099">onError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01199">onGoaway()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00758">onMessageBegin()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00606">readEOF()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00626">readErr()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00379">readTimeoutExpired()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">~HTTPSession()</a>.</p>

</div>
</div>
<a class="anchor" id="a23a9806ebce88b25cdb0410e06902f9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTP2PriorityQueue.html">HTTP2PriorityQueue</a> proxygen::HTTPSession::txnEgressQueue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Priority tree of transactions </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00692">692</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00166">proxygen::HTTPUpstreamSession::attachThreadLocals()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02567">createTransaction()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00198">proxygen::HTTPUpstreamSession::detachThreadLocals()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02892">onConnectionSendWindowClosed()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00106">proxygen::HTTPDownstreamSession::onNativeProtocolUpgrade()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00128">proxygen::HTTPUpstreamSession::onNativeProtocolUpgrade()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01330">onPriority()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02862">resumeTransactions()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02535">sendPriority()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00024">proxygen::HTTPDownstreamSession::startNow()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00069">proxygen::HTTPUpstreamSession::startNow()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">~HTTPSession()</a>.</p>

</div>
</div>
<a class="anchor" id="ae0f18679ebd4860a833b6195b5a743e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;ReplaySafetyCallback*&gt; proxygen::HTTPSession::waitingForReplaySafety_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00848">848</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8h_source.html#l00802">addWaitingForReplaySafety()</a>, <a class="el" href="HTTPSession_8h_source.html#l00824">needToBlockForReplaySafety()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02960">onReplaySafe()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00815">removeWaitingForReplaySafety()</a>.</p>

</div>
</div>
<a class="anchor" id="ad6a139c1478a5d1e3b811b02dfed236d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">folly::IOBufQueue proxygen::HTTPSession::writeBuf_ {folly::IOBufQueue::cacheChainLength()}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Queue of egress IOBufs </p>

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00686">686</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l00464">closeWhenIdle()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02494">drainImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02055">getNextToSend()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02812">hasMoreWrites()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01994">notifyIngressBodyProcessed()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00970">onBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01347">onCertificateRequest()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00106">proxygen::HTTPDownstreamSession::onNativeProtocolUpgrade()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00128">proxygen::HTTPUpstreamSession::onNativeProtocolUpgrade()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01421">onNativeProtocolUpgradeImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02754">onNewTransactionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01259">onPingRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02738">onSessionParseError()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01302">onSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02235">scheduleWrite()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01791">sendAbort()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01675">sendBody()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01837">sendCertificateRequest()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01704">sendChunkHeader()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01713">sendChunkTerminator()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01769">sendEOM()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01584">sendHeaders()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02517">sendPing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02543">sendPriorityImpl()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01503">sendSettings()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l01984">sendWindowUpdate()</a>, <a class="el" href="HTTPSession_8h_source.html#l00513">sessionByteOffset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00243">setupCodec()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, <a class="el" href="HTTPDownstreamSession_8cpp_source.html#l00024">proxygen::HTTPDownstreamSession::startNow()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00069">proxygen::HTTPUpstreamSession::startNow()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00297">startNow()</a>.</p>

</div>
</div>
<a class="anchor" id="a0350e37d74db0188183efccedee6eba7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSession.html#ad288f49c7e19dd6f77c495534207b088">SocketState</a> proxygen::HTTPSession::writes_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l01044">1044</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02248">updateWriteCount()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>, <a class="el" href="HTTPSession_8h_source.html#l00644">writesPaused()</a>, <a class="el" href="HTTPSession_8h_source.html#l00648">writesShutdown()</a>, and <a class="el" href="HTTPSession_8h_source.html#l00640">writesUnpaused()</a>.</p>

</div>
</div>
<a class="anchor" id="a2161afe8ad9e128e3f1640ef4e4cc234"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool proxygen::HTTPSession::writesDraining_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00717">717</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l01904">detach()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00052">proxygen::HTTPUpstreamSession::isClosing()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02720">onWriteCompleted()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02295">shutdownTransport()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>.</p>

</div>
</div>
<a class="anchor" id="ac1b99af891c8036812baaeb567d5e042"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classproxygen_1_1HTTPSession_1_1WriteTimeout.html">WriteTimeout</a> proxygen::HTTPSession::writeTimeout_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="HTTPSession_8h_source.html#l00683">683</a> of file <a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a>.</p>

<p>Referenced by <a class="el" href="HTTPSession_8cpp_source.html#l02993">isDetachable()</a>, <a class="el" href="HTTPUpstreamSession_8cpp_source.html#l00026">proxygen::HTTPUpstreamSession::isReusable()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02643">onWriteSuccess()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02149">runLoopCallback()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l02403">shutdownTransportWithReset()</a>, <a class="el" href="HTTPSession_8cpp_source.html#l00102">proxygen::HTTPSession::WriteSegment::writeErr()</a>, and <a class="el" href="HTTPSession_8cpp_source.html#l00278">~HTTPSession()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>proxygen/lib/http/session/<a class="el" href="HTTPSession_8h_source.html">HTTPSession.h</a></li>
<li>proxygen/lib/http/session/<a class="el" href="HTTPSession_8cpp_source.html">HTTPSession.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceproxygen.html">proxygen</a></li><li class="navelem"><a class="el" href="classproxygen_1_1HTTPSession.html">HTTPSession</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
