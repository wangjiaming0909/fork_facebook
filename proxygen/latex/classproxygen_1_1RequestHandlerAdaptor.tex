\section{proxygen\+:\+:Request\+Handler\+Adaptor Class Reference}
\label{classproxygen_1_1RequestHandlerAdaptor}\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}


{\ttfamily \#include $<$Request\+Handler\+Adaptor.\+h$>$}

Inheritance diagram for proxygen\+:\+:Request\+Handler\+Adaptor\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classproxygen_1_1RequestHandlerAdaptor}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf Request\+Handler\+Adaptor} ({\bf Request\+Handler} $\ast$request\+Handler)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf set\+Transaction} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn) noexceptoverride
\item 
void {\bf detach\+Transaction} () noexceptoverride
\item 
void {\bf on\+Headers\+Complete} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$ msg) noexceptoverride
\item 
void {\bf on\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain) noexceptoverride
\item 
void {\bf on\+Chunk\+Header} (size\+\_\+t length) noexceptoverride
\item 
void {\bf on\+Chunk\+Complete} () noexceptoverride
\item 
void {\bf on\+Trailers} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$ trailers) noexceptoverride
\item 
void {\bf on\+E\+OM} () noexceptoverride
\item 
void {\bf on\+Upgrade} ({\bf Upgrade\+Protocol} protocol) noexceptoverride
\item 
void {\bf on\+Error} (const {\bf H\+T\+T\+P\+Exception} \&error) noexceptoverride
\item 
void {\bf on\+Egress\+Paused} () noexceptoverride
\item 
void {\bf on\+Egress\+Resumed} () noexceptoverride
\item 
void {\bf on\+Ex\+Transaction} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn) noexceptoverride
\item 
void {\bf send\+Headers} ({\bf H\+T\+T\+P\+Message} \&msg) noexceptoverride
\item 
void {\bf send\+Chunk\+Header} (size\+\_\+t len) noexceptoverride
\item 
void {\bf send\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body) noexceptoverride
\item 
void {\bf send\+Chunk\+Terminator} () noexceptoverride
\item 
void {\bf send\+E\+OM} () noexceptoverride
\item 
void {\bf send\+Abort} () noexceptoverride
\item 
void {\bf refresh\+Timeout} () noexceptoverride
\item 
void {\bf pause\+Ingress} () noexceptoverride
\item 
void {\bf resume\+Ingress} () noexceptoverride
\item 
{\bf Response\+Handler} $\ast$ {\bf new\+Pushed\+Response} ({\bf Push\+Handler} $\ast$push\+Handler) noexceptoverride
\item 
{\bf Response\+Handler} $\ast$ {\bf new\+Ex\+Message} ({\bf Ex\+Message\+Handler} $\ast$ex\+Handler, bool unidirectional) noexceptoverride
\item 
const wangle\+::\+Transport\+Info \& {\bf get\+Setup\+Transport\+Info} () const noexceptoverride
\item 
void {\bf get\+Current\+Transport\+Info} (wangle\+::\+Transport\+Info $\ast$tinfo) const override
\item 
void {\bf set\+Error} ({\bf Proxygen\+Error} err) noexcept
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf Proxygen\+Error} {\bf err\+\_\+} \{{\bf k\+Error\+None}\}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
An adaptor that converts \doxyref{H\+T\+T\+P\+Transaction\+Handler}{p.}{classproxygen_1_1HTTPTransactionHandler} to \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler}. Apart from that it also -\/


\begin{DoxyItemize}
\item Handles all the error cases itself as described below. It makes a terminal call on\+Error(...) where you are expected to log something and stop processing the request if you have started so.

on\+Error -\/ Send a direct response back if no response has started and writing is still possible. Otherwise sends an abort.
\item Handles the 100-\/continue case for you (by sending Continue response), if \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler} returns false for can\+Handle\+Expect(). Otherwise, \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler} is responsible for handling it. 
\end{DoxyItemize}

Definition at line 35 of file Request\+Handler\+Adaptor.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!Request\+Handler\+Adaptor@{Request\+Handler\+Adaptor}}
\index{Request\+Handler\+Adaptor@{Request\+Handler\+Adaptor}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{Request\+Handler\+Adaptor(\+Request\+Handler $\ast$request\+Handler)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+Request\+Handler\+Adaptor\+::\+Request\+Handler\+Adaptor (
\begin{DoxyParamCaption}
\item[{{\bf Request\+Handler} $\ast$}]{request\+Handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [explicit]}}\label{classproxygen_1_1RequestHandlerAdaptor_aa96e3f1763ef08a11890973ee9fe747e}


Definition at line 20 of file Request\+Handler\+Adaptor.\+cpp.



Referenced by new\+Ex\+Message(), new\+Pushed\+Response(), and on\+Ex\+Transaction().


\begin{DoxyCode}
21     : ResponseHandler(requestHandler) \{
22 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!detach\+Transaction@{detach\+Transaction}}
\index{detach\+Transaction@{detach\+Transaction}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{detach\+Transaction() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::detach\+Transaction (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a0d8579a5ceaefe90c6e619825a854596}
Called once after a transaction successfully completes. It will be called even if a read or write error happened earlier. This is a terminal callback, which means that the \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction} object that gives this call will be invalid after this function completes. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a67eb253d121a26772f4caa56847ed7cd}.



Definition at line 31 of file Request\+Handler\+Adaptor.\+cpp.



References err\+\_\+, proxygen\+::k\+Error\+None, proxygen\+::\+Request\+Handler\+::request\+Complete(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
31                                                        \{
32   \textcolor{keywordflow}{if} (err_ == kErrorNone) \{
33     upstream_->requestComplete();
34   \}
35 
36   \textcolor{comment}{// Otherwise we would have got some error call back and invoked onError}
37   \textcolor{comment}{// on RequestHandler}
38   \textcolor{keyword}{delete} \textcolor{keyword}{this};
39 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!get\+Current\+Transport\+Info@{get\+Current\+Transport\+Info}}
\index{get\+Current\+Transport\+Info@{get\+Current\+Transport\+Info}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{get\+Current\+Transport\+Info(wangle\+::\+Transport\+Info $\ast$tinfo) const override}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::get\+Current\+Transport\+Info (
\begin{DoxyParamCaption}
\item[{wangle\+::\+Transport\+Info $\ast$}]{tinfo}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}}\label{classproxygen_1_1RequestHandlerAdaptor_a282ffcbc976fe6ee0fe640967cdcac70}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a90940a302d830ed0eebfc993c2b176f2}.



Definition at line 202 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Current\+Transport\+Info(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
203                                     \{
204   txn_->getCurrentTransportInfo(tinfo);
205 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!get\+Setup\+Transport\+Info@{get\+Setup\+Transport\+Info}}
\index{get\+Setup\+Transport\+Info@{get\+Setup\+Transport\+Info}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{get\+Setup\+Transport\+Info() const noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}const wangle\+::\+Transport\+Info \& proxygen\+::\+Request\+Handler\+Adaptor\+::get\+Setup\+Transport\+Info (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_ae08e730c6504913049b2e9368c20550d}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_aeceafc15bb87a0c4dce1c6ea3a6274a1}.



Definition at line 198 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Setup\+Transport\+Info(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
198                                                             \{
199   \textcolor{keywordflow}{return} txn_->getSetupTransportInfo();
200 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!new\+Ex\+Message@{new\+Ex\+Message}}
\index{new\+Ex\+Message@{new\+Ex\+Message}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{new\+Ex\+Message(\+Ex\+Message\+Handler $\ast$ex\+Handler, bool unidirectional) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Response\+Handler} $\ast$ proxygen\+::\+Request\+Handler\+Adaptor\+::new\+Ex\+Message (
\begin{DoxyParamCaption}
\item[{{\bf Ex\+Message\+Handler} $\ast$}]{ex\+Handler, }
\item[{bool}]{unidirectional}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a230bc31033c98db01d1cabe3f14abff8}


Reimplemented from {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a96ad9f42c2ef32b3c97977b7c73d2156}.



Definition at line 189 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Response\+Handler\+::get\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::new\+Ex\+Transaction(), and Request\+Handler\+Adaptor().


\begin{DoxyCode}
191                                   \{
192   RequestHandlerAdaptor* handler = \textcolor{keyword}{new} RequestHandlerAdaptor(exHandler);
193   getTransaction()->newExTransaction(handler, unidirectional);
194   \textcolor{keywordflow}{return} handler;
195 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!new\+Pushed\+Response@{new\+Pushed\+Response}}
\index{new\+Pushed\+Response@{new\+Pushed\+Response}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{new\+Pushed\+Response(\+Push\+Handler $\ast$push\+Handler) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Response\+Handler} $\ast$ proxygen\+::\+Request\+Handler\+Adaptor\+::new\+Pushed\+Response (
\begin{DoxyParamCaption}
\item[{{\bf Push\+Handler} $\ast$}]{push\+Handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_ac6fe8f75b563923febc6d8b39a0e9d59}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a43a4028a9b826ba81f77ce38134d1584}.



Definition at line 177 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::new\+Pushed\+Transaction(), Request\+Handler\+Adaptor(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
178                                      \{
179   \textcolor{keyword}{auto} pushTxn = txn_->newPushedTransaction(pushHandler->getHandler());
180   \textcolor{keywordflow}{if} (!pushTxn) \{
181     \textcolor{comment}{// Codec doesn't support push}
182     \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};
183   \}
184   \textcolor{keyword}{auto} pushHandlerAdaptor = \textcolor{keyword}{new} RequestHandlerAdaptor(pushHandler);
185   pushHandlerAdaptor->setTransaction(pushTxn);
186   \textcolor{keywordflow}{return} pushHandlerAdaptor;
187 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Body@{on\+Body}}
\index{on\+Body@{on\+Body}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{chain}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_ac4e3c60cd3addc2eb05dc8da0a7f97bd}
Can be called multiple times per transaction. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a56a25d7fb8ac5ddf1ed5b16eaca3c5df}.



Definition at line 67 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::on\+Body(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
67                                                                        \{
68   upstream_->onBody(std::move(c));
69 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Chunk\+Complete@{on\+Chunk\+Complete}}
\index{on\+Chunk\+Complete@{on\+Chunk\+Complete}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Chunk\+Complete() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Chunk\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_aaef87cccbaa44c73179bc341b8a7d7d4}
Can be called multiple times per transaction. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. This signifies the end of a chunk. 

Reimplemented from {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_ad4befff61cff93d6e2c9459e39556419}.



Definition at line 73 of file Request\+Handler\+Adaptor.\+cpp.


\begin{DoxyCode}
73                                                      \{
74 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Chunk\+Header@{on\+Chunk\+Header}}
\index{on\+Chunk\+Header@{on\+Chunk\+Header}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Chunk\+Header(size\+\_\+t length) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Chunk\+Header (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_af1cdb0ac0c8baab9afc7372e35800399}
Can be called multiple times per transaction. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. This signifies the beginning of a chunk of length \textquotesingle{}length\textquotesingle{}. You will receive \doxyref{on\+Body()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ac4e3c60cd3addc2eb05dc8da0a7f97bd} after this. Also, the length will be greater than zero. 

Reimplemented from {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_aa760cd4a327aaa62293b1d09c5811298}.



Definition at line 71 of file Request\+Handler\+Adaptor.\+cpp.


\begin{DoxyCode}
71 \{\}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Egress\+Paused@{on\+Egress\+Paused}}
\index{on\+Egress\+Paused@{on\+Egress\+Paused}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Egress\+Paused() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Egress\+Paused (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a81805401f927660c2bfd86e6aaa1855a}
If the remote side\textquotesingle{}s receive buffer fills up, this callback will be invoked so you can attempt to stop sending to the remote side. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a0a50acdb32cb51ecbf6a72730053a36b}.



Definition at line 127 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::on\+Egress\+Paused(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
127                                                     \{
128   upstream_->onEgressPaused();
129 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Egress\+Resumed@{on\+Egress\+Resumed}}
\index{on\+Egress\+Resumed@{on\+Egress\+Resumed}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Egress\+Resumed() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Egress\+Resumed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_afa48af2f61d214eda8ed89e1fdd5f818}
This callback lets you know that the remote side has resumed reading and you can now continue to send data. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a7715b02e413859c26426adbbde7e53d8}.



Definition at line 131 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::on\+Egress\+Resumed(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
131                                                      \{
132   upstream_->onEgressResumed();
133 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+E\+OM@{on\+E\+OM}}
\index{on\+E\+OM@{on\+E\+OM}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+E\+O\+M() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a686889643d8a950285fce8de5c287a15}
Can be called once per transaction. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. After this callback is received, there will be no more normal ingress callbacks received (on\+Egress$\ast$() and \doxyref{on\+Error()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aea5acf45b01dffd8ec01f646a61abc65} may still be invoked). The Handler should consider ingress complete after receiving this message. This Transaction is still valid, and work may still occur on it until detach\+Transaction is called. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_afdc4d4dec715841ba0c5bb5e58b1d53c}.



Definition at line 81 of file Request\+Handler\+Adaptor.\+cpp.



References err\+\_\+, proxygen\+::k\+Error\+None, proxygen\+::\+Request\+Handler\+::on\+E\+O\+M(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
81                                            \{
82   \textcolor{keywordflow}{if} (err_ == kErrorNone) \{
83     upstream_->onEOM();
84   \}
85 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Error@{on\+Error}}
\index{on\+Error@{on\+Error}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Error(const H\+T\+T\+P\+Exception \&error) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Error (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Exception} \&}]{error}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_aea5acf45b01dffd8ec01f646a61abc65}
Can be called at any time before \doxyref{detach\+Transaction()}{p.}{classproxygen_1_1RequestHandlerAdaptor_a0d8579a5ceaefe90c6e619825a854596}. This callback implies that an error has occurred. To determine if ingress or egress is affected, check the direciont on the \doxyref{H\+T\+T\+P\+Exception}{p.}{classproxygen_1_1HTTPException}. If the direction is I\+N\+G\+R\+E\+SS, it M\+AY still be possible to send egress. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a585c21327eb30ab85ebdb84f663dab3b}.



Definition at line 91 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::can\+Send\+Headers(), proxygen\+::\+Response\+Builder\+::close\+Connection(), err\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+SS, proxygen\+::k\+Error\+None, proxygen\+::k\+Error\+Read, proxygen\+::k\+Error\+Timeout, proxygen\+::k\+Error\+Write, send\+Abort(), proxygen\+::\+Response\+Builder\+::send\+With\+E\+O\+M(), set\+Error(), proxygen\+::\+Response\+Builder\+::status(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
91                                                                        \{
92   \textcolor{keywordflow}{if} (err_ != kErrorNone) \{
93     \textcolor{comment}{// we have already handled an error and upstream would have been deleted}
94     \textcolor{keywordflow}{return};
95   \}
96 
97   \textcolor{keywordflow}{if} (error.getProxygenError() == kErrorTimeout) \{
98     setError(kErrorTimeout);
99 
100     \textcolor{keywordflow}{if} (!txn_->canSendHeaders()) \{
101       sendAbort();
102     \} \textcolor{keywordflow}{else} \{
103       ResponseBuilder(\textcolor{keyword}{this})
104           .status(408, \textcolor{stringliteral}{"Request Timeout"})
105           .closeConnection()
106           .sendWithEOM();
107     \}
108   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (error.getDirection() == HTTPException::Direction::INGRESS) \{
109     setError(kErrorRead);
110 
111     \textcolor{keywordflow}{if} (!txn_->canSendHeaders()) \{
112       sendAbort();
113     \} \textcolor{keywordflow}{else} \{
114       ResponseBuilder(\textcolor{keyword}{this})
115           .status(400, \textcolor{stringliteral}{"Bad Request"})
116           .closeConnection()
117           .sendWithEOM();
118     \}
119 
120   \} \textcolor{keywordflow}{else} \{
121     setError(kErrorWrite);
122   \}
123 
124   \textcolor{comment}{// Wait for detachTransaction to clean up}
125 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Ex\+Transaction@{on\+Ex\+Transaction}}
\index{on\+Ex\+Transaction@{on\+Ex\+Transaction}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Ex\+Transaction(\+H\+T\+T\+P\+Transaction $\ast$txn) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Ex\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_abf85d528ff0849d89ec2e40b5f7758b7}
Ask the handler to construct a handler for a Ex\+Transaction associated with its transaction. 

Reimplemented from {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a2a1e6d98064defaccbc8398b81524dd6}.



Definition at line 135 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::get\+Ex\+Handler(), Request\+Handler\+Adaptor(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
135                                                                          \{
136   \textcolor{comment}{// Create handler for child EX transaction.}
137   \textcolor{keyword}{auto} handler = \textcolor{keyword}{new} RequestHandlerAdaptor(upstream_->getExHandler());
138   txn->setHandler(handler);
139 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Headers\+Complete@{on\+Headers\+Complete}}
\index{on\+Headers\+Complete@{on\+Headers\+Complete}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Headers\+Complete(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Message $>$ msg) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Headers\+Complete (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a0f3e9bc5bdf92afd15b1f6909a46ead8}
Called at most once per transaction. This is usually the first ingress callback. It is possible to get a read error before this however. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a5e431cbb4c065285c5ad65acaceb0b22}.



Definition at line 41 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::can\+Handle\+Expect(), proxygen\+::\+Response\+Builder\+::close\+Connection(), err\+\_\+, proxygen\+::k\+Error\+None, proxygen\+::k\+Error\+Unsupported\+Expectation, proxygen\+::\+Request\+Handler\+::on\+Request(), proxygen\+::\+Response\+Builder\+::send(), proxygen\+::\+Response\+Builder\+::send\+With\+E\+O\+M(), set\+Error(), proxygen\+::\+Response\+Builder\+::status(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
42              \{
43   \textcolor{keywordflow}{if} (msg->getHeaders().exists(HTTP\_HEADER\_EXPECT) &&
44       !upstream_->canHandleExpect()) \{
45     \textcolor{keyword}{auto} expectation = msg->getHeaders().getSingleOrEmpty(HTTP\_HEADER\_EXPECT);
46     \textcolor{keywordflow}{if} (!boost::iequals(expectation, \textcolor{stringliteral}{"100-continue"})) \{
47       setError(kErrorUnsupportedExpectation);
48 
49       ResponseBuilder(\textcolor{keyword}{this})
50           .status(417, \textcolor{stringliteral}{"Expectation Failed"})
51           .closeConnection()
52           .sendWithEOM();
53     \} \textcolor{keywordflow}{else} \{
54       ResponseBuilder(\textcolor{keyword}{this})
55         .status(100, \textcolor{stringliteral}{"Continue"})
56         .send();
57 
58     \}
59   \}
60 
61   \textcolor{comment}{// Only in case of no error}
62   \textcolor{keywordflow}{if} (err_ == kErrorNone) \{
63     upstream_->onRequest(std::move(msg));
64   \}
65 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Trailers@{on\+Trailers}}
\index{on\+Trailers@{on\+Trailers}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Trailers(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Headers $>$ trailers) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Trailers (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$}]{trailers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_ae4260f78cff36b8b745c5071ed1fb2f5}
Can be called any number of times per transaction. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. Trailers can be received once right before the E\+OM of a chunked H\+T\+T\+P/1.\+1 reponse or multiple times per transaction from S\+P\+DY and H\+T\+T\+P/2.\+0 H\+E\+A\+D\+E\+RS frames. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a219de67110f915deda30d18327f26393}.



Definition at line 76 of file Request\+Handler\+Adaptor.\+cpp.


\begin{DoxyCode}
77                                            \{
78   \textcolor{comment}{// XXX: Support trailers}
79 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!on\+Upgrade@{on\+Upgrade}}
\index{on\+Upgrade@{on\+Upgrade}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{on\+Upgrade(\+Upgrade\+Protocol protocol) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Upgrade (
\begin{DoxyParamCaption}
\item[{{\bf Upgrade\+Protocol}}]{protocol}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a422adcb6af8718e70ba06b4ecefdb984}
Can be called once per transaction. If you had previously called \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}, this callback will be delayed until you call \doxyref{resume\+Ingress()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}. After this callback is invoked, further data will be forwarded using the \doxyref{on\+Body()}{p.}{classproxygen_1_1RequestHandlerAdaptor_ac4e3c60cd3addc2eb05dc8da0a7f97bd} callback. Once the data transfer is completed (E\+OF recevied in case of C\+O\+N\+N\+E\+CT), \doxyref{on\+E\+O\+M()}{p.}{classproxygen_1_1RequestHandlerAdaptor_a686889643d8a950285fce8de5c287a15} callback will be invoked. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_acda954bf78c4d2aad951698e78c40a0f}.



Definition at line 87 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::on\+Upgrade(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
87                                                                        \{
88   upstream_->onUpgrade(protocol);
89 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!pause\+Ingress@{pause\+Ingress}}
\index{pause\+Ingress@{pause\+Ingress}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{pause\+Ingress() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::pause\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_aebf11112c364895dd0bfd763d026aa50}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_afa9c9a5f7a64d98de012d35e344c6d98}.



Definition at line 169 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::pause\+Ingress(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
169                                                   \{
170   txn_->pauseIngress();
171 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!refresh\+Timeout@{refresh\+Timeout}}
\index{refresh\+Timeout@{refresh\+Timeout}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{refresh\+Timeout() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::refresh\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a1cd748a348c8377ed1af77c526d7a301}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a8b487f372085f391dc1a15a4fe5855cd}.



Definition at line 165 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::refresh\+Timeout(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
165                                                     \{
166   txn_->refreshTimeout();
167 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!resume\+Ingress@{resume\+Ingress}}
\index{resume\+Ingress@{resume\+Ingress}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{resume\+Ingress() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::resume\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_ae0ce7c08bb072cc0594df41199b2e0b7}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_af6bf0c68365230886b7d278821f87078}.



Definition at line 173 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::resume\+Ingress(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
173                                                    \{
174   txn_->resumeIngress();
175 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!send\+Abort@{send\+Abort}}
\index{send\+Abort@{send\+Abort}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{send\+Abort() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Abort (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a11b12d08cf1e3c043c87a6b581c8165d}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a3827b60bdfef24355756918c5b7ade26}.



Definition at line 161 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Abort(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.



Referenced by on\+Error().


\begin{DoxyCode}
161                                                \{
162   txn_->sendAbort();
163 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!send\+Body@{send\+Body}}
\index{send\+Body@{send\+Body}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{send\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{body}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_aa1efb33d55c53b4f6ac21a1a0f6bf2f9}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_ad2f61f6816fe12e96945fef5cdcd2228}.



Definition at line 149 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Body(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
149                                                                          \{
150   txn_->sendBody(std::move(b));
151 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!send\+Chunk\+Header@{send\+Chunk\+Header}}
\index{send\+Chunk\+Header@{send\+Chunk\+Header}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{send\+Chunk\+Header(size\+\_\+t len) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Chunk\+Header (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_abb69a5fd8d133a919cd9ed95fb14a287}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a37c5b3b070602f564d654cf016b35109}.



Definition at line 145 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Chunk\+Header(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
145                                                                \{
146   txn_->sendChunkHeader(len);
147 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!send\+Chunk\+Terminator@{send\+Chunk\+Terminator}}
\index{send\+Chunk\+Terminator@{send\+Chunk\+Terminator}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{send\+Chunk\+Terminator() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Chunk\+Terminator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_aae55c0b857307ec9c936b9a7eefc4fbb}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a7b7faccdcf98892f64ebe01d8b3dd11c}.



Definition at line 153 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Chunk\+Terminator(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
153                                                          \{
154   txn_->sendChunkTerminator();
155 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!send\+E\+OM@{send\+E\+OM}}
\index{send\+E\+OM@{send\+E\+OM}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{send\+E\+O\+M() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::send\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_aaaf1c05ad017acd946e27f47434416d5}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_af40d7a5c1674bea892d2598df9cfba61}.



Reimplemented in {\bf Stub\+Request\+Handler\+Adaptor} \doxyref{}{p.}{structStubRequestHandlerAdaptor_abdf45070c58eb5186c33551cf927fb5a}.



Definition at line 157 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+E\+O\+M(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
157                                              \{
158   txn_->sendEOM();
159 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!send\+Headers@{send\+Headers}}
\index{send\+Headers@{send\+Headers}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{send\+Headers(\+H\+T\+T\+P\+Message \&msg) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Headers (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message} \&}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a1bd9944f8ec74ea977cc17ea9cb3aed7}
N\+O\+TE\+: We take response message as non-\/const reference, to allow filters between your handler and client to be able to modify response if they want to.

eg. a compression filter might want to change the content-\/encoding 

Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a20f98e57c8000a4af68483763f5fffb1}.



Reimplemented in {\bf Stub\+Request\+Handler\+Adaptor} \doxyref{}{p.}{structStubRequestHandlerAdaptor_ac5a3de3b54a79a7229fd60124f498fe9}.



Definition at line 141 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Headers(), and proxygen\+::\+Response\+Handler\+::txn\+\_\+.


\begin{DoxyCode}
141                                                                  \{
142   txn_->sendHeaders(msg);
143 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!set\+Error@{set\+Error}}
\index{set\+Error@{set\+Error}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{set\+Error(\+Proxygen\+Error err) noexcept}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::set\+Error (
\begin{DoxyParamCaption}
\item[{{\bf Proxygen\+Error}}]{err}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_ab546fa0dda8971bb758993f51353a563}


Definition at line 207 of file Request\+Handler\+Adaptor.\+cpp.



References err\+\_\+, proxygen\+::\+Request\+Handler\+::on\+Error(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.



Referenced by on\+Error(), and on\+Headers\+Complete().


\begin{DoxyCode}
207                                                                \{
208   err_ = err;
209   upstream_->onError(err);
210 \}
\end{DoxyCode}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!set\+Transaction@{set\+Transaction}}
\index{set\+Transaction@{set\+Transaction}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{set\+Transaction(\+H\+T\+T\+P\+Transaction $\ast$txn) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Request\+Handler\+Adaptor\+::set\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{txn}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1RequestHandlerAdaptor_a00d6dad4f26828a383e94cb542823153}
Called once per transaction. This notifies the handler of which transaction it should talk to and will receive callbacks from. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a4eb50d5627d26f6ca0d8e8283259d8a4}.



Definition at line 24 of file Request\+Handler\+Adaptor.\+cpp.



References proxygen\+::\+Request\+Handler\+::set\+Response\+Handler(), proxygen\+::\+Response\+Handler\+::txn\+\_\+, and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
24                                                                         \{
25   txn_ = txn;
26 
27   \textcolor{comment}{// We become that transparent layer}
28   upstream_->setResponseHandler(\textcolor{keyword}{this});
29 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}!err\+\_\+@{err\+\_\+}}
\index{err\+\_\+@{err\+\_\+}!proxygen\+::\+Request\+Handler\+Adaptor@{proxygen\+::\+Request\+Handler\+Adaptor}}
\subsubsection[{err\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Proxygen\+Error} proxygen\+::\+Request\+Handler\+Adaptor\+::err\+\_\+ \{{\bf k\+Error\+None}\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1RequestHandlerAdaptor_adbfd131085c6a8fde4c41bf27f636ec8}


Definition at line 77 of file Request\+Handler\+Adaptor.\+h.



Referenced by detach\+Transaction(), on\+E\+O\+M(), on\+Error(), on\+Headers\+Complete(), and set\+Error().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
proxygen/httpserver/{\bf Request\+Handler\+Adaptor.\+h}\item 
proxygen/httpserver/{\bf Request\+Handler\+Adaptor.\+cpp}\end{DoxyCompactItemize}
