\section{proxygen\+:\+:H\+T\+T\+P\+Direct\+Response\+Handler Class Reference}
\label{classproxygen_1_1HTTPDirectResponseHandler}\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}


{\ttfamily \#include $<$H\+T\+T\+P\+Direct\+Response\+Handler.\+h$>$}

Inheritance diagram for proxygen\+:\+:H\+T\+T\+P\+Direct\+Response\+Handler\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classproxygen_1_1HTTPDirectResponseHandler}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Direct\+Response\+Handler} (unsigned {\bf status\+Code}, const std\+::string \&status\+Msg, const {\bf H\+T\+T\+P\+Error\+Page} $\ast$error\+Page={\bf nullptr})
\item 
void {\bf force\+Connection\+Close} (bool close)
\item 
void {\bf set\+Transaction} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn) noexceptoverride
\item 
void {\bf detach\+Transaction} () noexceptoverride
\item 
void {\bf on\+Headers\+Complete} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$ msg) noexceptoverride
\item 
void {\bf on\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain) noexceptoverride
\item 
void {\bf on\+Trailers} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$ trailers) noexceptoverride
\item 
void {\bf on\+E\+OM} () noexceptoverride
\item 
void {\bf on\+Upgrade} ({\bf Upgrade\+Protocol} protocol) noexceptoverride
\item 
void {\bf on\+Error} (const {\bf H\+T\+T\+P\+Exception} \&error) noexceptoverride
\item 
void {\bf on\+Egress\+Paused} () noexceptoverride
\item 
void {\bf on\+Egress\+Resumed} () noexceptoverride
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf $\sim$\+H\+T\+T\+P\+Direct\+Response\+Handler} () override
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Transaction} $\ast$ {\bf txn\+\_\+}
\item 
const {\bf H\+T\+T\+P\+Error\+Page} $\ast$ {\bf error\+Page\+\_\+}
\item 
std\+::string {\bf status\+Message\+\_\+}
\item 
unsigned {\bf status\+Code\+\_\+}
\item 
bool {\bf headers\+Sent\+\_\+}\+:1
\item 
bool {\bf eom\+Sent\+\_\+}\+:1
\item 
bool {\bf force\+Connection\+Close\+\_\+}\+:1
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 18 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!H\+T\+T\+P\+Direct\+Response\+Handler@{H\+T\+T\+P\+Direct\+Response\+Handler}}
\index{H\+T\+T\+P\+Direct\+Response\+Handler@{H\+T\+T\+P\+Direct\+Response\+Handler}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{H\+T\+T\+P\+Direct\+Response\+Handler(unsigned status\+Code, const std\+::string \&status\+Msg, const H\+T\+T\+P\+Error\+Page $\ast$error\+Page=nullptr)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::\+H\+T\+T\+P\+Direct\+Response\+Handler (
\begin{DoxyParamCaption}
\item[{unsigned}]{status\+Code, }
\item[{const std\+::string \&}]{status\+Msg, }
\item[{const {\bf H\+T\+T\+P\+Error\+Page} $\ast$}]{error\+Page = {\ttfamily {\bf nullptr}}}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPDirectResponseHandler_aec70f38ddf148fa09549502d54e4f1ee}


Definition at line 21 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.


\begin{DoxyCode}
23                                    :
24   txn_(\textcolor{keyword}{nullptr}),
25   errorPage_(errorPage),
26   statusMessage_(statusMsg),
27   statusCode_(statusCode),
28   headersSent_(\textcolor{keyword}{false}),
29   eomSent_(\textcolor{keyword}{false}),
30   forceConnectionClose_(\textcolor{keyword}{true}) \{
31 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!````~H\+T\+T\+P\+Direct\+Response\+Handler@{$\sim$\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\index{````~H\+T\+T\+P\+Direct\+Response\+Handler@{$\sim$\+H\+T\+T\+P\+Direct\+Response\+Handler}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{$\sim$\+H\+T\+T\+P\+Direct\+Response\+Handler() override}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::$\sim$\+H\+T\+T\+P\+Direct\+Response\+Handler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a72fdcade67ae8edca5715b3395dae023}


Definition at line 33 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



Referenced by on\+Egress\+Resumed().


\begin{DoxyCode}
33                                                       \{
34 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!detach\+Transaction@{detach\+Transaction}}
\index{detach\+Transaction@{detach\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{detach\+Transaction() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::detach\+Transaction (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_ae26e1a8188755b57dc2278fb372ce1d3}
Called once after a transaction successfully completes. It will be called even if a read or write error happened earlier. This is a terminal callback, which means that the \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction} object that gives this call will be invalid after this function completes. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a67eb253d121a26772f4caa56847ed7cd}.



Definition at line 42 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



Referenced by force\+Connection\+Close().


\begin{DoxyCode}
42                                                       \{
43   \textcolor{keyword}{delete} \textcolor{keyword}{this};
44 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!force\+Connection\+Close@{force\+Connection\+Close}}
\index{force\+Connection\+Close@{force\+Connection\+Close}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{force\+Connection\+Close(bool close)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::force\+Connection\+Close (
\begin{DoxyParamCaption}
\item[{bool}]{close}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a3e54c53bc57940cdf2d1363a32ea2487}


Definition at line 24 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



References detach\+Transaction(), force\+Connection\+Close\+\_\+, on\+Body(), on\+E\+O\+M(), on\+Error(), on\+Headers\+Complete(), on\+Trailers(), on\+Upgrade(), and set\+Transaction().


\begin{DoxyCode}
24                                         \{
25     forceConnectionClose_ = close;
26   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Body@{on\+Body}}
\index{on\+Body@{on\+Body}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{chain}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a339738385d32697a915f8fe2d64ee27c}
Can be called multiple times per transaction. If you had previously called pause\+Ingress(), this callback will be delayed until you call resume\+Ingress(). 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a56a25d7fb8ac5ddf1ed5b16eaca3c5df}.



Definition at line 77 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



Referenced by force\+Connection\+Close().


\begin{DoxyCode}
77                                                                    \{
78   VLOG(4) << \textcolor{stringliteral}{"discarding request body"};
79 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Egress\+Paused@{on\+Egress\+Paused}}
\index{on\+Egress\+Paused@{on\+Egress\+Paused}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Egress\+Paused() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Egress\+Paused (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a1574b64f55e866a3c494985850539cdd}
If the remote side\textquotesingle{}s receive buffer fills up, this callback will be invoked so you can attempt to stop sending to the remote side. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a0a50acdb32cb51ecbf6a72730053a36b}.



Definition at line 37 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.


\begin{DoxyCode}
37 \{\};
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Egress\+Resumed@{on\+Egress\+Resumed}}
\index{on\+Egress\+Resumed@{on\+Egress\+Resumed}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Egress\+Resumed() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Egress\+Resumed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_aad84d594813f254e66b2fba933fb5a7a}
This callback lets you know that the remote side has resumed reading and you can now continue to send data. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a7715b02e413859c26426adbbde7e53d8}.



Definition at line 38 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



References $\sim$\+H\+T\+T\+P\+Direct\+Response\+Handler().


\begin{DoxyCode}
38 \{\};
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+E\+OM@{on\+E\+OM}}
\index{on\+E\+OM@{on\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+E\+O\+M() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a24796846b4fdac717d5880f6f97b8a64}
Can be called once per transaction. If you had previously called pause\+Ingress(), this callback will be delayed until you call resume\+Ingress(). After this callback is received, there will be no more normal ingress callbacks received (on\+Egress$\ast$() and \doxyref{on\+Error()}{p.}{classproxygen_1_1HTTPDirectResponseHandler_adf29d70e8ff6c37db793d602e6fa6988} may still be invoked). The Handler should consider ingress complete after receiving this message. This Transaction is still valid, and work may still occur on it until detach\+Transaction is called. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_afdc4d4dec715841ba0c5bb5e58b1d53c}.



Definition at line 87 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



References eom\+Sent\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+E\+O\+M(), and txn\+\_\+.



Referenced by force\+Connection\+Close(), and on\+Error().


\begin{DoxyCode}
87                                           \{
88   eomSent_ = \textcolor{keyword}{true};
89   txn_->sendEOM();
90 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Error@{on\+Error}}
\index{on\+Error@{on\+Error}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Error(const H\+T\+T\+P\+Exception \&error) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Error (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Exception} \&}]{error}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_adf29d70e8ff6c37db793d602e6fa6988}
Can be called at any time before \doxyref{detach\+Transaction()}{p.}{classproxygen_1_1HTTPDirectResponseHandler_ae26e1a8188755b57dc2278fb372ce1d3}. This callback implies that an error has occurred. To determine if ingress or egress is affected, check the direciont on the \doxyref{H\+T\+T\+P\+Exception}{p.}{classproxygen_1_1HTTPException}. If the direction is I\+N\+G\+R\+E\+SS, it M\+AY still be possible to send egress. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a585c21327eb30ab85ebdb84f663dab3b}.



Definition at line 95 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



References eom\+Sent\+\_\+, headers\+Sent\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+SS, proxygen\+::k\+Error\+Timeout, on\+E\+O\+M(), and on\+Headers\+Complete().



Referenced by force\+Connection\+Close().


\begin{DoxyCode}
95                                                                            \{
96   \textcolor{keywordflow}{if} (error.getDirection() == HTTPException::Direction::INGRESS) \{
97     \textcolor{keywordflow}{if} (error.getProxygenError() == kErrorTimeout) \{
98       VLOG(4) << \textcolor{stringliteral}{"processing ingress timeout"};
99       \textcolor{keywordflow}{if} (!headersSent_) \{
100         onHeadersComplete(\textcolor{keyword}{nullptr});
101       \}
102       \textcolor{keywordflow}{if} (!eomSent_) \{
103         onEOM();
104       \}
105     \} \textcolor{keywordflow}{else} \{
106       VLOG(4) << \textcolor{stringliteral}{"processing ingress error"};
107       \textcolor{keywordflow}{if} (!headersSent_) \{
108         onHeadersComplete(\textcolor{keyword}{nullptr});
109       \}
110       \textcolor{keywordflow}{if} (!eomSent_) \{
111         onEOM();
112       \}
113     \}
114   \}
115 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Headers\+Complete@{on\+Headers\+Complete}}
\index{on\+Headers\+Complete@{on\+Headers\+Complete}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Headers\+Complete(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Message $>$ msg) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Headers\+Complete (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a2c09d64debfda5325d4e73f30bd0cb0a}
Called at most once per transaction. This is usually the first ingress callback. It is possible to get a read error before this however. If you had previously called pause\+Ingress(), this callback will be delayed until you call resume\+Ingress(). 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a5e431cbb4c065285c5ad65acaceb0b22}.



Definition at line 46 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Error\+Page\+::\+Page\+::content, proxygen\+::\+H\+T\+T\+P\+Error\+Page\+::\+Page\+::content\+Type, proxygen\+::empty\+\_\+string, error\+Page\+\_\+, force\+Connection\+Close\+\_\+, proxygen\+::\+H\+T\+T\+P\+Error\+Page\+::generate(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Default\+Reason(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), headers\+Sent\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Body(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Headers(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+H\+T\+T\+P\+Version(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Status\+Code(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Status\+Message(), status\+Code\+\_\+, status\+Message\+\_\+, and txn\+\_\+.



Referenced by force\+Connection\+Close(), and on\+Error().


\begin{DoxyCode}
47                                            \{
48   VLOG(4) << \textcolor{stringliteral}{"processing request"};
49   headersSent_ = \textcolor{keyword}{true};
50   HTTPMessage response;
51   std::unique\_ptr<folly::IOBuf> responseBody;
52   response.setHTTPVersion(1, 1);
53   response.setStatusCode(statusCode_);
54   \textcolor{keywordflow}{if} (!statusMessage_.empty()) \{
55     response.setStatusMessage(statusMessage_);
56   \} \textcolor{keywordflow}{else} \{
57     response.setStatusMessage(HTTPMessage::getDefaultReason(statusCode_));
58   \}
59   \textcolor{keywordflow}{if} (forceConnectionClose_) \{
60     response.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"close"});
61   \}
62   \textcolor{keywordflow}{if} (errorPage_) \{
63     HTTPErrorPage::Page page = errorPage_->generate(0, statusCode_,
64         statusMessage_, \textcolor{keyword}{nullptr}, empty_string);
65     VLOG(4) << \textcolor{stringliteral}{"sending error page with type "} << page.contentType;
66     response.getHeaders().add(HTTP\_HEADER\_CONTENT\_TYPE, page.contentType);
67     responseBody = std::move(page.content);
68   \}
69   response.getHeaders().add(HTTP\_HEADER\_CONTENT\_LENGTH, folly::to<string>(
70     responseBody ? responseBody->computeChainDataLength() : 0));
71   txn_->sendHeaders(response);
72   \textcolor{keywordflow}{if} (responseBody) \{
73     txn_->sendBody(std::move(responseBody));
74   \}
75 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Trailers@{on\+Trailers}}
\index{on\+Trailers@{on\+Trailers}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Trailers(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Headers $>$ trailers) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Trailers (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$}]{trailers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_ab2778c94e47c7d5894694076020ab1e7}
Can be called any number of times per transaction. If you had previously called pause\+Ingress(), this callback will be delayed until you call resume\+Ingress(). Trailers can be received once right before the E\+OM of a chunked H\+T\+T\+P/1.\+1 reponse or multiple times per transaction from S\+P\+DY and H\+T\+T\+P/2.\+0 H\+E\+A\+D\+E\+RS frames. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a219de67110f915deda30d18327f26393}.



Definition at line 81 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



Referenced by force\+Connection\+Close().


\begin{DoxyCode}
82                                         \{
83   VLOG(4) << \textcolor{stringliteral}{"discarding request trailers"};
84 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!on\+Upgrade@{on\+Upgrade}}
\index{on\+Upgrade@{on\+Upgrade}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{on\+Upgrade(\+Upgrade\+Protocol protocol) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Upgrade (
\begin{DoxyParamCaption}
\item[{{\bf Upgrade\+Protocol}}]{protocol}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_aabd20b77c9340d97ceb79d8ab2064d1f}
Can be called once per transaction. If you had previously called pause\+Ingress(), this callback will be delayed until you call resume\+Ingress(). After this callback is invoked, further data will be forwarded using the \doxyref{on\+Body()}{p.}{classproxygen_1_1HTTPDirectResponseHandler_a339738385d32697a915f8fe2d64ee27c} callback. Once the data transfer is completed (E\+OF recevied in case of C\+O\+N\+N\+E\+CT), \doxyref{on\+E\+O\+M()}{p.}{classproxygen_1_1HTTPDirectResponseHandler_a24796846b4fdac717d5880f6f97b8a64} callback will be invoked. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_acda954bf78c4d2aad951698e78c40a0f}.



Definition at line 92 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



Referenced by force\+Connection\+Close().


\begin{DoxyCode}
93                                 \{\}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!set\+Transaction@{set\+Transaction}}
\index{set\+Transaction@{set\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{set\+Transaction(\+H\+T\+T\+P\+Transaction $\ast$txn) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::set\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{txn}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a8fe2988e6693f8d29ef02f812857cba8}
Called once per transaction. This notifies the handler of which transaction it should talk to and will receive callbacks from. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler} \doxyref{}{p.}{classproxygen_1_1HTTPTransactionHandler_a4eb50d5627d26f6ca0d8e8283259d8a4}.



Definition at line 37 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp.



References txn\+\_\+.



Referenced by force\+Connection\+Close().


\begin{DoxyCode}
37                                                                        \{
38   txn_ = txn;
39 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!eom\+Sent\+\_\+@{eom\+Sent\+\_\+}}
\index{eom\+Sent\+\_\+@{eom\+Sent\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{eom\+Sent\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::eom\+Sent\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_af82c51baf08e1b265131d9dbcba0609f}


Definition at line 48 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by on\+E\+O\+M(), and on\+Error().

\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!error\+Page\+\_\+@{error\+Page\+\_\+}}
\index{error\+Page\+\_\+@{error\+Page\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{error\+Page\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf H\+T\+T\+P\+Error\+Page}$\ast$ proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::error\+Page\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_adf80adae475a493ef070baf379085517}


Definition at line 44 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by on\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!force\+Connection\+Close\+\_\+@{force\+Connection\+Close\+\_\+}}
\index{force\+Connection\+Close\+\_\+@{force\+Connection\+Close\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{force\+Connection\+Close\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::force\+Connection\+Close\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_ae041d3775fdc87b6e28e2fab62c57f89}


Definition at line 49 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by force\+Connection\+Close(), and on\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!headers\+Sent\+\_\+@{headers\+Sent\+\_\+}}
\index{headers\+Sent\+\_\+@{headers\+Sent\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{headers\+Sent\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::headers\+Sent\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a70cc000b28a631c19d6376755252f778}


Definition at line 47 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by on\+Error(), and on\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!status\+Code\+\_\+@{status\+Code\+\_\+}}
\index{status\+Code\+\_\+@{status\+Code\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{status\+Code\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}unsigned proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::status\+Code\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a80877eef46e3a4caaa982ddf6a6a6c01}


Definition at line 46 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by on\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!status\+Message\+\_\+@{status\+Message\+\_\+}}
\index{status\+Message\+\_\+@{status\+Message\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{status\+Message\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::status\+Message\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_a6359611a7b943f625e5f2fdeda796838}


Definition at line 45 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by on\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}!txn\+\_\+@{txn\+\_\+}}
\index{txn\+\_\+@{txn\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler@{proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler}}
\subsubsection[{txn\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction}$\ast$ proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::txn\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPDirectResponseHandler_af80ec208b9d9f4974b8c0a3bb869fd0e}


Definition at line 43 of file H\+T\+T\+P\+Direct\+Response\+Handler.\+h.



Referenced by on\+E\+O\+M(), on\+Headers\+Complete(), and set\+Transaction().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/session/{\bf H\+T\+T\+P\+Direct\+Response\+Handler.\+h}\item 
proxygen/lib/http/session/{\bf H\+T\+T\+P\+Direct\+Response\+Handler.\+cpp}\end{DoxyCompactItemize}
