\section{proxygen\+:\+:Cob\+Helper Class Reference}
\label{classproxygen_1_1CobHelper}\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}


{\ttfamily \#include $<$Cob\+Helper.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf Cob\+Helper} (size\+\_\+t items\+Left, const std\+::function$<$ void()$>$ \&cob, const std\+::function$<$ void(const std\+::exception \&)$>$ \&ecob)
\item 
void {\bf set\+Error} (const std\+::string \&emsg)
\item 
void {\bf worker\+Done} ()
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf all\+Done} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::atomic$<$ uint32\+\_\+t $>$ {\bf items\+Left\+\_\+}
\item 
std\+::string {\bf emsg\+\_\+}
\item 
std\+::function$<$ void()$>$ {\bf cob\+\_\+}
\item 
std\+::function$<$ void(const std\+::exception \&)$>$ {\bf ecob\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A helper class to schedule N async jobs in (possibly) different threads and invoke a final callback in a given thread once all are done. 

Definition at line 23 of file Cob\+Helper.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!Cob\+Helper@{Cob\+Helper}}
\index{Cob\+Helper@{Cob\+Helper}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{Cob\+Helper(size\+\_\+t items\+Left, const std\+::function$<$ void()$>$ \&cob, const std\+::function$<$ void(const std\+::exception \&)$>$ \&ecob)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+Cob\+Helper\+::\+Cob\+Helper (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{items\+Left, }
\item[{const std\+::function$<$ void()$>$ \&}]{cob, }
\item[{const std\+::function$<$ void(const std\+::exception \&)$>$ \&}]{ecob}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1CobHelper_a5556acf109751c90b1c5ccf9364a4109}


Definition at line 25 of file Cob\+Helper.\+h.


\begin{DoxyCode}
28   : itemsLeft_(itemsLeft)
29 , cob_(cob)
30 , ecob_(ecob) \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!all\+Done@{all\+Done}}
\index{all\+Done@{all\+Done}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{all\+Done()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Cob\+Helper\+::all\+Done (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\label{classproxygen_1_1CobHelper_a49485d67af296b3f8a20060a4e4ce649}


Definition at line 46 of file Cob\+Helper.\+h.



References cob\+\_\+, ecob\+\_\+, and emsg\+\_\+.



Referenced by worker\+Done().


\begin{DoxyCode}
46                  \{
47     \textcolor{keywordflow}{if} (!emsg_.empty()) \{
48       ecob_(std::runtime\_error(emsg_));
49     \} \textcolor{keywordflow}{else} \{
50       cob_();
51     \}
52 
53     \textcolor{keyword}{delete} \textcolor{keyword}{this};
54   \}
\end{DoxyCode}
\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!set\+Error@{set\+Error}}
\index{set\+Error@{set\+Error}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{set\+Error(const std\+::string \&emsg)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Cob\+Helper\+::set\+Error (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{emsg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1CobHelper_ab29d60620d28fa2def97e4d696dde19b}


Definition at line 32 of file Cob\+Helper.\+h.



References emsg\+\_\+.


\begin{DoxyCode}
32                                        \{
33     CHECK(!emsg.empty());
34     emsg_ = emsg;
35   \}
\end{DoxyCode}
\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!worker\+Done@{worker\+Done}}
\index{worker\+Done@{worker\+Done}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{worker\+Done()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Cob\+Helper\+::worker\+Done (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1CobHelper_ab4c52632990ad52068b40d92272d6acd}


Definition at line 37 of file Cob\+Helper.\+h.



References all\+Done(), and items\+Left\+\_\+.


\begin{DoxyCode}
37                     \{
38     uint32\_t oldValue = itemsLeft_.fetch\_sub(1);
39     \textcolor{keywordflow}{if} (oldValue != 1) \{
40       \textcolor{keywordflow}{return};
41     \}
42 
43     allDone();
44   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!cob\+\_\+@{cob\+\_\+}}
\index{cob\+\_\+@{cob\+\_\+}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{cob\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::function$<$void()$>$ proxygen\+::\+Cob\+Helper\+::cob\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1CobHelper_a38d33b75ab511aa394efde8c12d94b2f}


Definition at line 58 of file Cob\+Helper.\+h.



Referenced by all\+Done().

\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!ecob\+\_\+@{ecob\+\_\+}}
\index{ecob\+\_\+@{ecob\+\_\+}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{ecob\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::function$<$void(const std\+::exception\&)$>$ proxygen\+::\+Cob\+Helper\+::ecob\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1CobHelper_a0cb8c27b4ef2b871ee509510ff6ff6ac}


Definition at line 59 of file Cob\+Helper.\+h.



Referenced by all\+Done().

\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!emsg\+\_\+@{emsg\+\_\+}}
\index{emsg\+\_\+@{emsg\+\_\+}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{emsg\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::string proxygen\+::\+Cob\+Helper\+::emsg\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1CobHelper_acf9111dee0bc8cbc4fe227db988e650a}


Definition at line 57 of file Cob\+Helper.\+h.



Referenced by all\+Done(), and set\+Error().

\index{proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}!items\+Left\+\_\+@{items\+Left\+\_\+}}
\index{items\+Left\+\_\+@{items\+Left\+\_\+}!proxygen\+::\+Cob\+Helper@{proxygen\+::\+Cob\+Helper}}
\subsubsection[{items\+Left\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::atomic$<$uint32\+\_\+t$>$ proxygen\+::\+Cob\+Helper\+::items\+Left\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1CobHelper_a029769e43745539b0d863ccd0b45e440}


Definition at line 56 of file Cob\+Helper.\+h.



Referenced by worker\+Done().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/utils/{\bf Cob\+Helper.\+h}\end{DoxyCompactItemize}
