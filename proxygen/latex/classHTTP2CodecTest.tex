\section{H\+T\+T\+P2\+Codec\+Test Class Reference}
\label{classHTTP2CodecTest}\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
Inheritance diagram for H\+T\+T\+P2\+Codec\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classHTTP2CodecTest}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P2\+Codec\+Test} ()
\item 
void {\bf Set\+Up} () override
\item 
void {\bf test\+Header\+List\+Size} (bool oversized)
\item 
void {\bf test\+Frame\+Size\+Limit} (bool oversized)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P2\+Codec} {\bf upstream\+Codec\+\_\+} \{Transport\+Direction\+::\+U\+P\+S\+T\+R\+E\+AM\}
\item 
{\bf H\+T\+T\+P2\+Codec} {\bf downstream\+Codec\+\_\+} \{Transport\+Direction\+::\+D\+O\+W\+N\+S\+T\+R\+E\+AM\}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 48 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.



\subsection{Constructor \& Destructor Documentation}
\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\subsubsection[{H\+T\+T\+P2\+Codec\+Test()}]{\setlength{\rightskip}{0pt plus 5cm}H\+T\+T\+P2\+Codec\+Test\+::\+H\+T\+T\+P2\+Codec\+Test (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classHTTP2CodecTest_acd43676c5e3b184f4571024016c8c4c5}


Definition at line 51 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.


\begin{DoxyCode}
52     :HTTPParallelCodecTest(upstreamCodec_, downstreamCodec_) \{\}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!Set\+Up@{Set\+Up}}
\index{Set\+Up@{Set\+Up}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\subsubsection[{Set\+Up() override}]{\setlength{\rightskip}{0pt plus 5cm}void H\+T\+T\+P2\+Codec\+Test\+::\+Set\+Up (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classHTTP2CodecTest_a08126d66cabeaf75426da3c5069624c6}


Definition at line 54 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.



References H\+T\+T\+P\+Parallel\+Codec\+Test\+::\+Set\+Up().


\begin{DoxyCode}
54                         \{
55     HTTPParallelCodecTest::SetUp();
56   \}
\end{DoxyCode}
\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!test\+Frame\+Size\+Limit@{test\+Frame\+Size\+Limit}}
\index{test\+Frame\+Size\+Limit@{test\+Frame\+Size\+Limit}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\subsubsection[{test\+Frame\+Size\+Limit(bool oversized)}]{\setlength{\rightskip}{0pt plus 5cm}void H\+T\+T\+P2\+Codec\+Test\+::test\+Frame\+Size\+Limit (
\begin{DoxyParamCaption}
\item[{bool}]{oversized}
\end{DoxyParamCaption}
)}\label{classHTTP2CodecTest_ae148785424f615a541ea9096ccf5053d}


Definition at line 530 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.



References proxygen\+::get\+Big\+Get\+Request(), proxygen\+::http2\+::k\+Max\+Frame\+Payload\+Length\+Min, proxygen\+::\+M\+A\+X\+\_\+\+F\+R\+A\+M\+E\+\_\+\+S\+I\+ZE, proxygen\+::parse(), and settings.


\begin{DoxyCode}
530                                                       \{
531   HTTPMessage req = getBigGetRequest(\textcolor{stringliteral}{"/guacamole"});
532   \textcolor{keyword}{auto} settings = downstreamCodec_.getEgressSettings();
533 
534   parse(); \textcolor{comment}{// consume preface}
535   \textcolor{keywordflow}{if} (oversized) \{
536     \textcolor{comment}{// trick upstream for sending a 2x bigger HEADERS frame}
537     settings->setSetting(SettingsId::MAX\_FRAME\_SIZE,
538                          http2::kMaxFramePayloadLengthMin * 2);
539     downstreamCodec_.generateSettings(output_);
540     parseUpstream();
541   \}
542 
543   settings->setSetting(SettingsId::MAX\_FRAME\_SIZE,
544                        http2::kMaxFramePayloadLengthMin);
545   upstreamCodec_.generateHeader(output_, 1, req, \textcolor{keyword}{true} \textcolor{comment}{/* eom */});
546 
547   parse();
548   \textcolor{comment}{// session error}
549   EXPECT\_EQ(callbacks_.messageBegin, oversized ? 0 : 1);
550   EXPECT\_EQ(callbacks_.headersComplete, oversized ? 0 : 1);
551   EXPECT\_EQ(callbacks_.messageComplete, oversized ? 0 : 1);
552   EXPECT\_EQ(callbacks_.streamErrors, 0);
553   EXPECT\_EQ(callbacks_.sessionErrors, oversized ? 1 : 0);
554 \}
\end{DoxyCode}
\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!test\+Header\+List\+Size@{test\+Header\+List\+Size}}
\index{test\+Header\+List\+Size@{test\+Header\+List\+Size}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\subsubsection[{test\+Header\+List\+Size(bool oversized)}]{\setlength{\rightskip}{0pt plus 5cm}void H\+T\+T\+P2\+Codec\+Test\+::test\+Header\+List\+Size (
\begin{DoxyParamCaption}
\item[{bool}]{oversized}
\end{DoxyParamCaption}
)}\label{classHTTP2CodecTest_a6d77339173c35c02431060323b8306ed}


Definition at line 509 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::get\+Get\+Request(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+M\+A\+X\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+L\+I\+S\+T\+\_\+\+S\+I\+ZE, proxygen\+::parse(), and settings.


\begin{DoxyCode}
509                                                       \{
510   \textcolor{keywordflow}{if} (oversized) \{
511     \textcolor{keyword}{auto} settings = downstreamCodec_.getEgressSettings();
512     settings->setSetting(SettingsId::MAX\_HEADER\_LIST\_SIZE, 37);
513   \}
514 
515   HTTPMessage req = getGetRequest(\textcolor{stringliteral}{"/guacamole"});
516   req.getHeaders().add(HTTP\_HEADER\_USER\_AGENT, \textcolor{stringliteral}{"coolio"});
517   req.getHeaders().add(\textcolor{stringliteral}{"x-long-long-header"},
518                        \textcolor{stringliteral}{"supercalafragalisticexpialadoshus"});
519   upstreamCodec_.generateHeader(output_, 1, req, \textcolor{keyword}{true} \textcolor{comment}{/* eom */});
520 
521   parse();
522   \textcolor{comment}{// session error}
523   EXPECT\_EQ(callbacks_.messageBegin, oversized ? 0 : 1);
524   EXPECT\_EQ(callbacks_.headersComplete, oversized ? 0 : 1);
525   EXPECT\_EQ(callbacks_.messageComplete, oversized ? 0 : 1);
526   EXPECT\_EQ(callbacks_.streamErrors, 0);
527   EXPECT\_EQ(callbacks_.sessionErrors, oversized ? 1 : 0);
528 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!downstream\+Codec\+\_\+@{downstream\+Codec\+\_\+}}
\index{downstream\+Codec\+\_\+@{downstream\+Codec\+\_\+}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\subsubsection[{downstream\+Codec\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P2\+Codec} H\+T\+T\+P2\+Codec\+Test\+::downstream\+Codec\+\_\+ \{Transport\+Direction\+::\+D\+O\+W\+N\+S\+T\+R\+E\+AM\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2CodecTest_a84a7be1874ac89c9c01389dabb327e4a}


Definition at line 62 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.

\index{H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}!upstream\+Codec\+\_\+@{upstream\+Codec\+\_\+}}
\index{upstream\+Codec\+\_\+@{upstream\+Codec\+\_\+}!H\+T\+T\+P2\+Codec\+Test@{H\+T\+T\+P2\+Codec\+Test}}
\subsubsection[{upstream\+Codec\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P2\+Codec} H\+T\+T\+P2\+Codec\+Test\+::upstream\+Codec\+\_\+ \{Transport\+Direction\+::\+U\+P\+S\+T\+R\+E\+AM\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2CodecTest_ab2c6c84405a88b7adff87057664194f6}


Definition at line 61 of file H\+T\+T\+P2\+Codec\+Test.\+cpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/codec/test/{\bf H\+T\+T\+P2\+Codec\+Test.\+cpp}\end{DoxyCompactItemize}
