\section{proxygen/lib/http/test/\+Window\+Test.cpp File Reference}
\label{WindowTest_8cpp}\index{proxygen/lib/http/test/\+Window\+Test.\+cpp@{proxygen/lib/http/test/\+Window\+Test.\+cpp}}
{\ttfamily \#include $<$folly/portability/\+G\+Test.\+h$>$}\\*
{\ttfamily \#include $<$proxygen/lib/http/\+Window.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\bf T\+E\+ST} (Window\+Test, Basic)
\item 
{\bf T\+E\+ST} (Window\+Test, Change\+Capacity)
\item 
{\bf T\+E\+ST} (Window\+Test, Exceed\+Window)
\item 
{\bf T\+E\+ST} (Window\+Test, Overflow)
\item 
{\bf T\+E\+ST} (Window\+Test, Underflow)
\item 
{\bf T\+E\+ST} (Window\+Test, Huge\+Reserve)
\item 
{\bf T\+E\+ST} (Window\+Test, Huge\+Free)
\item 
{\bf T\+E\+ST} (Window\+Test, Huge\+Free2)
\item 
{\bf T\+E\+ST} (Window\+Test, Bytes\+Outstanding)
\item 
{\bf T\+E\+ST} (Window\+Test, Bytes\+Outstanding\+After\+Fail)
\item 
{\bf T\+E\+ST} (Window\+Test, Non\+Strict)
\item 
{\bf T\+E\+ST} (Window\+Test, New\+Capacity\+Overflow)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Basic)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Basic}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_ae162ef29b9b9e4a0ab05f3aefa658962}


Definition at line 15 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free(), proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Size(), and proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
15                         \{
16   Window w(100);
17   ASSERT\_TRUE(w.free(10));
18   ASSERT\_EQ(w.getSize(), 110);
19   ASSERT\_EQ(w.getCapacity(), 100);
20   ASSERT\_TRUE(w.reserve(20));
21   ASSERT\_EQ(w.getSize(), 90);
22   ASSERT\_TRUE(w.reserve(90));
23   ASSERT\_EQ(w.getSize(), 0);
24   ASSERT\_TRUE(w.free(5));
25   ASSERT\_EQ(w.getSize(), 5);
26   ASSERT\_TRUE(w.free(0));
27   ASSERT\_EQ(w.getSize(), 5);
28 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Change\+Capacity)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Change\+Capacity}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_af45a283c1a078681d958c41a806df8a6}


Definition at line 30 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free(), proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Outstanding(), proxygen\+::\+Window\+::get\+Size(), proxygen\+::\+Window\+::reserve(), and proxygen\+::\+Window\+::set\+Capacity().


\begin{DoxyCode}
30                                  \{
31   Window w(100);
32   ASSERT\_TRUE(w.setCapacity(10));
33   ASSERT\_EQ(w.getSize(), 10);
34   ASSERT\_EQ(w.getCapacity(), 10);
35   ASSERT\_TRUE(w.reserve(7));
36   ASSERT\_TRUE(w.setCapacity(5));
37   ASSERT\_EQ(w.getCapacity(), 5);
38   ASSERT\_EQ(w.getSize(), -2);
39   ASSERT\_TRUE(w.free(1));
40   ASSERT\_EQ(w.getSize(), -1);
41   ASSERT\_TRUE(w.setCapacity(6));
42   ASSERT\_EQ(w.getSize(), 0);
43   ASSERT\_EQ(w.getCapacity(), 6);
44   ASSERT\_TRUE(w.setCapacity(7));
45   ASSERT\_EQ(w.getSize(), 1);
46   ASSERT\_EQ(w.getCapacity(), 7);
47   ASSERT\_EQ(w.getOutstanding(), 6);
48 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Exceed\+Window)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Exceed\+Window}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_af6800f2c80217d98e650f1a36305c9a0}


Definition at line 50 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::get\+Size(), and proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
50                                \{
51   Window w(100);
52   ASSERT\_TRUE(w.reserve(50));
53   ASSERT\_TRUE(w.reserve(40));
54   ASSERT\_EQ(w.getSize(), 10);
55   ASSERT\_FALSE(w.reserve(20));
56 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Overflow)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Overflow}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_ab6827ddff9aec322cef7add18d7ff203}


Definition at line 58 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
58                            \{
59   Window w(0);
60   ASSERT\_FALSE(w.reserve(std::numeric\_limits<int32\_t>::max()));
61 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Underflow)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Underflow}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_af342f7fcb1e5e39afeb756e9958360a3}


Definition at line 63 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free(), and proxygen\+::\+Window\+::get\+Size().


\begin{DoxyCode}
63                             \{
64   Window w(100);
65   ASSERT\_TRUE(w.free(100)); \textcolor{comment}{// You can manually bump up the window}
66   ASSERT\_TRUE(w.free(100)); \textcolor{comment}{// You can manually bump up the window}
67   ASSERT\_EQ(w.getSize(), 300);
68   ASSERT\_FALSE(w.free(std::numeric\_limits<int32\_t>::max())); \textcolor{comment}{// to a point}
69 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Huge\+Reserve)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Huge\+Reserve}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_a94ed4c8339a7b27c94f8a91e160b1002}


Definition at line 71 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
71                               \{
72   Window w(100);
73   ASSERT\_FALSE(w.reserve(std::numeric\_limits<uint32\_t>::max()));
74 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Huge\+Free)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Huge\+Free}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_a645b9d78598692b50705d304329e0377}


Definition at line 76 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free().


\begin{DoxyCode}
76                            \{
77   Window w1(0);
78   ASSERT\_TRUE(w1.free(std::numeric\_limits<int32\_t>::max()));
79   Window w2(1);
80   ASSERT\_FALSE(w2.free(std::numeric\_limits<int32\_t>::max()));
81 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Huge\+Free2)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Huge\+Free2}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_af2374f1dd279fb8c73e239e9ff5c5d7e}


Definition at line 83 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free().


\begin{DoxyCode}
83                             \{
84   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} i = 0; i < 10; ++i) \{
85     Window w(i);
86     ASSERT\_TRUE(w.free(std::numeric\_limits<int32\_t>::max() - i));
87     ASSERT\_FALSE(w.free(1));
88   \}
89 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Bytes\+Outstanding)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Bytes\+Outstanding}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_a4eca30f6e45f916981d8f5d337fe2ca0}


Definition at line 91 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free(), proxygen\+::\+Window\+::get\+Outstanding(), and proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
91                                    \{
92   Window w(100);
93   ASSERT\_EQ(w.getOutstanding(), 0);
94   ASSERT\_TRUE(w.reserve(20));
95   ASSERT\_EQ(w.getOutstanding(), 20);
96   ASSERT\_TRUE(w.free(30));
97   \textcolor{comment}{// outstanding bytes is -10, but the API clamps this to 0}
98   ASSERT\_EQ(w.getOutstanding(), 0);
99 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Bytes\+Outstanding\+After\+Fail)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Bytes\+Outstanding\+After\+Fail}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_a8ecdffd2135dcc131be43475864be4ff}


Definition at line 101 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::get\+Outstanding(), and proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
101                                             \{
102   Window w(100);
103   ASSERT\_EQ(w.getOutstanding(), 0);
104   ASSERT\_FALSE(w.reserve(110));
105   ASSERT\_EQ(w.getOutstanding(), 0);
106 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, Non\+Strict)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{Non\+Strict}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_a9bd36d35fd5681fe0758a1c6881bec51}


Definition at line 108 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::get\+Outstanding(), proxygen\+::\+Window\+::get\+Size(), and proxygen\+::\+Window\+::reserve().


\begin{DoxyCode}
108                             \{
109   Window w(100);
110   ASSERT\_TRUE(w.reserve(110, \textcolor{keyword}{false}));
111   ASSERT\_EQ(w.getOutstanding(), 110);
112   ASSERT\_EQ(w.getSize(), -10);
113 \}
\end{DoxyCode}
\index{Window\+Test.\+cpp@{Window\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!Window\+Test.\+cpp@{Window\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Window\+Test, New\+Capacity\+Overflow)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Window\+Test}]{, }
\item[{New\+Capacity\+Overflow}]{}
\end{DoxyParamCaption}
)}\label{WindowTest_8cpp_a3c3e535231e609d3eca4df3375c002a5}


Definition at line 115 of file Window\+Test.\+cpp.



References proxygen\+::\+Window\+::free(), proxygen\+::\+Window\+::get\+Outstanding(), proxygen\+::\+Window\+::get\+Size(), and proxygen\+::\+Window\+::set\+Capacity().


\begin{DoxyCode}
115                                       \{
116   Window w(0);
117   ASSERT\_TRUE(w.free(10));
118   ASSERT\_EQ(w.getOutstanding(), 0);
119   ASSERT\_EQ(w.getSize(), 10);
120   ASSERT\_TRUE(w.setCapacity(std::numeric\_limits<int32\_t>::max() - 10));
121   ASSERT\_EQ(w.getSize(), std::numeric\_limits<int32\_t>::max());
122   ASSERT\_FALSE(w.setCapacity(std::numeric\_limits<int32\_t>::max() - 9));
123 \}
\end{DoxyCode}
