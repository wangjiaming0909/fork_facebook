\section{Connection\+Filter\+Test Class Reference}
\label{classConnectionFilterTest}\index{Connection\+Filter\+Test@{Connection\+Filter\+Test}}
Inheritance diagram for Connection\+Filter\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classConnectionFilterTest}
\end{center}
\end{figure}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Server\+Options} {\bf create\+Default\+Opts} () override
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 710 of file H\+T\+T\+P\+Server\+Test.\+cpp.



\subsection{Member Function Documentation}
\index{Connection\+Filter\+Test@{Connection\+Filter\+Test}!create\+Default\+Opts@{create\+Default\+Opts}}
\index{create\+Default\+Opts@{create\+Default\+Opts}!Connection\+Filter\+Test@{Connection\+Filter\+Test}}
\subsubsection[{create\+Default\+Opts() override}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Server\+Options} Connection\+Filter\+Test\+::create\+Default\+Opts (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}\label{classConnectionFilterTest_a19b02926b8bd53494cff0694ae181658}


Reimplemented from {\bf Scoped\+Server\+Test} \doxyref{}{p.}{classScopedServerTest_a451ba8d7a23e67134de3356a7fd264fd}.



Definition at line 712 of file H\+T\+T\+P\+Server\+Test.\+cpp.



References proxygen\+::\+Request\+Handler\+Chain\+::add\+Then(), proxygen\+::\+H\+T\+T\+P\+Server\+Options\+::handler\+Factories, proxygen\+::\+H\+T\+T\+P\+Server\+Options\+::new\+Connection\+Filter, and proxygen\+::\+H\+T\+T\+P\+Server\+Options\+::threads.


\begin{DoxyCode}
712                                                  \{
713     HTTPServerOptions options;
714     options.threads = 4;
715     options.handlerFactories =
716         RequestHandlerChain().addThen<TestHandlerFactory>().build();
717     options.handlerFactories = RequestHandlerChain()
718                                    .addThen<DummyFilterFactory>()
719                                    .addThen<TestHandlerFactory>()
720                                    .build();
721     options.newConnectionFilter =
722         [](\textcolor{keyword}{const} folly::AsyncTransportWrapper* sock,
723            \textcolor{keyword}{const} folly::SocketAddress* \textcolor{comment}{/* address */},
724            \textcolor{keyword}{const} std::string& \textcolor{comment}{/* nextProtocolName */},
725            wangle::SecureTransportType \textcolor{comment}{/* secureTransportType */},
726            \textcolor{keyword}{const} wangle::TransportInfo& \textcolor{comment}{/* tinfo */}) \{
727           \textcolor{keyword}{auto} cert = sock->getPeerCert();
728           \textcolor{keywordflow}{if} (!cert || OpenSSLCertUtils::getCommonName(*cert).value\_or(\textcolor{stringliteral}{""}) !=
729                            \textcolor{stringliteral}{"testuser1"}) \{
730             \textcolor{keywordflow}{throw} std::runtime\_error(\textcolor{stringliteral}{"Client cert is missing or invalid."});
731           \}
732         \};
733     \textcolor{keywordflow}{return} options;
734   \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/httpserver/tests/{\bf H\+T\+T\+P\+Server\+Test.\+cpp}\end{DoxyCompactItemize}
