\section{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test Class Reference}
\label{classHTTP2UpstreamSessionWithVirtualNodesTest}\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
Inheritance diagram for H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{classHTTP2UpstreamSessionWithVirtualNodesTest}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf Set\+Up} () override
\item 
void {\bf common\+Set\+Up} (unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Codec} $>$ codec)
\item 
void {\bf Tear\+Down} () override
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf Mock\+H\+T\+T\+P\+Codec} $\ast$ {\bf codec\+Ptr\+\_\+} \{{\bf nullptr}\}
\item 
{\bf H\+T\+T\+P\+Codec\+::\+Callback} $\ast$ {\bf codec\+Cb\+\_\+} \{{\bf nullptr}\}
\item 
uint32\+\_\+t {\bf next\+Outgoing\+Txn\+\_\+} \{1\}
\item 
std\+::vector$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf dependencies}
\item 
uint8\+\_\+t {\bf level\+\_\+} \{3\}
\item 
std\+::shared\+\_\+ptr$<$ {\bf Test\+Priority\+Map\+Builder} $>$ {\bf builder\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 861 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.



\subsection{Member Function Documentation}
\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!common\+Set\+Up@{common\+Set\+Up}}
\index{common\+Set\+Up@{common\+Set\+Up}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{common\+Set\+Up(unique\+\_\+ptr$<$ H\+T\+T\+P\+Codec $>$ codec)}]{\setlength{\rightskip}{0pt plus 5cm}void H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::common\+Set\+Up (
\begin{DoxyParamCaption}
\item[{unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Codec} $>$}]{codec}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_a34de30a953dd4d5dd369811cae060fc9}


Definition at line 884 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.


\begin{DoxyCode}
884                                                 \{
885     HTTPSession::setDefaultReadBufferLimit(65536);
886     HTTPSession::setDefaultWriteBufferLimit(65536);
887     EXPECT\_CALL(*transport_, writeChain(\_, \_, \_))
888       .WillRepeatedly(Invoke(
889             \textcolor{keyword}{this},
890             &HTTPUpstreamTest<MockHTTPCodecPair>::onWriteChain));
891     EXPECT\_CALL(*transport_, setReadCB(\_))
892       .WillRepeatedly(SaveArg<0>(&readCallback_));
893     EXPECT\_CALL(*transport_, getReadCB())
894       .WillRepeatedly(Return(readCallback_));
895     EXPECT\_CALL(*transport_, getEventBase())
896       .WillRepeatedly(Return(&eventBase_));
897     EXPECT\_CALL(*transport_, good())
898       .WillRepeatedly(ReturnPointee(&transportGood_));
899     EXPECT\_CALL(*transport_, closeNow())
900       .WillRepeatedly(Assign(&transportGood_, \textcolor{keyword}{false}));
901     AsyncTransportWrapper::UniquePtr transportPtr(transport_);
902     httpSession_ = \textcolor{keyword}{new} HTTPUpstreamSession(
903       transactionTimeouts_.get(),
904       std::move(transportPtr),
905       localAddr_, peerAddr_,
906       std::move(codec),
907       mockTransportInfo_,
908       \textcolor{keyword}{this},
909       level_,
910       builder_);
911     eventBase_.loop();
912     ASSERT\_EQ(this->sessionDestroyed_, \textcolor{keyword}{false});
913   \}
\end{DoxyCode}
\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!Set\+Up@{Set\+Up}}
\index{Set\+Up@{Set\+Up}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{Set\+Up() override}]{\setlength{\rightskip}{0pt plus 5cm}void H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::\+Set\+Up (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_a366482870c5252bf17f2afe84fda39ba}


Definition at line 864 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.


\begin{DoxyCode}
864                         \{
865     \textcolor{keyword}{auto} codec = std::make\_unique<NiceMock<MockHTTPCodec>>();
866     codecPtr_ = codec.get();
867     EXPECT\_CALL(*codec, supportsParallelRequests())
868       .WillRepeatedly(Return(\textcolor{keyword}{true}));
869     EXPECT\_CALL(*codec, getTransportDirection())
870       .WillRepeatedly(Return(TransportDirection::UPSTREAM));
871     EXPECT\_CALL(*codec, getProtocol())
872       .WillRepeatedly(Return(CodecProtocol::HTTP\_2));
873     EXPECT\_CALL(*codec, setCallback(\_))
874       .WillRepeatedly(SaveArg<0>(&codecCb_));
875     EXPECT\_CALL(*codec, createStream())
876       .WillRepeatedly(Invoke([&] \{
877             \textcolor{keyword}{auto} ret = nextOutgoingTxn_;
878             nextOutgoingTxn_ += 2;
879             \textcolor{keywordflow}{return} ret;
880           \}));
881     commonSetUp(std::move(codec));
882   \}
\end{DoxyCode}
\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!Tear\+Down@{Tear\+Down}}
\index{Tear\+Down@{Tear\+Down}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{Tear\+Down() override}]{\setlength{\rightskip}{0pt plus 5cm}void H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::\+Tear\+Down (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_a79e48e626a5b309ef549b9af9e85610b}


Definition at line 915 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.


\begin{DoxyCode}
915                            \{
916     EXPECT\_TRUE(sessionDestroyed_);
917   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!builder\+\_\+@{builder\+\_\+}}
\index{builder\+\_\+@{builder\+\_\+}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{builder\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::shared\+\_\+ptr$<${\bf Test\+Priority\+Map\+Builder}$>$ H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::builder\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_a8799ba884fbac4ea0d2788595b49ad72}


Definition at line 925 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!codec\+Cb\+\_\+@{codec\+Cb\+\_\+}}
\index{codec\+Cb\+\_\+@{codec\+Cb\+\_\+}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{codec\+Cb\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Codec\+::\+Callback}$\ast$ H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::codec\+Cb\+\_\+ \{{\bf nullptr}\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_aaba91bcf12fab077fae1d507b34c5dee}


Definition at line 921 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!codec\+Ptr\+\_\+@{codec\+Ptr\+\_\+}}
\index{codec\+Ptr\+\_\+@{codec\+Ptr\+\_\+}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{codec\+Ptr\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Mock\+H\+T\+T\+P\+Codec}$\ast$ H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::codec\+Ptr\+\_\+ \{{\bf nullptr}\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_aadd89edda9733b5cb7f5428617b8ccc6}


Definition at line 920 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!dependencies@{dependencies}}
\index{dependencies@{dependencies}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{dependencies}]{\setlength{\rightskip}{0pt plus 5cm}std\+::vector$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::dependencies\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_aaedad8282fa5e2c07c48fe064525f0b5}


Definition at line 923 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!level\+\_\+@{level\+\_\+}}
\index{level\+\_\+@{level\+\_\+}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{level\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::level\+\_\+ \{3\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_ae538a62cc03e516b6c6fe7954aec5bae}


Definition at line 924 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}!next\+Outgoing\+Txn\+\_\+@{next\+Outgoing\+Txn\+\_\+}}
\index{next\+Outgoing\+Txn\+\_\+@{next\+Outgoing\+Txn\+\_\+}!H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test@{H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test}}
\subsubsection[{next\+Outgoing\+Txn\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t H\+T\+T\+P2\+Upstream\+Session\+With\+Virtual\+Nodes\+Test\+::next\+Outgoing\+Txn\+\_\+ \{1\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classHTTP2UpstreamSessionWithVirtualNodesTest_ac1eed1f50dc58b21b8085c5a1cc7473f}


Definition at line 922 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/session/test/{\bf H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp}\end{DoxyCompactItemize}
