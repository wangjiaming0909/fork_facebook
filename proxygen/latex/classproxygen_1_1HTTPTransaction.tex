\section{proxygen\+:\+:H\+T\+T\+P\+Transaction Class Reference}
\label{classproxygen_1_1HTTPTransaction}\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}


{\ttfamily \#include $<$H\+T\+T\+P\+Transaction.\+h$>$}

Inheritance diagram for proxygen\+:\+:H\+T\+T\+P\+Transaction\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classproxygen_1_1HTTPTransaction}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct {\bf Chunk}
\item 
class {\bf Priority\+Sample}
\item 
struct {\bf Priority\+Sample\+Summary}
\item 
class {\bf Rate\+Limit\+Callback}
\item 
class {\bf Transport}
\end{DoxyCompactItemize}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using {\bf Handler} = {\bf H\+T\+T\+P\+Transaction\+Handler}
\item 
using {\bf Push\+Handler} = {\bf H\+T\+T\+P\+Push\+Transaction\+Handler}
\item 
using {\bf Transport\+Callback} = {\bf H\+T\+T\+P\+Transaction\+Transport\+Callback}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Transaction} ({\bf Transport\+Direction} direction, {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} id, uint32\+\_\+t seq\+No, {\bf Transport} \&transport, {\bf H\+T\+T\+P2\+Priority\+Queue\+Base} \&egress\+Queue, folly\+::\+H\+H\+Wheel\+Timer $\ast$timer={\bf nullptr}, const folly\+::\+Optional$<$ std\+::chrono\+::milliseconds $>$ \&default\+Timeout=folly\+::\+Optional$<$ std\+::chrono\+::milliseconds $>$(), {\bf H\+T\+T\+P\+Session\+Stats} $\ast$stats={\bf nullptr}, bool use\+Flow\+Control=false, uint32\+\_\+t receive\+Initial\+Window\+Size=0, uint32\+\_\+t send\+Initial\+Window\+Size=0, {\bf http2\+::\+Priority\+Update}={\bf http2\+::\+Default\+Priority}, folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ assoc\+Stream\+Id={\bf H\+T\+T\+P\+Codec\+::\+No\+Stream}, folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Ex\+Attributes} $>$ ex\+Attributes={\bf H\+T\+T\+P\+Codec\+::\+No\+Ex\+Attributes})
\item 
{\bf $\sim$\+H\+T\+T\+P\+Transaction} () override
\item 
void {\bf reset} (bool use\+Flow\+Control, uint32\+\_\+t receive\+Initial\+Window\+Size, uint32\+\_\+t receive\+Stream\+Window\+Size, uint32\+\_\+t send\+Initial\+Window\+Size)
\item 
{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} {\bf get\+ID} () const 
\item 
uint32\+\_\+t {\bf get\+Sequence\+Number} () const 
\item 
const {\bf Transport} \& {\bf get\+Transport} () const 
\item 
{\bf Transport} \& {\bf get\+Transport} ()
\item 
virtual void {\bf set\+Handler} ({\bf Handler} $\ast$handler)
\item 
const {\bf Handler} $\ast$ {\bf get\+Handler} () const 
\item 
{\bf http2\+::\+Priority\+Update} {\bf get\+Priority} () const 
\item 
std\+::tuple$<$ uint64\+\_\+t, uint64\+\_\+t, double $>$ {\bf get\+Priority\+Summary} () const 
\item 
bool {\bf get\+Priority\+Fallback} () const 
\item 
{\bf H\+T\+T\+P\+Transaction\+Egress\+S\+M\+::\+State} {\bf get\+Egress\+State} () const 
\item 
{\bf H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+State} {\bf get\+Ingress\+State} () const 
\item 
bool {\bf is\+Upstream} () const 
\item 
bool {\bf is\+Downstream} () const 
\item 
void {\bf get\+Local\+Address} (folly\+::\+Socket\+Address \&addr) const 
\item 
void {\bf get\+Peer\+Address} (folly\+::\+Socket\+Address \&addr) const 
\item 
const folly\+::\+Socket\+Address \& {\bf get\+Local\+Address} () const noexcept
\item 
const folly\+::\+Socket\+Address \& {\bf get\+Peer\+Address} () const noexcept
\item 
const wangle\+::\+Transport\+Info \& {\bf get\+Setup\+Transport\+Info} () const noexcept
\item 
void {\bf get\+Current\+Transport\+Info} (wangle\+::\+Transport\+Info $\ast$tinfo) const 
\item 
{\bf H\+T\+T\+P\+Session\+Stats} $\ast$ {\bf get\+Session\+Stats} () const 
\item 
virtual bool {\bf extra\+Response\+Expected} () const 
\item 
virtual void {\bf set\+Receive\+Window} (uint32\+\_\+t capacity)
\item 
virtual const {\bf Window} \& {\bf get\+Receive\+Window} () const 
\item 
uint32\+\_\+t {\bf get\+Max\+Deferred\+Size} ()
\item 
void {\bf on\+Ingress\+Headers\+Complete} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$ msg)
\item 
void {\bf on\+Ingress\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain, uint16\+\_\+t padding)
\item 
void {\bf on\+Ingress\+Chunk\+Header} (size\+\_\+t length)
\item 
void {\bf on\+Ingress\+Chunk\+Complete} ()
\item 
void {\bf on\+Ingress\+Trailers} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$ trailers)
\item 
void {\bf on\+Ingress\+Upgrade} ({\bf Upgrade\+Protocol} protocol)
\item 
void {\bf on\+Ingress\+E\+OM} ()
\item 
void {\bf on\+Error} (const {\bf H\+T\+T\+P\+Exception} \&error)
\item 
void {\bf on\+Goaway} ({\bf Error\+Code} code)
\item 
void {\bf on\+Ingress\+Timeout} ()
\item 
void {\bf on\+Ingress\+Window\+Update} (uint32\+\_\+t amount)
\item 
void {\bf on\+Ingress\+Set\+Send\+Window} (uint32\+\_\+t new\+Window\+Size)
\item 
bool {\bf on\+Write\+Ready} (uint32\+\_\+t max\+Egress, double ratio)
\item 
void {\bf on\+Egress\+Timeout} ()
\item 
void {\bf on\+Egress\+Header\+First\+Byte} ()
\item 
void {\bf on\+Egress\+Body\+First\+Byte} ()
\item 
void {\bf on\+Egress\+Body\+Last\+Byte} ()
\item 
void {\bf on\+Egress\+Tracked\+Byte} ()
\item 
void {\bf on\+Egress\+Last\+Byte\+Ack} (std\+::chrono\+::milliseconds latency)
\item 
void {\bf set\+Transport\+Callback} ({\bf Transport\+Callback} $\ast$cb)
\item 
bool {\bf is\+Ingress\+Started} () const 
\item 
bool {\bf is\+Ingress\+E\+O\+M\+Queued} () const 
\item 
bool {\bf is\+Ingress\+Complete} () const 
\item 
bool {\bf is\+Ingress\+E\+O\+M\+Seen} () const 
\item 
bool {\bf is\+Egress\+Started} () const 
\item 
bool {\bf is\+Egress\+E\+O\+M\+Queued} () const 
\item 
bool {\bf is\+Egress\+Complete} () const 
\item 
bool {\bf is\+Remote\+Initiated} () const 
\item 
bool {\bf is\+Egress\+E\+O\+M\+Seen} () const 
\item 
virtual bool {\bf can\+Send\+Headers} () const 
\item 
virtual void {\bf send\+Headers} (const {\bf H\+T\+T\+P\+Message} \&headers)
\item 
virtual void {\bf send\+Headers\+With\+E\+OM} (const {\bf H\+T\+T\+P\+Message} \&headers)
\item 
virtual void {\bf send\+Headers\+With\+Optional\+E\+OM} (const {\bf H\+T\+T\+P\+Message} \&headers, bool eom)
\item 
virtual void {\bf send\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body)
\item 
virtual void {\bf send\+Chunk\+Header} (size\+\_\+t length)
\item 
virtual void {\bf send\+Chunk\+Terminator} ()
\item 
virtual void {\bf send\+Trailers} (const {\bf H\+T\+T\+P\+Headers} \&trailers)
\item 
virtual void {\bf send\+E\+OM} ()
\item 
virtual void {\bf send\+Abort} ()
\item 
virtual void {\bf pause\+Ingress} ()
\item 
virtual void {\bf resume\+Ingress} ()
\item 
bool {\bf is\+Ingress\+Paused} () const 
\item 
void {\bf pause\+Egress} ()
\item 
void {\bf resume\+Egress} ()
\item 
void {\bf set\+Egress\+Rate\+Limit} (uint64\+\_\+t bits\+Per\+Second)
\item 
bool {\bf is\+Egress\+Paused} () const 
\item 
bool {\bf is\+Flow\+Control\+Paused} () const 
\item 
bool {\bf supports\+Push\+Transactions} () const 
\item 
virtual {\bf H\+T\+T\+P\+Transaction} $\ast$ {\bf new\+Pushed\+Transaction} ({\bf H\+T\+T\+P\+Push\+Transaction\+Handler} $\ast$handler)
\item 
virtual {\bf H\+T\+T\+P\+Transaction} $\ast$ {\bf new\+Ex\+Transaction} ({\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$handler, bool unidirectional=false)
\item 
bool {\bf on\+Pushed\+Transaction} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn)
\item 
bool {\bf on\+Ex\+Transaction} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn)
\item 
bool {\bf is\+Pushed} () const 
\item 
bool {\bf is\+Ex\+Transaction} () const 
\item 
bool {\bf is\+Unidirectional} () const 
\item 
void {\bf set\+Idle\+Timeout} (std\+::chrono\+::milliseconds transaction\+Timeout)
\item 
bool {\bf has\+Idle\+Timeout} () const 
\item 
std\+::chrono\+::milliseconds {\bf get\+Idle\+Timeout} () const 
\item 
folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf get\+Assoc\+Txn\+Id} () const 
\item 
folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf get\+Control\+Stream} () const 
\item 
folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Ex\+Attributes} $>$ {\bf get\+Ex\+Attributes} () const 
\item 
const std\+::set$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ \& {\bf get\+Pushed\+Transactions} () const 
\item 
std\+::set$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf get\+Ex\+Transactions} () const 
\item 
void {\bf remove\+Pushed\+Transaction} ({\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} push\+Stream\+Id)
\item 
void {\bf remove\+Ex\+Transaction} ({\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} ex\+Stream\+Id)
\item 
void {\bf refresh\+Timeout} ()
\item 
bool {\bf test\+And\+Set\+First\+Byte\+Sent} ()
\item 
bool {\bf test\+And\+Clear\+Active} ()
\item 
bool {\bf test\+And\+Set\+First\+Header\+Byte\+Sent} ()
\item 
void {\bf increment\+Pending\+Byte\+Events} ()
\item 
void {\bf decrement\+Pending\+Byte\+Events} ()
\item 
void {\bf timeout\+Expired} () noexceptoverride
\item 
void {\bf describe} (std\+::ostream \&os) const 
\item 
void {\bf update\+And\+Send\+Priority} (int8\+\_\+t new\+Priority)
\item 
void {\bf update\+And\+Send\+Priority} (const {\bf http2\+::\+Priority\+Update} \&pri)
\item 
void {\bf on\+Priority\+Update} (const {\bf http2\+::\+Priority\+Update} \&priority)
\item 
virtual void {\bf add\+Waiting\+For\+Replay\+Safety} (folly\+::\+Async\+Transport\+::\+Replay\+Safety\+Callback $\ast$callback)
\item 
virtual void {\bf remove\+Waiting\+For\+Replay\+Safety} (folly\+::\+Async\+Transport\+::\+Replay\+Safety\+Callback $\ast$callback)
\item 
virtual bool {\bf need\+To\+Block\+For\+Replay\+Safety} () const 
\item 
int32\+\_\+t {\bf get\+Recv\+To\+Ack} () const 
\item 
bool {\bf is\+Priority\+Sampled} () const 
\item 
void {\bf set\+Priority\+Sampled} (bool sampled)
\item 
void {\bf update\+Contentions\+Count} (uint64\+\_\+t contentions)
\item 
void {\bf update\+Relative\+Weight} (double ratio)
\item 
void {\bf update\+Session\+Bytes\+Sheduled} (uint64\+\_\+t bytes)
\item 
void {\bf update\+Transaction\+Bytes\+Sent} (uint64\+\_\+t bytes)
\item 
bool {\bf get\+Priority\+Sample\+Summary} ({\bf Priority\+Sample\+Summary} \&summary) const 
\item 
const {\bf Compression\+Info} \& {\bf get\+Compression\+Info} () const 
\item 
bool {\bf has\+Pending\+Body} () const 
\item 
void {\bf set\+Last\+Byte\+Flushed\+Tracking\+Enabled} (bool enabled)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Transaction} (const {\bf H\+T\+T\+P\+Transaction} \&)=delete
\item 
{\bf H\+T\+T\+P\+Transaction} \& {\bf operator=} (const {\bf H\+T\+T\+P\+Transaction} \&)=delete
\item 
void {\bf on\+Delayed\+Destroy} (bool delayed) override
\item 
void {\bf update\+Handler\+Pause\+State} ()
\item 
void {\bf update\+Egress\+Compression\+Info} (const {\bf Compression\+Info} \&)
\item 
void {\bf update\+Ingress\+Compression\+Info} (const {\bf Compression\+Info} \&)
\item 
bool {\bf must\+Queue\+Ingress} () const 
\item 
void {\bf check\+Create\+Deferred\+Ingress} ()
\item 
void {\bf send\+Abort} ({\bf Error\+Code} {\bf status\+Code})
\item 
void {\bf process\+Ingress\+Headers\+Complete} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$ msg)
\item 
void {\bf process\+Ingress\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain, size\+\_\+t len)
\item 
void {\bf process\+Ingress\+Chunk\+Header} (size\+\_\+t length)
\item 
void {\bf process\+Ingress\+Chunk\+Complete} ()
\item 
void {\bf process\+Ingress\+Trailers} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$ trailers)
\item 
void {\bf process\+Ingress\+Upgrade} ({\bf Upgrade\+Protocol} protocol)
\item 
void {\bf process\+Ingress\+E\+OM} ()
\item 
void {\bf send\+Body\+Flow\+Controlled} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body={\bf nullptr})
\item 
size\+\_\+t {\bf send\+Body\+Now} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body, size\+\_\+t body\+Len, bool eom)
\item 
size\+\_\+t {\bf send\+E\+O\+M\+Now} ()
\item 
void {\bf on\+Delta\+Send\+Window\+Size} (int32\+\_\+t window\+Delta)
\item 
void {\bf notify\+Transport\+Pending\+Egress} ()
\item 
size\+\_\+t {\bf send\+Deferred\+Body} (uint32\+\_\+t max\+Egress)
\item 
bool {\bf maybe\+Delay\+For\+Rate\+Limit} ()
\item 
bool {\bf is\+Enqueued} () const 
\item 
void {\bf dequeue} ()
\item 
bool {\bf has\+Pending\+E\+OM} () const 
\item 
bool {\bf is\+Expecting\+Ingress} () const 
\item 
bool {\bf is\+Expecting\+Window\+Update} () const 
\item 
void {\bf update\+Read\+Timeout} ()
\item 
void {\bf mark\+Ingress\+Complete} ()
\item 
void {\bf mark\+Egress\+Complete} ()
\item 
bool {\bf validate\+Ingress\+State\+Transition} ({\bf H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+Event})
\item 
void {\bf flush\+Window\+Update} ()
\item 
void {\bf rate\+Limit\+Timeout\+Expired} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf Rate\+Limit\+Callback} {\bf rate\+Limit\+Callback\+\_\+} \{$\ast$this\}
\item 
std\+::unique\+\_\+ptr$<$ std\+::queue$<$ {\bf H\+T\+T\+P\+Event} $>$ $>$ {\bf deferred\+Ingress\+\_\+}
\item 
uint32\+\_\+t {\bf max\+Deferred\+Ingress\+\_\+} \{0\}
\item 
folly\+::\+I\+O\+Buf\+Queue {\bf deferred\+Egress\+Body\+\_\+} \{folly\+::\+I\+O\+Buf\+Queue\+::cache\+Chain\+Length()\}
\item 
const {\bf Transport\+Direction} {\bf direction\+\_\+}
\item 
{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} {\bf id\+\_\+}
\item 
uint32\+\_\+t {\bf seq\+No\+\_\+}
\item 
{\bf Handler} $\ast$ {\bf handler\+\_\+} \{{\bf nullptr}\}
\item 
{\bf Transport} \& {\bf transport\+\_\+}
\item 
{\bf H\+T\+T\+P\+Transaction\+Egress\+S\+M\+::\+State} {\bf egress\+State\+\_\+}
\item 
{\bf H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+State} {\bf ingress\+State\+\_\+}
\item 
{\bf H\+T\+T\+P\+Session\+Stats} $\ast$ {\bf stats\+\_\+} \{{\bf nullptr}\}
\item 
{\bf Compression\+Info} {\bf table\+Info\+\_\+}
\item 
{\bf Window} {\bf recv\+Window\+\_\+}
\item 
{\bf Window} {\bf send\+Window\+\_\+}
\item 
{\bf Transport\+Callback} $\ast$ {\bf transport\+Callback\+\_\+} \{{\bf nullptr}\}
\item 
std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$ {\bf trailers\+\_\+}
\item 
std\+::list$<$ {\bf Chunk} $>$ {\bf chunk\+Headers\+\_\+}
\item 
{\bf H\+T\+T\+P2\+Priority\+Queue\+Base} \& {\bf egress\+Queue\+\_\+}
\item 
{\bf H\+T\+T\+P2\+Priority\+Queue\+Base\+::\+Handle} {\bf queue\+Handle\+\_\+}
\item 
int32\+\_\+t {\bf recv\+To\+Ack\+\_\+} \{0\}
\item 
folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf assoc\+Stream\+Id\+\_\+}
\item 
folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Ex\+Attributes} $>$ {\bf ex\+Attributes\+\_\+}
\item 
std\+::set$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf pushed\+Transactions\+\_\+}
\item 
std\+::set$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$ {\bf ex\+Transactions\+\_\+}
\item 
{\bf http2\+::\+Priority\+Update} {\bf priority\+\_\+}
\item 
uint64\+\_\+t {\bf insert\+Depth\+\_\+} \{0\}
\item 
uint64\+\_\+t {\bf current\+Depth\+\_\+} \{0\}
\item 
double {\bf cumulative\+Ratio\+\_\+} \{0\}
\item 
uint64\+\_\+t {\bf egress\+Calls\+\_\+} \{0\}
\item 
uint16\+\_\+t {\bf last\+Response\+Status\+\_\+} \{0\}
\item 
uint8\+\_\+t {\bf pending\+Byte\+Events\+\_\+} \{0\}
\item 
folly\+::\+Optional$<$ uint64\+\_\+t $>$ {\bf expected\+Content\+Length\+Remaining\+\_\+}
\item 
folly\+::\+Optional$<$ uint64\+\_\+t $>$ {\bf expected\+Response\+Length\+\_\+}
\item 
folly\+::\+Optional$<$ uint64\+\_\+t $>$ {\bf actual\+Response\+Length\+\_\+} \{0\}
\item 
bool {\bf ingress\+Paused\+\_\+}\+:1
\item 
bool {\bf egress\+Paused\+\_\+}\+:1
\item 
bool {\bf flow\+Control\+Paused\+\_\+}\+:1
\item 
bool {\bf handler\+Egress\+Paused\+\_\+}\+:1
\item 
bool {\bf egress\+Rate\+Limited\+\_\+}\+:1
\item 
bool {\bf use\+Flow\+Control\+\_\+}\+:1
\item 
bool {\bf aborted\+\_\+}\+:1
\item 
bool {\bf deleting\+\_\+}\+:1
\item 
bool {\bf first\+Byte\+Sent\+\_\+}\+:1
\item 
bool {\bf first\+Header\+Byte\+Sent\+\_\+}\+:1
\item 
bool {\bf in\+Resume\+\_\+}\+:1
\item 
bool {\bf in\+Active\+Set\+\_\+}\+:1
\item 
bool {\bf ingress\+Error\+Seen\+\_\+}\+:1
\item 
bool {\bf priority\+Fallback\+\_\+}\+:1
\item 
bool {\bf head\+Request\+\_\+}\+:1
\item 
bool {\bf enable\+Last\+Byte\+Flushed\+Tracking\+\_\+}\+:1
\item 
uint64\+\_\+t {\bf egress\+Limit\+Bytes\+Per\+Ms\+\_\+} \{0\}
\item 
{\bf proxygen\+::\+Time\+Point} {\bf start\+Rate\+Limit\+\_\+}
\item 
uint64\+\_\+t {\bf num\+Limited\+Bytes\+Egressed\+\_\+} \{0\}
\item 
folly\+::\+Optional$<$ std\+::chrono\+::milliseconds $>$ {\bf transaction\+Timeout\+\_\+}
\item 
folly\+::\+H\+H\+Wheel\+Timer $\ast$ {\bf timer\+\_\+}
\item 
std\+::unique\+\_\+ptr$<$ {\bf Priority\+Sample} $>$ {\bf priority\+Sample\+\_\+}
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static uint64\+\_\+t {\bf egress\+Buffer\+Limit\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 324 of file H\+T\+T\+P\+Transaction.\+h.



\subsection{Member Typedef Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!Handler@{Handler}}
\index{Handler@{Handler}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{Handler}]{\setlength{\rightskip}{0pt plus 5cm}using {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Handler} =  {\bf H\+T\+T\+P\+Transaction\+Handler}}\label{classproxygen_1_1HTTPTransaction_a7d7b33611c7b5f490fb5be4747c82561}


Definition at line 328 of file H\+T\+T\+P\+Transaction.\+h.

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!Push\+Handler@{Push\+Handler}}
\index{Push\+Handler@{Push\+Handler}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{Push\+Handler}]{\setlength{\rightskip}{0pt plus 5cm}using {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Push\+Handler} =  {\bf H\+T\+T\+P\+Push\+Transaction\+Handler}}\label{classproxygen_1_1HTTPTransaction_a4152eb2c90f579f6749811ad97d8301b}


Definition at line 329 of file H\+T\+T\+P\+Transaction.\+h.

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!Transport\+Callback@{Transport\+Callback}}
\index{Transport\+Callback@{Transport\+Callback}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{Transport\+Callback}]{\setlength{\rightskip}{0pt plus 5cm}using {\bf proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+Callback} =  {\bf H\+T\+T\+P\+Transaction\+Transport\+Callback}}\label{classproxygen_1_1HTTPTransaction_ab94c66fe84552fb0c25af510ebff7b58}


Definition at line 433 of file H\+T\+T\+P\+Transaction.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!H\+T\+T\+P\+Transaction@{H\+T\+T\+P\+Transaction}}
\index{H\+T\+T\+P\+Transaction@{H\+T\+T\+P\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{H\+T\+T\+P\+Transaction(\+Transport\+Direction direction, H\+T\+T\+P\+Codec\+::\+Stream\+I\+D id, uint32\+\_\+t seq\+No, Transport \&transport, H\+T\+T\+P2\+Priority\+Queue\+Base \&egress\+Queue, folly\+::\+H\+H\+Wheel\+Timer $\ast$timer=nullptr, const folly\+::\+Optional$<$ std\+::chrono\+::milliseconds $>$ \&default\+Timeout=folly\+::\+Optional$<$ std\+::chrono\+::milliseconds $>$(), H\+T\+T\+P\+Session\+Stats $\ast$stats=nullptr, bool use\+Flow\+Control=false, uint32\+\_\+t receive\+Initial\+Window\+Size=0, uint32\+\_\+t send\+Initial\+Window\+Size=0, http2\+::\+Priority\+Update=http2\+::\+Default\+Priority, folly\+::\+Optional$<$ H\+T\+T\+P\+Codec\+::\+Stream\+I\+D $>$ assoc\+Stream\+Id=\+H\+T\+T\+P\+Codec\+::\+No\+Stream, folly\+::\+Optional$<$ H\+T\+T\+P\+Codec\+::\+Ex\+Attributes $>$ ex\+Attributes=\+H\+T\+T\+P\+Codec\+::\+No\+Ex\+Attributes)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+H\+T\+T\+P\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf Transport\+Direction}}]{direction, }
\item[{{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}}]{id, }
\item[{uint32\+\_\+t}]{seq\+No, }
\item[{{\bf Transport} \&}]{transport, }
\item[{{\bf H\+T\+T\+P2\+Priority\+Queue\+Base} \&}]{egress\+Queue, }
\item[{folly\+::\+H\+H\+Wheel\+Timer $\ast$}]{timer = {\ttfamily {\bf nullptr}}, }
\item[{const folly\+::\+Optional$<$ std\+::chrono\+::milliseconds $>$ \&}]{default\+Timeout = {\ttfamily folly\+:\+:Optional$<$std\+:\+:chrono\+:\+:milliseconds$>$()}, }
\item[{{\bf H\+T\+T\+P\+Session\+Stats} $\ast$}]{stats = {\ttfamily {\bf nullptr}}, }
\item[{bool}]{use\+Flow\+Control = {\ttfamily false}, }
\item[{uint32\+\_\+t}]{receive\+Initial\+Window\+Size = {\ttfamily 0}, }
\item[{uint32\+\_\+t}]{send\+Initial\+Window\+Size = {\ttfamily 0}, }
\item[{{\bf http2\+::\+Priority\+Update}}]{priority = {\ttfamily {\bf http2\+::\+Default\+Priority}}, }
\item[{folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} $>$}]{assoc\+Stream\+Id = {\ttfamily {\bf H\+T\+T\+P\+Codec\+::\+No\+Stream}}, }
\item[{folly\+::\+Optional$<$ {\bf H\+T\+T\+P\+Codec\+::\+Ex\+Attributes} $>$}]{ex\+Attributes = {\ttfamily {\bf H\+T\+T\+P\+Codec\+::\+No\+Ex\+Attributes}}}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a50bc3bec88048692b95b2932eb7bbb19}
read\+Buf\+Limit and send\+Window are only used if use\+Flow\+Control is true. Furthermore, if flow control is enabled, no guarantees can be made on the borders of the L7 chunking/data frames of the outbound messages.

priority is only used by S\+P\+DY. The -\/1 default makes sure that all plain H\+T\+TP transactions land up in the same queue as the control data. 

Definition at line 31 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::add\+Transaction(), assoc\+Stream\+Id\+\_\+, current\+Depth\+\_\+, egress\+Queue\+\_\+, egress\+State\+\_\+, ex\+Attributes\+\_\+, proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::get\+Root\+Id(), id\+\_\+, ingress\+State\+\_\+, insert\+Depth\+\_\+, is\+Remote\+Initiated(), is\+Upstream(), priority\+Fallback\+\_\+, queue\+Handle\+\_\+, proxygen\+::\+H\+T\+T\+P\+Session\+Stats\+::record\+Transaction\+Opened(), refresh\+Timeout(), stats\+\_\+, and proxygen\+::http2\+::\+Priority\+Update\+::stream\+Dependency.


\begin{DoxyCode}
47                                               :
48     deferredEgressBody_(folly::IOBufQueue::cacheChainLength()),
49     direction_(direction),
50     id_(\textcolor{keywordtype}{id}),
51     seqNo_(seqNo),
52     transport_(transport),
53     stats_(stats),
54     recvWindow_(receiveInitialWindowSize),
55     sendWindow_(sendInitialWindowSize),
56     egressQueue_(egressQueue),
57     assocStreamId_(assocId),
58     priority_(priority),
59     ingressPaused_(\textcolor{keyword}{false}),
60     egressPaused_(\textcolor{keyword}{false}),
61     flowControlPaused_(\textcolor{keyword}{false}),
62     handlerEgressPaused_(\textcolor{keyword}{false}),
63     egressRateLimited_(\textcolor{keyword}{false}),
64     useFlowControl_(useFlowControl),
65     aborted_(\textcolor{keyword}{false}),
66     deleting_(\textcolor{keyword}{false}),
67     firstByteSent_(\textcolor{keyword}{false}),
68     firstHeaderByteSent_(\textcolor{keyword}{false}),
69     inResume_(\textcolor{keyword}{false}),
70     inActiveSet_(\textcolor{keyword}{true}),
71     ingressErrorSeen_(\textcolor{keyword}{false}),
72     priorityFallback_(\textcolor{keyword}{false}),
73     headRequest_(\textcolor{keyword}{false}),
74     enableLastByteFlushedTracking_(\textcolor{keyword}{false}),
75     transactionTimeout_(defaultTimeout),
76     timer_(timer) \{
77 
78   \textcolor{keywordflow}{if} (assocStreamId_) \{
79     \textcolor{keywordflow}{if} (isUpstream()) \{
80       egressState_ = HTTPTransactionEgressSM::State::SendingDone;
81     \} \textcolor{keywordflow}{else} \{
82       ingressState_ = HTTPTransactionIngressSM::State::ReceivingDone;
83     \}
84   \}
85 
86   \textcolor{keywordflow}{if} (exAttributes) \{
87     exAttributes_ = exAttributes;
88     \textcolor{keywordflow}{if} (exAttributes_->unidirectional) \{
89       \textcolor{keywordflow}{if} (isRemoteInitiated()) \{
90         egressState_ = HTTPTransactionEgressSM::State::SendingDone;
91       \} \textcolor{keywordflow}{else} \{
92         ingressState_ = HTTPTransactionIngressSM::State::ReceivingDone;
93       \}
94     \}
95   \}
96 
97   refreshTimeout();
98   \textcolor{keywordflow}{if} (stats_) \{
99     stats_->recordTransactionOpened();
100   \}
101 
102   queueHandle_ = egressQueue_.addTransaction(id_, priority, \textcolor{keyword}{this}, \textcolor{keyword}{false},
103                                              &insertDepth_);
104   \textcolor{keywordflow}{if} (priority.streamDependency != egressQueue_.getRootId() &&
105       insertDepth_ == 1) \{
106     priorityFallback_ = \textcolor{keyword}{true};
107   \}
108 
109   currentDepth_ = insertDepth_;
110 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!````~H\+T\+T\+P\+Transaction@{$\sim$\+H\+T\+T\+P\+Transaction}}
\index{````~H\+T\+T\+P\+Transaction@{$\sim$\+H\+T\+T\+P\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{$\sim$\+H\+T\+T\+P\+Transaction() override}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+H\+T\+T\+P\+Transaction\+::$\sim$\+H\+T\+T\+P\+Transaction (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}}\label{classproxygen_1_1HTTPTransaction_a1ab458d6f99eaeefa002e8580ecd0f17}


Definition at line 132 of file H\+T\+T\+P\+Transaction.\+cpp.



References dequeue(), egress\+Queue\+\_\+, is\+Enqueued(), queue\+Handle\+\_\+, proxygen\+::\+H\+T\+T\+P\+Session\+Stats\+::record\+Transaction\+Closed(), proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::remove\+Transaction(), and stats\+\_\+.


\begin{DoxyCode}
132                                   \{
133   \textcolor{comment}{// Cancel transaction timeout if still scheduled.}
134   \textcolor{keywordflow}{if} (isScheduled()) \{
135     cancelTimeout();
136   \}
137 
138   \textcolor{keywordflow}{if} (stats_) \{
139     stats_->recordTransactionClosed();
140   \}
141   \textcolor{keywordflow}{if} (isEnqueued()) \{
142     dequeue();
143   \}
144   \textcolor{comment}{// TODO: handle the case where the priority node hangs out longer than}
145   \textcolor{comment}{// the transaction}
146   egressQueue_.removeTransaction(queueHandle_);
147 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!H\+T\+T\+P\+Transaction@{H\+T\+T\+P\+Transaction}}
\index{H\+T\+T\+P\+Transaction@{H\+T\+T\+P\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{H\+T\+T\+P\+Transaction(const H\+T\+T\+P\+Transaction \&)=delete}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+H\+T\+T\+P\+Transaction (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Transaction} \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [delete]}}\label{classproxygen_1_1HTTPTransaction_a435657a7b3db3fefc9916889a1bee7d2}


\subsection{Member Function Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!add\+Waiting\+For\+Replay\+Safety@{add\+Waiting\+For\+Replay\+Safety}}
\index{add\+Waiting\+For\+Replay\+Safety@{add\+Waiting\+For\+Replay\+Safety}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{add\+Waiting\+For\+Replay\+Safety(folly\+::\+Async\+Transport\+::\+Replay\+Safety\+Callback $\ast$callback)}]{\setlength{\rightskip}{0pt plus 5cm}virtual void proxygen\+::\+H\+T\+T\+P\+Transaction\+::add\+Waiting\+For\+Replay\+Safety (
\begin{DoxyParamCaption}
\item[{folly\+::\+Async\+Transport\+::\+Replay\+Safety\+Callback $\ast$}]{callback}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_ae55640a9c83bbe3de7e9007c1ed8f25a}
Add a callback waiting for this transaction to have a transport with replay protection. 

Definition at line 1176 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1177                                                          \{
1178     transport_.addWaitingForReplaySafety(callback);
1179   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!can\+Send\+Headers@{can\+Send\+Headers}}
\index{can\+Send\+Headers@{can\+Send\+Headers}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{can\+Send\+Headers() const }]{\setlength{\rightskip}{0pt plus 5cm}virtual bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::can\+Send\+Headers (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_ae5d18aeae494d20fbc01631eae7bcfe4}
\begin{DoxyReturn}{Returns}
true if we can send headers on this transaction
\end{DoxyReturn}
Here\textquotesingle{}s the logic\+: 1) state machine says send\+Headers is OK A\+ND 2a) this is an upstream (allows for mid-\/stream headers) OR 2b) this downstream has not sent a response 2c) this downstream has only sent 1xx responses 

Definition at line 781 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+State\+Machine$<$ T $>$\+::can\+Transit().



Referenced by proxygen\+::\+Request\+Handler\+Adaptor\+::on\+Error().


\begin{DoxyCode}
781                                       \{
782     \textcolor{keywordflow}{return} HTTPTransactionEgressSM::canTransit(
783         egressState_,
784         HTTPTransactionEgressSM::Event::sendHeaders)
785       && (isUpstream() || lastResponseStatus_ == 0 || extraResponseExpected());
786   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!check\+Create\+Deferred\+Ingress@{check\+Create\+Deferred\+Ingress}}
\index{check\+Create\+Deferred\+Ingress@{check\+Create\+Deferred\+Ingress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{check\+Create\+Deferred\+Ingress()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::check\+Create\+Deferred\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a5d2dcd1fd37bd350f0f3d096b1f42e30}
Check if deferred\+Ingress\+\_\+ points to some queue before pushing \doxyref{H\+T\+T\+P\+Event}{p.}{classproxygen_1_1HTTPEvent} to it. 

Definition at line 1268 of file H\+T\+T\+P\+Transaction.\+cpp.



References deferred\+Ingress\+\_\+.



Referenced by on\+Ingress\+Body(), on\+Ingress\+Chunk\+Complete(), on\+Ingress\+Chunk\+Header(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Headers\+Complete(), on\+Ingress\+Trailers(), and on\+Ingress\+Upgrade().


\begin{DoxyCode}
1268                                                  \{
1269   \textcolor{keywordflow}{if} (!deferredIngress_) \{
1270     deferredIngress_ = std::make\_unique<std::queue<HTTPEvent>>();
1271   \}
1272 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!decrement\+Pending\+Byte\+Events@{decrement\+Pending\+Byte\+Events}}
\index{decrement\+Pending\+Byte\+Events@{decrement\+Pending\+Byte\+Events}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{decrement\+Pending\+Byte\+Events()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::decrement\+Pending\+Byte\+Events (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a5c4d9e54ed04ce16b9d359a95807458d}


Definition at line 1142 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1142                                     \{
1143     DestructorGuard dg(\textcolor{keyword}{this});
1144     CHECK\_GT(pendingByteEvents_, 0);
1145     pendingByteEvents_--;
1146   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!dequeue@{dequeue}}
\index{dequeue@{dequeue}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{dequeue()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::dequeue (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4e30ff9c01ee4576834fa7831ea3f42c}


Definition at line 1284 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by mark\+Egress\+Complete(), send\+Deferred\+Body(), and $\sim$\+H\+T\+T\+P\+Transaction().


\begin{DoxyCode}
1284                  \{
1285     DCHECK(isEnqueued());
1286     egressQueue_.clearPendingEgress(queueHandle_);
1287   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!describe@{describe}}
\index{describe@{describe}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{describe(std\+::ostream \&os) const }]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::describe (
\begin{DoxyParamCaption}
\item[{std\+::ostream \&}]{os}
\end{DoxyParamCaption}
) const}\label{classproxygen_1_1HTTPTransaction_a122fcfcde3d41c6041829940bad47f08}
Write a description of the transaction to a stream 

Definition at line 1316 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::describe(), id\+\_\+, and transport\+\_\+.



Referenced by proxygen\+::operator$<$$<$().


\begin{DoxyCode}
1316                                                    \{
1317   transport_.describe(os);
1318   os << \textcolor{stringliteral}{", streamID="} << id_;
1319 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!extra\+Response\+Expected@{extra\+Response\+Expected}}
\index{extra\+Response\+Expected@{extra\+Response\+Expected}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{extra\+Response\+Expected() const }]{\setlength{\rightskip}{0pt plus 5cm}virtual bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::extra\+Response\+Expected (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_ac1aeab9bd4392274da1b4273ada925ee}
Check whether more response is expected. One or more 1xx status responses can be received prior to the regular response. Note\+: 101 is handled by the codec using a separate on\+Upgrade callback 

Definition at line 554 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Ingress\+E\+O\+M(), and proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Message\+Complete().


\begin{DoxyCode}
554                                              \{
555     \textcolor{keywordflow}{return} (lastResponseStatus_ >= 100 && lastResponseStatus_ < 200)
556         && lastResponseStatus_ != 101;
557   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!flush\+Window\+Update@{flush\+Window\+Update}}
\index{flush\+Window\+Update@{flush\+Window\+Update}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{flush\+Window\+Update()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::flush\+Window\+Update (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a715b0b12bf67788bf0db9318e3d61e14}
Flushes any pending window updates. This can happen from set\+Receive\+Window or send\+Headers depending on transaction state. 

Definition at line 1346 of file H\+T\+T\+P\+Transaction.\+cpp.



References direction\+\_\+, proxygen\+::\+D\+O\+W\+N\+S\+T\+R\+E\+AM, egress\+State\+\_\+, proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Size(), ingress\+State\+\_\+, is\+Ingress\+E\+O\+M\+Seen(), recv\+To\+Ack\+\_\+, recv\+Window\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Window\+Update(), transport\+\_\+, and use\+Flow\+Control\+\_\+.



Referenced by process\+Ingress\+Body(), send\+Headers\+With\+Optional\+E\+O\+M(), and set\+Receive\+Window().


\begin{DoxyCode}
1346                                         \{
1347   \textcolor{keywordflow}{if} (recvToAck_ > 0 && useFlowControl_ && !isIngressEOMSeen() &&
1348       (direction_ == TransportDirection::DOWNSTREAM ||
1349         egressState_ != HTTPTransactionEgressSM::State::Start ||
1350         ingressState_ != HTTPTransactionIngressSM::State::Start)) \{
1351     \textcolor{comment}{// Down egress upstream window updates until after headers}
1352     VLOG(4) << \textcolor{stringliteral}{"recv\_window is "} << recvWindow_.getSize()
1353             << \textcolor{stringliteral}{" / "} << recvWindow_.getCapacity() << \textcolor{stringliteral}{" after acking "}
1354             << recvToAck_ << \textcolor{stringliteral}{" "} << *this ;
1355     transport_.sendWindowUpdate(\textcolor{keyword}{this}, recvToAck_);
1356     recvToAck_ = 0;
1357   \}
1358 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Assoc\+Txn\+Id@{get\+Assoc\+Txn\+Id}}
\index{get\+Assoc\+Txn\+Id@{get\+Assoc\+Txn\+Id}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Assoc\+Txn\+Id() const }]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Assoc\+Txn\+Id (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_aa4807b649692db25f29679dd28ff42b6}
Returns the associated transaction ID for pushed transactions, 0 otherwise 

Definition at line 1048 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Abort().


\begin{DoxyCode}
1048                                                          \{
1049     \textcolor{keywordflow}{return} assocStreamId_;
1050   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Compression\+Info@{get\+Compression\+Info}}
\index{get\+Compression\+Info@{get\+Compression\+Info}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Compression\+Info() const }]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Compression\+Info} \& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Compression\+Info (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\label{classproxygen_1_1HTTPTransaction_acc3ee9bf51e57e0b7f9635a093659d8b}


Definition at line 1260 of file H\+T\+T\+P\+Transaction.\+cpp.



References table\+Info\+\_\+.


\begin{DoxyCode}
1260                                                                  \{
1261   \textcolor{keywordflow}{return} tableInfo_;
1262 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Control\+Stream@{get\+Control\+Stream}}
\index{get\+Control\+Stream@{get\+Control\+Stream}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Control\+Stream() const }]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Control\+Stream (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_abb5b09692ca0e43373b82c0160b05939}
Returns the control channel transaction ID for this transaction, folly\+::none otherwise 

Definition at line 1056 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+H\+T\+T\+P\+Codec\+::\+No\+Stream.



Referenced by on\+Ex\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Headers\+Complete(), and proxygen\+::\+H\+T\+T\+P\+Downstream\+Session\+::setup\+On\+Headers\+Complete().


\begin{DoxyCode}
1056                                                             \{
1057     \textcolor{keywordflow}{return} exAttributes_ ? exAttributes_->controlStream : HTTPCodec::NoStream;
1058   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Current\+Transport\+Info@{get\+Current\+Transport\+Info}}
\index{get\+Current\+Transport\+Info@{get\+Current\+Transport\+Info}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Current\+Transport\+Info(wangle\+::\+Transport\+Info $\ast$tinfo) const }]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Current\+Transport\+Info (
\begin{DoxyParamCaption}
\item[{wangle\+::\+Transport\+Info $\ast$}]{tinfo}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a81f103e6455bbb74bdaef79d6577ca5f}


Definition at line 541 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+Request\+Handler\+Adaptor\+::get\+Current\+Transport\+Info().


\begin{DoxyCode}
541                                                                  \{
542     transport_.getCurrentTransportInfo(tinfo);
543   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Egress\+State@{get\+Egress\+State}}
\index{get\+Egress\+State@{get\+Egress\+State}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Egress\+State() const }]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Egress\+S\+M\+::\+State} proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Egress\+State (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a7042a22bd7b1c30144d28cfacdba962e}


Definition at line 503 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Error().


\begin{DoxyCode}
503                                                       \{
504     \textcolor{keywordflow}{return} egressState_;
505   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Ex\+Attributes@{get\+Ex\+Attributes}}
\index{get\+Ex\+Attributes@{get\+Ex\+Attributes}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Ex\+Attributes() const }]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<${\bf H\+T\+T\+P\+Codec\+::\+Ex\+Attributes}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Ex\+Attributes (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a56a1279c91f838004b9b2e04288b163f}


Definition at line 1064 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1064                                                                \{
1065     \textcolor{keywordflow}{return} exAttributes_;
1066   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Ex\+Transactions@{get\+Ex\+Transactions}}
\index{get\+Ex\+Transactions@{get\+Ex\+Transactions}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Ex\+Transactions() const }]{\setlength{\rightskip}{0pt plus 5cm}std\+::set$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Ex\+Transactions (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a73d4970263972cb223dd989500568d51}
Get a set of ex\+Transactions associated with this transaction. 

Definition at line 1078 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Abort().


\begin{DoxyCode}
1078                                                       \{
1079     \textcolor{keywordflow}{return} exTransactions_;
1080   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Handler@{get\+Handler}}
\index{get\+Handler@{get\+Handler}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Handler() const }]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Handler}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Handler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ab639699f42d36d0c814e5ca1a8a73194}


Definition at line 484 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Error(), on\+Ex\+Transaction(), on\+Pushed\+Transaction(), and proxygen\+::\+H\+T\+T\+P\+Downstream\+Session\+::setup\+On\+Headers\+Complete().


\begin{DoxyCode}
484                                     \{
485     \textcolor{keywordflow}{return} handler_;
486   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+ID@{get\+ID}}
\index{get\+ID@{get\+ID}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+I\+D() const }]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+ID (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a69a9be095ff88eb4c1385933a1483517}


Definition at line 469 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::create\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Session\+::new\+Ex\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Session\+::new\+Pushed\+Transaction(), on\+Ex\+Transaction(), on\+Pushed\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Downstream\+Session\+::setup\+On\+Headers\+Complete(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
469 \{ \textcolor{keywordflow}{return} id_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Idle\+Timeout@{get\+Idle\+Timeout}}
\index{get\+Idle\+Timeout@{get\+Idle\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Idle\+Timeout() const }]{\setlength{\rightskip}{0pt plus 5cm}std\+::chrono\+::milliseconds proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Idle\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a50621f54406793b85bcfcfa0b46ad5b8}
Returns the transaction timeout if exists. An Optional\+Empty\+Exception is raised if the timeout isn\textquotesingle{}t set. 

Definition at line 1041 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1041                                                \{
1042     \textcolor{keywordflow}{return} transactionTimeout_.value();
1043   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Ingress\+State@{get\+Ingress\+State}}
\index{get\+Ingress\+State@{get\+Ingress\+State}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Ingress\+State() const }]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+State} proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Ingress\+State (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ac1cfb344a3d637a9f679217b0aaab069}


Definition at line 507 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
507                                                         \{
508     \textcolor{keywordflow}{return} ingressState_;
509   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Local\+Address@{get\+Local\+Address}}
\index{get\+Local\+Address@{get\+Local\+Address}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Local\+Address(folly\+::\+Socket\+Address \&addr) const }]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Local\+Address (
\begin{DoxyParamCaption}
\item[{folly\+::\+Socket\+Address \&}]{addr}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a4de43f7c91fd67a36cce7dc45740750c}


Definition at line 519 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
519                                                        \{
520     addr = transport_.getLocalAddress();
521   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Local\+Address@{get\+Local\+Address}}
\index{get\+Local\+Address@{get\+Local\+Address}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Local\+Address() const noexcept}]{\setlength{\rightskip}{0pt plus 5cm}const folly\+::\+Socket\+Address\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Local\+Address (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPTransaction_a6af862e95253a6a418feb81578661876}


Definition at line 527 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
528                    \{
529     \textcolor{keywordflow}{return} transport_.getLocalAddress();
530   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Max\+Deferred\+Size@{get\+Max\+Deferred\+Size}}
\index{get\+Max\+Deferred\+Size@{get\+Max\+Deferred\+Size}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Max\+Deferred\+Size()}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Max\+Deferred\+Size (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a6ea2f78f652e46cd87a8fe4c3f593792}


Definition at line 576 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Egress\+Message\+Finished().


\begin{DoxyCode}
576                                 \{
577     \textcolor{keywordflow}{return} maxDeferredIngress_;
578   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Peer\+Address@{get\+Peer\+Address}}
\index{get\+Peer\+Address@{get\+Peer\+Address}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Peer\+Address(folly\+::\+Socket\+Address \&addr) const }]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Peer\+Address (
\begin{DoxyParamCaption}
\item[{folly\+::\+Socket\+Address \&}]{addr}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a114fbfad32e26ba3171d8d0efdd7d830}


Definition at line 523 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
523                                                       \{
524     addr = transport_.getPeerAddress();
525   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Peer\+Address@{get\+Peer\+Address}}
\index{get\+Peer\+Address@{get\+Peer\+Address}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Peer\+Address() const noexcept}]{\setlength{\rightskip}{0pt plus 5cm}const folly\+::\+Socket\+Address\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Peer\+Address (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPTransaction_a2dbe905892af1304641df65df12544ec}


Definition at line 532 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
533                    \{
534     \textcolor{keywordflow}{return} transport_.getPeerAddress();
535   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Priority@{get\+Priority}}
\index{get\+Priority@{get\+Priority}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Priority() const }]{\setlength{\rightskip}{0pt plus 5cm}{\bf http2\+::\+Priority\+Update} proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Priority (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_abfcbb30f5cccc844c5c758830a8efa9b}


Definition at line 488 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
488                                           \{
489     \textcolor{keywordflow}{return} priority_;
490   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Priority\+Fallback@{get\+Priority\+Fallback}}
\index{get\+Priority\+Fallback@{get\+Priority\+Fallback}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Priority\+Fallback() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Priority\+Fallback (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_aa9885514caca7350a757a8c1c1efc904}


Definition at line 499 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
499                                    \{
500     \textcolor{keywordflow}{return} priorityFallback_;
501   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Priority\+Sample\+Summary@{get\+Priority\+Sample\+Summary}}
\index{get\+Priority\+Sample\+Summary@{get\+Priority\+Sample\+Summary}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Priority\+Sample\+Summary(\+Priority\+Sample\+Summary \&summary) const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Priority\+Sample\+Summary (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction\+::\+Priority\+Sample\+Summary} \&}]{summary}
\end{DoxyParamCaption}
) const}\label{classproxygen_1_1HTTPTransaction_a9d76c7f95693773bb492367fa6a6787a}


Definition at line 1548 of file H\+T\+T\+P\+Transaction.\+cpp.



References priority\+Sample\+\_\+.


\begin{DoxyCode}
1549                                                            \{
1550   \textcolor{keywordflow}{if} (prioritySample_) \{
1551     prioritySample_->getSummary(summary);
1552     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1553   \}
1554   \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1555 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Priority\+Summary@{get\+Priority\+Summary}}
\index{get\+Priority\+Summary@{get\+Priority\+Summary}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Priority\+Summary() const }]{\setlength{\rightskip}{0pt plus 5cm}std\+::tuple$<$uint64\+\_\+t, uint64\+\_\+t, double$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Priority\+Summary (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a8810166d00bbcec1f17bc40e17cf6e1e}


Definition at line 492 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
492                                                                   \{
493     \textcolor{keywordflow}{return} std::make\_tuple(
494         insertDepth_,
495         currentDepth_,
496         egressCalls_ > 0 ? cumulativeRatio_ / egressCalls_ : 0);
497   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Pushed\+Transactions@{get\+Pushed\+Transactions}}
\index{get\+Pushed\+Transactions@{get\+Pushed\+Transactions}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Pushed\+Transactions() const }]{\setlength{\rightskip}{0pt plus 5cm}const std\+::set$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Pushed\+Transactions (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ad479b6b1635be43633df017df6e2c072}
Get a set of server-\/pushed transactions associated with this transaction. 

Definition at line 1071 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Abort().


\begin{DoxyCode}
1071                                                                  \{
1072     \textcolor{keywordflow}{return} pushedTransactions_;
1073   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Receive\+Window@{get\+Receive\+Window}}
\index{get\+Receive\+Window@{get\+Receive\+Window}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Receive\+Window() const }]{\setlength{\rightskip}{0pt plus 5cm}virtual const {\bf Window}\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Receive\+Window (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_adf70b539b88187340e9318de60d75244}
Get the receive window of the transaction 

Definition at line 572 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
572                                                  \{
573     \textcolor{keywordflow}{return} recvWindow_;
574   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Recv\+To\+Ack@{get\+Recv\+To\+Ack}}
\index{get\+Recv\+To\+Ack@{get\+Recv\+To\+Ack}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Recv\+To\+Ack() const }]{\setlength{\rightskip}{0pt plus 5cm}int32\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Recv\+To\+Ack (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const}\label{classproxygen_1_1HTTPTransaction_a5212cf36467144b09c987cce90c64a8d}


Definition at line 1360 of file H\+T\+T\+P\+Transaction.\+cpp.



References recv\+To\+Ack\+\_\+.


\begin{DoxyCode}
1360                                             \{
1361   \textcolor{keywordflow}{return} recvToAck_;
1362 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Sequence\+Number@{get\+Sequence\+Number}}
\index{get\+Sequence\+Number@{get\+Sequence\+Number}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Sequence\+Number() const }]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Sequence\+Number (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_aa99856dfa73195851bb8a5f291a4813f}


Definition at line 471 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Egress\+Message\+Finished().


\begin{DoxyCode}
471 \{ \textcolor{keywordflow}{return} seqNo_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Session\+Stats@{get\+Session\+Stats}}
\index{get\+Session\+Stats@{get\+Session\+Stats}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Session\+Stats() const }]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Session\+Stats}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Session\+Stats (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a69e55addfc231322b444b0b80346dacf}


Definition at line 545 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::create\+Transaction().


\begin{DoxyCode}
545                                             \{
546     \textcolor{keywordflow}{return} stats_;
547   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Setup\+Transport\+Info@{get\+Setup\+Transport\+Info}}
\index{get\+Setup\+Transport\+Info@{get\+Setup\+Transport\+Info}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Setup\+Transport\+Info() const noexcept}]{\setlength{\rightskip}{0pt plus 5cm}const wangle\+::\+Transport\+Info\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Setup\+Transport\+Info (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPTransaction_a41174239e8bd4c31eda4118efe9b128b}


Definition at line 537 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+Request\+Handler\+Adaptor\+::get\+Setup\+Transport\+Info().


\begin{DoxyCode}
537                                                                     \{
538     \textcolor{keywordflow}{return} transport_.getSetupTransportInfo();
539   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Transport@{get\+Transport}}
\index{get\+Transport@{get\+Transport}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Transport() const }]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Transport}\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Transport (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a3ff19af7b2d4ad2cb6ae95767fa90a77}


Definition at line 473 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
473 \{ \textcolor{keywordflow}{return} transport_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!get\+Transport@{get\+Transport}}
\index{get\+Transport@{get\+Transport}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{get\+Transport()}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Transport}\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::get\+Transport (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_af2e1e098816466073d2065b89d14455a}


Definition at line 475 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
475 \{ \textcolor{keywordflow}{return} transport_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!has\+Idle\+Timeout@{has\+Idle\+Timeout}}
\index{has\+Idle\+Timeout@{has\+Idle\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{has\+Idle\+Timeout() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::has\+Idle\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ae875a52c0709656fa72f6966c313e782}
Does this transaction have an idle timeout set? 

Definition at line 1033 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1033                               \{
1034     \textcolor{keywordflow}{return} transactionTimeout_.hasValue();
1035   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!has\+Pending\+Body@{has\+Pending\+Body}}
\index{has\+Pending\+Body@{has\+Pending\+Body}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{has\+Pending\+Body() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::has\+Pending\+Body (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a10c07ad098b5f89ab2fbbd474563b2d8}


Definition at line 1220 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1220                               \{
1221     \textcolor{keywordflow}{return} deferredEgressBody_.chainLength() > 0;
1222   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!has\+Pending\+E\+OM@{has\+Pending\+E\+OM}}
\index{has\+Pending\+E\+OM@{has\+Pending\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{has\+Pending\+E\+O\+M() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::has\+Pending\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ab32157f5fafa1cec6e22685c5f7b529e}


Definition at line 1289 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+Deferred\+Body().


\begin{DoxyCode}
1289                              \{
1290     \textcolor{keywordflow}{return} deferredEgressBody_.chainLength() == 0 &&
1291       isEgressEOMQueued();
1292   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!increment\+Pending\+Byte\+Events@{increment\+Pending\+Byte\+Events}}
\index{increment\+Pending\+Byte\+Events@{increment\+Pending\+Byte\+Events}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{increment\+Pending\+Byte\+Events()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::increment\+Pending\+Byte\+Events (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a933ede3ac576f95ea131508f514ef3c7}
\doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction} will not detach until it has 0 pending byte events. If you call increment\+Pending\+Byte\+Events, you must make a corresponding call to decrement\+Pending\+Byte\+Events or the transaction will never be destroyed. 

Definition at line 1137 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
1137                                     \{
1138     CHECK\_LT(pendingByteEvents_, std::numeric\_limits<uint8\_t>::max());
1139     pendingByteEvents_++;
1140   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Downstream@{is\+Downstream}}
\index{is\+Downstream@{is\+Downstream}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Downstream() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Downstream (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a0813111dbf035172aa529711db36d4ed}


Definition at line 515 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+D\+O\+W\+N\+S\+T\+R\+E\+AM.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Message\+Complete().


\begin{DoxyCode}
515                             \{
516     \textcolor{keywordflow}{return} direction_ == TransportDirection::DOWNSTREAM;
517   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Egress\+Complete@{is\+Egress\+Complete}}
\index{is\+Egress\+Complete@{is\+Egress\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Egress\+Complete() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Egress\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a0f5cf49d49de555ca71b92b5b5a7e38b}
\begin{DoxyReturn}{Returns}
true iff the egress E\+OM has been flushed to the socket. 
\end{DoxyReturn}


Definition at line 753 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Delayed\+Destroy(), on\+Error(), on\+Ingress\+Timeout(), and send\+Headers\+With\+Optional\+E\+O\+M().


\begin{DoxyCode}
753                                 \{
754     \textcolor{keywordflow}{return} egressState_ == HTTPTransactionEgressSM::State::SendingDone;
755   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Egress\+E\+O\+M\+Queued@{is\+Egress\+E\+O\+M\+Queued}}
\index{is\+Egress\+E\+O\+M\+Queued@{is\+Egress\+E\+O\+M\+Queued}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Egress\+E\+O\+M\+Queued() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Egress\+E\+O\+M\+Queued (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a3fb44b6e36a49d30e44e67eb1c789bfc}
\begin{DoxyReturn}{Returns}
true iff \doxyref{send\+E\+O\+M()}{p.}{classproxygen_1_1HTTPTransaction_ad95519e6472228d359c7fb144889f1ac} has been called, but the eom has not been flushed to the socket yet. 
\end{DoxyReturn}


Definition at line 746 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by notify\+Transport\+Pending\+Egress(), and send\+Deferred\+Body().


\begin{DoxyCode}
746                                  \{
747     \textcolor{keywordflow}{return} egressState_ == HTTPTransactionEgressSM::State::EOMQueued;
748   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Egress\+E\+O\+M\+Seen@{is\+Egress\+E\+O\+M\+Seen}}
\index{is\+Egress\+E\+O\+M\+Seen@{is\+Egress\+E\+O\+M\+Seen}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Egress\+E\+O\+M\+Seen() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Egress\+E\+O\+M\+Seen (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a30731875294bd946ff6b5ba55da2c3f1}
\begin{DoxyReturn}{Returns}
true iff \doxyref{send\+E\+O\+M()}{p.}{classproxygen_1_1HTTPTransaction_ad95519e6472228d359c7fb144889f1ac} has been called. 
\end{DoxyReturn}


Definition at line 768 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
768                                \{
769     \textcolor{keywordflow}{return} isEgressEOMQueued() || isEgressComplete();
770   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Egress\+Paused@{is\+Egress\+Paused}}
\index{is\+Egress\+Paused@{is\+Egress\+Paused}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Egress\+Paused() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Egress\+Paused (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ac08582146175eaaf53008b594b3ed320}
\begin{DoxyReturn}{Returns}
true iff egress processing is paused for the handler 
\end{DoxyReturn}


Definition at line 941 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
941 \{ \textcolor{keywordflow}{return} handlerEgressPaused_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Egress\+Started@{is\+Egress\+Started}}
\index{is\+Egress\+Started@{is\+Egress\+Started}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Egress\+Started() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Egress\+Started (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a2146a3ed87db12dfea260e1213805bad}
\begin{DoxyReturn}{Returns}
true if egress has started on this transaction. 
\end{DoxyReturn}


Definition at line 738 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
738                                \{
739     \textcolor{keywordflow}{return} egressState_ != HTTPTransactionEgressSM::State::Start;
740   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Enqueued@{is\+Enqueued}}
\index{is\+Enqueued@{is\+Enqueued}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Enqueued() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Enqueued (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a065ef913a65a188914c3fc13dfcb70c7}


Definition at line 1282 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by mark\+Egress\+Complete(), notify\+Transport\+Pending\+Egress(), on\+Delayed\+Destroy(), on\+Write\+Ready(), send\+Body(), send\+E\+O\+M(), and $\sim$\+H\+T\+T\+P\+Transaction().


\begin{DoxyCode}
1282 \{ \textcolor{keywordflow}{return} queueHandle_->isEnqueued(); \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Expecting\+Ingress@{is\+Expecting\+Ingress}}
\index{is\+Expecting\+Ingress@{is\+Expecting\+Ingress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Expecting\+Ingress() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Expecting\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a9af3fdd59bf5bc30fbac8ff564abe5e9}


Definition at line 483 of file H\+T\+T\+P\+Transaction.\+cpp.



References ingress\+Paused\+\_\+, is\+Expecting\+Window\+Update(), and is\+Ingress\+E\+O\+M\+Seen().



Referenced by update\+Read\+Timeout().


\begin{DoxyCode}
483                                                \{
484   \textcolor{keywordflow}{return} isExpectingWindowUpdate() || (!ingressPaused_ && !isIngressEOMSeen());
485 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Expecting\+Window\+Update@{is\+Expecting\+Window\+Update}}
\index{is\+Expecting\+Window\+Update@{is\+Expecting\+Window\+Update}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Expecting\+Window\+Update() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Expecting\+Window\+Update (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a89082f763904815911bb62430ba5f24a}


Definition at line 478 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+State\+\_\+, proxygen\+::\+Window\+::get\+Size(), send\+Window\+\_\+, and use\+Flow\+Control\+\_\+.



Referenced by is\+Expecting\+Ingress(), on\+Error(), on\+Ingress\+Timeout(), and send\+Body\+Now().


\begin{DoxyCode}
478                                                     \{
479   \textcolor{keywordflow}{return} egressState_ != HTTPTransactionEgressSM::State::SendingDone &&
480          useFlowControl_ && sendWindow_.getSize() <= 0;
481 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Ex\+Transaction@{is\+Ex\+Transaction}}
\index{is\+Ex\+Transaction@{is\+Ex\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Ex\+Transaction() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Ex\+Transaction (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a2f05fdcbe99fa097e80f698c06bf0c1a}


Definition at line 1015 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1015                                \{
1016     \textcolor{keywordflow}{return} exAttributes_.has\_value();
1017   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Flow\+Control\+Paused@{is\+Flow\+Control\+Paused}}
\index{is\+Flow\+Control\+Paused@{is\+Flow\+Control\+Paused}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Flow\+Control\+Paused() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Flow\+Control\+Paused (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ab884229bac77ab0de96d593cf643ad54}
\begin{DoxyReturn}{Returns}
true iff egress processing is paused due to flow control to the handler 
\end{DoxyReturn}


Definition at line 947 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
947 \{ \textcolor{keywordflow}{return} flowControlPaused_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Ingress\+Complete@{is\+Ingress\+Complete}}
\index{is\+Ingress\+Complete@{is\+Ingress\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Ingress\+Complete() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Ingress\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a77e7c4baec66ad683f55a3cc3e39f45c}
\begin{DoxyReturn}{Returns}
true iff the handler has been notified of the ingress E\+OM. 
\end{DoxyReturn}


Definition at line 724 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Delayed\+Destroy(), on\+Error(), process\+Ingress\+Body(), process\+Ingress\+Chunk\+Complete(), process\+Ingress\+Chunk\+Header(), process\+Ingress\+E\+O\+M(), process\+Ingress\+Headers\+Complete(), process\+Ingress\+Trailers(), process\+Ingress\+Upgrade(), and resume\+Ingress().


\begin{DoxyCode}
724                                  \{
725     \textcolor{keywordflow}{return} ingressState_ == HTTPTransactionIngressSM::State::ReceivingDone;
726   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Ingress\+E\+O\+M\+Queued@{is\+Ingress\+E\+O\+M\+Queued}}
\index{is\+Ingress\+E\+O\+M\+Queued@{is\+Ingress\+E\+O\+M\+Queued}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Ingress\+E\+O\+M\+Queued() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Ingress\+E\+O\+M\+Queued (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_abad0fa46567d85f93fb6b19f4fe42899}
\begin{DoxyReturn}{Returns}
true iff the ingress E\+OM has been queued in \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction} but the handler has not yet been notified of this event. 
\end{DoxyReturn}


Definition at line 717 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
717                                   \{
718     \textcolor{keywordflow}{return} ingressState_ == HTTPTransactionIngressSM::State::EOMQueued;
719   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Ingress\+E\+O\+M\+Seen@{is\+Ingress\+E\+O\+M\+Seen}}
\index{is\+Ingress\+E\+O\+M\+Seen@{is\+Ingress\+E\+O\+M\+Seen}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Ingress\+E\+O\+M\+Seen() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Ingress\+E\+O\+M\+Seen (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_afed10e71d54fe38461ed236a0ed411f4}
\begin{DoxyReturn}{Returns}
true iff \doxyref{on\+Ingress\+E\+O\+M()}{p.}{classproxygen_1_1HTTPTransaction_af49f69623208256d6af6d317f7ba8cd4} has been called. 
\end{DoxyReturn}


Definition at line 731 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update(), is\+Expecting\+Ingress(), on\+Error(), on\+Ingress\+Body(), on\+Ingress\+E\+O\+M(), proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Push\+Message\+Begin(), and process\+Ingress\+Body().


\begin{DoxyCode}
731                                 \{
732     \textcolor{keywordflow}{return} isIngressEOMQueued() || isIngressComplete();
733   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Ingress\+Paused@{is\+Ingress\+Paused}}
\index{is\+Ingress\+Paused@{is\+Ingress\+Paused}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Ingress\+Paused() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Ingress\+Paused (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a27bb4c05b84088023e96cc81d89032f8}
\begin{DoxyReturn}{Returns}
true iff ingress processing is paused for the handler 
\end{DoxyReturn}


Definition at line 905 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Ex\+Message\+Begin().


\begin{DoxyCode}
905 \{ \textcolor{keywordflow}{return} ingressPaused_; \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Ingress\+Started@{is\+Ingress\+Started}}
\index{is\+Ingress\+Started@{is\+Ingress\+Started}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Ingress\+Started() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Ingress\+Started (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_aeadcd179dd303b3fa94a180c628c4747}
\begin{DoxyReturn}{Returns}
true if ingress has started on this transaction. 
\end{DoxyReturn}


Definition at line 709 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
709                                 \{
710     \textcolor{keywordflow}{return} ingressState_ != HTTPTransactionIngressSM::State::Start;
711   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Priority\+Sampled@{is\+Priority\+Sampled}}
\index{is\+Priority\+Sampled@{is\+Priority\+Sampled}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Priority\+Sampled() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Priority\+Sampled (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a2f9237117b2220cf1b495c591d35bdfd}


Definition at line 1195 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+Body\+Now().


\begin{DoxyCode}
1195                                  \{
1196     \textcolor{keywordflow}{return} prioritySample_ != \textcolor{keyword}{nullptr};
1197   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Pushed@{is\+Pushed}}
\index{is\+Pushed@{is\+Pushed}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Pushed() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Pushed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_aec29fb741786a8bcfe781a9a809e0159}
True if this transaction is a server push transaction 

Definition at line 1011 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::create\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Session\+::decrement\+Transaction\+Count(), on\+Ingress\+Headers\+Complete(), proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Message\+Begin(), and send\+Headers\+With\+Optional\+E\+O\+M().


\begin{DoxyCode}
1011                         \{
1012     \textcolor{keywordflow}{return} assocStreamId_.has\_value();
1013   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Remote\+Initiated@{is\+Remote\+Initiated}}
\index{is\+Remote\+Initiated@{is\+Remote\+Initiated}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Remote\+Initiated() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Remote\+Initiated (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_af7143d9168c4daf4b9d973b5091af64b}
\begin{DoxyReturn}{Returns}
true iff the remote side initiated this transaction. 
\end{DoxyReturn}


Definition at line 760 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+D\+O\+W\+N\+S\+T\+R\+E\+AM, and proxygen\+::\+U\+P\+S\+T\+R\+E\+AM.



Referenced by H\+T\+T\+P\+Transaction(), and proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Headers\+Complete().


\begin{DoxyCode}
760                                  \{
761     \textcolor{keywordflow}{return} (direction_ == TransportDirection::DOWNSTREAM && id_ % 2 == 1) ||
762            (direction_ == TransportDirection::UPSTREAM && id_ % 2 == 0);
763   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Unidirectional@{is\+Unidirectional}}
\index{is\+Unidirectional@{is\+Unidirectional}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Unidirectional() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Unidirectional (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a4d7106a7c1245881017fafd9e88484ea}


Definition at line 1019 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1019                                 \{
1020     \textcolor{keywordflow}{return} isExTransaction() && exAttributes_->unidirectional;
1021   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!is\+Upstream@{is\+Upstream}}
\index{is\+Upstream@{is\+Upstream}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{is\+Upstream() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::is\+Upstream (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a91147cca992f750017bd431e85952006}


Definition at line 511 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+U\+P\+S\+T\+R\+E\+AM.



Referenced by H\+T\+T\+P\+Transaction(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Headers\+Complete(), and send\+Abort().


\begin{DoxyCode}
511                           \{
512     \textcolor{keywordflow}{return} direction_ == TransportDirection::UPSTREAM;
513   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!mark\+Egress\+Complete@{mark\+Egress\+Complete}}
\index{mark\+Egress\+Complete@{mark\+Egress\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{mark\+Egress\+Complete()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::mark\+Egress\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a78ceee96254598ebfe317f9adcc170d2}
Causes \doxyref{is\+Egress\+Complete()}{p.}{classproxygen_1_1HTTPTransaction_a0f5cf49d49de555ca71b92b5b5a7e38b} to return true, removes any queued egress, and cancels the write timeout. 

Definition at line 502 of file H\+T\+T\+P\+Transaction.\+cpp.



References deferred\+Egress\+Body\+\_\+, dequeue(), egress\+State\+\_\+, is\+Enqueued(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Egress\+Body\+Buffered(), and transport\+\_\+.



Referenced by on\+Egress\+Timeout(), on\+Error(), on\+Ingress\+Timeout(), process\+Ingress\+E\+O\+M(), and send\+Abort().


\begin{DoxyCode}
502                                          \{
503   VLOG(4) << \textcolor{stringliteral}{"Marking egress complete on "} << *\textcolor{keyword}{this};
504   \textcolor{keywordflow}{if} (deferredEgressBody_.chainLength() && isEnqueued()) \{
505     int64\_t deferredEgressBodyBytes =
506       folly::to<int64\_t>(deferredEgressBody_.chainLength());
507     transport_.notifyEgressBodyBuffered(-deferredEgressBodyBytes);
508   \}
509   deferredEgressBody_.move();
510   \textcolor{keywordflow}{if} (isEnqueued()) \{
511     dequeue();
512   \}
513   egressState_ = HTTPTransactionEgressSM::State::SendingDone;
514 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!mark\+Ingress\+Complete@{mark\+Ingress\+Complete}}
\index{mark\+Ingress\+Complete@{mark\+Ingress\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{mark\+Ingress\+Complete()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::mark\+Ingress\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a22ec9e51f55497dc4dca424a463b4a54}
Causes \doxyref{is\+Ingress\+Complete()}{p.}{classproxygen_1_1HTTPTransaction_a77e7c4baec66ad683f55a3cc3e39f45c} to return true, removes any queued ingress, and cancels the read timeout. 

Definition at line 495 of file H\+T\+T\+P\+Transaction.\+cpp.



References deferred\+Ingress\+\_\+, and ingress\+State\+\_\+.



Referenced by on\+Error(), on\+Ingress\+Timeout(), and send\+Abort().


\begin{DoxyCode}
495                                           \{
496   VLOG(4) << \textcolor{stringliteral}{"Marking ingress complete on "} << *\textcolor{keyword}{this};
497   ingressState_ = HTTPTransactionIngressSM::State::ReceivingDone;
498   deferredIngress_.reset();
499   cancelTimeout();
500 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!maybe\+Delay\+For\+Rate\+Limit@{maybe\+Delay\+For\+Rate\+Limit}}
\index{maybe\+Delay\+For\+Rate\+Limit@{maybe\+Delay\+For\+Rate\+Limit}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{maybe\+Delay\+For\+Rate\+Limit()}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::maybe\+Delay\+For\+Rate\+Limit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_afe7278404a7436993d005c0ce752931b}


Definition at line 897 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Limit\+Bytes\+Per\+Ms\+\_\+, egress\+Rate\+Limited\+\_\+, proxygen\+::get\+Current\+Time(), proxygen\+::milliseconds\+Between(), notify\+Transport\+Pending\+Egress(), num\+Limited\+Bytes\+Egressed\+\_\+, rate\+Limit\+Callback\+\_\+, start\+Rate\+Limit\+\_\+, and timer\+\_\+.



Referenced by send\+Deferred\+Body().


\begin{DoxyCode}
897                                              \{
898   \textcolor{keywordflow}{if} (egressLimitBytesPerMs_ <= 0) \{
899     \textcolor{comment}{// No rate limiting}
900     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
901   \}
902 
903   \textcolor{keywordflow}{if} (numLimitedBytesEgressed_ == 0) \{
904     \textcolor{comment}{// If we haven't egressed any bytes yet, don't delay.}
905     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
906   \}
907 
908   int64\_t limitedDurationMs = (int64\_t) millisecondsBetween(
909     getCurrentTime(),
910     startRateLimit_
911   ).count();
912 
913   \textcolor{comment}{// Algebra!  Try to figure out the next time send where we'll}
914   \textcolor{comment}{// be allowed to send at least 1 full packet's worth.  The}
915   \textcolor{comment}{// formula we're using is:}
916   \textcolor{comment}{//   (bytesSoFar + packetSize) / (timeSoFar + delay) == targetRateLimit}
917   std::chrono::milliseconds requiredDelay(
918     (
919      ((int64\_t)numLimitedBytesEgressed_ + kApproximateMTU) -
920      ((int64\_t)egressLimitBytesPerMs_ * limitedDurationMs)
921     ) / (int64\_t)egressLimitBytesPerMs_
922   );
923 
924   \textcolor{keywordflow}{if} (requiredDelay.count() <= 0) \{
925     \textcolor{comment}{// No delay required}
926     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
927   \}
928 
929   \textcolor{keywordflow}{if} (requiredDelay > kRateLimitMaxDelay) \{
930     \textcolor{comment}{// The delay should never be this long}
931     VLOG(4) << \textcolor{stringliteral}{"ratelim: Required delay too long ("} << requiredDelay.count()
932             << \textcolor{stringliteral}{"ms), ignoring"};
933     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
934   \}
935 
936   \textcolor{comment}{// Delay required}
937 
938   egressRateLimited_ = \textcolor{keyword}{true};
939 
940   \textcolor{keywordflow}{if} (timer_) \{
941     timer_->scheduleTimeout(&rateLimitCallback_, requiredDelay);
942   \}
943 
944   notifyTransportPendingEgress();
945   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
946 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!must\+Queue\+Ingress@{must\+Queue\+Ingress}}
\index{must\+Queue\+Ingress@{must\+Queue\+Ingress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{must\+Queue\+Ingress() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::must\+Queue\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a1312c67091b2326bbe9f2a4a3e9e614d}


Definition at line 1264 of file H\+T\+T\+P\+Transaction.\+cpp.



References deferred\+Ingress\+\_\+, and ingress\+Paused\+\_\+.



Referenced by on\+Ingress\+Body(), on\+Ingress\+Chunk\+Complete(), on\+Ingress\+Chunk\+Header(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Headers\+Complete(), on\+Ingress\+Trailers(), and on\+Ingress\+Upgrade().


\begin{DoxyCode}
1264                                              \{
1265   \textcolor{keywordflow}{return} ingressPaused_ || (deferredIngress_ && !deferredIngress_->empty());
1266 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!need\+To\+Block\+For\+Replay\+Safety@{need\+To\+Block\+For\+Replay\+Safety}}
\index{need\+To\+Block\+For\+Replay\+Safety@{need\+To\+Block\+For\+Replay\+Safety}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{need\+To\+Block\+For\+Replay\+Safety() const }]{\setlength{\rightskip}{0pt plus 5cm}virtual bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::need\+To\+Block\+For\+Replay\+Safety (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a487944facf34a213d3e471dd8f56f11c}


Definition at line 1189 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1189                                                   \{
1190     \textcolor{keywordflow}{return} transport_.needToBlockForReplaySafety();
1191   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!new\+Ex\+Transaction@{new\+Ex\+Transaction}}
\index{new\+Ex\+Transaction@{new\+Ex\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{new\+Ex\+Transaction(\+H\+T\+T\+P\+Transaction\+Handler $\ast$handler, bool unidirectional=false)}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf H\+T\+T\+P\+Transaction}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::new\+Ex\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$}]{handler, }
\item[{bool}]{unidirectional = {\ttfamily false}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a140666b715abc2582833ac1e6384074c}
Create a new extended transaction associated with this transaction, and assign the given handler and priority.

\begin{DoxyReturn}{Returns}
the new transaction for pubsub, or nullptr if a new push transaction is impossible right now. 
\end{DoxyReturn}


Definition at line 984 of file H\+T\+T\+P\+Transaction.\+h.



References new\+Ex\+Transaction().



Referenced by proxygen\+::\+Request\+Handler\+Adaptor\+::new\+Ex\+Message(), and new\+Ex\+Transaction().


\begin{DoxyCode}
985                                                                          \{
986     \textcolor{keyword}{auto} txn = transport_.newExTransaction(handler, id_, unidirectional);
987     \textcolor{keywordflow}{if} (txn) \{
988       exTransactions_.insert(txn->getID());
989     \}
990     \textcolor{keywordflow}{return} txn;
991   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!new\+Pushed\+Transaction@{new\+Pushed\+Transaction}}
\index{new\+Pushed\+Transaction@{new\+Pushed\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{new\+Pushed\+Transaction(\+H\+T\+T\+P\+Push\+Transaction\+Handler $\ast$handler)}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf H\+T\+T\+P\+Transaction}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::new\+Pushed\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Push\+Transaction\+Handler} $\ast$}]{handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a6a60a27c95da7cf6ceefae22d35aef1a}
Create a new pushed transaction associated with this transaction, and assign the given handler and priority.

\begin{DoxyReturn}{Returns}
the new transaction for the push, or nullptr if a new push transaction is impossible right now. 
\end{DoxyReturn}


Definition at line 965 of file H\+T\+T\+P\+Transaction.\+h.



References new\+Pushed\+Transaction().



Referenced by proxygen\+::\+Request\+Handler\+Adaptor\+::new\+Pushed\+Response(), new\+Pushed\+Transaction(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
966                                          \{
967     \textcolor{keywordflow}{if} (isEgressEOMSeen()) \{
968       \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};
969     \}
970     \textcolor{keyword}{auto} txn = transport_.newPushedTransaction(id_, handler);
971     \textcolor{keywordflow}{if} (txn) \{
972       pushedTransactions_.insert(txn->getID());
973     \}
974     \textcolor{keywordflow}{return} txn;
975   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!notify\+Transport\+Pending\+Egress@{notify\+Transport\+Pending\+Egress}}
\index{notify\+Transport\+Pending\+Egress@{notify\+Transport\+Pending\+Egress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{notify\+Transport\+Pending\+Egress()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::notify\+Transport\+Pending\+Egress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a391c4185f224b050a68d2ce6176e6aa3}


Definition at line 1190 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::clear\+Pending\+Egress(), deferred\+Egress\+Body\+\_\+, egress\+Queue\+\_\+, egress\+Rate\+Limited\+\_\+, proxygen\+::\+Window\+::get\+Size(), is\+Egress\+E\+O\+M\+Queued(), is\+Enqueued(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Egress\+Body\+Buffered(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Pending\+Egress(), queue\+Handle\+\_\+, send\+Window\+\_\+, proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::signal\+Pending\+Egress(), transport\+\_\+, update\+Handler\+Pause\+State(), and use\+Flow\+Control\+\_\+.



Referenced by maybe\+Delay\+For\+Rate\+Limit(), on\+Ingress\+Set\+Send\+Window(), on\+Ingress\+Window\+Update(), rate\+Limit\+Timeout\+Expired(), send\+Body(), send\+Deferred\+Body(), and send\+E\+O\+M().


\begin{DoxyCode}
1190                                                    \{
1191   DestructorGuard guard(\textcolor{keyword}{this});
1192   \textcolor{keywordflow}{if} (!egressRateLimited_ &&
1193       (deferredEgressBody_.chainLength() > 0 ||
1194        isEgressEOMQueued()) &&
1195       (!useFlowControl_ || sendWindow_.getSize() > 0)) \{
1196     \textcolor{comment}{// Egress isn't paused, we have something to send, and flow}
1197     \textcolor{comment}{// control isn't blocking us.}
1198     \textcolor{keywordflow}{if} (!isEnqueued()) \{
1199       \textcolor{comment}{// Insert into the queue and let the session know we've got something}
1200       egressQueue_.signalPendingEgress(queueHandle_);
1201       transport_.notifyPendingEgress();
1202       transport_.notifyEgressBodyBuffered(deferredEgressBody_.chainLength());
1203     \}
1204   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (isEnqueued()) \{
1205     \textcolor{comment}{// Nothing to send, or not allowed to send right now.}
1206     int64\_t deferredEgressBodyBytes =
1207       folly::to<int64\_t>(deferredEgressBody_.chainLength());
1208     transport_.notifyEgressBodyBuffered(-deferredEgressBodyBytes);
1209     egressQueue_.clearPendingEgress(queueHandle_);
1210   \}
1211   updateHandlerPauseState();
1212 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Delayed\+Destroy@{on\+Delayed\+Destroy}}
\index{on\+Delayed\+Destroy@{on\+Delayed\+Destroy}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Delayed\+Destroy(bool delayed) override}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Delayed\+Destroy (
\begin{DoxyParamCaption}
\item[{bool}]{delayed}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_abd6a8877e27da8c50a2023936c051e9a}


Definition at line 112 of file H\+T\+T\+P\+Transaction.\+cpp.



References deleting\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::detach(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::detach\+Transaction(), proxygen\+::\+Window\+::get\+Outstanding(), handler\+\_\+, is\+Egress\+Complete(), is\+Enqueued(), is\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Ingress\+Body\+Processed(), pending\+Byte\+Events\+\_\+, recv\+Window\+\_\+, transport\+\_\+, and transport\+Callback\+\_\+.


\begin{DoxyCode}
112                                                    \{
113   \textcolor{keywordflow}{if} (!isEgressComplete() || !isIngressComplete() || isEnqueued()
114       || pendingByteEvents_ > 0 || deleting_) \{
115     \textcolor{keywordflow}{return};
116   \}
117   VLOG(4) << \textcolor{stringliteral}{"destroying transaction "} << *\textcolor{keyword}{this};
118   deleting_ = \textcolor{keyword}{true};
119   \textcolor{keywordflow}{if} (handler_) \{
120     handler_->detachTransaction();
121     handler_ = \textcolor{keyword}{nullptr};
122   \}
123   transportCallback_ = \textcolor{keyword}{nullptr};
124   \textcolor{keyword}{const} \textcolor{keyword}{auto} bytesBuffered = recvWindow_.getOutstanding();
125   \textcolor{keywordflow}{if} (bytesBuffered) \{
126     transport_.notifyIngressBodyProcessed(bytesBuffered);
127   \}
128   transport_.detach(\textcolor{keyword}{this});
129   (void)delayed; \textcolor{comment}{// prevent unused variable warnings}
130 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Delta\+Send\+Window\+Size@{on\+Delta\+Send\+Window\+Size}}
\index{on\+Delta\+Send\+Window\+Size@{on\+Delta\+Send\+Window\+Size}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Delta\+Send\+Window\+Size(int32\+\_\+t window\+Delta)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Delta\+Send\+Window\+Size (
\begin{DoxyParamCaption}
\item[{int32\+\_\+t}]{window\+Delta}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ae873657ea08354bf08fd7e3a930d78de}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Egress\+Body\+First\+Byte@{on\+Egress\+Body\+First\+Byte}}
\index{on\+Egress\+Body\+First\+Byte@{on\+Egress\+Body\+First\+Byte}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Egress\+Body\+First\+Byte()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Egress\+Body\+First\+Byte (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_abd55976c86db66e98b1f45ec5802fee5}
Invoked by the session when the first byte is flushed. 

Definition at line 700 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::first\+Byte\+Flushed(), and transport\+Callback\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::handle\+Last\+Byte\+Events().


\begin{DoxyCode}
700                                             \{
701   DestructorGuard g(\textcolor{keyword}{this});
702   \textcolor{keywordflow}{if} (transportCallback_) \{
703     transportCallback_->firstByteFlushed();
704   \}
705 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Egress\+Body\+Last\+Byte@{on\+Egress\+Body\+Last\+Byte}}
\index{on\+Egress\+Body\+Last\+Byte@{on\+Egress\+Body\+Last\+Byte}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Egress\+Body\+Last\+Byte()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Egress\+Body\+Last\+Byte (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_aa020c58a0e0c82bc5598b01e369bdeb1}
Invoked by the session when the last byte is flushed. 

Definition at line 707 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::last\+Byte\+Flushed(), and transport\+Callback\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::handle\+Last\+Byte\+Events().


\begin{DoxyCode}
707                                            \{
708   DestructorGuard g(\textcolor{keyword}{this});
709   \textcolor{keywordflow}{if} (transportCallback_) \{
710     transportCallback_->lastByteFlushed();
711   \}
712 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Egress\+Header\+First\+Byte@{on\+Egress\+Header\+First\+Byte}}
\index{on\+Egress\+Header\+First\+Byte@{on\+Egress\+Header\+First\+Byte}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Egress\+Header\+First\+Byte()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Egress\+Header\+First\+Byte (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a83b433ee00e2d1ab6a28417dd487345a}
Invoked by the session when the first header byte is flushed. 

Definition at line 693 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::first\+Header\+Byte\+Flushed(), and transport\+Callback\+\_\+.


\begin{DoxyCode}
693                                               \{
694   DestructorGuard g(\textcolor{keyword}{this});
695   \textcolor{keywordflow}{if} (transportCallback_) \{
696     transportCallback_->firstHeaderByteFlushed();
697   \}
698 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Egress\+Last\+Byte\+Ack@{on\+Egress\+Last\+Byte\+Ack}}
\index{on\+Egress\+Last\+Byte\+Ack@{on\+Egress\+Last\+Byte\+Ack}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Egress\+Last\+Byte\+Ack(std\+::chrono\+::milliseconds latency)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Egress\+Last\+Byte\+Ack (
\begin{DoxyParamCaption}
\item[{std\+::chrono\+::milliseconds}]{latency}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a12c9413175f9eba01ce7c2f794feda10}
Invoked when the A\+C\+K\+\_\+\+L\+A\+T\+E\+N\+CY event is delivered


\begin{DoxyParams}{Parameters}
{\em latency} & the time between the moment when the last byte was sent and the moment when we received the A\+CK from the client \\
\hline
\end{DoxyParams}


Definition at line 721 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::last\+Byte\+Acked(), and transport\+Callback\+\_\+.


\begin{DoxyCode}
721                                                                        \{
722   DestructorGuard g(\textcolor{keyword}{this});
723   \textcolor{keywordflow}{if} (transportCallback_) \{
724     transportCallback_->lastByteAcked(latency);
725   \}
726 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Egress\+Timeout@{on\+Egress\+Timeout}}
\index{on\+Egress\+Timeout@{on\+Egress\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Egress\+Timeout()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Egress\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_aac4c2173a96b0cad3788385bad57fc44}
Invoked by the session when there is a timeout on the egress stream. 

Definition at line 680 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Exception\+::\+E\+G\+R\+E\+SS, handler\+\_\+, id\+\_\+, proxygen\+::k\+Error\+Timeout, mark\+Egress\+Complete(), on\+Error(), and proxygen\+::\+Exception\+::set\+Proxygen\+Error().


\begin{DoxyCode}
680                                       \{
681   DestructorGuard g(\textcolor{keyword}{this});
682   VLOG(4) << \textcolor{stringliteral}{"egress timeout on "} << *\textcolor{keyword}{this};
683   \textcolor{keywordflow}{if} (handler_) \{
684     HTTPException ex(HTTPException::Direction::EGRESS,
685       folly::to<std::string>(\textcolor{stringliteral}{"egress timeout, streamID="}, id_));
686     ex.setProxygenError(kErrorTimeout);
687     onError(ex);
688   \} \textcolor{keywordflow}{else} \{
689     markEgressComplete();
690   \}
691 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Egress\+Tracked\+Byte@{on\+Egress\+Tracked\+Byte}}
\index{on\+Egress\+Tracked\+Byte@{on\+Egress\+Tracked\+Byte}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Egress\+Tracked\+Byte()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Egress\+Tracked\+Byte (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a6102abd70fb8d9e25302e73cdd0ab73e}
Invoked by the session when the tracked byte is flushed. 

Definition at line 714 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::tracked\+Byte\+Flushed(), and transport\+Callback\+\_\+.


\begin{DoxyCode}
714                                           \{
715   DestructorGuard g(\textcolor{keyword}{this});
716   \textcolor{keywordflow}{if} (transportCallback_) \{
717     transportCallback_->trackedByteFlushed();
718   \}
719 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Error@{on\+Error}}
\index{on\+Error@{on\+Error}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Error(const H\+T\+T\+P\+Exception \&error)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Error (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Exception} \&}]{error}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_ac1d43f93fad6acb9c5764e0b0dc8bd16}
Invoked by the session when there is an error (e.\+g., invalid syntax, T\+CP R\+ST) in either the ingress or egress stream. Note that this message is processed immediately even if this transaction normally would queue ingress.


\begin{DoxyParams}{Parameters}
{\em error} & Details for the error. This exception also has information about whether the error applies to the ingress, egress, or both directions of the transaction \\
\hline
\end{DoxyParams}


Definition at line 535 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+E\+G\+R\+E\+SS, proxygen\+::\+F\+L\+O\+W\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::\+H\+T\+T\+P\+Exception\+::get\+Codec\+Status\+Code(), proxygen\+::\+H\+T\+T\+P\+Exception\+::get\+Direction(), proxygen\+::\+Exception\+::get\+Proxygen\+Error(), handler\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::has\+Codec\+Status\+Code(), proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+SS, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+S\+S\+\_\+\+A\+N\+D\+\_\+\+E\+G\+R\+E\+SS, ingress\+Error\+Seen\+\_\+, is\+Egress\+Complete(), is\+Expecting\+Window\+Update(), is\+Ingress\+Complete(), is\+Ingress\+E\+O\+M\+Seen(), proxygen\+::k\+Error\+Stream\+Abort, proxygen\+::k\+Error\+Write\+Timeout, mark\+Egress\+Complete(), mark\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Error(), and send\+Abort().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::handle\+Error\+Directly(), proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Abort(), on\+Egress\+Timeout(), proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Error(), on\+Ingress\+Body(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Timeout(), proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Message\+Begin(), send\+Body\+Now(), proxygen\+::\+H\+T\+T\+P\+Session\+::shutdown\+Transport(), T\+E\+S\+T(), and validate\+Ingress\+State\+Transition().


\begin{DoxyCode}
535                                                         \{
536   DestructorGuard g(\textcolor{keyword}{this});
537 
538   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} wasAborted = aborted_; \textcolor{comment}{// see comment below}
539   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} wasEgressComplete = isEgressComplete();
540   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} wasIngressComplete = isIngressComplete();
541   \textcolor{keywordtype}{bool} notify = (handler_);
542   HTTPException::Direction direction = error.getDirection();
543 
544   \textcolor{keywordflow}{if} (direction == HTTPException::Direction::INGRESS &&
545       isIngressEOMSeen() && isExpectingWindowUpdate()) \{
546     \textcolor{comment}{// we got an ingress error, we've seen the entire message, but we're}
547     \textcolor{comment}{// expecting more (window updates).  These aren't coming, convert to}
548     \textcolor{comment}{// INGRESS\_AND\_EGRESS}
549     VLOG(4) << \textcolor{stringliteral}{"Converting ingress error to ingress+egress due to"}
550       \textcolor{stringliteral}{" flow control, and aborting "} << *\textcolor{keyword}{this};
551     direction = HTTPException::Direction::INGRESS_AND_EGRESS;
552     sendAbort(ErrorCode::FLOW_CONTROL_ERROR);
553   \}
554 
555   \textcolor{keywordflow}{if} (error.getProxygenError() == kErrorStreamAbort) \{
556     DCHECK(error.getDirection() ==
557            HTTPException::Direction::INGRESS_AND_EGRESS);
558     aborted_ = \textcolor{keyword}{true};
559   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (error.hasCodecStatusCode()) \{
560     DCHECK(error.getDirection() ==
561            HTTPException::Direction::INGRESS_AND_EGRESS);
562     sendAbort(error.getCodecStatusCode());
563   \}
564 
565   \textcolor{keywordflow}{switch} (direction) \{
566     \textcolor{keywordflow}{case} HTTPException::Direction::INGRESS_AND_EGRESS:
567       markEgressComplete();
568       markIngressComplete();
569       \textcolor{keywordflow}{if} (wasEgressComplete && wasIngressComplete &&
570           \textcolor{comment}{// We mark egress complete before we get acknowledgement of the}
571           \textcolor{comment}{// write segment finishing successfully.}
572           \textcolor{comment}{// TODO: instead of using DestructorGuard hacks to keep txn around,}
573           \textcolor{comment}{// use an explicit callback function and set egress complete after}
574           \textcolor{comment}{// last byte flushes (or egress error occurs), see #3912823}
575           (error.getProxygenError() != kErrorWriteTimeout || wasAborted)) \{
576         notify = \textcolor{keyword}{false};
577       \}
578       \textcolor{keywordflow}{break};
579     \textcolor{keywordflow}{case} HTTPException::Direction::EGRESS:
580       markEgressComplete();
581       \textcolor{keywordflow}{if} (!wasEgressComplete && isIngressEOMSeen() && ingressErrorSeen_) \{
582         \textcolor{comment}{// we've already seen an ingress error but we ignored it, hoping the}
583         \textcolor{comment}{// handler would resume and read our queued EOM.  Now both sides are}
584         \textcolor{comment}{// dead and we need to kill this transaction.}
585         markIngressComplete();
586       \}
587       \textcolor{keywordflow}{if} (wasEgressComplete) \{
588         notify = \textcolor{keyword}{false};
589       \}
590       \textcolor{keywordflow}{break};
591     \textcolor{keywordflow}{case} HTTPException::Direction::INGRESS:
592       \textcolor{keywordflow}{if} (isIngressEOMSeen()) \{
593         \textcolor{comment}{// Not an error, for now}
594         ingressErrorSeen_ = \textcolor{keyword}{true};
595         \textcolor{keywordflow}{return};
596       \}
597       markIngressComplete();
598       \textcolor{keywordflow}{if} (wasIngressComplete) \{
599         notify = \textcolor{keyword}{false};
600       \}
601       \textcolor{keywordflow}{break};
602   \}
603   \textcolor{keywordflow}{if} (notify && handler_) \{
604     \textcolor{comment}{// mark egress complete may result in handler detaching}
605     handler_->onError(error);
606   \}
607 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ex\+Transaction@{on\+Ex\+Transaction}}
\index{on\+Ex\+Transaction@{on\+Ex\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ex\+Transaction(\+H\+T\+T\+P\+Transaction $\ast$txn)}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ex\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{txn}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a3ea745988332db0c76cf337057d29040}
Invoked by the session when a new Ex\+Transaction arrives. The txn\textquotesingle{}s handler will be notified and is responsible for installing a handler. If no handler is installed in the callback, the transaction will be aborted. 

Definition at line 1290 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+E\+R\+R\+OR, ex\+Transactions\+\_\+, get\+Control\+Stream(), get\+Handler(), get\+I\+D(), handler\+\_\+, id\+\_\+, and proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Ex\+Transaction().


\begin{DoxyCode}
1290                                                             \{
1291   DestructorGuard g(\textcolor{keyword}{this});
1292   CHECK\_EQ(*(exTxn->getControlStream()), id_);
1293   \textcolor{keywordflow}{if} (!handler_) \{
1294     LOG(ERROR) << \textcolor{stringliteral}{"Cannot add a exTxn to an unhandled txn"};
1295     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1296   \}
1297   handler_->onExTransaction(exTxn);
1298   \textcolor{keywordflow}{if} (!exTxn->getHandler()) \{
1299     LOG(ERROR) << \textcolor{stringliteral}{"Failed to create a handler for ExTransaction"};
1300     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1301   \}
1302   exTransactions_.insert(exTxn->getID());
1303   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1304 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Goaway@{on\+Goaway}}
\index{on\+Goaway@{on\+Goaway}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Goaway(\+Error\+Code code)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Goaway (
\begin{DoxyParamCaption}
\item[{{\bf Error\+Code}}]{code}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a5aa84f5d6023b600935a8ff16177e28a}
Invoked by the session when a G\+O\+A\+W\+AY frame is received. T\+O\+DO\+: we may consider exposing the additional debug data here in the future.


\begin{DoxyParams}{Parameters}
{\em code} & The error code received in the G\+O\+A\+W\+AY frame \\
\hline
\end{DoxyParams}


Definition at line 609 of file H\+T\+T\+P\+Transaction.\+cpp.



References handler\+\_\+, and proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Goaway().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Goaway().


\begin{DoxyCode}
609                                              \{
610   DestructorGuard g(\textcolor{keyword}{this});
611   VLOG(4) << \textcolor{stringliteral}{"received GOAWAY notification on "} << *\textcolor{keyword}{this};
612   \textcolor{comment}{// This callback can be received at any time and does not affect this}
613   \textcolor{comment}{// transaction's ingress or egress state machines. If it would have}
614   \textcolor{comment}{// affected this transaction's state, we would have received onError()}
615   \textcolor{comment}{// instead.}
616   \textcolor{keywordflow}{if} (handler_) \{
617     handler_->onGoaway(code);
618   \}
619 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Body@{on\+Ingress\+Body}}
\index{on\+Ingress\+Body@{on\+Ingress\+Body}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain, uint16\+\_\+t padding)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{chain, }
\item[{uint16\+\_\+t}]{padding}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a7be28e684b8611cfdd26bf3207a1f51f}
Invoked by the session when some or all of the ingress entity-\/body has been parsed. 

Definition at line 216 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Event\+::\+B\+O\+DY, proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::body\+Bytes\+Received(), check\+Create\+Deferred\+Ingress(), deferred\+Ingress\+\_\+, proxygen\+::\+E\+R\+R\+OR, expected\+Content\+Length\+Remaining\+\_\+, proxygen\+::\+F\+L\+O\+W\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::\+Window\+::free(), proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Outstanding(), handler\+\_\+, id\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+SS, is\+Ingress\+E\+O\+M\+Seen(), proxygen\+::k\+Error\+Parse\+Body, must\+Queue\+Ingress(), on\+Error(), process\+Ingress\+Body(), recv\+To\+Ack\+\_\+, recv\+Window\+\_\+, proxygen\+::\+Window\+::reserve(), send\+Abort(), proxygen\+::\+Exception\+::set\+Proxygen\+Error(), proxygen\+::\+S\+T\+R\+E\+A\+M\+\_\+\+C\+L\+O\+S\+ED, transport\+Callback\+\_\+, use\+Flow\+Control\+\_\+, and validate\+Ingress\+State\+Transition().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::on\+Body\+Impl(), and Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow().


\begin{DoxyCode}
217                                                       \{
218   FOLLY\_SCOPED\_TRACE\_SECTION(\textcolor{stringliteral}{"HTTPTransaction - onIngressBody"});
219   DestructorGuard g(\textcolor{keyword}{this});
220   \textcolor{keywordflow}{if} (isIngressEOMSeen()) \{
221     sendAbort(ErrorCode::STREAM_CLOSED);
222     \textcolor{keywordflow}{return};
223   \}
224   \textcolor{keyword}{auto} len = chain->computeChainDataLength();
225   \textcolor{keywordflow}{if} (len == 0) \{
226     \textcolor{keywordflow}{return};
227   \}
228   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
229         HTTPTransactionIngressSM::Event::onBody)) \{
230     \textcolor{keywordflow}{return};
231   \}
232   \textcolor{keywordflow}{if} (expectedContentLengthRemaining_.hasValue()) \{
233     \textcolor{keywordflow}{if} (expectedContentLengthRemaining_.value() >= len) \{
234       expectedContentLengthRemaining_ =
235         expectedContentLengthRemaining_.value() - len;
236     \} \textcolor{keywordflow}{else} \{
237       \textcolor{keyword}{auto} errorMsg = folly::to<std::string>(
238           \textcolor{stringliteral}{"Content-Length/body mismatch: received="},
239           len,
240           \textcolor{stringliteral}{" expecting no more than "},
241           expectedContentLengthRemaining_.value());
242       LOG(ERROR) << errorMsg << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
243       \textcolor{keywordflow}{if} (handler_) \{
244         HTTPException ex(HTTPException::Direction::INGRESS, errorMsg);
245         ex.setProxygenError(kErrorParseBody);
246         onError(ex);
247       \}
248       \textcolor{keywordflow}{return};
249     \}
250   \}
251   \textcolor{keywordflow}{if} (transportCallback_) \{
252     transportCallback_->bodyBytesReceived(len);
253   \}
254   \textcolor{comment}{// register the bytes in the receive window}
255   \textcolor{keywordflow}{if} (!recvWindow_.reserve(len + padding, useFlowControl_)) \{
256     LOG(ERROR) << \textcolor{stringliteral}{"recvWindow\_.reserve failed with len="} << len
257                << \textcolor{stringliteral}{" padding="} << padding
258                << \textcolor{stringliteral}{" capacity="} << recvWindow_.getCapacity()
259                << \textcolor{stringliteral}{" outstanding="} << recvWindow_.getOutstanding()
260                << \textcolor{stringliteral}{" "} << *this ;
261     sendAbort(ErrorCode::FLOW_CONTROL_ERROR);
262     \textcolor{keywordflow}{return};
263   \} \textcolor{keywordflow}{else} \{
264     CHECK(recvWindow_.free(padding));
265     recvToAck_ += padding;
266   \}
267   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
268     checkCreateDeferredIngress();
269     deferredIngress_->emplace(id_, HTTPEvent::Type::BODY,
270                               std::move(chain));
271     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "} << HTTPEvent::Type::BODY
272             << \textcolor{stringliteral}{" size="} << len << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
273   \} \textcolor{keywordflow}{else} \{
274     CHECK(recvWindow_.free(len));
275     processIngressBody(std::move(chain), len);
276   \}
277 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Chunk\+Complete@{on\+Ingress\+Chunk\+Complete}}
\index{on\+Ingress\+Chunk\+Complete@{on\+Ingress\+Chunk\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Chunk\+Complete()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Chunk\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_ade30487710a3c3b15441fe518dc4394e}
Invoked by the session when the C\+R\+LF terminating a chunk has been parsed. 

Definition at line 335 of file H\+T\+T\+P\+Transaction.\+cpp.



References check\+Create\+Deferred\+Ingress(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+C\+H\+U\+N\+K\+\_\+\+C\+O\+M\+P\+L\+E\+TE, deferred\+Ingress\+\_\+, id\+\_\+, must\+Queue\+Ingress(), process\+Ingress\+Chunk\+Complete(), and validate\+Ingress\+State\+Transition().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Chunk\+Complete().


\begin{DoxyCode}
335                                              \{
336   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
337         HTTPTransactionIngressSM::Event::onChunkComplete)) \{
338     \textcolor{keywordflow}{return};
339   \}
340   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
341     checkCreateDeferredIngress();
342     deferredIngress_->emplace(id_, HTTPEvent::Type::CHUNK_COMPLETE);
343     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "}
344             << HTTPEvent::Type::CHUNK_COMPLETE << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
345   \} \textcolor{keywordflow}{else} \{
346     processIngressChunkComplete();
347   \}
348 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Chunk\+Header@{on\+Ingress\+Chunk\+Header}}
\index{on\+Ingress\+Chunk\+Header@{on\+Ingress\+Chunk\+Header}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Chunk\+Header(size\+\_\+t length)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Chunk\+Header (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{length}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a40868f9faa2e3b0a095a56ec4da4057e}
Invoked by the session when a chunk header has been parsed. 

Definition at line 309 of file H\+T\+T\+P\+Transaction.\+cpp.



References check\+Create\+Deferred\+Ingress(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+C\+H\+U\+N\+K\+\_\+\+H\+E\+A\+D\+ER, deferred\+Ingress\+\_\+, id\+\_\+, must\+Queue\+Ingress(), process\+Ingress\+Chunk\+Header(), and validate\+Ingress\+State\+Transition().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Chunk\+Header().


\begin{DoxyCode}
309                                                         \{
310   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
311         HTTPTransactionIngressSM::Event::onChunkHeader)) \{
312     \textcolor{keywordflow}{return};
313   \}
314   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
315     checkCreateDeferredIngress();
316     deferredIngress_->emplace(id_, HTTPEvent::Type::CHUNK_HEADER, length);
317     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "} << HTTPEvent::Type::CHUNK_HEADER
318             << \textcolor{stringliteral}{" size="} << length << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
319   \} \textcolor{keywordflow}{else} \{
320     processIngressChunkHeader(length);
321   \}
322 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+E\+OM@{on\+Ingress\+E\+OM}}
\index{on\+Ingress\+E\+OM@{on\+Ingress\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+E\+O\+M()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_af49f69623208256d6af6d317f7ba8cd4}
Invoked by the session when the ingress message is complete. 

Definition at line 413 of file H\+T\+T\+P\+Transaction.\+cpp.



References check\+Create\+Deferred\+Ingress(), deferred\+Ingress\+\_\+, proxygen\+::\+E\+R\+R\+OR, expected\+Content\+Length\+Remaining\+\_\+, extra\+Response\+Expected(), handler\+\_\+, id\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+SS, is\+Ingress\+E\+O\+M\+Seen(), is\+Upstream(), proxygen\+::k\+Error\+Parse\+Body, proxygen\+::\+H\+T\+T\+P\+Event\+::\+M\+E\+S\+S\+A\+G\+E\+\_\+\+C\+O\+M\+P\+L\+E\+TE, must\+Queue\+Ingress(), on\+Error(), process\+Ingress\+E\+O\+M(), send\+Abort(), proxygen\+::\+Exception\+::set\+Proxygen\+Error(), proxygen\+::\+S\+T\+R\+E\+A\+M\+\_\+\+C\+L\+O\+S\+ED, update\+Read\+Timeout(), and validate\+Ingress\+State\+Transition().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Message\+Complete(), and Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow().


\begin{DoxyCode}
413                                    \{
414   \textcolor{keywordflow}{if} (isIngressEOMSeen()) \{
415     \textcolor{comment}{// This can happen when HTTPSession calls onIngressEOF()}
416     sendAbort(ErrorCode::STREAM_CLOSED);
417     \textcolor{keywordflow}{return};
418   \}
419   \textcolor{keywordflow}{if} (expectedContentLengthRemaining_.hasValue() &&
420       expectedContentLengthRemaining_.value() > 0) \{
421     \textcolor{keyword}{auto} errorMsg = folly::to<std::string>(
422         \textcolor{stringliteral}{"Content-Length/body mismatch: expecting another "},
423         expectedContentLengthRemaining_.value());
424     LOG(ERROR) << errorMsg << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
425     \textcolor{keywordflow}{if} (handler_) \{
426       HTTPException ex(HTTPException::Direction::INGRESS, errorMsg);
427       ex.setProxygenError(kErrorParseBody);
428       onError(ex);
429     \}
430     \textcolor{keywordflow}{return};
431   \}
432 
433   \textcolor{comment}{// TODO: change the codec to not give an EOM callback after a 100 response?}
434   \textcolor{comment}{// We could then delete the below 'if'}
435   \textcolor{keywordflow}{if} (isUpstream() && extraResponseExpected()) \{
436     VLOG(4) << \textcolor{stringliteral}{"Ignoring EOM on initial 100 response on "} << *\textcolor{keyword}{this};
437     \textcolor{keywordflow}{return};
438   \}
439   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
440         HTTPTransactionIngressSM::Event::onEOM)) \{
441     \textcolor{keywordflow}{return};
442   \}
443   \textcolor{comment}{// We need to update the read timeout here.  We're not likely to be}
444   \textcolor{comment}{// expecting any more ingress, and the timer should be cancelled}
445   \textcolor{comment}{// immediately.  If we are expecting more, this will reset the timer.}
446   updateReadTimeout();
447   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
448     checkCreateDeferredIngress();
449     deferredIngress_->emplace(id_, HTTPEvent::Type::MESSAGE_COMPLETE);
450     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "}
451             << HTTPEvent::Type::MESSAGE_COMPLETE << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
452   \} \textcolor{keywordflow}{else} \{
453     processIngressEOM();
454   \}
455 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Headers\+Complete@{on\+Ingress\+Headers\+Complete}}
\index{on\+Ingress\+Headers\+Complete@{on\+Ingress\+Headers\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Headers\+Complete(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Message $>$ msg)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Headers\+Complete (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$}]{msg}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a71da0fca7b035c9c9735aba7095ee4a1}
Invoked by the session when the ingress headers are complete 

Definition at line 159 of file H\+T\+T\+P\+Transaction.\+cpp.



References check\+Create\+Deferred\+Ingress(), proxygen\+::\+C\+O\+N\+N\+E\+CT, deferred\+Ingress\+\_\+, proxygen\+::\+E\+R\+R\+OR, expected\+Content\+Length\+Remaining\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::get\+Codec(), proxygen\+::\+H\+T\+T\+P\+Codec\+::get\+Compression\+Info(), proxygen\+::\+H\+E\+AD, proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::header\+Bytes\+Received(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+H\+E\+A\+D\+E\+R\+S\+\_\+\+C\+O\+M\+P\+L\+E\+TE, head\+Request\+\_\+, id\+\_\+, is\+Pushed(), is\+Upstream(), last\+Response\+Status\+\_\+, must\+Queue\+Ingress(), process\+Ingress\+Headers\+Complete(), proxygen\+::\+R\+F\+C2616\+::response\+Body\+Must\+Be\+Empty(), seq\+No\+\_\+, transport\+\_\+, transport\+Callback\+\_\+, update\+Ingress\+Compression\+Info(), and validate\+Ingress\+State\+Transition().



Referenced by T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
160                                   \{
161   DestructorGuard g(\textcolor{keyword}{this});
162   msg->setSeqNo(seqNo_);
163   \textcolor{keywordflow}{if} (isUpstream() && !isPushed() && msg->isResponse()) \{
164     lastResponseStatus_ = msg->getStatusCode();
165   \}
166   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
167           HTTPTransactionIngressSM::Event::onHeaders)) \{
168     \textcolor{keywordflow}{return};
169   \}
170   \textcolor{keywordflow}{if} (msg->isRequest()) \{
171     headRequest_ = (msg->getMethod() == HTTPMethod::HEAD);
172   \}
173 
174   \textcolor{keywordflow}{if} ((msg->isRequest() && msg->getMethod() != HTTPMethod::CONNECT) ||
175       (msg->isResponse() && !headRequest_ &&
176        !RFC2616::responseBodyMustBeEmpty(msg->getStatusCode()))) \{
177     \textcolor{comment}{// CONNECT payload has no defined semantics}
178     \textcolor{keyword}{const} \textcolor{keyword}{auto}& contentLen =
179         msg->getHeaders().getSingleOrEmpty(HTTP\_HEADER\_CONTENT\_LENGTH);
180     \textcolor{keywordflow}{if} (!contentLen.empty()) \{
181       \textcolor{keywordflow}{try} \{
182         expectedContentLengthRemaining_ = folly::to<uint64\_t>(contentLen);
183       \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} folly::ConversionError& ex) \{
184         LOG(ERROR) << \textcolor{stringliteral}{"Invalid content-length: "} << contentLen
185                    << \textcolor{stringliteral}{", ex="} << ex.what() << *\textcolor{keyword}{this};
186       \}
187     \}
188   \}
189   \textcolor{keywordflow}{if} (transportCallback_) \{
190     transportCallback_->headerBytesReceived(msg->getIngressHeaderSize());
191   \}
192   updateIngressCompressionInfo(transport_.getCodec().getCompressionInfo());
193   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
194     checkCreateDeferredIngress();
195     deferredIngress_->emplace(id_, HTTPEvent::Type::HEADERS_COMPLETE,
196                              std::move(msg));
197     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "}
198             << HTTPEvent::Type::HEADERS_COMPLETE << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
199   \} \textcolor{keywordflow}{else} \{
200     processIngressHeadersComplete(std::move(msg));
201   \}
202 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Set\+Send\+Window@{on\+Ingress\+Set\+Send\+Window}}
\index{on\+Ingress\+Set\+Send\+Window@{on\+Ingress\+Set\+Send\+Window}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Set\+Send\+Window(uint32\+\_\+t new\+Window\+Size)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Set\+Send\+Window (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{new\+Window\+Size}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a2e8861dbc6a86b7cb4b569737c2768cf}
Invoked by the session when the remote endpoint signals that we should change our send window. This is only for versions of H\+T\+TP that support per transaction flow control. 

Definition at line 664 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+E\+R\+R\+OR, proxygen\+::\+F\+L\+O\+W\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Outstanding(), notify\+Transport\+Pending\+Egress(), send\+Abort(), send\+Window\+\_\+, proxygen\+::\+Window\+::set\+Capacity(), update\+Read\+Timeout(), and use\+Flow\+Control\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Set\+Send\+Window().


\begin{DoxyCode}
664                                                                          \{
665   \textcolor{keywordflow}{if} (!useFlowControl_) \{
666     \textcolor{keywordflow}{return};
667   \}
668   updateReadTimeout();
669   \textcolor{keywordflow}{if} (sendWindow_.setCapacity(newWindowSize)) \{
670     notifyTransportPendingEgress();
671   \} \textcolor{keywordflow}{else} \{
672     LOG(ERROR) << \textcolor{stringliteral}{"sendWindow\_.setCapacity failed with newWindowSize="}
673                << newWindowSize << \textcolor{stringliteral}{" capacity="} << sendWindow_.getCapacity()
674                << \textcolor{stringliteral}{" outstanding="} << sendWindow_.getOutstanding()
675                << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
676     sendAbort(ErrorCode::FLOW_CONTROL_ERROR);
677   \}
678 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Timeout@{on\+Ingress\+Timeout}}
\index{on\+Ingress\+Timeout@{on\+Ingress\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Timeout()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a5a70b3675a5cfdd66137a4243a2c585e}
Invoked by the session when there is a timeout on the ingress stream. Note that each transaction has its own timer but the session is the effective target of the timer. 

Definition at line 621 of file H\+T\+T\+P\+Transaction.\+cpp.



References handler\+\_\+, id\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+SS, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+S\+S\+\_\+\+A\+N\+D\+\_\+\+E\+G\+R\+E\+SS, is\+Egress\+Complete(), is\+Expecting\+Window\+Update(), proxygen\+::k\+Error\+Timeout, proxygen\+::k\+Error\+Write\+Timeout, mark\+Egress\+Complete(), mark\+Ingress\+Complete(), on\+Error(), pause\+Ingress(), proxygen\+::\+P\+R\+O\+T\+O\+C\+O\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::\+H\+T\+T\+P\+Exception\+::set\+Codec\+Status\+Code(), and proxygen\+::\+Exception\+::set\+Proxygen\+Error().


\begin{DoxyCode}
621                                        \{
622   DestructorGuard g(\textcolor{keyword}{this});
623   VLOG(4) << \textcolor{stringliteral}{"ingress timeout on "} << *\textcolor{keyword}{this};
624   pauseIngress();
625   \textcolor{keywordtype}{bool} windowUpdateTimeout = !isEgressComplete() && isExpectingWindowUpdate();
626   \textcolor{keywordflow}{if} (handler_) \{
627     \textcolor{keywordflow}{if} (windowUpdateTimeout) \{
628       HTTPException ex(HTTPException::Direction::INGRESS_AND_EGRESS,
629           folly::to<std::string>(\textcolor{stringliteral}{"ingress timeout, streamID="}, id_));
630       ex.setProxygenError(kErrorWriteTimeout);
631       \textcolor{comment}{// This is a protocol error}
632       ex.setCodecStatusCode(ErrorCode::PROTOCOL_ERROR);
633       onError(ex);
634     \} \textcolor{keywordflow}{else} \{
635       HTTPException ex(HTTPException::Direction::INGRESS,
636           folly::to<std::string>(\textcolor{stringliteral}{"ingress timeout, streamID="}, id_));
637       ex.setProxygenError(kErrorTimeout);
638       onError(ex);
639     \}
640   \} \textcolor{keywordflow}{else} \{
641     markIngressComplete();
642     markEgressComplete();
643   \}
644 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Trailers@{on\+Ingress\+Trailers}}
\index{on\+Ingress\+Trailers@{on\+Ingress\+Trailers}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Trailers(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Headers $>$ trailers)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Trailers (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$}]{trailers}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a233a1f58c07415b031e1636a6333a172}
Invoked by the session when the ingress trailers have been parsed. 

Definition at line 361 of file H\+T\+T\+P\+Transaction.\+cpp.



References check\+Create\+Deferred\+Ingress(), deferred\+Ingress\+\_\+, id\+\_\+, must\+Queue\+Ingress(), process\+Ingress\+Trailers(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+T\+R\+A\+I\+L\+E\+R\+S\+\_\+\+C\+O\+M\+P\+L\+E\+TE, and validate\+Ingress\+State\+Transition().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Trailers\+Complete().


\begin{DoxyCode}
361                                                                         \{
362   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
363         HTTPTransactionIngressSM::Event::onTrailers)) \{
364     \textcolor{keywordflow}{return};
365   \}
366   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
367     checkCreateDeferredIngress();
368     deferredIngress_->emplace(id_, HTTPEvent::Type::TRAILERS_COMPLETE,
369         std::move(trailers));
370     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "}
371             << HTTPEvent::Type::TRAILERS_COMPLETE << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
372   \} \textcolor{keywordflow}{else} \{
373     processIngressTrailers(std::move(trailers));
374   \}
375 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Upgrade@{on\+Ingress\+Upgrade}}
\index{on\+Ingress\+Upgrade@{on\+Ingress\+Upgrade}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Upgrade(\+Upgrade\+Protocol protocol)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Upgrade (
\begin{DoxyParamCaption}
\item[{{\bf Upgrade\+Protocol}}]{protocol}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a259ca72274b3d7924710c282eeef5823}
Invoked by the session when the session and transaction need to be upgraded to a different protocol 

Definition at line 388 of file H\+T\+T\+P\+Transaction.\+cpp.



References check\+Create\+Deferred\+Ingress(), deferred\+Ingress\+\_\+, id\+\_\+, must\+Queue\+Ingress(), process\+Ingress\+Upgrade(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+U\+P\+G\+R\+A\+DE, and validate\+Ingress\+State\+Transition().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Message\+Complete().


\begin{DoxyCode}
388                                                                \{
389   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
390         HTTPTransactionIngressSM::Event::onUpgrade)) \{
391     \textcolor{keywordflow}{return};
392   \}
393   \textcolor{keywordflow}{if} (mustQueueIngress()) \{
394     checkCreateDeferredIngress();
395     deferredIngress_->emplace(id_, HTTPEvent::Type::UPGRADE, protocol);
396     VLOG(4) << \textcolor{stringliteral}{"Queued ingress event of type "} << HTTPEvent::Type::UPGRADE
397             << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
398   \} \textcolor{keywordflow}{else} \{
399     processIngressUpgrade(protocol);
400   \}
401 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Ingress\+Window\+Update@{on\+Ingress\+Window\+Update}}
\index{on\+Ingress\+Window\+Update@{on\+Ingress\+Window\+Update}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Ingress\+Window\+Update(uint32\+\_\+t amount)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Ingress\+Window\+Update (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{amount}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a2b1ed029d994147d82f666d1069b1ee7}
Invoked by the session when the remote endpoint of this transaction signals that it has consumed \textquotesingle{}amount\textquotesingle{} bytes. This is only for versions of H\+T\+TP that support per transaction flow control. 

Definition at line 646 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+E\+R\+R\+OR, proxygen\+::\+F\+L\+O\+W\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::\+Window\+::free(), proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Outstanding(), notify\+Transport\+Pending\+Egress(), send\+Abort(), send\+Window\+\_\+, update\+Read\+Timeout(), and use\+Flow\+Control\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Window\+Update().


\begin{DoxyCode}
646                                                                  \{
647   \textcolor{keywordflow}{if} (!useFlowControl_) \{
648     \textcolor{keywordflow}{return};
649   \}
650   DestructorGuard g(\textcolor{keyword}{this});
651   VLOG(4) << \textcolor{stringliteral}{"Remote side ack'd "} << amount << \textcolor{stringliteral}{" bytes "} << *this ;
652   updateReadTimeout();
653   \textcolor{keywordflow}{if} (sendWindow_.free(amount)) \{
654     notifyTransportPendingEgress();
655   \} \textcolor{keywordflow}{else} \{
656     LOG(ERROR) << \textcolor{stringliteral}{"sendWindow\_.free failed with amount="} << amount
657                << \textcolor{stringliteral}{" capacity="} << sendWindow_.getCapacity()
658                << \textcolor{stringliteral}{" outstanding="} << sendWindow_.getOutstanding()
659                << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
660     sendAbort(ErrorCode::FLOW_CONTROL_ERROR);
661   \}
662 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Priority\+Update@{on\+Priority\+Update}}
\index{on\+Priority\+Update@{on\+Priority\+Update}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Priority\+Update(const http2\+::\+Priority\+Update \&priority)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Priority\+Update (
\begin{DoxyParamCaption}
\item[{const {\bf http2\+::\+Priority\+Update} \&}]{priority}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_af27fcc98b59eb4eb42e634130ecb99ae}
Notify of priority change, will not generate a P\+R\+I\+O\+R\+I\+TY frame 

Definition at line 1385 of file H\+T\+T\+P\+Transaction.\+cpp.



References current\+Depth\+\_\+, egress\+Queue\+\_\+, proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::get\+Root\+Id(), priority\+\_\+, priority\+Fallback\+\_\+, queue\+Handle\+\_\+, proxygen\+::http2\+::\+Priority\+Update\+::stream\+Dependency, and proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::update\+Priority().



Referenced by update\+And\+Send\+Priority().


\begin{DoxyCode}
1385                                                                           \{
1386   priority_ = priority;
1387 
1388   queueHandle_ = egressQueue_.updatePriority(
1389       queueHandle_,
1390       priority_,
1391       &currentDepth_);
1392   \textcolor{keywordflow}{if} (priority_.streamDependency != egressQueue_.getRootId() &&
1393       currentDepth_ == 1) \{
1394     priorityFallback_ = \textcolor{keyword}{true};
1395   \}
1396 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Pushed\+Transaction@{on\+Pushed\+Transaction}}
\index{on\+Pushed\+Transaction@{on\+Pushed\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Pushed\+Transaction(\+H\+T\+T\+P\+Transaction $\ast$txn)}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Pushed\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{txn}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a398db3f6032d4e026f765fd63bb0ca83}
Invoked by the session (upstream only) when a new pushed transaction arrives. The txn\textquotesingle{}s handler will be notified and is responsible for installing a handler. If no handler is installed in the callback, the pushed transaction will be aborted. 

Definition at line 1274 of file H\+T\+T\+P\+Transaction.\+cpp.



References assoc\+Stream\+Id\+\_\+, get\+Handler(), get\+I\+D(), handler\+\_\+, id\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Pushed\+Transaction(), and pushed\+Transactions\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Push\+Message\+Begin().


\begin{DoxyCode}
1274                                                                   \{
1275   DestructorGuard g(\textcolor{keyword}{this});
1276   CHECK\_EQ(*pushTxn->assocStreamId\_, id_);
1277   \textcolor{keywordflow}{if} (!handler_) \{
1278     VLOG(4) << \textcolor{stringliteral}{"Cannot add a pushed txn to an unhandled txn"};
1279     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1280   \}
1281   handler_->onPushedTransaction(pushTxn);
1282   \textcolor{keywordflow}{if} (!pushTxn->getHandler()) \{
1283     VLOG(4) << \textcolor{stringliteral}{"Failed to create a handler for push transaction"};
1284     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
1285   \}
1286   pushedTransactions_.insert(pushTxn->getID());
1287   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
1288 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!on\+Write\+Ready@{on\+Write\+Ready}}
\index{on\+Write\+Ready@{on\+Write\+Ready}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{on\+Write\+Ready(uint32\+\_\+t max\+Egress, double ratio)}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::on\+Write\+Ready (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{max\+Egress, }
\item[{double}]{ratio}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_ae5960b3f86681f8df51ac9300cf5595b}
Notify this transaction that it is ok to egress. Returns true if there is additional pending egress 

Definition at line 810 of file H\+T\+T\+P\+Transaction.\+cpp.



References cumulative\+Ratio\+\_\+, egress\+Calls\+\_\+, is\+Enqueued(), priority\+Sample\+\_\+, send\+Deferred\+Body(), and update\+Relative\+Weight().



Referenced by Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow().


\begin{DoxyCode}
810                                                                          \{
811   DestructorGuard g(\textcolor{keyword}{this});
812   DCHECK(isEnqueued());
813   \textcolor{keywordflow}{if} (prioritySample_) \{
814     updateRelativeWeight(ratio);
815   \}
816   cumulativeRatio_ += ratio;
817   egressCalls_++;
818   sendDeferredBody(maxEgress);
819   \textcolor{keywordflow}{return} isEnqueued();
820 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!operator=@{operator=}}
\index{operator=@{operator=}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{operator=(const H\+T\+T\+P\+Transaction \&)=delete}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction}\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::operator= (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Transaction} \&}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [delete]}}\label{classproxygen_1_1HTTPTransaction_a55a28c0ac6e1ec737b6b9b3a2971bf56}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!pause\+Egress@{pause\+Egress}}
\index{pause\+Egress@{pause\+Egress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{pause\+Egress()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::pause\+Egress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a9aa4ccd2421c67151b8bbf151e21f320}
Pause egress generation. \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction} may call its Handler\textquotesingle{}s on\+Egress\+Paused() method if there is a state change as a result of this call.

On receiving on\+Egress\+Paused(), the Handler should make a best effort to stop invoking the \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction}\textquotesingle{}s egress generating methods. If the Handler does invoke any of those methods while the transaction is paused, however, the transaction will forward them anyway, unless it is a body event. If flow control is enabled, body events will be buffered for later transmission when egress is unpaused. 

Definition at line 1159 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Paused\+\_\+, and update\+Handler\+Pause\+State().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::resume\+Transactions(), and proxygen\+::\+H\+T\+T\+P\+Session\+::update\+Write\+Buf\+Size().


\begin{DoxyCode}
1159                                   \{
1160   VLOG(4) << \textcolor{stringliteral}{"asked to pause egress "} << *this ;
1161   DestructorGuard g(\textcolor{keyword}{this});
1162   \textcolor{keywordflow}{if} (egressPaused_) \{
1163     VLOG(4) << \textcolor{stringliteral}{"egress already paused "} << *this ;
1164     \textcolor{keywordflow}{return};
1165   \}
1166   egressPaused_ = \textcolor{keyword}{true};
1167   updateHandlerPauseState();
1168 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!pause\+Ingress@{pause\+Ingress}}
\index{pause\+Ingress@{pause\+Ingress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{pause\+Ingress()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::pause\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a70de40060357331a03b389ddfa3256e7}
Pause ingress processing. Upon pause, the \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction} will call its \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport}\textquotesingle{}s \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1HTTPTransaction_a70de40060357331a03b389ddfa3256e7} method. The \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport} should make a best effort to stop invoking the \doxyref{H\+T\+T\+P\+Transaction}{p.}{classproxygen_1_1HTTPTransaction}\textquotesingle{}s on\+Ingress$\ast$ callbacks. If the \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport} does invoke any of those methods while the transaction is paused, however, the transaction will queue the ingress events and data and delay delivery to the Handler until the transaction is unpaused. 

Definition at line 1081 of file H\+T\+T\+P\+Transaction.\+cpp.



References ingress\+Paused\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::pause\+Ingress(), and transport\+\_\+.



Referenced by Proxy\+Service\+::\+Proxy\+Handler\+::on\+Egress\+Paused(), on\+Ingress\+Timeout(), proxygen\+::\+Request\+Handler\+Adaptor\+::pause\+Ingress(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
1081                                    \{
1082   VLOG(4)<< \textcolor{stringliteral}{"pauseIngress request "} << *\textcolor{keyword}{this};
1083   DestructorGuard g(\textcolor{keyword}{this});
1084   \textcolor{keywordflow}{if} (ingressPaused_) \{
1085     VLOG(4) << \textcolor{stringliteral}{"can't pause ingress; ingressPaused="} << ingressPaused_;
1086     \textcolor{keywordflow}{return};
1087   \}
1088   ingressPaused_ = \textcolor{keyword}{true};
1089   cancelTimeout();
1090   transport_.pauseIngress(\textcolor{keyword}{this});
1091 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+Body@{process\+Ingress\+Body}}
\index{process\+Ingress\+Body@{process\+Ingress\+Body}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ chain, size\+\_\+t len)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{chain, }
\item[{size\+\_\+t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a0e0d2e99d0604ab973cd67a374184b0e}


Definition at line 279 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, flush\+Window\+Update(), proxygen\+::\+Window\+::get\+Capacity(), handler\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::is\+Draining(), is\+Ingress\+Complete(), is\+Ingress\+E\+O\+M\+Seen(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Ingress\+Body\+Processed(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Body(), recv\+To\+Ack\+\_\+, recv\+Window\+\_\+, refresh\+Timeout(), transport\+\_\+, and use\+Flow\+Control\+\_\+.



Referenced by on\+Ingress\+Body(), and resume\+Ingress().


\begin{DoxyCode}
279                                                                             \{
280   FOLLY\_SCOPED\_TRACE\_SECTION(\textcolor{stringliteral}{"HTTPTransaction - processIngressBody"});
281   DestructorGuard g(\textcolor{keyword}{this});
282   \textcolor{keywordflow}{if} (aborted_) \{
283     \textcolor{keywordflow}{return};
284   \}
285   refreshTimeout();
286   transport_.notifyIngressBodyProcessed(len);
287   \textcolor{keywordflow}{if} (handler_) \{
288     \textcolor{keywordflow}{if} (!isIngressComplete()) \{
289       handler_->onBody(std::move(chain));
290     \}
291 
292     \textcolor{keywordflow}{if} (useFlowControl_ && !isIngressEOMSeen()) \{
293       recvToAck_ += len;
294       \textcolor{keywordflow}{if} (recvToAck_ > 0) \{
295         uint32\_t divisor = 2;
296         \textcolor{keywordflow}{if} (transport_.isDraining()) \{
297           \textcolor{comment}{// only send window updates for draining transports when window is}
298           \textcolor{comment}{// closed}
299           divisor = 1;
300         \}
301         \textcolor{keywordflow}{if} (uint32\_t(recvToAck_) >= (recvWindow_.getCapacity() / divisor)) \{
302           flushWindowUpdate();
303         \}
304       \}
305     \} \textcolor{comment}{// else don't care about window updates}
306   \}
307 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+Chunk\+Complete@{process\+Ingress\+Chunk\+Complete}}
\index{process\+Ingress\+Chunk\+Complete@{process\+Ingress\+Chunk\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+Chunk\+Complete()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+Chunk\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_acdd10519941d283b375243d7420d6fa2}


Definition at line 350 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, handler\+\_\+, is\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Chunk\+Complete(), and refresh\+Timeout().



Referenced by on\+Ingress\+Chunk\+Complete(), and resume\+Ingress().


\begin{DoxyCode}
350                                                   \{
351   DestructorGuard g(\textcolor{keyword}{this});
352   \textcolor{keywordflow}{if} (aborted_) \{
353     \textcolor{keywordflow}{return};
354   \}
355   refreshTimeout();
356   \textcolor{keywordflow}{if} (handler_ && !isIngressComplete()) \{
357     handler_->onChunkComplete();
358   \}
359 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+Chunk\+Header@{process\+Ingress\+Chunk\+Header}}
\index{process\+Ingress\+Chunk\+Header@{process\+Ingress\+Chunk\+Header}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+Chunk\+Header(size\+\_\+t length)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+Chunk\+Header (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{length}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_acf377e6941a4b536de594a81cbe06d8b}


Definition at line 324 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, handler\+\_\+, is\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Chunk\+Header(), and refresh\+Timeout().



Referenced by on\+Ingress\+Chunk\+Header(), and resume\+Ingress().


\begin{DoxyCode}
324                                                              \{
325   DestructorGuard g(\textcolor{keyword}{this});
326   \textcolor{keywordflow}{if} (aborted_) \{
327     \textcolor{keywordflow}{return};
328   \}
329   refreshTimeout();
330   \textcolor{keywordflow}{if} (handler_ && !isIngressComplete()) \{
331     handler_->onChunkHeader(length);
332   \}
333 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+E\+OM@{process\+Ingress\+E\+OM}}
\index{process\+Ingress\+E\+OM@{process\+Ingress\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+E\+O\+M()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a6df2dac550e90e25d05a86e6f6050944}


Definition at line 457 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, handler\+\_\+, is\+Ingress\+Complete(), mark\+Egress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+E\+O\+M(), update\+Read\+Timeout(), and validate\+Ingress\+State\+Transition().



Referenced by on\+Ingress\+E\+O\+M(), and resume\+Ingress().


\begin{DoxyCode}
457                                         \{
458   DestructorGuard g(\textcolor{keyword}{this});
459   \textcolor{keywordflow}{if} (aborted_) \{
460     \textcolor{keywordflow}{return};
461   \}
462   VLOG(4) << \textcolor{stringliteral}{"ingress EOM on "} << *\textcolor{keyword}{this};
463   \textcolor{keyword}{const} \textcolor{keywordtype}{bool} wasComplete = isIngressComplete();
464   \textcolor{keywordflow}{if} (!validateIngressStateTransition(
465         HTTPTransactionIngressSM::Event::eomFlushed)) \{
466     \textcolor{keywordflow}{return};
467   \}
468   \textcolor{keywordflow}{if} (handler_) \{
469     \textcolor{keywordflow}{if} (!wasComplete) \{
470       handler_->onEOM();
471     \}
472   \} \textcolor{keywordflow}{else} \{
473     markEgressComplete();
474   \}
475   updateReadTimeout();
476 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+Headers\+Complete@{process\+Ingress\+Headers\+Complete}}
\index{process\+Ingress\+Headers\+Complete@{process\+Ingress\+Headers\+Complete}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+Headers\+Complete(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Message $>$ msg)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+Headers\+Complete (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aa82560a6af2507dd29b6429df4e495f8}


Definition at line 204 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, handler\+\_\+, is\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Headers\+Complete(), and refresh\+Timeout().



Referenced by on\+Ingress\+Headers\+Complete(), and resume\+Ingress().


\begin{DoxyCode}
205                                     \{
206   DestructorGuard g(\textcolor{keyword}{this});
207   \textcolor{keywordflow}{if} (aborted_) \{
208     \textcolor{keywordflow}{return};
209   \}
210   refreshTimeout();
211   \textcolor{keywordflow}{if} (handler_ && !isIngressComplete()) \{
212     handler_->onHeadersComplete(std::move(msg));
213   \}
214 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+Trailers@{process\+Ingress\+Trailers}}
\index{process\+Ingress\+Trailers@{process\+Ingress\+Trailers}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+Trailers(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Headers $>$ trailers)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+Trailers (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Headers} $>$}]{trailers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aa42ddb3266af71bfe85f7d925f687137}


Definition at line 377 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, handler\+\_\+, is\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Trailers(), and refresh\+Timeout().



Referenced by on\+Ingress\+Trailers(), and resume\+Ingress().


\begin{DoxyCode}
377                                                                              \{
378   DestructorGuard g(\textcolor{keyword}{this});
379   \textcolor{keywordflow}{if} (aborted_) \{
380     \textcolor{keywordflow}{return};
381   \}
382   refreshTimeout();
383   \textcolor{keywordflow}{if} (handler_ && !isIngressComplete()) \{
384     handler_->onTrailers(std::move(trailers));
385   \}
386 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!process\+Ingress\+Upgrade@{process\+Ingress\+Upgrade}}
\index{process\+Ingress\+Upgrade@{process\+Ingress\+Upgrade}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{process\+Ingress\+Upgrade(\+Upgrade\+Protocol protocol)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::process\+Ingress\+Upgrade (
\begin{DoxyParamCaption}
\item[{{\bf Upgrade\+Protocol}}]{protocol}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a81313661e5baf7b3ccacb41a9275eafb}


Definition at line 403 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, handler\+\_\+, is\+Ingress\+Complete(), and proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Upgrade().



Referenced by on\+Ingress\+Upgrade(), and resume\+Ingress().


\begin{DoxyCode}
403                                                                     \{
404   DestructorGuard g(\textcolor{keyword}{this});
405   \textcolor{keywordflow}{if} (aborted_) \{
406     \textcolor{keywordflow}{return};
407   \}
408   \textcolor{keywordflow}{if} (handler_ && !isIngressComplete()) \{
409     handler_->onUpgrade(protocol);
410   \}
411 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!rate\+Limit\+Timeout\+Expired@{rate\+Limit\+Timeout\+Expired}}
\index{rate\+Limit\+Timeout\+Expired@{rate\+Limit\+Timeout\+Expired}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{rate\+Limit\+Timeout\+Expired()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::rate\+Limit\+Timeout\+Expired (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a030cb3bae08736b2a9e57877f31cf9c0}


Definition at line 948 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Rate\+Limited\+\_\+, and notify\+Transport\+Pending\+Egress().


\begin{DoxyCode}
948                                               \{
949   egressRateLimited_ = \textcolor{keyword}{false};
950   notifyTransportPendingEgress();
951 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!refresh\+Timeout@{refresh\+Timeout}}
\index{refresh\+Timeout@{refresh\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{refresh\+Timeout()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::refresh\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a69018258957a810d1753820660d91245}
Schedule or refresh the timeout for this transaction 

Definition at line 1100 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), process\+Ingress\+Body(), process\+Ingress\+Chunk\+Complete(), process\+Ingress\+Chunk\+Header(), process\+Ingress\+Headers\+Complete(), process\+Ingress\+Trailers(), proxygen\+::\+Request\+Handler\+Adaptor\+::refresh\+Timeout(), set\+Idle\+Timeout(), and update\+Read\+Timeout().


\begin{DoxyCode}
1100                         \{
1101     \textcolor{keywordflow}{if} (timer_ && hasIdleTimeout()) \{
1102       timer_->scheduleTimeout(\textcolor{keyword}{this}, transactionTimeout_.value());
1103     \}
1104   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!remove\+Ex\+Transaction@{remove\+Ex\+Transaction}}
\index{remove\+Ex\+Transaction@{remove\+Ex\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{remove\+Ex\+Transaction(\+H\+T\+T\+P\+Codec\+::\+Stream\+I\+D ex\+Stream\+Id)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::remove\+Ex\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}}]{ex\+Stream\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_aab7131e658a2eacc86914685c003afe4}
Remove the ex\+Txn ID from the control stream txn. 

Definition at line 1093 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::detach().


\begin{DoxyCode}
1093                                                          \{
1094     exTransactions_.erase(exStreamId);
1095   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!remove\+Pushed\+Transaction@{remove\+Pushed\+Transaction}}
\index{remove\+Pushed\+Transaction@{remove\+Pushed\+Transaction}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{remove\+Pushed\+Transaction(\+H\+T\+T\+P\+Codec\+::\+Stream\+I\+D push\+Stream\+Id)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::remove\+Pushed\+Transaction (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}}]{push\+Stream\+Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_afd16bfd0f4dd9626f55471dbb7686e62}
Remove the pushed txn ID from the set of pushed txns associated with this txn. 

Definition at line 1086 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::detach().


\begin{DoxyCode}
1086                                                                \{
1087     pushedTransactions_.erase(pushStreamId);
1088   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!remove\+Waiting\+For\+Replay\+Safety@{remove\+Waiting\+For\+Replay\+Safety}}
\index{remove\+Waiting\+For\+Replay\+Safety@{remove\+Waiting\+For\+Replay\+Safety}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{remove\+Waiting\+For\+Replay\+Safety(folly\+::\+Async\+Transport\+::\+Replay\+Safety\+Callback $\ast$callback)}]{\setlength{\rightskip}{0pt plus 5cm}virtual void proxygen\+::\+H\+T\+T\+P\+Transaction\+::remove\+Waiting\+For\+Replay\+Safety (
\begin{DoxyParamCaption}
\item[{folly\+::\+Async\+Transport\+::\+Replay\+Safety\+Callback $\ast$}]{callback}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a0552d8b36083cae6016f3170de75b106}
Remove a callback waiting for replay protection (if it was canceled). 

Definition at line 1184 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1185                                                          \{
1186     transport_.removeWaitingForReplaySafety(callback);
1187   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!reset@{reset}}
\index{reset@{reset}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{reset(bool use\+Flow\+Control, uint32\+\_\+t receive\+Initial\+Window\+Size, uint32\+\_\+t receive\+Stream\+Window\+Size, uint32\+\_\+t send\+Initial\+Window\+Size)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::reset (
\begin{DoxyParamCaption}
\item[{bool}]{use\+Flow\+Control, }
\item[{uint32\+\_\+t}]{receive\+Initial\+Window\+Size, }
\item[{uint32\+\_\+t}]{receive\+Stream\+Window\+Size, }
\item[{uint32\+\_\+t}]{send\+Initial\+Window\+Size}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a2ef41693d605402f44b89b8652feb8c9}


Definition at line 149 of file H\+T\+T\+P\+Transaction.\+cpp.



References recv\+Window\+\_\+, send\+Window\+\_\+, proxygen\+::\+Window\+::set\+Capacity(), set\+Receive\+Window(), and use\+Flow\+Control\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Native\+Protocol\+Upgrade\+Impl().


\begin{DoxyCode}
152                                                             \{
153   useFlowControl_ = useFlowControl;
154   recvWindow_.setCapacity(receiveInitialWindowSize);
155   setReceiveWindow(receiveStreamWindowSize);
156   sendWindow_.setCapacity(sendInitialWindowSize);
157 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!resume\+Egress@{resume\+Egress}}
\index{resume\+Egress@{resume\+Egress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{resume\+Egress()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::resume\+Egress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_af50de2d1a784ae9eeb207473781103e0}
Resume egress generation. The Handler\textquotesingle{}s on\+Egress\+Resumed() will not be invoked if the H\+T\+T\+P/2 send window is full or there is too much buffered egress data on this transaction already. In that case, once the send window is not full or the buffer usage decreases, the handler will finally get on\+Egress\+Resumed(). 

Definition at line 1170 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Paused\+\_\+, and update\+Handler\+Pause\+State().


\begin{DoxyCode}
1170                                    \{
1171   VLOG(4) << \textcolor{stringliteral}{"asked to resume egress"} << *\textcolor{keyword}{this};
1172   DestructorGuard g(\textcolor{keyword}{this});
1173   \textcolor{keywordflow}{if} (!egressPaused_) \{
1174     VLOG(4) << \textcolor{stringliteral}{"egress already not paused"} << *\textcolor{keyword}{this};
1175     \textcolor{keywordflow}{return};
1176   \}
1177   egressPaused_ = \textcolor{keyword}{false};
1178   updateHandlerPauseState();
1179 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!resume\+Ingress@{resume\+Ingress}}
\index{resume\+Ingress@{resume\+Ingress}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{resume\+Ingress()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::resume\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_ae964af29eff98740360a8d7a02b88720}
Resume ingress processing. Only useful after a call to \doxyref{pause\+Ingress()}{p.}{classproxygen_1_1HTTPTransaction_a70de40060357331a03b389ddfa3256e7}. 

Definition at line 1093 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Event\+::\+B\+O\+DY, proxygen\+::\+H\+T\+T\+P\+Event\+::\+C\+H\+U\+N\+K\+\_\+\+C\+O\+M\+P\+L\+E\+TE, proxygen\+::\+H\+T\+T\+P\+Event\+::\+C\+H\+U\+N\+K\+\_\+\+H\+E\+A\+D\+ER, deferred\+Ingress\+\_\+, proxygen\+::\+Window\+::free(), proxygen\+::\+H\+T\+T\+P\+Event\+::get\+Event(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+H\+E\+A\+D\+E\+R\+S\+\_\+\+C\+O\+M\+P\+L\+E\+TE, ingress\+Paused\+\_\+, in\+Resume\+\_\+, is\+Ingress\+Complete(), max\+Deferred\+Ingress\+\_\+, proxygen\+::\+H\+T\+T\+P\+Event\+::\+M\+E\+S\+S\+A\+G\+E\+\_\+\+B\+E\+G\+IN, proxygen\+::\+H\+T\+T\+P\+Event\+::\+M\+E\+S\+S\+A\+G\+E\+\_\+\+C\+O\+M\+P\+L\+E\+TE, process\+Ingress\+Body(), process\+Ingress\+Chunk\+Complete(), process\+Ingress\+Chunk\+Header(), process\+Ingress\+E\+O\+M(), process\+Ingress\+Headers\+Complete(), process\+Ingress\+Trailers(), process\+Ingress\+Upgrade(), recv\+Window\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::resume\+Ingress(), proxygen\+::\+H\+T\+T\+P\+Event\+::\+T\+R\+A\+I\+L\+E\+R\+S\+\_\+\+C\+O\+M\+P\+L\+E\+TE, transport\+\_\+, update\+Read\+Timeout(), and proxygen\+::\+H\+T\+T\+P\+Event\+::\+U\+P\+G\+R\+A\+DE.



Referenced by Proxy\+Service\+::\+Proxy\+Handler\+::on\+Egress\+Resumed(), proxygen\+::\+Request\+Handler\+Adaptor\+::resume\+Ingress(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
1093                                     \{
1094   VLOG(4) << \textcolor{stringliteral}{"resumeIngress request "} << *\textcolor{keyword}{this};
1095   DestructorGuard g(\textcolor{keyword}{this});
1096   \textcolor{keywordflow}{if} (!ingressPaused_ || isIngressComplete()) \{
1097     VLOG(4) << \textcolor{stringliteral}{"can't resume ingress, ingressPaused="} << ingressPaused_
1098             << \textcolor{stringliteral}{", ingressComplete="} << isIngressComplete()
1099             << \textcolor{stringliteral}{", inResume\_="} << inResume_ << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
1100     \textcolor{keywordflow}{return};
1101   \}
1102   ingressPaused_ = \textcolor{keyword}{false};
1103   transport_.resumeIngress(\textcolor{keyword}{this});
1104   \textcolor{keywordflow}{if} (inResume_) \{
1105     VLOG(4) << \textcolor{stringliteral}{"skipping recursive resume loop "} << *\textcolor{keyword}{this};
1106     \textcolor{keywordflow}{return};
1107   \}
1108   inResume_ = \textcolor{keyword}{true};
1109 
1110   \textcolor{keywordflow}{if} (deferredIngress_ && (maxDeferredIngress\_ <= deferredIngress\_->size())) \{
1111     maxDeferredIngress_ = deferredIngress_->size();
1112   \}
1113 
1114   \textcolor{comment}{// Process any deferred ingress callbacks}
1115   \textcolor{comment}{// Note: we recheck the ingressPaused\_ state because a callback}
1116   \textcolor{comment}{// invoked by the resumeIngress() call above could have re-paused}
1117   \textcolor{comment}{// the transaction.}
1118   \textcolor{keywordflow}{while} (!ingressPaused_ && deferredIngress_ && !deferredIngress_->empty()) \{
1119     HTTPEvent& callback(deferredIngress_->front());
1120     VLOG(5) << \textcolor{stringliteral}{"Processing deferred ingress callback of type "}
1121             << callback.getEvent() << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
1122     \textcolor{keywordflow}{switch} (callback.getEvent()) \{
1123       \textcolor{keywordflow}{case} HTTPEvent::Type::MESSAGE_BEGIN:
1124         LOG(FATAL) << \textcolor{stringliteral}{"unreachable"};
1125         \textcolor{keywordflow}{break};
1126       \textcolor{keywordflow}{case} HTTPEvent::Type::HEADERS_COMPLETE:
1127         processIngressHeadersComplete(callback.getHeaders());
1128         \textcolor{keywordflow}{break};
1129       \textcolor{keywordflow}{case} HTTPEvent::Type::BODY: \{
1130         unique\_ptr<IOBuf> data = callback.getBody();
1131         \textcolor{keyword}{auto} len = data->computeChainDataLength();
1132         CHECK(recvWindow_.free(len));
1133         processIngressBody(std::move(data), len);
1134       \} \textcolor{keywordflow}{break};
1135       \textcolor{keywordflow}{case} HTTPEvent::Type::CHUNK_HEADER:
1136         processIngressChunkHeader(callback.getChunkLength());
1137         \textcolor{keywordflow}{break};
1138       \textcolor{keywordflow}{case} HTTPEvent::Type::CHUNK_COMPLETE:
1139         processIngressChunkComplete();
1140         \textcolor{keywordflow}{break};
1141       \textcolor{keywordflow}{case} HTTPEvent::Type::TRAILERS_COMPLETE:
1142         processIngressTrailers(callback.getTrailers());
1143         \textcolor{keywordflow}{break};
1144       \textcolor{keywordflow}{case} HTTPEvent::Type::MESSAGE_COMPLETE:
1145         processIngressEOM();
1146         \textcolor{keywordflow}{break};
1147       \textcolor{keywordflow}{case} HTTPEvent::Type::UPGRADE:
1148         processIngressUpgrade(callback.getUpgradeProtocol());
1149         \textcolor{keywordflow}{break};
1150     \}
1151     \textcolor{keywordflow}{if} (deferredIngress_) \{
1152       deferredIngress_->pop();
1153     \}
1154   \}
1155   updateReadTimeout();
1156   inResume_ = \textcolor{keyword}{false};
1157 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Abort@{send\+Abort}}
\index{send\+Abort@{send\+Abort}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Abort()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Abort (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a28e1edd6a2239064cc243291f4272234}
Terminate the transaction. Depending on the underlying protocol, this may cause the connection to close or write egress bytes. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest.

This function may also cause additional callbacks such as detach\+Transaction() to the handler either immediately or after it returns. 

Definition at line 1056 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+C\+A\+N\+C\+EL, proxygen\+::\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+E\+R\+R\+OR, and is\+Upstream().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::handle\+Error\+Directly(), proxygen\+::\+Codec\+Error\+Response\+Handler\+::on\+Error(), Proxy\+Service\+::\+Proxy\+Handler\+::on\+Error(), on\+Error(), on\+Ingress\+Body(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Set\+Send\+Window(), on\+Ingress\+Window\+Update(), proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Abort(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::terminate(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
1056                                 \{
1057   sendAbort(isUpstream() ? ErrorCode::CANCEL
1058                          : ErrorCode::INTERNAL_ERROR);
1059 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Abort@{send\+Abort}}
\index{send\+Abort@{send\+Abort}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Abort(\+Error\+Code status\+Code)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Abort (
\begin{DoxyParamCaption}
\item[{{\bf Error\+Code}}]{status\+Code}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a28679a697180f37a6f80b412b37ab478}
Implementation of sending an abort for this transaction. 

Definition at line 1061 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::header\+Bytes\+Generated(), mark\+Egress\+Complete(), mark\+Ingress\+Complete(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Abort(), transport\+\_\+, and transport\+Callback\+\_\+.


\begin{DoxyCode}
1061                                                     \{
1062   DestructorGuard g(\textcolor{keyword}{this});
1063   markIngressComplete();
1064   markEgressComplete();
1065   \textcolor{keywordflow}{if} (aborted_) \{
1066     \textcolor{comment}{// This can happen in cases where the abort is sent before notifying the}
1067     \textcolor{comment}{// handler, but its logic also wants to abort}
1068     VLOG(4) << \textcolor{stringliteral}{"skipping redundant abort"};
1069     \textcolor{keywordflow}{return};
1070   \}
1071   VLOG(4) << \textcolor{stringliteral}{"aborting transaction "} << *\textcolor{keyword}{this};
1072   aborted_ = \textcolor{keyword}{true};
1073   \textcolor{keywordtype}{size\_t} nbytes = transport_.sendAbort(\textcolor{keyword}{this}, statusCode);
1074   \textcolor{keywordflow}{if} (transportCallback_) \{
1075     HTTPHeaderSize size;
1076     size.uncompressed = nbytes;
1077     transportCallback_->headerBytesGenerated(size);
1078   \}
1079 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Body@{send\+Body}}
\index{send\+Body@{send\+Body}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{body}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_aea212f62c9bfdd6facd1667a624abce6}
Send part or all of the egress message body to the \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport}. If flow control is enabled, the chunk boundaries may not be respected. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest. Note\+: This method may be called zero or more times per message.


\begin{DoxyParams}{Parameters}
{\em body} & Message body data; the \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport} will take care of applying any necessary protocol framing, such as chunk headers. \\
\hline
\end{DoxyParams}


Reimplemented in {\bf proxygen\+::\+Mock\+H\+T\+T\+P\+Transaction} \doxyref{}{p.}{classproxygen_1_1MockHTTPTransaction_ab366b5d7bbee5e4970697314724688e5}.



Definition at line 781 of file H\+T\+T\+P\+Transaction.\+cpp.



References actual\+Response\+Length\+\_\+, chunk\+Headers\+\_\+, deferred\+Egress\+Body\+\_\+, egress\+State\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::get\+Codec(), is\+Enqueued(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Egress\+Body\+Buffered(), notify\+Transport\+Pending\+Egress(), proxygen\+::\+H\+T\+T\+P\+Codec\+::supports\+Parallel\+Requests(), proxygen\+::\+State\+Machine$<$ T $>$\+::transit(), and transport\+\_\+.



Referenced by Proxy\+Service\+::\+Proxy\+Handler\+::on\+Body(), proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Headers\+Complete(), proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Body(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Body(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Chunked\+Reply\+With\+Body(), Curl\+Service\+::\+Curl\+Client\+::send\+Request(), and Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow().


\begin{DoxyCode}
781                                                              \{
782   DestructorGuard guard(\textcolor{keyword}{this});
783   \textcolor{keywordtype}{bool} chunking =
784     ((egressState_ == HTTPTransactionEgressSM::State::ChunkHeaderSent) &&
785      !transport_.getCodec().supportsParallelRequests());  \textcolor{comment}{// see sendChunkHeader}
786 
787   CHECK(HTTPTransactionEgressSM::transit(
788       egressState_, HTTPTransactionEgressSM::Event::sendBody));
789 
790   \textcolor{keywordflow}{if} (body) \{
791     \textcolor{keywordtype}{size\_t} bodyLen = body->computeChainDataLength();
792     actualResponseLength_ = actualResponseLength_.value() + bodyLen;
793 
794     \textcolor{keywordflow}{if} (chunking) \{
795       \textcolor{comment}{// Note, this check doesn't account for cases where sendBody is called}
796       \textcolor{comment}{// multiple times for a single chunk, and the total length exceeds the}
797       \textcolor{comment}{// header.}
798       DCHECK(!chunkHeaders_.empty());
799       DCHECK\_LE(bodyLen, chunkHeaders_.back().length)
800         << \textcolor{stringliteral}{"Sent body longer than chunk header "};
801     \}
802     \textcolor{keywordflow}{if} (isEnqueued()) \{
803       transport_.notifyEgressBodyBuffered(bodyLen);
804     \}
805   \}
806   deferredEgressBody_.append(std::move(body));
807   notifyTransportPendingEgress();
808 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Body\+Flow\+Controlled@{send\+Body\+Flow\+Controlled}}
\index{send\+Body\+Flow\+Controlled@{send\+Body\+Flow\+Controlled}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Body\+Flow\+Controlled(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body=nullptr)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Body\+Flow\+Controlled (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{body = {\ttfamily {\bf nullptr}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4eeb74088d636658cb6f16f86e74ab41}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Body\+Now@{send\+Body\+Now}}
\index{send\+Body\+Now@{send\+Body\+Now}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Body\+Now(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body, size\+\_\+t body\+Len, bool eom)}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Body\+Now (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{body, }
\item[{size\+\_\+t}]{body\+Len, }
\item[{bool}]{eom}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aa0acb82e5fec7d6ab61c9e5ac2a54f09}


Definition at line 964 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Limit\+Bytes\+Per\+Ms\+\_\+, egress\+State\+\_\+, enable\+Last\+Byte\+Flushed\+Tracking\+\_\+, proxygen\+::\+F\+L\+O\+W\+\_\+\+C\+O\+N\+T\+R\+O\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::\+Window\+::get\+Capacity(), proxygen\+::\+Window\+::get\+Size(), id\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+S\+S\+\_\+\+A\+N\+D\+\_\+\+E\+G\+R\+E\+SS, ingress\+Error\+Seen\+\_\+, is\+Expecting\+Window\+Update(), is\+Priority\+Sampled(), proxygen\+::k\+Error\+E\+OF, num\+Limited\+Bytes\+Egressed\+\_\+, on\+Error(), proxygen\+::\+Window\+::reserve(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Body(), send\+E\+O\+M\+Now(), send\+Window\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::set\+Codec\+Status\+Code(), proxygen\+::\+Exception\+::set\+Proxygen\+Error(), trailers\+\_\+, proxygen\+::\+State\+Machine$<$ T $>$\+::transit(), transport\+\_\+, update\+Read\+Timeout(), update\+Transaction\+Bytes\+Sent(), and use\+Flow\+Control\+\_\+.



Referenced by send\+Deferred\+Body().


\begin{DoxyCode}
965                                                                   \{
966   \textcolor{keyword}{static} \textcolor{keyword}{const} std::string noneStr = \textcolor{stringliteral}{"None"};
967   DCHECK(body);
968   DCHECK\_GT(bodyLen, 0);
969   \textcolor{keywordtype}{size\_t} nbytes = 0;
970   \textcolor{keywordflow}{if} (useFlowControl_) \{
971     CHECK(sendWindow_.reserve(bodyLen));
972   \}
973   VLOG(4) << \textcolor{stringliteral}{"Sending "} << bodyLen
974           << \textcolor{stringliteral}{" bytes of body. eom="} << ((sendEom) ? \textcolor{stringliteral}{"yes"} : \textcolor{stringliteral}{"no"})
975           << \textcolor{stringliteral}{" send\_window is "}
976           << (useFlowControl_
977                   ? folly::to<std::string>(
978                         sendWindow_.getSize(), \textcolor{stringliteral}{" / "}, sendWindow_.getCapacity())
979                   : noneStr)
980           << \textcolor{stringliteral}{" trailers="} << ((trailers_) ? \textcolor{stringliteral}{"yes"} : \textcolor{stringliteral}{"no"}) << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
981   \textcolor{keywordflow}{if} (sendEom && !trailers_) \{
982     CHECK(HTTPTransactionEgressSM::transit(
983             egressState_, HTTPTransactionEgressSM::Event::eomFlushed));
984   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (ingressErrorSeen_ && isExpectingWindowUpdate()) \{
985     \textcolor{comment}{// I don't know how we got here but we're in trouble.  We need a window}
986     \textcolor{comment}{// update to continue but we've already seen an ingress error.}
987     HTTPException ex(HTTPException::Direction::INGRESS_AND_EGRESS,
988                      folly::to<std::string>(\textcolor{stringliteral}{"window blocked with ingress error,"}
989                                             \textcolor{stringliteral}{" streamID="}, id_));
990     ex.setProxygenError(kErrorEOF);
991     ex.setCodecStatusCode(ErrorCode::FLOW_CONTROL_ERROR);
992     onError(ex);
993     \textcolor{keywordflow}{return} 0;
994   \}
995   updateReadTimeout();
996   nbytes = transport_.sendBody(\textcolor{keyword}{this},
997                                std::move(body),
998                                sendEom && !trailers_,
999                                enableLastByteFlushedTracking_);
1000   \textcolor{keywordflow}{if} (sendEom && trailers_) \{
1001     sendEOMNow();
1002   \}
1003   \textcolor{keywordflow}{if} (isPrioritySampled()) \{
1004     updateTransactionBytesSent(bodyLen);
1005   \}
1006   \textcolor{keywordflow}{if} (egressLimitBytesPerMs_ > 0) \{
1007     numLimitedBytesEgressed_ += nbytes;
1008   \}
1009   \textcolor{keywordflow}{return} nbytes;
1010 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Chunk\+Header@{send\+Chunk\+Header}}
\index{send\+Chunk\+Header@{send\+Chunk\+Header}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Chunk\+Header(size\+\_\+t length)}]{\setlength{\rightskip}{0pt plus 5cm}virtual void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Chunk\+Header (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{length}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a41d3aca9e29174f5f2f2143fb893da5b}
Write any protocol framing required for the subsequent call(s) to \doxyref{send\+Body()}{p.}{classproxygen_1_1HTTPTransaction_aea212f62c9bfdd6facd1667a624abce6}. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest. 
\begin{DoxyParams}{Parameters}
{\em length} & Length in bytes of the body data to follow. \\
\hline
\end{DoxyParams}


Definition at line 825 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+State\+Machine$<$ T $>$\+::transit().



Referenced by proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Chunked\+Reply\+With\+Body(), and proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Chunk\+Header().


\begin{DoxyCode}
825                                               \{
826     CHECK(HTTPTransactionEgressSM::transit(
827             egressState_, HTTPTransactionEgressSM::Event::sendChunkHeader));
828     \textcolor{comment}{// TODO: move this logic down to session/codec}
829     \textcolor{keywordflow}{if} (!transport_.getCodec().supportsParallelRequests()) \{
830       chunkHeaders_.emplace\_back(Chunk(length));
831     \}
832   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Chunk\+Terminator@{send\+Chunk\+Terminator}}
\index{send\+Chunk\+Terminator@{send\+Chunk\+Terminator}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Chunk\+Terminator()}]{\setlength{\rightskip}{0pt plus 5cm}virtual void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Chunk\+Terminator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_ac9d17ac4e14883f779bf670eabc8aaaa}
Write any protocol syntax needed to terminate the data. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest. Frame begun by the last call to \doxyref{send\+Chunk\+Header()}{p.}{classproxygen_1_1HTTPTransaction_a41d3aca9e29174f5f2f2143fb893da5b}. 

Definition at line 840 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+State\+Machine$<$ T $>$\+::transit().



Referenced by proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Chunked\+Reply\+With\+Body(), and proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Chunk\+Terminator().


\begin{DoxyCode}
840                                      \{
841     CHECK(HTTPTransactionEgressSM::transit(
842             egressState_, HTTPTransactionEgressSM::Event::sendChunkTerminator));
843   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Deferred\+Body@{send\+Deferred\+Body}}
\index{send\+Deferred\+Body@{send\+Deferred\+Body}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Deferred\+Body(uint32\+\_\+t max\+Egress)}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Deferred\+Body (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{max\+Egress}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a35558444e6e7864fdc097e1263a27b3c}


Definition at line 823 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::body\+Bytes\+Generated(), chunk\+Headers\+\_\+, deferred\+Egress\+Body\+\_\+, dequeue(), proxygen\+::\+Window\+::get\+Size(), has\+Pending\+E\+O\+M(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Chunk\+::header\+Sent, is\+Egress\+E\+O\+M\+Queued(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Chunk\+::length, maybe\+Delay\+For\+Rate\+Limit(), notify\+Transport\+Pending\+Egress(), send\+Body\+Now(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Chunk\+Header(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Chunk\+Terminator(), send\+E\+O\+M\+Now(), send\+Window\+\_\+, transport\+\_\+, transport\+Callback\+\_\+, and use\+Flow\+Control\+\_\+.



Referenced by on\+Write\+Ready().


\begin{DoxyCode}
823                                                                  \{
824   \textcolor{keyword}{const} int32\_t windowAvailable = sendWindow_.getSize();
825   \textcolor{keyword}{const} uint32\_t sendWindow = useFlowControl_ ? std::min<uint32\_t>(
826     maxEgress, windowAvailable > 0 ? windowAvailable : 0) : maxEgress;
827 
828   \textcolor{comment}{// We shouldn't be called if we have no pending body/EOM, egress is paused, or}
829   \textcolor{comment}{// the send window is closed}
830   CHECK((deferredEgressBody_.chainLength() > 0 ||
831          isEgressEOMQueued()) &&
832         sendWindow > 0);
833 
834   \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} bytesLeft = deferredEgressBody_.chainLength();
835 
836   \textcolor{keywordtype}{size\_t} canSend = std::min<size\_t>(sendWindow, bytesLeft);
837 
838   \textcolor{keywordflow}{if} (maybeDelayForRateLimit()) \{
839     \textcolor{comment}{// Timeout will call notifyTransportPendingEgress again}
840     \textcolor{keywordflow}{return} 0;
841   \}
842 
843   \textcolor{keywordtype}{size\_t} curLen = 0;
844   \textcolor{keywordtype}{size\_t} nbytes = 0;
845   \textcolor{keywordtype}{bool} willSendEOM = \textcolor{keyword}{false};
846 
847   \textcolor{keywordflow}{if} (chunkHeaders_.empty()) \{
848     curLen = canSend;
849     std::unique\_ptr<IOBuf> body = deferredEgressBody_.split(curLen);
850     willSendEOM = hasPendingEOM();
851     DCHECK(curLen > 0 || willSendEOM);
852     \textcolor{keywordflow}{if} (curLen > 0) \{
853       \textcolor{keywordflow}{if} (willSendEOM) \{
854         \textcolor{comment}{// we have to dequeue BEFORE sending the EOM =(}
855         dequeue();
856       \}
857       nbytes = sendBodyNow(std::move(body), curLen, willSendEOM);
858       willSendEOM = \textcolor{keyword}{false};
859     \} \textcolor{comment}{// else we got called with only a pending EOM, handled below}
860   \} \textcolor{keywordflow}{else} \{
861     \textcolor{comment}{// This body is expliticly chunked}
862     \textcolor{keywordflow}{while} (!chunkHeaders_.empty() && canSend > 0) \{
863       Chunk& chunk = chunkHeaders_.front();
864       \textcolor{keywordflow}{if} (!chunk.headerSent) \{
865         nbytes += transport_.sendChunkHeader(\textcolor{keyword}{this}, chunk.length);
866         chunk.headerSent = \textcolor{keyword}{true};
867       \}
868       curLen = std::min<size\_t>(chunk.length, canSend);
869       std::unique\_ptr<folly::IOBuf> cur = deferredEgressBody_.split(curLen);
870       VLOG(4) << \textcolor{stringliteral}{"sending "} << curLen << \textcolor{stringliteral}{" fin=false"};
871       nbytes += sendBodyNow(std::move(cur), curLen, \textcolor{keyword}{false});
872       canSend -= curLen;
873       chunk.length -= curLen;
874       \textcolor{keywordflow}{if} (chunk.length == 0) \{
875         nbytes += transport_.sendChunkTerminator(\textcolor{keyword}{this});
876         chunkHeaders_.pop\_front();
877       \} \textcolor{keywordflow}{else} \{
878         DCHECK\_EQ(canSend, 0);
879       \}
880     \}
881     willSendEOM = hasPendingEOM();
882   \}
883   \textcolor{comment}{// Send any queued eom}
884   \textcolor{keywordflow}{if} (willSendEOM) \{
885     nbytes += sendEOMNow();
886   \}
887 
888   \textcolor{comment}{// Update the handler's pause state}
889   notifyTransportPendingEgress();
890 
891   \textcolor{keywordflow}{if} (transportCallback_) \{
892     transportCallback_->bodyBytesGenerated(nbytes);
893   \}
894   \textcolor{keywordflow}{return} nbytes;
895 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+E\+OM@{send\+E\+OM}}
\index{send\+E\+OM@{send\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+E\+O\+M()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_ad95519e6472228d359c7fb144889f1ac}
Finalize the egress message; depending on the protocol used by the \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport}, this may involve sending an explicit \char`\"{}end
of message\char`\"{} indicator. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest.

If the ingress message also is complete, the transaction may detach itself from the Handler and \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport} and delete itself as part of this method.

Note\+: Either this method or \doxyref{send\+Abort()}{p.}{classproxygen_1_1HTTPTransaction_a28e1edd6a2239064cc243291f4272234} should be called once per message. 

Definition at line 1012 of file H\+T\+T\+P\+Transaction.\+cpp.



References aborted\+\_\+, actual\+Response\+Length\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::body\+Bytes\+Generated(), chunk\+Headers\+\_\+, deferred\+Egress\+Body\+\_\+, egress\+Paused\+\_\+, egress\+State\+\_\+, proxygen\+::\+E\+R\+R\+OR, expected\+Response\+Length\+\_\+, ingress\+Paused\+\_\+, ingress\+State\+\_\+, is\+Enqueued(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::notify\+Pending\+Egress(), notify\+Transport\+Pending\+Egress(), send\+E\+O\+M\+Now(), proxygen\+::\+State\+Machine$<$ T $>$\+::transit(), transport\+\_\+, and transport\+Callback\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+E\+O\+M(), Proxy\+Service\+::\+Proxy\+Handler\+::on\+E\+O\+M(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Chunked\+Reply\+With\+Body(), proxygen\+::\+Request\+Handler\+Adaptor\+::send\+E\+O\+M(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+E\+O\+M(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Reply\+Code(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Reply\+With\+Body(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Request(), Curl\+Service\+::\+Curl\+Client\+::send\+Request(), Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
1012                               \{
1013   DestructorGuard g(\textcolor{keyword}{this});
1014   CHECK(HTTPTransactionEgressSM::transit(
1015       egressState_, HTTPTransactionEgressSM::Event::sendEOM))
1016       << \textcolor{stringliteral}{", "} << *\textcolor{keyword}{this};
1017   \textcolor{keywordflow}{if} (expectedResponseLength_ && actualResponseLength_ &&
1018       (*expectedResponseLength_ != *actualResponseLength_)) \{
1019     \textcolor{keyword}{auto} errorMsg =
1020         folly::to<std::string>(\textcolor{stringliteral}{"Content-Length/body mismatch: expected= "},
1021                                *expectedResponseLength_,
1022                                \textcolor{stringliteral}{", actual= "},
1023                                *actualResponseLength_);
1024     LOG(ERROR) << errorMsg << \textcolor{stringliteral}{" "} << *\textcolor{keyword}{this};
1025   \}
1026 
1027   \textcolor{keywordflow}{if} (deferredEgressBody_.chainLength() == 0 && chunkHeaders_.empty()) \{
1028     \textcolor{comment}{// there is nothing left to send, egress the EOM directly.  For SPDY}
1029     \textcolor{comment}{// this will jump the txn queue}
1030     \textcolor{keywordflow}{if} (!isEnqueued()) \{
1031       \textcolor{keywordtype}{size\_t} nbytes = sendEOMNow();
1032       transport_.notifyPendingEgress();
1033       \textcolor{keywordflow}{if} (transportCallback_) \{
1034         transportCallback_->bodyBytesGenerated(nbytes);
1035       \}
1036     \} \textcolor{keywordflow}{else} \{
1037       \textcolor{comment}{// If the txn is enqueued, sendDeferredBody()}
1038       \textcolor{comment}{// should take care of sending the EOM.}
1039       \textcolor{comment}{// This can happen for some uses of the egress queue}
1040       VLOG(4) << \textcolor{stringliteral}{"Queued egress EOM with no body"}
1041               << \textcolor{stringliteral}{"[egressState="} << egressState_ << \textcolor{stringliteral}{", "}
1042               << \textcolor{stringliteral}{"ingressState="} << ingressState_ << \textcolor{stringliteral}{", "}
1043               << \textcolor{stringliteral}{"egressPaused="} << egressPaused_ << \textcolor{stringliteral}{", "}
1044               << \textcolor{stringliteral}{"ingressPaused="} << ingressPaused_ << \textcolor{stringliteral}{", "}
1045               << \textcolor{stringliteral}{"aborted="} << aborted_ << \textcolor{stringliteral}{", "}
1046               << \textcolor{stringliteral}{"enqueued="} << isEnqueued() << \textcolor{stringliteral}{", "}
1047               << \textcolor{stringliteral}{"chainLength="} << deferredEgressBody_.chainLength() << \textcolor{stringliteral}{"]"}
1048               << \textcolor{stringliteral}{" on "} << *\textcolor{keyword}{this};
1049     \}
1050   \} \textcolor{keywordflow}{else} \{
1051     VLOG(4) << \textcolor{stringliteral}{"Queued egress EOM on "} << *\textcolor{keyword}{this};
1052     notifyTransportPendingEgress();
1053   \}
1054 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+E\+O\+M\+Now@{send\+E\+O\+M\+Now}}
\index{send\+E\+O\+M\+Now@{send\+E\+O\+M\+Now}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+E\+O\+M\+Now()}]{\setlength{\rightskip}{0pt plus 5cm}size\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+E\+O\+M\+Now (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a471d51265eceb6262ac25f9cf115f105}


Definition at line 953 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+State\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+E\+O\+M(), trailers\+\_\+, proxygen\+::\+State\+Machine$<$ T $>$\+::transit(), and transport\+\_\+.



Referenced by send\+Body\+Now(), send\+Deferred\+Body(), and send\+E\+O\+M().


\begin{DoxyCode}
953                                    \{
954   VLOG(4) << \textcolor{stringliteral}{"egress EOM on "} << *\textcolor{keyword}{this};
955   \textcolor{comment}{// TODO: with ByteEvent refactor, we will have to delay changing this}
956   \textcolor{comment}{// state until later}
957   CHECK(HTTPTransactionEgressSM::transit(
958           egressState_, HTTPTransactionEgressSM::Event::eomFlushed));
959   \textcolor{keywordtype}{size\_t} nbytes = transport_.sendEOM(\textcolor{keyword}{this}, trailers_.get());
960   trailers_.reset();
961   \textcolor{keywordflow}{return} nbytes;
962 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Headers@{send\+Headers}}
\index{send\+Headers@{send\+Headers}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Headers(const H\+T\+T\+P\+Message \&headers)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Headers (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Message} \&}]{headers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a18c3300cbce5fcdb167dbfb6cc073e65}
Send the egress message headers to the \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport}. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest. Note\+: This method should be called once per message unless the first headers sent indicate a 1xx status.

send\+Headers will not set E\+OM flag in header frame, whereas send\+Headers\+With\+E\+OM will. send\+Headers\+With\+Optional\+E\+OM backs both of them.


\begin{DoxyParams}{Parameters}
{\em headers} & Message headers \\
\hline
\end{DoxyParams}


Definition at line 777 of file H\+T\+T\+P\+Transaction.\+cpp.



References send\+Headers\+With\+Optional\+E\+O\+M().



Referenced by proxygen\+::\+H\+T\+T\+P\+Direct\+Response\+Handler\+::on\+Headers\+Complete(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Chunked\+Reply\+With\+Body(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Headers(), proxygen\+::\+Request\+Handler\+Adaptor\+::send\+Headers(), proxygen\+::\+Mock\+H\+T\+T\+P\+Push\+Handler\+::send\+Push\+Headers(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Request(), Curl\+Service\+::\+Curl\+Client\+::send\+Request(), and Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow().


\begin{DoxyCode}
777                                                            \{
778   sendHeadersWithOptionalEOM(header, \textcolor{keyword}{false});
779 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Headers\+With\+E\+OM@{send\+Headers\+With\+E\+OM}}
\index{send\+Headers\+With\+E\+OM@{send\+Headers\+With\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Headers\+With\+E\+O\+M(const H\+T\+T\+P\+Message \&headers)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Headers\+With\+E\+OM (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Message} \&}]{headers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a2a0b9456073184f5b19efccaf5b08c13}


Definition at line 773 of file H\+T\+T\+P\+Transaction.\+cpp.



References send\+Headers\+With\+Optional\+E\+O\+M().


\begin{DoxyCode}
773                                                                   \{
774   sendHeadersWithOptionalEOM(header, \textcolor{keyword}{true});
775 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Headers\+With\+Optional\+E\+OM@{send\+Headers\+With\+Optional\+E\+OM}}
\index{send\+Headers\+With\+Optional\+E\+OM@{send\+Headers\+With\+Optional\+E\+OM}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Headers\+With\+Optional\+E\+O\+M(const H\+T\+T\+P\+Message \&headers, bool eom)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Headers\+With\+Optional\+E\+OM (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Message} \&}]{headers, }
\item[{bool}]{eom}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a2bd620e0eb5287c2b63a1a228d7c50e0}


Definition at line 728 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::body\+Bytes\+Generated(), egress\+State\+\_\+, proxygen\+::\+E\+R\+R\+OR, expected\+Response\+Length\+\_\+, flush\+Window\+Update(), proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::get\+Codec(), proxygen\+::\+H\+T\+T\+P\+Codec\+::get\+Compression\+Info(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Method(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Single\+Or\+Empty(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Status\+Code(), proxygen\+::\+H\+E\+AD, proxygen\+::\+H\+T\+T\+P\+Transaction\+Transport\+Callback\+::header\+Bytes\+Generated(), head\+Request\+\_\+, is\+Egress\+Complete(), is\+Pushed(), proxygen\+::\+H\+T\+T\+P\+Message\+::is\+Request(), proxygen\+::\+H\+T\+T\+P\+Message\+::is\+Response(), last\+Response\+Status\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Headers(), proxygen\+::\+State\+Machine$<$ T $>$\+::transit(), transport\+\_\+, transport\+Callback\+\_\+, and update\+Egress\+Compression\+Info().



Referenced by send\+Headers(), and send\+Headers\+With\+E\+O\+M().


\begin{DoxyCode}
730               \{
731   CHECK(HTTPTransactionEgressSM::transit(
732           egressState_, HTTPTransactionEgressSM::Event::sendHeaders));
733   DCHECK(!isEgressComplete());
734   \textcolor{keywordflow}{if} (!headers.isRequest() && !isPushed()) \{
735     lastResponseStatus_ = headers.getStatusCode();
736   \}
737   \textcolor{keywordflow}{if} (headers.isRequest()) \{
738     headRequest_ = (headers.getMethod() == HTTPMethod::HEAD);
739   \}
740 
741   \textcolor{keywordflow}{if} (headers.isResponse() && !headRequest_) \{
742     \textcolor{keyword}{const} \textcolor{keyword}{auto}& contentLen =
743       headers.getHeaders().getSingleOrEmpty(HTTP\_HEADER\_CONTENT\_LENGTH);
744     \textcolor{keywordflow}{if} (!contentLen.empty()) \{
745       \textcolor{keywordflow}{try} \{
746         expectedResponseLength_ = folly::to<uint64\_t>(contentLen);
747       \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} folly::ConversionError& ex) \{
748         LOG(ERROR) << \textcolor{stringliteral}{"Invalid content-length: "} << contentLen <<
749           \textcolor{stringliteral}{", ex="} << ex.what() << *\textcolor{keyword}{this};
750       \}
751     \}
752   \}
753   HTTPHeaderSize size;
754   transport_.sendHeaders(\textcolor{keyword}{this}, headers, &size, eom);
755   \textcolor{keywordflow}{if} (transportCallback_) \{
756     transportCallback_->headerBytesGenerated(size);
757   \}
758   updateEgressCompressionInfo(transport_.getCodec().getCompressionInfo());
759   \textcolor{keywordflow}{if} (eom) \{
760     CHECK(HTTPTransactionEgressSM::transit(
761           egressState_, HTTPTransactionEgressSM::Event::sendEOM));
762     \textcolor{comment}{// trailers are supported in this case:}
763     \textcolor{comment}{// trailers are for chunked encoding-transfer of a body}
764     \textcolor{keywordflow}{if} (transportCallback_) \{
765       transportCallback_->bodyBytesGenerated(0);
766     \}
767     CHECK(HTTPTransactionEgressSM::transit(
768           egressState_, HTTPTransactionEgressSM::Event::eomFlushed));
769   \}
770   flushWindowUpdate();
771 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Trailers@{send\+Trailers}}
\index{send\+Trailers@{send\+Trailers}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Trailers(const H\+T\+T\+P\+Headers \&trailers)}]{\setlength{\rightskip}{0pt plus 5cm}virtual void proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Trailers (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Headers} \&}]{trailers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_a79867ce37125b3477dedfba888406826}
Send message trailers to the \doxyref{Transport}{p.}{classproxygen_1_1HTTPTransaction_1_1Transport}. This method does not actually write the message out on the wire immediately. All writes happen at the end of the event loop at the earliest. Note\+: This method may be called at most once per message.


\begin{DoxyParams}{Parameters}
{\em trailers} & Message trailers. \\
\hline
\end{DoxyParams}


Definition at line 853 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+State\+Machine$<$ T $>$\+::transit().



Referenced by proxygen\+::\+Response\+Builder\+::send(), proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Chunked\+Reply\+With\+Body(), and proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Reply\+With\+Body().


\begin{DoxyCode}
853                                                          \{
854     CHECK(HTTPTransactionEgressSM::transit(
855             egressState_, HTTPTransactionEgressSM::Event::sendTrailers));
856     trailers_.reset(\textcolor{keyword}{new} HTTPHeaders(trailers));
857   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Egress\+Rate\+Limit@{set\+Egress\+Rate\+Limit}}
\index{set\+Egress\+Rate\+Limit@{set\+Egress\+Rate\+Limit}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Egress\+Rate\+Limit(uint64\+\_\+t bits\+Per\+Second)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Egress\+Rate\+Limit (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{bits\+Per\+Second}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a6ad638cc955677912c4c10d8b6ddf8ff}
Specify a rate limit for egressing bytes. The transaction will buffer extra bytes if doing so would cause it to go over the specified rate limit. Setting to a value of 0 will cause no rate-\/limiting to occur. 

Definition at line 1181 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Limit\+Bytes\+Per\+Ms\+\_\+, proxygen\+::get\+Current\+Time(), num\+Limited\+Bytes\+Egressed\+\_\+, and start\+Rate\+Limit\+\_\+.


\begin{DoxyCode}
1181                                                                \{
1182   egressLimitBytesPerMs_ = bitsPerSecond / 8000;
1183   \textcolor{keywordflow}{if} (bitsPerSecond > 0 && egressLimitBytesPerMs_ == 0) \{
1184     VLOG(4) << \textcolor{stringliteral}{"ratelim: Limit too low ("} << bitsPerSecond << \textcolor{stringliteral}{"), ignoring"};
1185   \}
1186   startRateLimit_ = getCurrentTime();
1187   numLimitedBytesEgressed_ = 0;
1188 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Handler@{set\+Handler}}
\index{set\+Handler@{set\+Handler}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Handler(\+Handler $\ast$handler)}]{\setlength{\rightskip}{0pt plus 5cm}virtual void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf Handler} $\ast$}]{handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_aed1062c04055fbc76ae236df643b9dc6}


Definition at line 477 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::set\+Transaction().



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::handle\+Error\+Directly(), proxygen\+::\+H\+T\+T\+P\+Session\+::new\+Ex\+Transaction(), proxygen\+::\+H\+T\+T\+P\+Session\+::new\+Pushed\+Transaction(), proxygen\+::\+Mock\+H\+T\+T\+P\+Transaction\+::set\+Handler\+Unmocked(), proxygen\+::\+H\+T\+T\+P\+Downstream\+Session\+::setup\+On\+Headers\+Complete(), Downstream\+Transaction\+Test\+::setup\+Request\+Response\+Flow(), T\+E\+S\+T(), and T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
477                                             \{
478     handler_ = handler;
479     \textcolor{keywordflow}{if} (handler_) \{
480       handler_->setTransaction(\textcolor{keyword}{this});
481     \}
482   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Idle\+Timeout@{set\+Idle\+Timeout}}
\index{set\+Idle\+Timeout@{set\+Idle\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Idle\+Timeout(std\+::chrono\+::milliseconds transaction\+Timeout)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Idle\+Timeout (
\begin{DoxyParamCaption}
\item[{std\+::chrono\+::milliseconds}]{transaction\+Timeout}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_aa6c3daac07778c3ac00f41acd8ef1091}
Sets a transaction timeout value. If such a timeout was set, this timeout will be used instead of the default timeout interval configured in transaction\+Idle\+Timeouts\+\_\+. 

Definition at line 1306 of file H\+T\+T\+P\+Transaction.\+cpp.



References refresh\+Timeout(), and transaction\+Timeout\+\_\+.


\begin{DoxyCode}
1307                                               \{
1308   transactionTimeout_ = transactionTimeout;
1309   VLOG(4) << \textcolor{stringliteral}{"HTTPTransaction: transaction timeout is set to  "}
1310           << std::chrono::duration\_cast<std::chrono::milliseconds>(
1311                  transactionTimeout)
1312                  .count();
1313   refreshTimeout();
1314 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Last\+Byte\+Flushed\+Tracking\+Enabled@{set\+Last\+Byte\+Flushed\+Tracking\+Enabled}}
\index{set\+Last\+Byte\+Flushed\+Tracking\+Enabled@{set\+Last\+Byte\+Flushed\+Tracking\+Enabled}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Last\+Byte\+Flushed\+Tracking\+Enabled(bool enabled)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Last\+Byte\+Flushed\+Tracking\+Enabled (
\begin{DoxyParamCaption}
\item[{bool}]{enabled}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ab319216517b57845f08babb225c52574}


Definition at line 1224 of file H\+T\+T\+P\+Transaction.\+h.



References status\+Code.



Referenced by proxygen\+::\+H\+T\+T\+P\+Handler\+Base\+::send\+Body\+With\+Last\+Byte\+Tracking().


\begin{DoxyCode}
1224                                                        \{
1225     enableLastByteFlushedTracking_ = enabled;
1226   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Priority\+Sampled@{set\+Priority\+Sampled}}
\index{set\+Priority\+Sampled@{set\+Priority\+Sampled}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Priority\+Sampled(bool sampled)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Priority\+Sampled (
\begin{DoxyParamCaption}
\item[{bool}]{sampled}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a2c3c9818119e8f7db0223f40491f5bca}


Definition at line 1507 of file H\+T\+T\+P\+Transaction.\+cpp.



References priority\+Sample\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::create\+Transaction().


\begin{DoxyCode}
1507                                                      \{
1508   \textcolor{keywordflow}{if} (sampled) \{
1509     prioritySample_ = std::make\_unique<PrioritySample>(\textcolor{keyword}{this});
1510   \} \textcolor{keywordflow}{else} \{
1511     prioritySample_.reset();
1512   \}
1513 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Receive\+Window@{set\+Receive\+Window}}
\index{set\+Receive\+Window@{set\+Receive\+Window}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Receive\+Window(uint32\+\_\+t capacity)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Receive\+Window (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{capacity}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}\label{classproxygen_1_1HTTPTransaction_af62e6acda8c5bb199bb5c7fb74867f6f}
Change the size of the receive window and propagate the change to the remote end using a window update.

T\+O\+DO\+: when \doxyref{H\+T\+T\+P\+Session}{p.}{classproxygen_1_1HTTPSession} sends a S\+E\+T\+T\+I\+N\+GS frame indicating a different initial window, it should call this function on all its transactions. 

Definition at line 1326 of file H\+T\+T\+P\+Transaction.\+cpp.



References flush\+Window\+Update(), proxygen\+::\+Window\+::get\+Capacity(), recv\+To\+Ack\+\_\+, recv\+Window\+\_\+, proxygen\+::\+Window\+::set\+Capacity(), and use\+Flow\+Control\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::create\+Transaction(), and reset().


\begin{DoxyCode}
1326                                                         \{
1327   \textcolor{comment}{// Depending on whether delta is positive or negative it will cause the}
1328   \textcolor{comment}{// window to either increase or decrease.}
1329   \textcolor{keywordflow}{if} (!useFlowControl_) \{
1330     \textcolor{keywordflow}{return};
1331   \}
1332   int32\_t delta = capacity - recvWindow_.getCapacity();
1333   \textcolor{keywordflow}{if} (delta < 0) \{
1334     \textcolor{comment}{// For now, we're disallowing shrinking the window, since it can lead}
1335     \textcolor{comment}{// to FLOW\_CONTROL\_ERRORs if there is data in flight.}
1336     VLOG(4) << \textcolor{stringliteral}{"Refusing to shrink the recv window"};
1337     \textcolor{keywordflow}{return};
1338   \}
1339   \textcolor{keywordflow}{if} (!recvWindow_.setCapacity(capacity)) \{
1340     \textcolor{keywordflow}{return};
1341   \}
1342   recvToAck_ += delta;
1343   flushWindowUpdate();
1344 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!set\+Transport\+Callback@{set\+Transport\+Callback}}
\index{set\+Transport\+Callback@{set\+Transport\+Callback}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{set\+Transport\+Callback(\+Transport\+Callback $\ast$cb)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::set\+Transport\+Callback (
\begin{DoxyParamCaption}
\item[{{\bf Transport\+Callback} $\ast$}]{cb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_ab1d4387d0b016b23db92965267a238ff}
Invoked by the handlers that are interested in tracking performance stats. 

Definition at line 702 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
702                                                    \{
703     transportCallback_ = cb;
704   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!supports\+Push\+Transactions@{supports\+Push\+Transactions}}
\index{supports\+Push\+Transactions@{supports\+Push\+Transactions}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{supports\+Push\+Transactions() const }]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::supports\+Push\+Transactions (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a8783169c4fae9f23fee802abfa85b210}
\begin{DoxyReturn}{Returns}
true iff this transaction can be used to push resources to the remote side. 
\end{DoxyReturn}


Definition at line 953 of file H\+T\+T\+P\+Transaction.\+h.



References proxygen\+::\+D\+O\+W\+N\+S\+T\+R\+E\+AM.


\begin{DoxyCode}
953                                         \{
954     \textcolor{keywordflow}{return} direction_ == TransportDirection::DOWNSTREAM &&
955       transport_.getCodec().supportsPushTransactions();
956   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!test\+And\+Clear\+Active@{test\+And\+Clear\+Active}}
\index{test\+And\+Clear\+Active@{test\+And\+Clear\+Active}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{test\+And\+Clear\+Active()}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::test\+And\+Clear\+Active (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a8090e293caca1238d332b3deeafcc72c}


Definition at line 1116 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::decrement\+Transaction\+Count().


\begin{DoxyCode}
1116                             \{
1117     \textcolor{keywordtype}{bool} ret = inActiveSet_;
1118     inActiveSet_ = \textcolor{keyword}{false};
1119     \textcolor{keywordflow}{return} ret;
1120   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!test\+And\+Set\+First\+Byte\+Sent@{test\+And\+Set\+First\+Byte\+Sent}}
\index{test\+And\+Set\+First\+Byte\+Sent@{test\+And\+Set\+First\+Byte\+Sent}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{test\+And\+Set\+First\+Byte\+Sent()}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::test\+And\+Set\+First\+Byte\+Sent (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a6d9dfcffc32755644a2e1f3edfe74334}
Tests if the first byte has already been sent, and if it hasn\textquotesingle{}t yet then it marks it as sent. 

Definition at line 1110 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::handle\+Last\+Byte\+Events().


\begin{DoxyCode}
1110                                  \{
1111     \textcolor{keywordtype}{bool} ret = firstByteSent_;
1112     firstByteSent_ = \textcolor{keyword}{true};
1113     \textcolor{keywordflow}{return} ret;
1114   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!test\+And\+Set\+First\+Header\+Byte\+Sent@{test\+And\+Set\+First\+Header\+Byte\+Sent}}
\index{test\+And\+Set\+First\+Header\+Byte\+Sent@{test\+And\+Set\+First\+Header\+Byte\+Sent}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{test\+And\+Set\+First\+Header\+Byte\+Sent()}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::test\+And\+Set\+First\+Header\+Byte\+Sent (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HTTPTransaction_a57354ff94eb5caf881171cbd4a75648a}
Tests if the very first byte of Header has already been set. If it hasn\textquotesingle{}t yet, it marks it as sent. 

Definition at line 1126 of file H\+T\+T\+P\+Transaction.\+h.


\begin{DoxyCode}
1126                                        \{
1127     \textcolor{keywordtype}{bool} ret = firstHeaderByteSent_;
1128     firstHeaderByteSent_ = \textcolor{keyword}{true};
1129     \textcolor{keywordflow}{return} ret;
1130   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!timeout\+Expired@{timeout\+Expired}}
\index{timeout\+Expired@{timeout\+Expired}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{timeout\+Expired() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::timeout\+Expired (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1HTTPTransaction_a9693c37a7791d3de8486758c92267c5f}
Timeout callback for this transaction. The timer is active until the ingress message is complete or terminated by error. 

Definition at line 1152 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by T\+E\+S\+T\+\_\+\+F().


\begin{DoxyCode}
1152                                           \{
1153     transport_.transactionTimeout(\textcolor{keyword}{this});
1154   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+And\+Send\+Priority@{update\+And\+Send\+Priority}}
\index{update\+And\+Send\+Priority@{update\+And\+Send\+Priority}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+And\+Send\+Priority(int8\+\_\+t new\+Priority)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+And\+Send\+Priority (
\begin{DoxyParamCaption}
\item[{int8\+\_\+t}]{new\+Priority}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_aca321e4ac903ca24e3307ea3d7085546}
Change the priority of this transaction, may generate a P\+R\+I\+O\+R\+I\+TY frame 

Definition at line 1370 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Queue\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::get\+Codec(), proxygen\+::\+H\+T\+T\+P\+Codec\+::map\+Priority\+To\+Dependency(), proxygen\+::\+H\+T\+T\+P\+Message\+::normalize\+Priority(), priority\+\_\+, queue\+Handle\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Priority(), proxygen\+::http2\+::\+Priority\+Update\+::stream\+Dependency, transport\+\_\+, and proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::update\+Priority().


\begin{DoxyCode}
1370                                                               \{
1371   newPriority = HTTPMessage::normalizePriority(newPriority);
1372   CHECK\_GE(newPriority, 0);
1373   priority_.streamDependency =
1374     transport_.getCodec().mapPriorityToDependency(newPriority);
1375   queueHandle_ = egressQueue_.updatePriority(queueHandle_, priority_);
1376   transport_.sendPriority(\textcolor{keyword}{this}, priority_);
1377 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+And\+Send\+Priority@{update\+And\+Send\+Priority}}
\index{update\+And\+Send\+Priority@{update\+And\+Send\+Priority}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+And\+Send\+Priority(const http2\+::\+Priority\+Update \&pri)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+And\+Send\+Priority (
\begin{DoxyParamCaption}
\item[{const {\bf http2\+::\+Priority\+Update} \&}]{pri}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a359cccc425ebddab7f67b4b68f9ad3ad}


Definition at line 1379 of file H\+T\+T\+P\+Transaction.\+cpp.



References on\+Priority\+Update(), priority\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+::\+Transport\+::send\+Priority(), and transport\+\_\+.


\begin{DoxyCode}
1380                                           \{
1381   onPriorityUpdate(newPriority);
1382   transport_.sendPriority(\textcolor{keyword}{this}, priority_);
1383 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Contentions\+Count@{update\+Contentions\+Count}}
\index{update\+Contentions\+Count@{update\+Contentions\+Count}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Contentions\+Count(uint64\+\_\+t contentions)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Contentions\+Count (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{contentions}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a3bf5690949bf654120ea1302f01e1d43}


Definition at line 1515 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+H\+T\+T\+P2\+Priority\+Queue\+Base\+::\+Base\+Node\+::calculate\+Depth(), priority\+Sample\+\_\+, and queue\+Handle\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::run\+Loop\+Callback().


\begin{DoxyCode}
1515                                                                  \{
1516   CHECK(prioritySample_);
1517   prioritySample_->updateContentionsCount(contentions,
1518                                           queueHandle_->calculateDepth(\textcolor{keyword}{false}));
1519 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Egress\+Compression\+Info@{update\+Egress\+Compression\+Info}}
\index{update\+Egress\+Compression\+Info@{update\+Egress\+Compression\+Info}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Egress\+Compression\+Info(const Compression\+Info \&)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Egress\+Compression\+Info (
\begin{DoxyParamCaption}
\item[{const {\bf Compression\+Info} \&}]{table\+Info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a2019b1e0b9d117ac14a2843035913769}
Update the \doxyref{Compression\+Info}{p.}{structproxygen_1_1CompressionInfo} (table\+Info\+\_\+) struct 

Definition at line 1250 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+Compression\+Info\+::egress\+Bytes\+Stored\+\_\+, proxygen\+::\+Compression\+Info\+::egress\+Headers\+Stored\+\_\+, proxygen\+::\+Compression\+Info\+::egress\+Header\+Table\+Size\+\_\+, and table\+Info\+\_\+.



Referenced by send\+Headers\+With\+Optional\+E\+O\+M().


\begin{DoxyCode}
1251                                       \{
1252   tableInfo_.egressHeaderTableSize_ =
1253                             tableInfo.egressHeaderTableSize\_;
1254   tableInfo_.egressBytesStored_ =
1255                             tableInfo.egressBytesStored\_;
1256   tableInfo_.egressHeadersStored_ =
1257                             tableInfo.egressHeadersStored\_;
1258 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Handler\+Pause\+State@{update\+Handler\+Pause\+State}}
\index{update\+Handler\+Pause\+State@{update\+Handler\+Pause\+State}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Handler\+Pause\+State()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Handler\+Pause\+State (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a0cd2d19638e42b0a0517ecf5813fff37}
Invokes the handler\textquotesingle{}s on\+Egress\+Paused/\+Resumed if the handler\textquotesingle{}s pause state needs updating 

Definition at line 1214 of file H\+T\+T\+P\+Transaction.\+cpp.



References deferred\+Egress\+Body\+\_\+, egress\+Paused\+\_\+, egress\+Rate\+Limited\+\_\+, flow\+Control\+Paused\+\_\+, proxygen\+::\+Window\+::get\+Size(), handler\+\_\+, handler\+Egress\+Paused\+\_\+, proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Egress\+Paused(), proxygen\+::\+H\+T\+T\+P\+Transaction\+Handler\+::on\+Egress\+Resumed(), proxygen\+::\+H\+T\+T\+P\+Session\+Stats\+::record\+Transaction\+Stalled(), send\+Window\+\_\+, stats\+\_\+, and use\+Flow\+Control\+\_\+.



Referenced by notify\+Transport\+Pending\+Egress(), pause\+Egress(), and resume\+Egress().


\begin{DoxyCode}
1214                                               \{
1215   int64\_t availWindow =
1216     sendWindow_.getSize() - deferredEgressBody_.chainLength();
1217   \textcolor{comment}{// do not count transaction stalled if no more bytes to send,}
1218   \textcolor{comment}{// i.e. when availWindow == 0}
1219   \textcolor{keywordflow}{if} (useFlowControl_ && availWindow < 0 && !flowControlPaused_) \{
1220     VLOG(4) << \textcolor{stringliteral}{"transaction stalled by flow control"} << *\textcolor{keyword}{this};
1221     \textcolor{keywordflow}{if} (stats_) \{
1222       stats_->recordTransactionStalled();
1223     \}
1224   \}
1225   flowControlPaused_ = useFlowControl_ && availWindow <= 0;
1226   \textcolor{keywordtype}{bool} handlerShouldBePaused = egressPaused_ || flowControlPaused_ ||
1227     egressRateLimited_;
1228 
1229   \textcolor{keywordflow}{if} (handler_ && handlerShouldBePaused != handlerEgressPaused_) \{
1230     \textcolor{keywordflow}{if} (handlerShouldBePaused) \{
1231       handlerEgressPaused_ = \textcolor{keyword}{true};
1232       handler_->onEgressPaused();
1233     \} \textcolor{keywordflow}{else} \{
1234       handlerEgressPaused_ = \textcolor{keyword}{false};
1235       handler_->onEgressResumed();
1236     \}
1237   \}
1238 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Ingress\+Compression\+Info@{update\+Ingress\+Compression\+Info}}
\index{update\+Ingress\+Compression\+Info@{update\+Ingress\+Compression\+Info}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Ingress\+Compression\+Info(const Compression\+Info \&)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Ingress\+Compression\+Info (
\begin{DoxyParamCaption}
\item[{const {\bf Compression\+Info} \&}]{table\+Info}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aa1452a5a8322901be423c0dcd6de76ef}


Definition at line 1240 of file H\+T\+T\+P\+Transaction.\+cpp.



References proxygen\+::\+Compression\+Info\+::ingress\+Bytes\+Stored\+\_\+, proxygen\+::\+Compression\+Info\+::ingress\+Headers\+Stored\+\_\+, proxygen\+::\+Compression\+Info\+::ingress\+Header\+Table\+Size\+\_\+, and table\+Info\+\_\+.



Referenced by on\+Ingress\+Headers\+Complete().


\begin{DoxyCode}
1241                                       \{
1242     tableInfo_.ingressHeaderTableSize_ =
1243                             tableInfo.ingressHeaderTableSize\_;
1244     tableInfo_.ingressBytesStored_ =
1245                             tableInfo.ingressBytesStored\_;
1246     tableInfo_.ingressHeadersStored_ =
1247                             tableInfo.ingressHeadersStored\_;
1248 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Read\+Timeout@{update\+Read\+Timeout}}
\index{update\+Read\+Timeout@{update\+Read\+Timeout}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Read\+Timeout()}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Read\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a45de6bc5ca4b8e50b250fd257013ec89}


Definition at line 487 of file H\+T\+T\+P\+Transaction.\+cpp.



References is\+Expecting\+Ingress(), and refresh\+Timeout().



Referenced by on\+Ingress\+E\+O\+M(), on\+Ingress\+Set\+Send\+Window(), on\+Ingress\+Window\+Update(), process\+Ingress\+E\+O\+M(), resume\+Ingress(), and send\+Body\+Now().


\begin{DoxyCode}
487                                         \{
488   \textcolor{keywordflow}{if} (isExpectingIngress()) \{
489     refreshTimeout();
490   \} \textcolor{keywordflow}{else} \{
491     cancelTimeout();
492   \}
493 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Relative\+Weight@{update\+Relative\+Weight}}
\index{update\+Relative\+Weight@{update\+Relative\+Weight}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Relative\+Weight(double ratio)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Relative\+Weight (
\begin{DoxyParamCaption}
\item[{double}]{ratio}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a08ccd95211616539ef13b9950f719161}


Definition at line 1521 of file H\+T\+T\+P\+Transaction.\+cpp.



References priority\+Sample\+\_\+.



Referenced by on\+Write\+Ready().


\begin{DoxyCode}
1521                                                        \{
1522   CHECK(prioritySample_);
1523   prioritySample_->updateRatio(ratio);
1524 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Session\+Bytes\+Sheduled@{update\+Session\+Bytes\+Sheduled}}
\index{update\+Session\+Bytes\+Sheduled@{update\+Session\+Bytes\+Sheduled}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Session\+Bytes\+Sheduled(uint64\+\_\+t bytes)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Session\+Bytes\+Sheduled (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{bytes}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a8087cecb501660955abf898a7ed8e0e0}


Definition at line 1526 of file H\+T\+T\+P\+Transaction.\+cpp.



References egress\+Paused\+\_\+, egress\+Rate\+Limited\+\_\+, first\+Header\+Byte\+Sent\+\_\+, flow\+Control\+Paused\+\_\+, and priority\+Sample\+\_\+.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::run\+Loop\+Callback().


\begin{DoxyCode}
1526                                                                \{
1527   CHECK(prioritySample_);
1528   \textcolor{comment}{// Do not accumulate session bytes utill header is sent.}
1529   \textcolor{comment}{// Otherwise, the session bytes could be accumulated for a transaction}
1530   \textcolor{comment}{// that is not allowed to egress yet.}
1531   \textcolor{comment}{// Do not accumulate session bytes if transaction is paused.}
1532   \textcolor{comment}{// On the other hand, if the transaction is part of the egress,}
1533   \textcolor{comment}{// always accumulate the session bytes.}
1534   \textcolor{keywordflow}{if} ((bytes && firstHeaderByteSent_ && !egressPaused_ &&
1535     !egressRateLimited_ && !flowControlPaused_)
1536     || prioritySample_->isTransactionBytesScheduled()) \{
1537     prioritySample_->updateSessionBytesSheduled(bytes);
1538   \}
1539 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!update\+Transaction\+Bytes\+Sent@{update\+Transaction\+Bytes\+Sent}}
\index{update\+Transaction\+Bytes\+Sent@{update\+Transaction\+Bytes\+Sent}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{update\+Transaction\+Bytes\+Sent(uint64\+\_\+t bytes)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+T\+T\+P\+Transaction\+::update\+Transaction\+Bytes\+Sent (
\begin{DoxyParamCaption}
\item[{uint64\+\_\+t}]{bytes}
\end{DoxyParamCaption}
)}\label{classproxygen_1_1HTTPTransaction_a851f8e0daa480bb26f6c3847a1c6f7ec}


Definition at line 1541 of file H\+T\+T\+P\+Transaction.\+cpp.



References priority\+Sample\+\_\+.



Referenced by send\+Body\+Now().


\begin{DoxyCode}
1541                                                                \{
1542   CHECK(prioritySample_);
1543   \textcolor{keywordflow}{if} (bytes) \{
1544     prioritySample_->updateTransactionBytesSent(bytes);
1545   \}
1546 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!validate\+Ingress\+State\+Transition@{validate\+Ingress\+State\+Transition}}
\index{validate\+Ingress\+State\+Transition@{validate\+Ingress\+State\+Transition}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{validate\+Ingress\+State\+Transition(\+H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+Event)}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::validate\+Ingress\+State\+Transition (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+Event}}]{event}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a06c36e406876539531f70361da43355f}
Validates the ingress state transition. Returns false and sends an abort with P\+R\+O\+T\+O\+C\+O\+L\+\_\+\+E\+R\+R\+OR if the transition fails. Otherwise it returns true. 

Definition at line 516 of file H\+T\+T\+P\+Transaction.\+cpp.



References id\+\_\+, proxygen\+::\+H\+T\+T\+P\+Exception\+::\+I\+N\+G\+R\+E\+S\+S\+\_\+\+A\+N\+D\+\_\+\+E\+G\+R\+E\+SS, ingress\+State\+\_\+, proxygen\+::\+I\+N\+T\+E\+R\+N\+A\+L\+\_\+\+E\+R\+R\+OR, proxygen\+::k\+Error\+Ingress\+State\+Transition, on\+Error(), proxygen\+::\+Exception\+::set\+Proxygen\+Error(), and proxygen\+::\+State\+Machine$<$ T $>$\+::transit().



Referenced by on\+Ingress\+Body(), on\+Ingress\+Chunk\+Complete(), on\+Ingress\+Chunk\+Header(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Headers\+Complete(), on\+Ingress\+Trailers(), on\+Ingress\+Upgrade(), and process\+Ingress\+E\+O\+M().


\begin{DoxyCode}
517                                          \{
518   DestructorGuard g(\textcolor{keyword}{this});
519 
520   \textcolor{keywordflow}{if} (!HTTPTransactionIngressSM::transit(ingressState_, event)) \{
521     std::stringstream ss;
522     ss << \textcolor{stringliteral}{"Invalid ingress state transition, state="} << ingressState_ <<
523       \textcolor{stringliteral}{", event="} << \textcolor{keyword}{event} << \textcolor{stringliteral}{", streamID="} << id_;
524     HTTPException ex(HTTPException::Direction::INGRESS_AND_EGRESS, ss.str());
525     ex.setProxygenError(kErrorIngressStateTransition);
526     ex.setCodecStatusCode(ErrorCode::INTERNAL_ERROR);
527     \textcolor{comment}{// This will invoke sendAbort() and also inform the handler of the}
528     \textcolor{comment}{// error and detach the handler.}
529     onError(ex);
530     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
531   \}
532   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
533 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!aborted\+\_\+@{aborted\+\_\+}}
\index{aborted\+\_\+@{aborted\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{aborted\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::aborted\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a73b830ff371293adf976d7b76a7a49bd}


Definition at line 1473 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Error(), process\+Ingress\+Body(), process\+Ingress\+Chunk\+Complete(), process\+Ingress\+Chunk\+Header(), process\+Ingress\+E\+O\+M(), process\+Ingress\+Headers\+Complete(), process\+Ingress\+Trailers(), process\+Ingress\+Upgrade(), send\+Abort(), and send\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!actual\+Response\+Length\+\_\+@{actual\+Response\+Length\+\_\+}}
\index{actual\+Response\+Length\+\_\+@{actual\+Response\+Length\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{actual\+Response\+Length\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<$uint64\+\_\+t$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::actual\+Response\+Length\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ac49a1ef5d00655ff061197d8c741b74c}


Definition at line 1465 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+Body(), and send\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!assoc\+Stream\+Id\+\_\+@{assoc\+Stream\+Id\+\_\+}}
\index{assoc\+Stream\+Id\+\_\+@{assoc\+Stream\+Id\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{assoc\+Stream\+Id\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::assoc\+Stream\+Id\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_af4cfe0b59bb2946669c46c8757f357e2}
ID of request transaction (for pushed txns only) 

Definition at line 1416 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), and on\+Pushed\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!chunk\+Headers\+\_\+@{chunk\+Headers\+\_\+}}
\index{chunk\+Headers\+\_\+@{chunk\+Headers\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{chunk\+Headers\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::list$<${\bf Chunk}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::chunk\+Headers\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a590f2fa2f962dd1c349bd5362c0bb115}


Definition at line 1396 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+Body(), send\+Deferred\+Body(), and send\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!cumulative\+Ratio\+\_\+@{cumulative\+Ratio\+\_\+}}
\index{cumulative\+Ratio\+\_\+@{cumulative\+Ratio\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{cumulative\+Ratio\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}double proxygen\+::\+H\+T\+T\+P\+Transaction\+::cumulative\+Ratio\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a924c9548b4cd45d9960e9907a5054c71}


Definition at line 1451 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Write\+Ready().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!current\+Depth\+\_\+@{current\+Depth\+\_\+}}
\index{current\+Depth\+\_\+@{current\+Depth\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{current\+Depth\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::current\+Depth\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_add2ec8e1f7d0b23b829d47eccbdc1c2b}


Definition at line 1450 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), and on\+Priority\+Update().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!deferred\+Egress\+Body\+\_\+@{deferred\+Egress\+Body\+\_\+}}
\index{deferred\+Egress\+Body\+\_\+@{deferred\+Egress\+Body\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{deferred\+Egress\+Body\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+I\+O\+Buf\+Queue proxygen\+::\+H\+T\+T\+P\+Transaction\+::deferred\+Egress\+Body\+\_\+ \{folly\+::\+I\+O\+Buf\+Queue\+::cache\+Chain\+Length()\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a709cc77ae05afb548fb2f2a2850f9642}
Queue to hold any body bytes to be sent out while egress to the remote is supposed to be paused. 

Definition at line 1356 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by mark\+Egress\+Complete(), notify\+Transport\+Pending\+Egress(), send\+Body(), send\+Deferred\+Body(), send\+E\+O\+M(), and update\+Handler\+Pause\+State().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!deferred\+Ingress\+\_\+@{deferred\+Ingress\+\_\+}}
\index{deferred\+Ingress\+\_\+@{deferred\+Ingress\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{deferred\+Ingress\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<$std\+::queue$<${\bf H\+T\+T\+P\+Event}$>$ $>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::deferred\+Ingress\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_af2ddc4b6da235a452d2b9b5809ba28c0}
Queue to hold any events that we receive from the Transaction while the ingress is supposed to be paused. 

Definition at line 1348 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by check\+Create\+Deferred\+Ingress(), mark\+Ingress\+Complete(), must\+Queue\+Ingress(), on\+Ingress\+Body(), on\+Ingress\+Chunk\+Complete(), on\+Ingress\+Chunk\+Header(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Headers\+Complete(), on\+Ingress\+Trailers(), on\+Ingress\+Upgrade(), and resume\+Ingress().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!deleting\+\_\+@{deleting\+\_\+}}
\index{deleting\+\_\+@{deleting\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{deleting\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::deleting\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a5a59ec7ac8412d0d45ec93631dacbbd3}


Definition at line 1474 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Delayed\+Destroy().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!direction\+\_\+@{direction\+\_\+}}
\index{direction\+\_\+@{direction\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{direction\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Transport\+Direction} proxygen\+::\+H\+T\+T\+P\+Transaction\+::direction\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a7e3d429b572296fce7f5873f262004ce}


Definition at line 1358 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+Buffer\+Limit\+\_\+@{egress\+Buffer\+Limit\+\_\+}}
\index{egress\+Buffer\+Limit\+\_\+@{egress\+Buffer\+Limit\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+Buffer\+Limit\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+Buffer\+Limit\+\_\+\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a1840284d0b6574c00302aa5a599353c8}


Definition at line 1484 of file H\+T\+T\+P\+Transaction.\+h.

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+Calls\+\_\+@{egress\+Calls\+\_\+}}
\index{egress\+Calls\+\_\+@{egress\+Calls\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+Calls\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+Calls\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a101815c9d188a04309b686780da3f42d}


Definition at line 1452 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Write\+Ready().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+Limit\+Bytes\+Per\+Ms\+\_\+@{egress\+Limit\+Bytes\+Per\+Ms\+\_\+}}
\index{egress\+Limit\+Bytes\+Per\+Ms\+\_\+@{egress\+Limit\+Bytes\+Per\+Ms\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+Limit\+Bytes\+Per\+Ms\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+Limit\+Bytes\+Per\+Ms\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4be280b06dbdc5c8f9bc01fa9edd1387}


Definition at line 1486 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by maybe\+Delay\+For\+Rate\+Limit(), send\+Body\+Now(), and set\+Egress\+Rate\+Limit().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+Paused\+\_\+@{egress\+Paused\+\_\+}}
\index{egress\+Paused\+\_\+@{egress\+Paused\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+Paused\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+Paused\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a9a303a52efdc3a44b3624a4d598d2f4b}


Definition at line 1468 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by pause\+Egress(), resume\+Egress(), send\+E\+O\+M(), update\+Handler\+Pause\+State(), and update\+Session\+Bytes\+Sheduled().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+Queue\+\_\+@{egress\+Queue\+\_\+}}
\index{egress\+Queue\+\_\+@{egress\+Queue\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+Queue\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P2\+Priority\+Queue\+Base}\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+Queue\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aff9120dd43c685875a27e92719a40d05}
Reference to our priority queue 

Definition at line 1401 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), notify\+Transport\+Pending\+Egress(), on\+Priority\+Update(), update\+And\+Send\+Priority(), and $\sim$\+H\+T\+T\+P\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+Rate\+Limited\+\_\+@{egress\+Rate\+Limited\+\_\+}}
\index{egress\+Rate\+Limited\+\_\+@{egress\+Rate\+Limited\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+Rate\+Limited\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+Rate\+Limited\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ab2728d681b3faa0ebe646adbb1b0b25c}


Definition at line 1471 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by maybe\+Delay\+For\+Rate\+Limit(), notify\+Transport\+Pending\+Egress(), rate\+Limit\+Timeout\+Expired(), update\+Handler\+Pause\+State(), and update\+Session\+Bytes\+Sheduled().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!egress\+State\+\_\+@{egress\+State\+\_\+}}
\index{egress\+State\+\_\+@{egress\+State\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{egress\+State\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Egress\+S\+M\+::\+State} proxygen\+::\+H\+T\+T\+P\+Transaction\+::egress\+State\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_adca2bdfeac863b73cbe4c73b5c7d0344}
{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    HTTPTransactionEgressSM::getNewInstance()\}
\end{DoxyCode}


Definition at line 1363 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update(), H\+T\+T\+P\+Transaction(), is\+Expecting\+Window\+Update(), mark\+Egress\+Complete(), send\+Body(), send\+Body\+Now(), send\+E\+O\+M(), send\+E\+O\+M\+Now(), and send\+Headers\+With\+Optional\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!enable\+Last\+Byte\+Flushed\+Tracking\+\_\+@{enable\+Last\+Byte\+Flushed\+Tracking\+\_\+}}
\index{enable\+Last\+Byte\+Flushed\+Tracking\+\_\+@{enable\+Last\+Byte\+Flushed\+Tracking\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{enable\+Last\+Byte\+Flushed\+Tracking\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::enable\+Last\+Byte\+Flushed\+Tracking\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a3593cac85cdc7aa01309b908a4103dd6}


Definition at line 1482 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+Body\+Now().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!ex\+Attributes\+\_\+@{ex\+Attributes\+\_\+}}
\index{ex\+Attributes\+\_\+@{ex\+Attributes\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{ex\+Attributes\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<${\bf H\+T\+T\+P\+Codec\+::\+Ex\+Attributes}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::ex\+Attributes\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4e911a58ee03620fe176f2d80572cff6}
Attributes of \doxyref{http2}{p.}{namespaceproxygen_1_1http2} Ex\+\_\+\+H\+E\+A\+D\+E\+RS 

Definition at line 1421 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!expected\+Content\+Length\+Remaining\+\_\+@{expected\+Content\+Length\+Remaining\+\_\+}}
\index{expected\+Content\+Length\+Remaining\+\_\+@{expected\+Content\+Length\+Remaining\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{expected\+Content\+Length\+Remaining\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<$uint64\+\_\+t$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::expected\+Content\+Length\+Remaining\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a721bf03ec05b893acff23f4ca5c63891}


Definition at line 1463 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Ingress\+Body(), on\+Ingress\+E\+O\+M(), and on\+Ingress\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!expected\+Response\+Length\+\_\+@{expected\+Response\+Length\+\_\+}}
\index{expected\+Response\+Length\+\_\+@{expected\+Response\+Length\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{expected\+Response\+Length\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<$uint64\+\_\+t$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::expected\+Response\+Length\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ac15f2ce834f719ef4e9350edb51d688d}


Definition at line 1464 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+E\+O\+M(), and send\+Headers\+With\+Optional\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!ex\+Transactions\+\_\+@{ex\+Transactions\+\_\+}}
\index{ex\+Transactions\+\_\+@{ex\+Transactions\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{ex\+Transactions\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::set$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::ex\+Transactions\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ad1df333c0d5f703c6f0722fdbe099cf9}
Set of all ex\+Transaction I\+Ds associated with this transaction. 

Definition at line 1431 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Ex\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!first\+Byte\+Sent\+\_\+@{first\+Byte\+Sent\+\_\+}}
\index{first\+Byte\+Sent\+\_\+@{first\+Byte\+Sent\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{first\+Byte\+Sent\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::first\+Byte\+Sent\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ae18bc791a3cd4a856b8a4b5f8814b7f7}


Definition at line 1475 of file H\+T\+T\+P\+Transaction.\+h.

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!first\+Header\+Byte\+Sent\+\_\+@{first\+Header\+Byte\+Sent\+\_\+}}
\index{first\+Header\+Byte\+Sent\+\_\+@{first\+Header\+Byte\+Sent\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{first\+Header\+Byte\+Sent\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::first\+Header\+Byte\+Sent\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a1f981615d0d6d8cd56c3fc1a01d44a29}


Definition at line 1476 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by update\+Session\+Bytes\+Sheduled().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!flow\+Control\+Paused\+\_\+@{flow\+Control\+Paused\+\_\+}}
\index{flow\+Control\+Paused\+\_\+@{flow\+Control\+Paused\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{flow\+Control\+Paused\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::flow\+Control\+Paused\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a16fd01bfd8dc6a7e734e3a4cbca74eee}


Definition at line 1469 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by update\+Handler\+Pause\+State(), and update\+Session\+Bytes\+Sheduled().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!handler\+\_\+@{handler\+\_\+}}
\index{handler\+\_\+@{handler\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{handler\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Handler}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::handler\+\_\+ \{{\bf nullptr}\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ae2a381874a7a920eb1e3c8a6852254f9}


Definition at line 1361 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Delayed\+Destroy(), on\+Egress\+Timeout(), on\+Error(), on\+Ex\+Transaction(), on\+Goaway(), on\+Ingress\+Body(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Timeout(), on\+Pushed\+Transaction(), process\+Ingress\+Body(), process\+Ingress\+Chunk\+Complete(), process\+Ingress\+Chunk\+Header(), process\+Ingress\+E\+O\+M(), process\+Ingress\+Headers\+Complete(), process\+Ingress\+Trailers(), process\+Ingress\+Upgrade(), and update\+Handler\+Pause\+State().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!handler\+Egress\+Paused\+\_\+@{handler\+Egress\+Paused\+\_\+}}
\index{handler\+Egress\+Paused\+\_\+@{handler\+Egress\+Paused\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{handler\+Egress\+Paused\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::handler\+Egress\+Paused\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ad54b8093a5fc5524ff4edac194455300}


Definition at line 1470 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by update\+Handler\+Pause\+State().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!head\+Request\+\_\+@{head\+Request\+\_\+}}
\index{head\+Request\+\_\+@{head\+Request\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{head\+Request\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::head\+Request\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a6a1acbd434b94259956a083014a485e6}


Definition at line 1481 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Ingress\+Headers\+Complete(), and send\+Headers\+With\+Optional\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!id\+\_\+@{id\+\_\+}}
\index{id\+\_\+@{id\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{id\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID} proxygen\+::\+H\+T\+T\+P\+Transaction\+::id\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_abaaa6ab586280055cb83a4d5e93634b8}


Definition at line 1359 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by describe(), H\+T\+T\+P\+Transaction(), on\+Egress\+Timeout(), on\+Ex\+Transaction(), on\+Ingress\+Body(), on\+Ingress\+Chunk\+Complete(), on\+Ingress\+Chunk\+Header(), on\+Ingress\+E\+O\+M(), on\+Ingress\+Headers\+Complete(), on\+Ingress\+Timeout(), on\+Ingress\+Trailers(), on\+Ingress\+Upgrade(), on\+Pushed\+Transaction(), send\+Body\+Now(), and validate\+Ingress\+State\+Transition().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!in\+Active\+Set\+\_\+@{in\+Active\+Set\+\_\+}}
\index{in\+Active\+Set\+\_\+@{in\+Active\+Set\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{in\+Active\+Set\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::in\+Active\+Set\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a9f5a7cf5d27f9f0c3e50de89e84f8c1b}


Definition at line 1478 of file H\+T\+T\+P\+Transaction.\+h.

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!ingress\+Error\+Seen\+\_\+@{ingress\+Error\+Seen\+\_\+}}
\index{ingress\+Error\+Seen\+\_\+@{ingress\+Error\+Seen\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{ingress\+Error\+Seen\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::ingress\+Error\+Seen\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a93621220dbc29ef70ba34d0bcb245913}


Definition at line 1479 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Error(), and send\+Body\+Now().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!ingress\+Paused\+\_\+@{ingress\+Paused\+\_\+}}
\index{ingress\+Paused\+\_\+@{ingress\+Paused\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{ingress\+Paused\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::ingress\+Paused\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a47f1ba8719ed82a445997ac88320cb4a}


Definition at line 1467 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by is\+Expecting\+Ingress(), must\+Queue\+Ingress(), pause\+Ingress(), resume\+Ingress(), and send\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!ingress\+State\+\_\+@{ingress\+State\+\_\+}}
\index{ingress\+State\+\_\+@{ingress\+State\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{ingress\+State\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Ingress\+S\+M\+::\+State} proxygen\+::\+H\+T\+T\+P\+Transaction\+::ingress\+State\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4635c6fb2e6d001200f39ea32197af09}
{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
    HTTPTransactionIngressSM::getNewInstance()\}
\end{DoxyCode}


Definition at line 1365 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update(), H\+T\+T\+P\+Transaction(), mark\+Ingress\+Complete(), send\+E\+O\+M(), and validate\+Ingress\+State\+Transition().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!in\+Resume\+\_\+@{in\+Resume\+\_\+}}
\index{in\+Resume\+\_\+@{in\+Resume\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{in\+Resume\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::in\+Resume\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4fc154af488feb7538d9dc9413db8df7}


Definition at line 1477 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by resume\+Ingress().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!insert\+Depth\+\_\+@{insert\+Depth\+\_\+}}
\index{insert\+Depth\+\_\+@{insert\+Depth\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{insert\+Depth\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::insert\+Depth\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a0a599cbbd76e87f15244e4e90de9970f}
Information about this transaction\textquotesingle{}s priority.

insert\+Depth\+\_\+ is the depth of this node in the tree when the txn was created current\+Depth\+\_\+ is the depth of this node in the tree after the last on\+Priority\+Update. It may not reflect its real position in realtime, since after the last on\+Priority\+Update, it may get reparented as parent transactions complete. cumulative\+Ratio\+\_\+ / egress\+Calls\+\_\+ is the average relative weight of this txn during egress 

Definition at line 1449 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!last\+Response\+Status\+\_\+@{last\+Response\+Status\+\_\+}}
\index{last\+Response\+Status\+\_\+@{last\+Response\+Status\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{last\+Response\+Status\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint16\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::last\+Response\+Status\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ab0fac97a4fe14aebb9f05f9751ec428f}
If this transaction represents a request (ie, it is backed by an \doxyref{H\+T\+T\+P\+Upstream\+Session}{p.}{classproxygen_1_1HTTPUpstreamSession}) , this field indicates the last response status received from the server. If this transaction represents a response, this field indicates the last status we\textquotesingle{}ve sent. For instances, this could take on multiple 1xx values, and then take on 200. 

Definition at line 1461 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Ingress\+Headers\+Complete(), and send\+Headers\+With\+Optional\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!max\+Deferred\+Ingress\+\_\+@{max\+Deferred\+Ingress\+\_\+}}
\index{max\+Deferred\+Ingress\+\_\+@{max\+Deferred\+Ingress\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{max\+Deferred\+Ingress\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::max\+Deferred\+Ingress\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a59dfab33819a404ebee7989b3961c822}


Definition at line 1350 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by resume\+Ingress().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!num\+Limited\+Bytes\+Egressed\+\_\+@{num\+Limited\+Bytes\+Egressed\+\_\+}}
\index{num\+Limited\+Bytes\+Egressed\+\_\+@{num\+Limited\+Bytes\+Egressed\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{num\+Limited\+Bytes\+Egressed\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint64\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::num\+Limited\+Bytes\+Egressed\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4a2269f00d4980b9799843f94fb2dc09}


Definition at line 1488 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by maybe\+Delay\+For\+Rate\+Limit(), send\+Body\+Now(), and set\+Egress\+Rate\+Limit().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!pending\+Byte\+Events\+\_\+@{pending\+Byte\+Events\+\_\+}}
\index{pending\+Byte\+Events\+\_\+@{pending\+Byte\+Events\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{pending\+Byte\+Events\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint8\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::pending\+Byte\+Events\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_afda40e08e5ec6811253463896924c19b}


Definition at line 1462 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Delayed\+Destroy().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!priority\+\_\+@{priority\+\_\+}}
\index{priority\+\_\+@{priority\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{priority\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf http2\+::\+Priority\+Update} proxygen\+::\+H\+T\+T\+P\+Transaction\+::priority\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ae249e38c296d2e391156dab66871aee1}
Priority of this transaction 

Definition at line 1436 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Priority\+Update(), and update\+And\+Send\+Priority().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!priority\+Fallback\+\_\+@{priority\+Fallback\+\_\+}}
\index{priority\+Fallback\+\_\+@{priority\+Fallback\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{priority\+Fallback\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::priority\+Fallback\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aacb764e1b4dbc2caa9b8f3a031b4fe4d}


Definition at line 1480 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), and on\+Priority\+Update().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!priority\+Sample\+\_\+@{priority\+Sample\+\_\+}}
\index{priority\+Sample\+\_\+@{priority\+Sample\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{priority\+Sample\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<${\bf Priority\+Sample}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::priority\+Sample\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ac77a1999dac76e625d1174fcb8479582}


Definition at line 1497 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by get\+Priority\+Sample\+Summary(), on\+Write\+Ready(), set\+Priority\+Sampled(), update\+Contentions\+Count(), update\+Relative\+Weight(), update\+Session\+Bytes\+Sheduled(), and update\+Transaction\+Bytes\+Sent().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!pushed\+Transactions\+\_\+@{pushed\+Transactions\+\_\+}}
\index{pushed\+Transactions\+\_\+@{pushed\+Transactions\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{pushed\+Transactions\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::set$<${\bf H\+T\+T\+P\+Codec\+::\+Stream\+ID}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::pushed\+Transactions\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a1529214f357bb99fe87653378864f2ee}
Set of all push transactions I\+Ds associated with this transaction. 

Definition at line 1426 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Pushed\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!queue\+Handle\+\_\+@{queue\+Handle\+\_\+}}
\index{queue\+Handle\+\_\+@{queue\+Handle\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{queue\+Handle\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P2\+Priority\+Queue\+Base\+::\+Handle} proxygen\+::\+H\+T\+T\+P\+Transaction\+::queue\+Handle\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a14ceaad7dd23c1c0444a1eebc5b6cbdf}
Handle to our position in the priority queue. 

Definition at line 1406 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), notify\+Transport\+Pending\+Egress(), on\+Priority\+Update(), update\+And\+Send\+Priority(), update\+Contentions\+Count(), and $\sim$\+H\+T\+T\+P\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!rate\+Limit\+Callback\+\_\+@{rate\+Limit\+Callback\+\_\+}}
\index{rate\+Limit\+Callback\+\_\+@{rate\+Limit\+Callback\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{rate\+Limit\+Callback\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Rate\+Limit\+Callback} proxygen\+::\+H\+T\+T\+P\+Transaction\+::rate\+Limit\+Callback\+\_\+ \{$\ast$this\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a86b018f195a82e4838b615839336f4d9}


Definition at line 1342 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by maybe\+Delay\+For\+Rate\+Limit().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!recv\+To\+Ack\+\_\+@{recv\+To\+Ack\+\_\+}}
\index{recv\+To\+Ack\+\_\+@{recv\+To\+Ack\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{recv\+To\+Ack\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}int32\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::recv\+To\+Ack\+\_\+ \{0\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a130dbdc5432fa4f37f41ef1a595b964c}
bytes we need to acknowledge to the remote end using a window update 

Definition at line 1411 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update(), get\+Recv\+To\+Ack(), on\+Ingress\+Body(), process\+Ingress\+Body(), and set\+Receive\+Window().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!recv\+Window\+\_\+@{recv\+Window\+\_\+}}
\index{recv\+Window\+\_\+@{recv\+Window\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{recv\+Window\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Window} proxygen\+::\+H\+T\+T\+P\+Transaction\+::recv\+Window\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a0b9d734dcc524c63c05da5939c130c2c}
The recv window and associated data. This keeps track of how many bytes we are allowed to buffer. 

Definition at line 1376 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update(), on\+Delayed\+Destroy(), on\+Ingress\+Body(), process\+Ingress\+Body(), reset(), resume\+Ingress(), and set\+Receive\+Window().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!send\+Window\+\_\+@{send\+Window\+\_\+}}
\index{send\+Window\+\_\+@{send\+Window\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{send\+Window\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Window} proxygen\+::\+H\+T\+T\+P\+Transaction\+::send\+Window\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a2b28fe4653aa8458c53a442d377681c4}
The send window and associated data. This keeps track of how many bytes we are allowed to send and have outstanding. 

Definition at line 1382 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by is\+Expecting\+Window\+Update(), notify\+Transport\+Pending\+Egress(), on\+Ingress\+Set\+Send\+Window(), on\+Ingress\+Window\+Update(), reset(), send\+Body\+Now(), send\+Deferred\+Body(), and update\+Handler\+Pause\+State().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!seq\+No\+\_\+@{seq\+No\+\_\+}}
\index{seq\+No\+\_\+@{seq\+No\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{seq\+No\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t proxygen\+::\+H\+T\+T\+P\+Transaction\+::seq\+No\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a7e4b1c3f7b3c86f941aab14e76ffcf13}


Definition at line 1360 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Ingress\+Headers\+Complete().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!start\+Rate\+Limit\+\_\+@{start\+Rate\+Limit\+\_\+}}
\index{start\+Rate\+Limit\+\_\+@{start\+Rate\+Limit\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{start\+Rate\+Limit\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf proxygen\+::\+Time\+Point} proxygen\+::\+H\+T\+T\+P\+Transaction\+::start\+Rate\+Limit\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ac7f3655a5f69420aacf1501ce1d4818d}


Definition at line 1487 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by maybe\+Delay\+For\+Rate\+Limit(), and set\+Egress\+Rate\+Limit().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!stats\+\_\+@{stats\+\_\+}}
\index{stats\+\_\+@{stats\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{stats\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Session\+Stats}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::stats\+\_\+ \{{\bf nullptr}\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4c679e83df84756777a28364d5632d42}


Definition at line 1368 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by H\+T\+T\+P\+Transaction(), update\+Handler\+Pause\+State(), and $\sim$\+H\+T\+T\+P\+Transaction().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!table\+Info\+\_\+@{table\+Info\+\_\+}}
\index{table\+Info\+\_\+@{table\+Info\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{table\+Info\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Compression\+Info} proxygen\+::\+H\+T\+T\+P\+Transaction\+::table\+Info\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_ac09085e8037607eb496c8f4899f6ab16}


Definition at line 1370 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by get\+Compression\+Info(), update\+Egress\+Compression\+Info(), and update\+Ingress\+Compression\+Info().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!timer\+\_\+@{timer\+\_\+}}
\index{timer\+\_\+@{timer\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{timer\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+H\+H\+Wheel\+Timer$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::timer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a4913894bc6b9ffd5a1fc61fd0913e94e}


Definition at line 1495 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by maybe\+Delay\+For\+Rate\+Limit().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!trailers\+\_\+@{trailers\+\_\+}}
\index{trailers\+\_\+@{trailers\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{trailers\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<${\bf H\+T\+T\+P\+Headers}$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::trailers\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_af70fc7a7918b5c087c4d3ce93ba3e73a}
Trailers to send, if any. 

Definition at line 1389 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by send\+Body\+Now(), and send\+E\+O\+M\+Now().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!transaction\+Timeout\+\_\+@{transaction\+Timeout\+\_\+}}
\index{transaction\+Timeout\+\_\+@{transaction\+Timeout\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{transaction\+Timeout\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Optional$<$std\+::chrono\+::milliseconds$>$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::transaction\+Timeout\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a657744e4ff7fb16bd16bee71cde33faf}
Optional transaction timeout value. 

Definition at line 1493 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by set\+Idle\+Timeout().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!transport\+\_\+@{transport\+\_\+}}
\index{transport\+\_\+@{transport\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{transport\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Transport}\& proxygen\+::\+H\+T\+T\+P\+Transaction\+::transport\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a08dccd5abf8db88ded29183b9a81b787}


Definition at line 1362 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by describe(), flush\+Window\+Update(), mark\+Egress\+Complete(), notify\+Transport\+Pending\+Egress(), on\+Delayed\+Destroy(), on\+Ingress\+Headers\+Complete(), pause\+Ingress(), process\+Ingress\+Body(), resume\+Ingress(), send\+Abort(), send\+Body(), send\+Body\+Now(), send\+Deferred\+Body(), send\+E\+O\+M(), send\+E\+O\+M\+Now(), send\+Headers\+With\+Optional\+E\+O\+M(), and update\+And\+Send\+Priority().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!transport\+Callback\+\_\+@{transport\+Callback\+\_\+}}
\index{transport\+Callback\+\_\+@{transport\+Callback\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{transport\+Callback\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Transport\+Callback}$\ast$ proxygen\+::\+H\+T\+T\+P\+Transaction\+::transport\+Callback\+\_\+ \{{\bf nullptr}\}\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_a890d9807de58a1bd4e8ccdf498854456}


Definition at line 1384 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by on\+Delayed\+Destroy(), on\+Egress\+Body\+First\+Byte(), on\+Egress\+Body\+Last\+Byte(), on\+Egress\+Header\+First\+Byte(), on\+Egress\+Last\+Byte\+Ack(), on\+Egress\+Tracked\+Byte(), on\+Ingress\+Body(), on\+Ingress\+Headers\+Complete(), send\+Abort(), send\+Deferred\+Body(), send\+E\+O\+M(), and send\+Headers\+With\+Optional\+E\+O\+M().

\index{proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}!use\+Flow\+Control\+\_\+@{use\+Flow\+Control\+\_\+}}
\index{use\+Flow\+Control\+\_\+@{use\+Flow\+Control\+\_\+}!proxygen\+::\+H\+T\+T\+P\+Transaction@{proxygen\+::\+H\+T\+T\+P\+Transaction}}
\subsubsection[{use\+Flow\+Control\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+T\+T\+P\+Transaction\+::use\+Flow\+Control\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1HTTPTransaction_aeb5dc56d3bc03e0dd0b4c41d5996fd53}


Definition at line 1472 of file H\+T\+T\+P\+Transaction.\+h.



Referenced by flush\+Window\+Update(), is\+Expecting\+Window\+Update(), notify\+Transport\+Pending\+Egress(), on\+Ingress\+Body(), on\+Ingress\+Set\+Send\+Window(), on\+Ingress\+Window\+Update(), process\+Ingress\+Body(), reset(), send\+Body\+Now(), send\+Deferred\+Body(), set\+Receive\+Window(), and update\+Handler\+Pause\+State().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/session/{\bf H\+T\+T\+P\+Transaction.\+h}\item 
proxygen/lib/http/session/{\bf H\+T\+T\+P\+Transaction.\+cpp}\end{DoxyCompactItemize}
