\section{Mock\+H\+T\+T\+P\+Upstream\+Test Class Reference}
\label{classMockHTTPUpstreamTest}\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
Inheritance diagram for Mock\+H\+T\+T\+P\+Upstream\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=4.000000cm]{classMockHTTPUpstreamTest}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf Set\+Up} () override
\item 
void {\bf Tear\+Down} () override
\item 
std\+::unique\+\_\+ptr$<$ Strict\+Mock$<$ {\bf Mock\+H\+T\+T\+P\+Handler} $>$ $>$ {\bf open\+Transaction} ()
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf Mock\+H\+T\+T\+P\+Codec} $\ast$ {\bf codec\+Ptr\+\_\+} \{{\bf nullptr}\}
\item 
{\bf H\+T\+T\+P\+Codec\+::\+Callback} $\ast$ {\bf codec\+Cb\+\_\+} \{{\bf nullptr}\}
\item 
bool {\bf reusable\+\_\+} \{true\}
\item 
uint32\+\_\+t {\bf next\+Outgoing\+Txn\+\_\+} \{1\}
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 1738 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.



\subsection{Member Function Documentation}
\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!open\+Transaction@{open\+Transaction}}
\index{open\+Transaction@{open\+Transaction}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{open\+Transaction()}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<$Strict\+Mock$<${\bf Mock\+H\+T\+T\+P\+Handler}$>$ $>$ Mock\+H\+T\+T\+P\+Upstream\+Test\+::open\+Transaction (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classMockHTTPUpstreamTest_a3008af2d115c1b9fcd69fb544f8098af}


Definition at line 1783 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.


\begin{DoxyCode}
1783                                                                \{
1784     \textcolor{comment}{// Returns a mock handler with txn\_ field set in it}
1785     \textcolor{keyword}{auto} handler = std::make\_unique<StrictMock<MockHTTPHandler>>();
1786     handler->expectTransaction();
1787     \textcolor{keyword}{auto} txn = httpSession_->newTransaction(handler.get());
1788     EXPECT\_EQ(txn, handler->txn\_);
1789     \textcolor{keywordflow}{return} handler;
1790   \}
\end{DoxyCode}
\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!Set\+Up@{Set\+Up}}
\index{Set\+Up@{Set\+Up}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{Set\+Up() override}]{\setlength{\rightskip}{0pt plus 5cm}void Mock\+H\+T\+T\+P\+Upstream\+Test\+::\+Set\+Up (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classMockHTTPUpstreamTest_a188e7c7883fda09cf45c55929720a738}


Definition at line 1740 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.



Referenced by Mock\+H\+T\+T\+P2\+Upstream\+Test\+::\+Set\+Up().


\begin{DoxyCode}
1740                         \{
1741     \textcolor{keyword}{auto} codec = std::make\_unique<NiceMock<MockHTTPCodec>>();
1742     codecPtr_ = codec.get();
1743     EXPECT\_CALL(*codec, supportsParallelRequests())
1744       .WillRepeatedly(Return(\textcolor{keyword}{true}));
1745     EXPECT\_CALL(*codec, getTransportDirection())
1746       .WillRepeatedly(Return(TransportDirection::UPSTREAM));
1747     EXPECT\_CALL(*codec, setCallback(\_))
1748       .WillRepeatedly(SaveArg<0>(&codecCb_));
1749     EXPECT\_CALL(*codec, isReusable())
1750       .WillRepeatedly(ReturnPointee(&reusable_));
1751     EXPECT\_CALL(*codec, isWaitingToDrain())
1752       .WillRepeatedly(ReturnPointee(&reusable_));
1753     EXPECT\_CALL(*codec, getDefaultWindowSize())
1754       .WillRepeatedly(Return(65536));
1755     EXPECT\_CALL(*codec, getProtocol())
1756       .WillRepeatedly(Return(CodecProtocol::SPDY\_3\_1));
1757     EXPECT\_CALL(*codec, generateGoaway(\_, \_, \_, \_))
1758       .WillRepeatedly(Invoke([&] (IOBufQueue& writeBuf,
1759                                   HTTPCodec::StreamID lastStream,
1760                                   ErrorCode,
1761                                   std::shared\_ptr<folly::IOBuf>) \{
1762             EXPECT\_LT(lastStream, std::numeric\_limits<int32\_t>::max());
1763             \textcolor{keywordflow}{if} (reusable_) \{
1764               writeBuf.append(\textcolor{stringliteral}{"GOAWAY"}, 6);
1765               reusable_ = \textcolor{keyword}{false};
1766             \}
1767             \textcolor{keywordflow}{return} 6;
1768           \}));
1769     EXPECT\_CALL(*codec, createStream())
1770       .WillRepeatedly(Invoke([&] \{
1771             \textcolor{keyword}{auto} ret = nextOutgoingTxn_;
1772             nextOutgoingTxn_ += 2;
1773             \textcolor{keywordflow}{return} ret;
1774           \}));
1775 
1776     commonSetUp(std::move(codec));
1777   \}
\end{DoxyCode}
\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!Tear\+Down@{Tear\+Down}}
\index{Tear\+Down@{Tear\+Down}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{Tear\+Down() override}]{\setlength{\rightskip}{0pt plus 5cm}void Mock\+H\+T\+T\+P\+Upstream\+Test\+::\+Tear\+Down (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classMockHTTPUpstreamTest_a3d5349ab5436a85b08a3ac78acf662e8}


Definition at line 1779 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.


\begin{DoxyCode}
1779                            \{
1780     EXPECT\_TRUE(sessionDestroyed_);
1781   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!codec\+Cb\+\_\+@{codec\+Cb\+\_\+}}
\index{codec\+Cb\+\_\+@{codec\+Cb\+\_\+}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{codec\+Cb\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Codec\+::\+Callback}$\ast$ Mock\+H\+T\+T\+P\+Upstream\+Test\+::codec\+Cb\+\_\+ \{{\bf nullptr}\}}\label{classMockHTTPUpstreamTest_a736e3cd1c4c8bdd9264353d48107e178}


Definition at line 1793 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!codec\+Ptr\+\_\+@{codec\+Ptr\+\_\+}}
\index{codec\+Ptr\+\_\+@{codec\+Ptr\+\_\+}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{codec\+Ptr\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Mock\+H\+T\+T\+P\+Codec}$\ast$ Mock\+H\+T\+T\+P\+Upstream\+Test\+::codec\+Ptr\+\_\+ \{{\bf nullptr}\}}\label{classMockHTTPUpstreamTest_aafd2a08644913f7227cc6ac2c2bc7cdc}


Definition at line 1792 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!next\+Outgoing\+Txn\+\_\+@{next\+Outgoing\+Txn\+\_\+}}
\index{next\+Outgoing\+Txn\+\_\+@{next\+Outgoing\+Txn\+\_\+}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{next\+Outgoing\+Txn\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t Mock\+H\+T\+T\+P\+Upstream\+Test\+::next\+Outgoing\+Txn\+\_\+ \{1\}}\label{classMockHTTPUpstreamTest_a0bc127177a3db0721b5b8e58ca652d10}


Definition at line 1795 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.

\index{Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}!reusable\+\_\+@{reusable\+\_\+}}
\index{reusable\+\_\+@{reusable\+\_\+}!Mock\+H\+T\+T\+P\+Upstream\+Test@{Mock\+H\+T\+T\+P\+Upstream\+Test}}
\subsubsection[{reusable\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool Mock\+H\+T\+T\+P\+Upstream\+Test\+::reusable\+\_\+ \{true\}}\label{classMockHTTPUpstreamTest_aad0b33fd958b633e0349a07c9b2cb3b9}


Definition at line 1794 of file H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/session/test/{\bf H\+T\+T\+P\+Upstream\+Session\+Test.\+cpp}\end{DoxyCompactItemize}
