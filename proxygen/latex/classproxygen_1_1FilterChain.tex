\section{proxygen\+:\+:Filter\+Chain$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$ Class Template Reference}
\label{classproxygen_1_1FilterChain}\index{proxygen\+::\+Filter\+Chain$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$@{proxygen\+::\+Filter\+Chain$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$}}


{\ttfamily \#include $<$Filter\+Chain.\+h$>$}

Inheritance diagram for proxygen\+:\+:Filter\+Chain$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classproxygen_1_1FilterChain}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using {\bf Filter\+Chain\+Type} = {\bf Generic\+Filter}$<$ T1, T2, set\+\_\+callback, Take\+Ownership $>$
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf Filter\+Chain} (std\+::unique\+\_\+ptr$<$ T1 $>$ destination)
\item 
{\bf Filter\+Chain} (T1 $\ast$destination)
\item 
void {\bf set\+Callback} (T2 $\ast$cb) override
\item 
T1 $\ast$ {\bf call} ()
\item 
const T1 $\ast$ {\bf call} () const 
\item 
T1 $\ast$ {\bf get\+Chain\+End\+Ptr} ()
\item 
const T1 \& {\bf get\+Chain\+End} () const 
\item 
std\+::unique\+\_\+ptr$<$ T1 $>$ {\bf set\+Destination} (std\+::unique\+\_\+ptr$<$ T1 $>$ destination)
\item 
{\footnotesize template$<$typename C , typename C2 , typename... Types$>$ }\\std\+::enable\+\_\+if$<$ std\+::is\+\_\+constructible$<$ C $>$\+::value $>$\+::type {\bf add\+Filters} ()
\item 
{\footnotesize template$<$typename C $>$ }\\std\+::enable\+\_\+if$<$ std\+::is\+\_\+constructible$<$ C $>$\+::value $>$\+::type {\bf add\+Filters} ()
\item 
{\footnotesize template$<$typename C , typename... Types$>$ }\\void {\bf add\+Filters} (std\+::unique\+\_\+ptr$<$ C $>$ cur, Types \&\&...remaining)
\item 
{\footnotesize template$<$typename C , typename... Types$>$ }\\void {\bf add\+Filters} (C $\ast$cur, Types \&\&...remaining)
\item 
{\footnotesize template$<$typename C , typename... Args$>$ }\\{\bf Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$ \& {\bf add} (Args \&\&...args)
\item 
const T1 $\ast$ {\bf operator-\/$>$} () const 
\item 
T1 $\ast$ {\bf operator-\/$>$} ()
\item 
void {\bf foreach} (folly\+::\+Function\+Ref$<$ void({\bf Filter\+Chain\+Type} $\ast$)$>$ fn)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf add\+Filters} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
T1 $\ast$ {\bf chain\+End\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$\\*
class proxygen\+::\+Filter\+Chain$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$}

This class can be treated the same as a T1$\ast$, however internally it contains a chain of filters for T1 and T2. These filters are inserted between the original callback and destination.

If a filter does not care about one side of the calls, it will pass through the calls, saving a virtual function call. In the example below Filter1 only wants to intercept callbacks, and Filter2 only wants to intercept calls.

\begin{DoxyVerb} FilterChain        Filter1          Filter2        destination
_____________    _____________    _____________    _____________
|           |    |           |    |           |    |           |
|   call_------------------------>|   call_------->|"call"     | T1
|           |    |           |    |           |    |           |
\end{DoxyVerb}
 T2 $\vert$ callback\+\_\+ $\vert$$<$-\/-\/---callback\+\_\+ $\vert$$<$-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/---$\vert$\char`\"{}callback\char`\"{} $\vert$ $\vert$\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+$\vert$ $\vert$\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+$\vert$ $\vert$\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+$\vert$ $\vert$\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+\+\_\+$\vert$

This class is templatized on the two interfaces, T1, T2, as well as on the pass through filter implementation, Filter\+Type, the special set callback function, and a boolean indicating whether the chain owns the filters (if false, the filters must delete themselves at the correct time). Filter\+Type must have \doxyref{Generic\+Filter}{p.}{classproxygen_1_1GenericFilter} as an ancestor. 

Definition at line 207 of file Filter\+Chain.\+h.



\subsection{Member Typedef Documentation}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!Filter\+Chain\+Type@{Filter\+Chain\+Type}}
\index{Filter\+Chain\+Type@{Filter\+Chain\+Type}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{Filter\+Chain\+Type}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ using {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::{\bf Filter\+Chain\+Type} =  {\bf Generic\+Filter}$<$T1, T2, set\+\_\+callback, Take\+Ownership$>$}\label{classproxygen_1_1FilterChain_aaf56e3255f9f0290f5f0681f7cdf5d3e}


Definition at line 259 of file Filter\+Chain.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!Filter\+Chain@{Filter\+Chain}}
\index{Filter\+Chain@{Filter\+Chain}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{Filter\+Chain(std\+::unique\+\_\+ptr$<$ T1 $>$ destination)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::{\bf Filter\+Chain} (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ T1 $>$}]{destination}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}\label{classproxygen_1_1FilterChain_a0d2436218300bf51f2bb60204c8f4c1d}


Definition at line 209 of file Filter\+Chain.\+h.


\begin{DoxyCode}
209                                                      :
210       FilterType(\textcolor{keyword}{false}, \textcolor{keyword}{false}) \{
211     static\_assert(TakeOwnership, \textcolor{stringliteral}{"unique\_ptr constructor only available "}
212                   \textcolor{stringliteral}{"if the chain owns the filters."});
213     this->call\_ = CHECK\_NOTNULL(destination.release());
214     this->callback\_ = \textcolor{keyword}{nullptr}; \textcolor{comment}{//must call setCallback() explicitly}
215     this->callSource\_ = \textcolor{keyword}{this};
216     this->callbackSource\_ = this->call\_;
217     this->chainEnd_ = this->call\_;
218   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!Filter\+Chain@{Filter\+Chain}}
\index{Filter\+Chain@{Filter\+Chain}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{Filter\+Chain(\+T1 $\ast$destination)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::{\bf Filter\+Chain} (
\begin{DoxyParamCaption}
\item[{T1 $\ast$}]{destination}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}\label{classproxygen_1_1FilterChain_a3cda65d09b99a401a49cef5805b4b607}


Definition at line 220 of file Filter\+Chain.\+h.


\begin{DoxyCode}
220                                        :
221       FilterType(\textcolor{keyword}{false}, \textcolor{keyword}{false}) \{
222     static\_assert(!TakeOwnership, \textcolor{stringliteral}{"raw pointer constructor only available "}
223                   \textcolor{stringliteral}{"if the chain doesn't own the filters."});
224     this->call\_ = CHECK\_NOTNULL(destination);
225     this->callback\_ = \textcolor{keyword}{nullptr}; \textcolor{comment}{//must call setCallback() explicitly}
226     this->callSource\_ = \textcolor{keyword}{this};
227     this->callbackSource\_ = this->call\_;
228     this->chainEnd_ = this->call\_;
229   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!add@{add}}
\index{add@{add}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{add(\+Args \&\&...\+args)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ template$<$typename C , typename... Args$>$ {\bf Filter\+Chain}$<$T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership$>$\& {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::add (
\begin{DoxyParamCaption}
\item[{Args \&\&...}]{args}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a5c9a247735bddd41eff4c2795e889fc3}
Another way to add filters. This way is similar to \textquotesingle{}emplace\+\_\+front\textquotesingle{} and returns a reference to itself so you can chain \doxyref{add()}{p.}{classproxygen_1_1FilterChain_a5c9a247735bddd41eff4c2795e889fc3} calls if you like. 

Definition at line 341 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::\+Write\+Segment\+::write\+Err().


\begin{DoxyCode}
341                       \{
342     this->append(\textcolor{keyword}{new} C(std::forward<Args>(args)...));
343     \textcolor{keywordflow}{return} *\textcolor{keyword}{this};
344   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!add\+Filters@{add\+Filters}}
\index{add\+Filters@{add\+Filters}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{add\+Filters()}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ template$<$typename C , typename C2 , typename... Types$>$ std\+::enable\+\_\+if$<$std\+::is\+\_\+constructible$<$C$>$\+::value$>$\+::type {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::add\+Filters (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a156f7de0f5af0dbddfe240c12d0ef27b}
Adds filters with the given types to the front of the chain. 

Definition at line 301 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::setup\+Codec().


\begin{DoxyCode}
301                                                                       \{
302     \textcolor{comment}{// Callback <-> F1 <-> F2 ... <-> F\_new <-> Destination}
303     this->append(\textcolor{keyword}{new} C());
304     addFilters<C2, Types...>();
305   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!add\+Filters@{add\+Filters}}
\index{add\+Filters@{add\+Filters}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{add\+Filters()}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ template$<$typename C $>$ std\+::enable\+\_\+if$<$std\+::is\+\_\+constructible$<$C$>$\+::value$>$\+::type {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::add\+Filters (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a155a35b906e4169bf310197bbd09aaf7}
Base case of above function where we add a single filter. 

Definition at line 311 of file Filter\+Chain.\+h.


\begin{DoxyCode}
311                                                                       \{
312     this->append(\textcolor{keyword}{new} C());
313   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!add\+Filters@{add\+Filters}}
\index{add\+Filters@{add\+Filters}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{add\+Filters(std\+::unique\+\_\+ptr$<$ C $>$ cur, Types \&\&...\+remaining)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ template$<$typename C , typename... Types$>$ void {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::add\+Filters (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ C $>$}]{cur, }
\item[{Types \&\&...}]{remaining}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a9df273029c67b0a5805fb63f358a6877}
Adds already constructed filters (inside unique\+\_\+ptr) to the front of the chain. 

Definition at line 320 of file Filter\+Chain.\+h.


\begin{DoxyCode}
320                                                               \{
321     static\_assert(TakeOwnership, \textcolor{stringliteral}{"addFilters() can only take "}
322                   \textcolor{stringliteral}{"unique\_ptr if the chain owns the filters"});
323     this->append(cur.release());
324     addFilters(std::forward<Types>(remaining)...);
325   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!add\+Filters@{add\+Filters}}
\index{add\+Filters@{add\+Filters}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{add\+Filters(\+C $\ast$cur, Types \&\&...\+remaining)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ template$<$typename C , typename... Types$>$ void {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::add\+Filters (
\begin{DoxyParamCaption}
\item[{C $\ast$}]{cur, }
\item[{Types \&\&...}]{remaining}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a79be8bc52c2f2541560d397ec627937b}


Definition at line 328 of file Filter\+Chain.\+h.


\begin{DoxyCode}
328                                                 \{
329     static\_assert(!TakeOwnership, \textcolor{stringliteral}{"addFilters() can only take "}
330                   \textcolor{stringliteral}{"pointers if the chain doesn't own the filters"});
331     this->append(cur);
332     addFilters(std::forward<Types>(remaining)...);
333   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!add\+Filters@{add\+Filters}}
\index{add\+Filters@{add\+Filters}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{add\+Filters()}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ void {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::add\+Filters (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}\label{classproxygen_1_1FilterChain_a2c53b086f7f708560bd9c4f08eacbc26}
Base case for \doxyref{add\+Filters()}{p.}{classproxygen_1_1FilterChain_a156f7de0f5af0dbddfe240c12d0ef27b} called with no arguments. It doesn\textquotesingle{}t need to be public since trying to add zero filters doesn\textquotesingle{}t make sense from a public A\+PI pov. 

Definition at line 364 of file Filter\+Chain.\+h.


\begin{DoxyCode}
364 \{\}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!call@{call}}
\index{call@{call}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{call()}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ T1$\ast$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::call (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a097978132f89f0d76537a83daecfa960}
Returns the head of the call chain. Do$\ast$ not$\ast$ call T1\+::set\+\_\+callback() on this member. To change the callback of this entire filter chain, use the separate \doxyref{set\+Callback()}{p.}{classproxygen_1_1FilterChain_a26eec92e23c4bede04208d8996cad587} method. 

Definition at line 242 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::setup\+Codec().


\begin{DoxyCode}
242              \{
243     \textcolor{keywordflow}{return} this->call\_;
244   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!call@{call}}
\index{call@{call}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{call() const }]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ const T1$\ast$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::call (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a049c1ee6b75eb199d7e4f24010408e69}


Definition at line 245 of file Filter\+Chain.\+h.


\begin{DoxyCode}
245                          \{
246     \textcolor{keywordflow}{return} this->call\_;
247   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!foreach@{foreach}}
\index{foreach@{foreach}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{foreach(folly\+::\+Function\+Ref$<$ void(\+Filter\+Chain\+Type $\ast$)$>$ fn)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ void {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::foreach (
\begin{DoxyParamCaption}
\item[{folly\+::\+Function\+Ref$<$ void({\bf Filter\+Chain\+Type} $\ast$)$>$}]{fn}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_ac59776e8ac9688af120db07adcd87702}


Definition at line 349 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Upstream\+Session\+::attach\+Thread\+Locals().


\begin{DoxyCode}
349                                                             \{
350     \textcolor{keyword}{auto} cur = this->next\_;
351     \textcolor{keywordflow}{while} (cur) \{
352       \textcolor{keyword}{auto} filter = cur;
353       cur = cur->next\_;
354       fn(filter);
355     \}
356   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!get\+Chain\+End@{get\+Chain\+End}}
\index{get\+Chain\+End@{get\+Chain\+End}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{get\+Chain\+End() const }]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ const T1\& {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::get\+Chain\+End (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a24ef040a55410dd9a816f57cb795cb44}


Definition at line 255 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::get\+Codec().


\begin{DoxyCode}
255                                 \{
256     \textcolor{keywordflow}{return} *chainEnd_;
257   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!get\+Chain\+End\+Ptr@{get\+Chain\+End\+Ptr}}
\index{get\+Chain\+End\+Ptr@{get\+Chain\+End\+Ptr}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{get\+Chain\+End\+Ptr()}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ T1$\ast$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::get\+Chain\+End\+Ptr (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a251a79f705fb5341d440765921afdce7}
Returns the concrete implementation at the end of the filter chain. 

Definition at line 252 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+Base\+::init\+Codec\+Header\+Indexing\+Strategy().


\begin{DoxyCode}
252                        \{
253     \textcolor{keywordflow}{return} chainEnd_;
254   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!operator-\/$>$@{operator-\/$>$}}
\index{operator-\/$>$@{operator-\/$>$}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{operator-\/$>$() const }]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ const T1$\ast$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::operator-\/$>$ (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a840801ed50699b36795986469a063d4f}


Definition at line 346 of file Filter\+Chain.\+h.


\begin{DoxyCode}
346 \{ \textcolor{keywordflow}{return} call(); \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!operator-\/$>$@{operator-\/$>$}}
\index{operator-\/$>$@{operator-\/$>$}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{operator-\/$>$()}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ T1$\ast$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::operator-\/$>$ (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a97e45693befbef8b771d8cc5be1ef80c}


Definition at line 347 of file Filter\+Chain.\+h.


\begin{DoxyCode}
347 \{ \textcolor{keywordflow}{return} call(); \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!set\+Callback@{set\+Callback}}
\index{set\+Callback@{set\+Callback}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{set\+Callback(\+T2 $\ast$cb) override}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ void {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::set\+Callback (
\begin{DoxyParamCaption}
\item[{T2 $\ast$}]{cb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classproxygen_1_1FilterChain_a26eec92e23c4bede04208d8996cad587}
Set the callback for this entire filter chain. Setting this to null will uninstall the callback from the concrete object at the end of the chain. 

Definition at line 235 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::setup\+Codec().


\begin{DoxyCode}
235 \{ this->setCallbackInternalImpl(cb, cb); \}
\end{DoxyCode}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!set\+Destination@{set\+Destination}}
\index{set\+Destination@{set\+Destination}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{set\+Destination(std\+::unique\+\_\+ptr$<$ T1 $>$ destination)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ std\+::unique\+\_\+ptr$<$T1$>$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::set\+Destination (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ T1 $>$}]{destination}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1FilterChain_a9fb71919f20e105649530b95a3170b8f}


Definition at line 260 of file Filter\+Chain.\+h.



Referenced by proxygen\+::\+H\+T\+T\+P\+Session\+::on\+Native\+Protocol\+Upgrade\+Impl().


\begin{DoxyCode}
260                                                                   \{
261     static\_assert(TakeOwnership, \textcolor{stringliteral}{"unique\_ptr setDestination only available "}
262                   \textcolor{stringliteral}{"if the chain owns the filters."});
263     \textcolor{comment}{// find the last filter in the chain, and the last filter that wants calls,}
264     \textcolor{comment}{// callbacks}
265     FilterChainType* lastFilter = \textcolor{keyword}{this};
266     FilterChainType* lastCall = \textcolor{keyword}{this};
267     FilterChainType* lastCallback = \textcolor{keyword}{this};
268     \textcolor{keywordflow}{while} (lastFilter->next\_) \{
269       \textcolor{keywordflow}{if} (lastFilter->kWantsCalls\_) \{
270         lastCall = lastFilter;
271       \}
272       \textcolor{keywordflow}{if} (lastFilter->kWantsCallbacks\_) \{
273         lastCallback = lastFilter;
274       \}
275       \textcolor{keywordflow}{if} (lastFilter->call\_ == this->chainEnd\_) \{
276         \textcolor{comment}{// Search and replace, the last N non-call filters all point to dest}
277         lastFilter->call\_ = destination.get();
278       \}
279       lastFilter = lastFilter->next\_;
280     \}
281     \textcolor{keywordflow}{if} (lastFilter->kWantsCalls\_) \{
282       lastCall = lastFilter;
283     \}
284     \textcolor{keywordflow}{if} (lastFilter->kWantsCallbacks\_) \{
285       lastCallback = lastFilter;
286     \}
287     lastFilter->call\_ = CHECK\_NOTNULL(destination.release());
288     lastCall->call\_ = lastFilter->call\_;
289     lastCallback->callbackSource\_ = lastFilter->call\_;
290     \textcolor{keyword}{auto} oldChainEnd = this->chainEnd_;
291     this->chainEnd_ = lastFilter->call\_;
292 
293     this->chainEnd_->setCallback(lastCallback);
294     \textcolor{keywordflow}{return} std::unique\_ptr<T1>(oldChainEnd);
295   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}!chain\+End\+\_\+@{chain\+End\+\_\+}}
\index{chain\+End\+\_\+@{chain\+End\+\_\+}!proxygen\+::\+Filter\+Chain@{proxygen\+::\+Filter\+Chain}}
\subsubsection[{chain\+End\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T1, typename T2, typename Filter\+Type, void(\+T1\+::$\ast$)(\+T2 $\ast$) set\+\_\+callback, bool Take\+Ownership$>$ T1$\ast$ {\bf proxygen\+::\+Filter\+Chain}$<$ T1, T2, Filter\+Type, set\+\_\+callback, Take\+Ownership $>$\+::chain\+End\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1FilterChain_a679fffcc67e45ba02163e29a5d95a422}


Definition at line 366 of file Filter\+Chain.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/utils/{\bf Filter\+Chain.\+h}\end{DoxyCompactItemize}
