\section{Scoped\+Server\+Test Class Reference}
\label{classScopedServerTest}\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}}
Inheritance diagram for Scoped\+Server\+Test\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classScopedServerTest}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf Set\+Up} () override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::unique\+\_\+ptr$<$ {\bf Scoped\+H\+T\+T\+P\+Server} $>$ {\bf create\+Scoped\+Server} ()
\item 
std\+::unique\+\_\+ptr$<$ {\bf Curl\+Client} $>$ {\bf connect\+S\+SL} (const std\+::string \&ca\+File=\char`\"{}\char`\"{}, const std\+::string \&cert\+File=\char`\"{}\char`\"{}, const std\+::string \&key\+File=\char`\"{}\char`\"{})
\item 
std\+::unique\+\_\+ptr$<$ {\bf Curl\+Client} $>$ {\bf connect\+Plain\+Text} ()
\item 
virtual {\bf H\+T\+T\+P\+Server\+Options} {\bf create\+Default\+Opts} ()
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
folly\+::\+Event\+Base {\bf evb\+\_\+}
\item 
folly\+::\+Socket\+Address {\bf address\+\_\+}
\item 
H\+H\+Wheel\+Timer\+::\+Unique\+Ptr {\bf timer\+\_\+}
\item 
{\bf H\+T\+T\+P\+Server\+::\+I\+P\+Config} {\bf cfg\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 584 of file H\+T\+T\+P\+Server\+Test.\+cpp.



\subsection{Member Function Documentation}
\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!connect\+Plain\+Text@{connect\+Plain\+Text}}
\index{connect\+Plain\+Text@{connect\+Plain\+Text}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{connect\+Plain\+Text()}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<${\bf Curl\+Client}$>$ Scoped\+Server\+Test\+::connect\+Plain\+Text (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}\label{classScopedServerTest_a5e73806fd61aea5d4ae2da0d51afc726}


Definition at line 625 of file H\+T\+T\+P\+Server\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Connector\+::connect().


\begin{DoxyCode}
625                                                \{
626     URL url(
627         folly::to<std::string>(\textcolor{stringliteral}{"http://localhost:"}, address_.getPort()));
628     HTTPHeaders headers;
629     \textcolor{keyword}{auto} client = std::make\_unique<CurlClient>(
630       &evb_, HTTPMethod::GET, url, \textcolor{keyword}{nullptr}, headers, \textcolor{stringliteral}{""});
631     client->setFlowControlSettings(64 * 1024);
632     client->setLogging(\textcolor{keyword}{false});
633     HTTPConnector connector(client.get(), timer_.get());
634     connector.connect(
635       &evb\_,
636       address_,
637       std::chrono::milliseconds(1000));
638     evb\_.loop();
639     \textcolor{keywordflow}{return} client;
640   \}
\end{DoxyCode}
\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!connect\+S\+SL@{connect\+S\+SL}}
\index{connect\+S\+SL@{connect\+S\+SL}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{connect\+S\+S\+L(const std\+::string \&ca\+File="""", const std\+::string \&cert\+File="""", const std\+::string \&key\+File="""")}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<${\bf Curl\+Client}$>$ Scoped\+Server\+Test\+::connect\+S\+SL (
\begin{DoxyParamCaption}
\item[{const std\+::string \&}]{ca\+File = {\ttfamily \char`\"{}\char`\"{}}, }
\item[{const std\+::string \&}]{cert\+File = {\ttfamily \char`\"{}\char`\"{}}, }
\item[{const std\+::string \&}]{key\+File = {\ttfamily \char`\"{}\char`\"{}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}\label{classScopedServerTest_afdba3735f85d33ee69fd14dd5cb4b3fa}


Definition at line 604 of file H\+T\+T\+P\+Server\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Connector\+::connect\+S\+S\+L().


\begin{DoxyCode}
606                                                                         \{
607     URL url(folly::to<std::string>(\textcolor{stringliteral}{"https://localhost:"}, address_.getPort()));
608     HTTPHeaders headers;
609     \textcolor{keyword}{auto} client = std::make\_unique<CurlClient>(
610       &evb_, HTTPMethod::GET, url, \textcolor{keyword}{nullptr}, headers, \textcolor{stringliteral}{""});
611     client->setFlowControlSettings(64 * 1024);
612     client->setLogging(\textcolor{keyword}{false});
613     client->initializeSsl(caFile, \textcolor{stringliteral}{"http/1.1"}, certFile, keyFile);
614     HTTPConnector connector(client.get(), timer_.get());
615     connector.connectSSL(
616       &evb\_,
617       address_,
618       client->getSSLContext(),
619       \textcolor{keyword}{nullptr},
620       std::chrono::milliseconds(1000));
621     evb\_.loop();
622     \textcolor{keywordflow}{return} client;
623   \}
\end{DoxyCode}
\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!create\+Default\+Opts@{create\+Default\+Opts}}
\index{create\+Default\+Opts@{create\+Default\+Opts}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{create\+Default\+Opts()}]{\setlength{\rightskip}{0pt plus 5cm}virtual {\bf H\+T\+T\+P\+Server\+Options} Scoped\+Server\+Test\+::create\+Default\+Opts (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}\label{classScopedServerTest_a451ba8d7a23e67134de3356a7fd264fd}


Reimplemented in {\bf Connection\+Filter\+Test} \doxyref{}{p.}{classConnectionFilterTest_a19b02926b8bd53494cff0694ae181658}.



Definition at line 642 of file H\+T\+T\+P\+Server\+Test.\+cpp.



References proxygen\+::\+Request\+Handler\+Chain\+::add\+Then(), proxygen\+::\+H\+T\+T\+P\+Server\+Options\+::handler\+Factories, and proxygen\+::\+H\+T\+T\+P\+Server\+Options\+::threads.


\begin{DoxyCode}
642                                                 \{
643     HTTPServerOptions res;
644     res.handlerFactories =
645       RequestHandlerChain().addThen<TestHandlerFactory>().build();
646     res.threads = 4;
647     \textcolor{keywordflow}{return} res;
648   \}
\end{DoxyCode}
\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!create\+Scoped\+Server@{create\+Scoped\+Server}}
\index{create\+Scoped\+Server@{create\+Scoped\+Server}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{create\+Scoped\+Server()}]{\setlength{\rightskip}{0pt plus 5cm}std\+::unique\+\_\+ptr$<${\bf Scoped\+H\+T\+T\+P\+Server}$>$ Scoped\+Server\+Test\+::create\+Scoped\+Server (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}\label{classScopedServerTest_a675636f5a10180d82670fab300c2b904}


Definition at line 596 of file H\+T\+T\+P\+Server\+Test.\+cpp.


\begin{DoxyCode}
596                        \{
597     \textcolor{keyword}{auto} opts = createDefaultOpts();
598     \textcolor{keyword}{auto} res = ScopedHTTPServer::start(cfg_, std::move(opts));
599     \textcolor{keyword}{auto} addresses = res->getAddresses();
600     address_ = addresses.front().address;
601     \textcolor{keywordflow}{return} res;
602   \}
\end{DoxyCode}
\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!Set\+Up@{Set\+Up}}
\index{Set\+Up@{Set\+Up}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{Set\+Up() override}]{\setlength{\rightskip}{0pt plus 5cm}void Scoped\+Server\+Test\+::\+Set\+Up (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}}\label{classScopedServerTest_ac82df85aaf8db728090c8000ffa0337b}


Definition at line 586 of file H\+T\+T\+P\+Server\+Test.\+cpp.


\begin{DoxyCode}
586                         \{
587     timer_.reset(\textcolor{keyword}{new} HHWheelTimer(
588         &evb_,
589         std::chrono::milliseconds(HHWheelTimer::DEFAULT\_TICK\_INTERVAL),
590         AsyncTimeout::InternalEnum::NORMAL,
591         std::chrono::milliseconds(1000)));
592   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!address\+\_\+@{address\+\_\+}}
\index{address\+\_\+@{address\+\_\+}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{address\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Socket\+Address Scoped\+Server\+Test\+::address\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classScopedServerTest_a6bd3fd47cbcf19e7a58f092c57c7b0fc}


Definition at line 651 of file H\+T\+T\+P\+Server\+Test.\+cpp.

\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!cfg\+\_\+@{cfg\+\_\+}}
\index{cfg\+\_\+@{cfg\+\_\+}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{cfg\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Server\+::\+I\+P\+Config} Scoped\+Server\+Test\+::cfg\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classScopedServerTest_af65e671edcc527f52ab01556bf30e274}
{\bfseries Initial value\+:}
\begin{DoxyCode}
\{
      folly::SocketAddress(\textcolor{stringliteral}{"127.0.0.1"}, 0),
        HTTPServer::Protocol::HTTP\}
\end{DoxyCode}


Definition at line 653 of file H\+T\+T\+P\+Server\+Test.\+cpp.

\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!evb\+\_\+@{evb\+\_\+}}
\index{evb\+\_\+@{evb\+\_\+}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{evb\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Event\+Base Scoped\+Server\+Test\+::evb\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classScopedServerTest_a52622cee1f8749e9058f4d7292d22db9}


Definition at line 650 of file H\+T\+T\+P\+Server\+Test.\+cpp.

\index{Scoped\+Server\+Test@{Scoped\+Server\+Test}!timer\+\_\+@{timer\+\_\+}}
\index{timer\+\_\+@{timer\+\_\+}!Scoped\+Server\+Test@{Scoped\+Server\+Test}}
\subsubsection[{timer\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}H\+H\+Wheel\+Timer\+::\+Unique\+Ptr Scoped\+Server\+Test\+::timer\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classScopedServerTest_aed7501320d5251506e6afe65b576bb92}


Definition at line 652 of file H\+T\+T\+P\+Server\+Test.\+cpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/httpserver/tests/{\bf H\+T\+T\+P\+Server\+Test.\+cpp}\end{DoxyCompactItemize}
