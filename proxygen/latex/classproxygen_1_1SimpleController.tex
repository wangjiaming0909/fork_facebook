\section{proxygen\+:\+:Simple\+Controller Class Reference}
\label{classproxygen_1_1SimpleController}\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}


{\ttfamily \#include $<$Simple\+Controller.\+h$>$}

Inheritance diagram for proxygen\+:\+:Simple\+Controller\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classproxygen_1_1SimpleController}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf Simple\+Controller} ({\bf H\+T\+T\+P\+Session\+Acceptor} $\ast$acceptor)
\item 
{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ {\bf get\+Request\+Handler} ({\bf H\+T\+T\+P\+Transaction} \&txn, {\bf H\+T\+T\+P\+Message} $\ast$msg) override
\item 
{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ {\bf get\+Parse\+Error\+Handler} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn, const {\bf H\+T\+T\+P\+Exception} \&error, const folly\+::\+Socket\+Address \&local\+Address) override
\item 
{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ {\bf get\+Transaction\+Timeout\+Handler} ({\bf H\+T\+T\+P\+Transaction} $\ast$txn, const folly\+::\+Socket\+Address \&local\+Address) override
\item 
void {\bf attach\+Session} ({\bf H\+T\+T\+P\+Session\+Base} $\ast$) override
\item 
void {\bf detach\+Session} (const {\bf H\+T\+T\+P\+Session\+Base} $\ast$) override
\item 
std\+::chrono\+::milliseconds {\bf get\+Graceful\+Shutdown\+Timeout} () const override
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ {\bf create\+Error\+Handler} (uint32\+\_\+t {\bf status\+Code}, const std\+::string \&status\+Message, const {\bf H\+T\+T\+P\+Error\+Page} $\ast$error\+Page)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf H\+T\+T\+P\+Session\+Acceptor} $\ast$const {\bf acceptor\+\_\+} \{{\bf nullptr}\}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
This simple controller provides some basic default behaviors. When errors occur, it will install an appropriate handler. Otherwise, it will install the acceptor\textquotesingle{}s default handler. 

Definition at line 25 of file Simple\+Controller.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!Simple\+Controller@{Simple\+Controller}}
\index{Simple\+Controller@{Simple\+Controller}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{Simple\+Controller(\+H\+T\+T\+P\+Session\+Acceptor $\ast$acceptor)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+Simple\+Controller\+::\+Simple\+Controller (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Session\+Acceptor} $\ast$}]{acceptor}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [explicit]}}\label{classproxygen_1_1SimpleController_a1a3288118c1912dd943bdaf81e565cd8}


Definition at line 18 of file Simple\+Controller.\+cpp.


\begin{DoxyCode}
19     : acceptor_(acceptor) \{
20 \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!attach\+Session@{attach\+Session}}
\index{attach\+Session@{attach\+Session}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{attach\+Session(\+H\+T\+T\+P\+Session\+Base $\ast$) override}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Simple\+Controller\+::attach\+Session (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Session\+Base} $\ast$}]{session}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1SimpleController_a0c08f6a6ae3563ff1bc2b075182d5d96}
Inform the controller it is associated with this particular session. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Session\+Controller} \doxyref{}{p.}{classproxygen_1_1HTTPSessionController_adaa55a029817a9a28f14bcc33f87e07e}.



Definition at line 49 of file Simple\+Controller.\+cpp.


\begin{DoxyCode}
49 \{\}
\end{DoxyCode}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!create\+Error\+Handler@{create\+Error\+Handler}}
\index{create\+Error\+Handler@{create\+Error\+Handler}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{create\+Error\+Handler(uint32\+\_\+t status\+Code, const std\+::string \&status\+Message, const H\+T\+T\+P\+Error\+Page $\ast$error\+Page)}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ proxygen\+::\+Simple\+Controller\+::create\+Error\+Handler (
\begin{DoxyParamCaption}
\item[{uint32\+\_\+t}]{status\+Code, }
\item[{const std\+::string \&}]{status\+Message, }
\item[{const {\bf H\+T\+T\+P\+Error\+Page} $\ast$}]{error\+Page}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{classproxygen_1_1SimpleController_ad99a2068f693971c12a83be78a455fa9}


Definition at line 53 of file Simple\+Controller.\+cpp.



Referenced by get\+Parse\+Error\+Handler(), and get\+Transaction\+Timeout\+Handler().


\begin{DoxyCode}
56                                     \{
57 
58   \textcolor{keywordflow}{return} \textcolor{keyword}{new} HTTPDirectResponseHandler(statusCode,
59                                        statusMessage,
60                                        errorPage);
61 \}
\end{DoxyCode}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!detach\+Session@{detach\+Session}}
\index{detach\+Session@{detach\+Session}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{detach\+Session(const H\+T\+T\+P\+Session\+Base $\ast$) override}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Simple\+Controller\+::detach\+Session (
\begin{DoxyParamCaption}
\item[{const {\bf H\+T\+T\+P\+Session\+Base} $\ast$}]{session}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1SimpleController_a2d62097eebaf17086d906534caafab1d}
Informed at the end when the given \doxyref{H\+T\+T\+P\+Session}{p.}{classproxygen_1_1HTTPSession} is going away. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Session\+Controller} \doxyref{}{p.}{classproxygen_1_1HTTPSessionController_ad7f0f00fe0e5431cc181c40afb86c098}.



Definition at line 51 of file Simple\+Controller.\+cpp.


\begin{DoxyCode}
51 \{\}
\end{DoxyCode}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!get\+Graceful\+Shutdown\+Timeout@{get\+Graceful\+Shutdown\+Timeout}}
\index{get\+Graceful\+Shutdown\+Timeout@{get\+Graceful\+Shutdown\+Timeout}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{get\+Graceful\+Shutdown\+Timeout() const override}]{\setlength{\rightskip}{0pt plus 5cm}std\+::chrono\+::milliseconds proxygen\+::\+Simple\+Controller\+::get\+Graceful\+Shutdown\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1SimpleController_ac7ffe3d4273fe114e76a73be794daaa6}
Optionally allow the session to query custom graceful shutdown timeout. 

Reimplemented from {\bf proxygen\+::\+H\+T\+T\+P\+Session\+Controller} \doxyref{}{p.}{classproxygen_1_1HTTPSessionController_a6d486b39b48d7f5283b0e300704fdee3}.



Definition at line 63 of file Simple\+Controller.\+cpp.



References acceptor\+\_\+.


\begin{DoxyCode}
63                                                                          \{
64   \textcolor{keywordflow}{return} acceptor_->getGracefulShutdownTimeout();
65 \}
\end{DoxyCode}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!get\+Parse\+Error\+Handler@{get\+Parse\+Error\+Handler}}
\index{get\+Parse\+Error\+Handler@{get\+Parse\+Error\+Handler}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{get\+Parse\+Error\+Handler(\+H\+T\+T\+P\+Transaction $\ast$txn, const H\+T\+T\+P\+Exception \&error, const folly\+::\+Socket\+Address \&local\+Address) override}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ proxygen\+::\+Simple\+Controller\+::get\+Parse\+Error\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{txn, }
\item[{const {\bf H\+T\+T\+P\+Exception} \&}]{error, }
\item[{const folly\+::\+Socket\+Address \&}]{local\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1SimpleController_a6c678f0c0dcb767b1c296b85121b6054}
Will be invoked when \doxyref{H\+T\+T\+P\+Session}{p.}{classproxygen_1_1HTTPSession} is unable to parse a new request on the connection because of bad input.

error contains specific information about what went wrong 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Session\+Controller} \doxyref{}{p.}{classproxygen_1_1HTTPSessionController_a110ccb9aef7bd4dfc39feef90f108a05}.



Definition at line 27 of file Simple\+Controller.\+cpp.



References acceptor\+\_\+, create\+Error\+Handler(), proxygen\+::\+H\+T\+T\+P\+Exception\+::get\+Codec\+Status\+Code(), proxygen\+::\+H\+T\+T\+P\+Session\+Acceptor\+::get\+Error\+Page(), proxygen\+::\+H\+T\+T\+P\+Exception\+::get\+Http\+Status\+Code(), proxygen\+::\+H\+T\+T\+P\+Exception\+::has\+Codec\+Status\+Code(), and proxygen\+::\+H\+T\+T\+P\+Exception\+::has\+Http\+Status\+Code().


\begin{DoxyCode}
30                                             \{
31 
32   \textcolor{keywordflow}{if} (error.hasCodecStatusCode()) \{
33     \textcolor{keywordflow}{return} \textcolor{keyword}{new} CodecErrorResponseHandler(error.getCodecStatusCode());
34   \}
35 
36   \textcolor{keyword}{auto} errorPage = acceptor_->getErrorPage(localAddress);
37   \textcolor{keywordflow}{return} createErrorHandler(error.hasHttpStatusCode() ?
38                             error.getHttpStatusCode() : 400,
39                             \textcolor{stringliteral}{"Bad Request"}, errorPage);
40 \}
\end{DoxyCode}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!get\+Request\+Handler@{get\+Request\+Handler}}
\index{get\+Request\+Handler@{get\+Request\+Handler}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{get\+Request\+Handler(\+H\+T\+T\+P\+Transaction \&txn, H\+T\+T\+P\+Message $\ast$msg) override}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ proxygen\+::\+Simple\+Controller\+::get\+Request\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} \&}]{txn, }
\item[{{\bf H\+T\+T\+P\+Message} $\ast$}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1SimpleController_ab1fb98ec49bd69ae2add243b8040ac66}
Will be invoked whenever \doxyref{H\+T\+T\+P\+Session}{p.}{classproxygen_1_1HTTPSession} successfully parses a request 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Session\+Controller} \doxyref{}{p.}{classproxygen_1_1HTTPSessionController_a307377c955969970f3abbe561e986e27}.



Definition at line 22 of file Simple\+Controller.\+cpp.



References acceptor\+\_\+, and proxygen\+::\+H\+T\+T\+P\+Session\+Acceptor\+::new\+Handler().


\begin{DoxyCode}
23                                           \{
24   \textcolor{keywordflow}{return} acceptor_->newHandler(txn, msg);
25 \}
\end{DoxyCode}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!get\+Transaction\+Timeout\+Handler@{get\+Transaction\+Timeout\+Handler}}
\index{get\+Transaction\+Timeout\+Handler@{get\+Transaction\+Timeout\+Handler}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{get\+Transaction\+Timeout\+Handler(\+H\+T\+T\+P\+Transaction $\ast$txn, const folly\+::\+Socket\+Address \&local\+Address) override}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Transaction\+Handler} $\ast$ proxygen\+::\+Simple\+Controller\+::get\+Transaction\+Timeout\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Transaction} $\ast$}]{txn, }
\item[{const folly\+::\+Socket\+Address \&}]{local\+Address}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1SimpleController_ab125724a144eb5e02245d2870b89c288}
Will be invoked when \doxyref{H\+T\+T\+P\+Session}{p.}{classproxygen_1_1HTTPSession} times out parsing a new request. 

Implements {\bf proxygen\+::\+H\+T\+T\+P\+Session\+Controller} \doxyref{}{p.}{classproxygen_1_1HTTPSessionController_a3b8c71afdff43e1ece41d12ccd833409}.



Definition at line 42 of file Simple\+Controller.\+cpp.



References acceptor\+\_\+, create\+Error\+Handler(), and proxygen\+::\+H\+T\+T\+P\+Session\+Acceptor\+::get\+Error\+Page().


\begin{DoxyCode}
43                                                                 \{
44 
45   \textcolor{keyword}{auto} errorPage = acceptor_->getErrorPage(localAddress);
46   \textcolor{keywordflow}{return} createErrorHandler(408, \textcolor{stringliteral}{"Client timeout"}, errorPage);
47 \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}!acceptor\+\_\+@{acceptor\+\_\+}}
\index{acceptor\+\_\+@{acceptor\+\_\+}!proxygen\+::\+Simple\+Controller@{proxygen\+::\+Simple\+Controller}}
\subsubsection[{acceptor\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+T\+T\+P\+Session\+Acceptor}$\ast$ const proxygen\+::\+Simple\+Controller\+::acceptor\+\_\+ \{{\bf nullptr}\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classproxygen_1_1SimpleController_a4575d6b310fd3c1c09dc9dad8c65671d}


Definition at line 64 of file Simple\+Controller.\+h.



Referenced by get\+Graceful\+Shutdown\+Timeout(), get\+Parse\+Error\+Handler(), get\+Request\+Handler(), and get\+Transaction\+Timeout\+Handler().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/session/{\bf Simple\+Controller.\+h}\item 
proxygen/lib/http/session/{\bf Simple\+Controller.\+cpp}\end{DoxyCompactItemize}
