\section{fbcode\+\_\+builder.\+F\+B\+Code\+Builder Class Reference}
\label{classfbcode__builder_1_1FBCodeBuilder}\index{fbcode\+\_\+builder.\+F\+B\+Code\+Builder@{fbcode\+\_\+builder.\+F\+B\+Code\+Builder}}
Inheritance diagram for fbcode\+\_\+builder.\+F\+B\+Code\+Builder\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classfbcode__builder_1_1FBCodeBuilder}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def {\bf \+\_\+\+\_\+init\+\_\+\+\_\+} (self, kwargs)
\item 
def {\bf \+\_\+\+\_\+repr\+\_\+\+\_\+} (self)
\item 
def {\bf option} (self, {\bf name}, default=None)
\item 
def {\bf has\+\_\+option} (self, {\bf name})
\item 
def {\bf add\+\_\+option} (self, {\bf name}, value)
\item 
def {\bf render} (self, steps)
\item 
def {\bf build} (self, steps)
\item 
def {\bf setup} (self)
\item 
def {\bf diagnostics} (self)
\item 
def {\bf step} (self, {\bf name}, actions)
\item 
def {\bf run} (self, shell\+\_\+cmd)
\item 
def {\bf workdir} (self, dir)
\item 
def {\bf copy\+\_\+local\+\_\+repo} (self, dir, dest\+\_\+name)
\item 
def {\bf debian\+\_\+deps} (self)
\item 
def {\bf install\+\_\+debian\+\_\+deps} (self)
\item 
def {\bf debian\+\_\+ccache\+\_\+setup\+\_\+steps} (self)
\item 
def {\bf github\+\_\+project\+\_\+workdir} (self, project, path)
\item 
def {\bf fb\+\_\+github\+\_\+project\+\_\+workdir} (self, project\+\_\+and\+\_\+path, github\+\_\+org=\textquotesingle{}facebook\textquotesingle{})
\item 
def {\bf parallel\+\_\+make} (self, make\+\_\+vars=None)
\item 
def {\bf make\+\_\+and\+\_\+install} (self, make\+\_\+vars=None)
\item 
def {\bf configure} (self, {\bf name}=None)
\item 
def {\bf autoconf\+\_\+install} (self, {\bf name})
\item 
def {\bf cmake\+\_\+configure} (self, {\bf name}, cmake\+\_\+path=\textquotesingle{}..\textquotesingle{})
\item 
def {\bf cmake\+\_\+install} (self, {\bf name}, cmake\+\_\+path=\textquotesingle{}..\textquotesingle{})
\item 
def {\bf fb\+\_\+github\+\_\+autoconf\+\_\+install} (self, project\+\_\+and\+\_\+path, github\+\_\+org=\textquotesingle{}facebook\textquotesingle{})
\item 
def {\bf fb\+\_\+github\+\_\+cmake\+\_\+install} (self, project\+\_\+and\+\_\+path, cmake\+\_\+path=\textquotesingle{}..\textquotesingle{}, github\+\_\+org=\textquotesingle{}facebook\textquotesingle{})
\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf options\+\_\+used}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
def {\bf \+\_\+make\+\_\+vars} (self, make\+\_\+vars)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf \+\_\+options\+\_\+do\+\_\+not\+\_\+access}
\item 
{\bf \+\_\+github\+\_\+hashes}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 83 of file fbcode\+\_\+builder.\+py.



\subsection{Constructor \& Destructor Documentation}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+init\+\_\+\+\_\+@{\+\_\+\+\_\+init\+\_\+\+\_\+}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{\+\_\+\+\_\+init\+\_\+\+\_\+(self, kwargs)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+\+\_\+init\+\_\+\+\_\+ (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{kwargs}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a02218bace0d9992d68cdffeb8bfe6278}


Definition at line 85 of file fbcode\+\_\+builder.\+py.


\begin{DoxyCode}
85     \textcolor{keyword}{def }__init__(self, **kwargs):
86         self._options_do_not_access = kwargs  \textcolor{comment}{# Use .option() instead.}
87         \textcolor{comment}{# This raises upon detecting options that are specified but unused,}
88         \textcolor{comment}{# because otherwise it is very easy to make a typo in option names.}
89         self.options_used = set()
90         self._github_hashes = dict(_read_project_github_hashes())
91 
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!\+\_\+\+\_\+repr\+\_\+\+\_\+@{\+\_\+\+\_\+repr\+\_\+\+\_\+}}
\index{\+\_\+\+\_\+repr\+\_\+\+\_\+@{\+\_\+\+\_\+repr\+\_\+\+\_\+}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{\+\_\+\+\_\+repr\+\_\+\+\_\+(self)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+\+\_\+repr\+\_\+\+\_\+ (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_ac675551dfb753df591af560d54626bff}


Definition at line 92 of file fbcode\+\_\+builder.\+py.


\begin{DoxyCode}
92     \textcolor{keyword}{def }__repr__(self):
93         \textcolor{keywordflow}{return} \textcolor{stringliteral}{'\{0\}(\{1\})'}.format(
94             self.\_\_class\_\_.\_\_name\_\_,
95             \textcolor{stringliteral}{', '}.join(
96                 \textcolor{stringliteral}{'\{0\}=\{1\}'}.format(k, repr(v))
97                     \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} self.\_options\_do\_not\_access.items()
98             )
99         )
100 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!\+\_\+make\+\_\+vars@{\+\_\+make\+\_\+vars}}
\index{\+\_\+make\+\_\+vars@{\+\_\+make\+\_\+vars}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{\+\_\+make\+\_\+vars(self, make\+\_\+vars)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+make\+\_\+vars (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{make\+\_\+vars}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classfbcode__builder_1_1FBCodeBuilder_a51f60af5b4110f07cb2c4fbb591727bf}


Definition at line 283 of file fbcode\+\_\+builder.\+py.



References shell\+\_\+quoting.\+shell\+\_\+join().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+make\+\_\+and\+\_\+install(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+parallel\+\_\+make().


\begin{DoxyCode}
283     \textcolor{keyword}{def }_make_vars(self, make\_vars):
284         \textcolor{keywordflow}{return} shell_join(\textcolor{stringliteral}{' '}, (
285             ShellQuoted(\textcolor{stringliteral}{'\{k\}=\{v\}'}).format(k=k, v=v)
286                 \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} (\{\} \textcolor{keywordflow}{if} make\_vars \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{else} make\_vars).items()
287         ))
288 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!add\+\_\+option@{add\+\_\+option}}
\index{add\+\_\+option@{add\+\_\+option}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{add\+\_\+option(self, name, value)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+add\+\_\+option (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{value}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_aba688e21f53f6e31990ca9ee97982c47}


Definition at line 111 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+options\+\_\+do\+\_\+not\+\_\+access.


\begin{DoxyCode}
111     \textcolor{keyword}{def }add_option(self, name, value):
112         \textcolor{keywordflow}{if} name \textcolor{keywordflow}{in} self._options_do_not_access:
113             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'Option \{0\} already set'}.format(name))
114         self._options_do_not_access[name] = value
115 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!autoconf\+\_\+install@{autoconf\+\_\+install}}
\index{autoconf\+\_\+install@{autoconf\+\_\+install}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{autoconf\+\_\+install(self, name)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+autoconf\+\_\+install (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_adddf6f8d9e910637ec8fb8524fee9daf}


Definition at line 325 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+configure(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+make\+\_\+and\+\_\+install(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+step(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+step().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+autoconf\+\_\+install().


\begin{DoxyCode}
325     \textcolor{keyword}{def }autoconf_install(self, name):
326         \textcolor{keywordflow}{return} self.step(\textcolor{stringliteral}{'Build and install \{0\}'}.format(name), [
327             self.run(ShellQuoted(\textcolor{stringliteral}{'autoreconf -ivf'})),
328         ] + self.configure() + self.make_and_install())
329 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!build@{build}}
\index{build@{build}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{build(self, steps)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+build (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{steps}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_ac0fe8d534f835bf4c82656d1804308df}


Definition at line 141 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+diagnostics(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+setup(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+setup().


\begin{DoxyCode}
141     \textcolor{keyword}{def }build(self, steps):
142         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} steps:
143             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'Please ensure that the config you are passing '}
144                                \textcolor{stringliteral}{'contains steps'})
145         \textcolor{keywordflow}{return} [self.setup(), self.diagnostics()] + steps
146 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!cmake\+\_\+configure@{cmake\+\_\+configure}}
\index{cmake\+\_\+configure@{cmake\+\_\+configure}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{cmake\+\_\+configure(self, name, cmake\+\_\+path=\textquotesingle{}..\textquotesingle{})}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+configure (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{cmake\+\_\+path = {\ttfamily \textquotesingle{}..\textquotesingle{}}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_aa717c0ea61f606104ce64a1bdcdb3115}


Definition at line 330 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run(), and shell\+\_\+quoting.\+shell\+\_\+join().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+install().


\begin{DoxyCode}
330     \textcolor{keyword}{def }cmake_configure(self, name, cmake\_path='..'):
331         cmake\_defines = \{
332             \textcolor{stringliteral}{'BUILD\_SHARED\_LIBS'}: \textcolor{stringliteral}{'ON'},
333             \textcolor{stringliteral}{'CMAKE\_INSTALL\_PREFIX'}: self.option(\textcolor{stringliteral}{'prefix'}),
334         \}
335         cmake\_defines.update(
336             self.option(\textcolor{stringliteral}{'\{0\}:cmake\_defines'}.format(name), \{\})
337         )
338         \textcolor{keywordflow}{return} [
339             self.run(ShellQuoted(
340                 \textcolor{stringliteral}{'CXXFLAGS="$CXXFLAGS -fPIC -isystem "\{p\}"/include" '}
341                 \textcolor{stringliteral}{'CFLAGS="$CFLAGS -fPIC -isystem "\{p\}"/include" '}
342                 \textcolor{stringliteral}{'cmake \{args\} \{cmake\_path\}'}
343             ).format(
344                 p=self.option(\textcolor{stringliteral}{'prefix'}),
345                 args=shell_join(\textcolor{stringliteral}{' '}, (
346                     ShellQuoted(\textcolor{stringliteral}{'-D\{k\}=\{v\}'}).format(k=k, v=v)
347                         \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} cmake\_defines.items()
348                 )),
349                 cmake\_path=cmake\_path,
350             )),
351         ]
352 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!cmake\+\_\+install@{cmake\+\_\+install}}
\index{cmake\+\_\+install@{cmake\+\_\+install}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{cmake\+\_\+install(self, name, cmake\+\_\+path=\textquotesingle{}..\textquotesingle{})}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+install (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{cmake\+\_\+path = {\ttfamily \textquotesingle{}..\textquotesingle{}}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_aff66e33205009b083d6272dc33757b64}


Definition at line 353 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+configure(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+make\+\_\+and\+\_\+install(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+step(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+step().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+cmake\+\_\+install().


\begin{DoxyCode}
353     \textcolor{keyword}{def }cmake_install(self, name, cmake\_path='..'):
354         \textcolor{keywordflow}{return} self.step(
355             \textcolor{stringliteral}{'Build and install \{0\}'}.format(name),
356             self.cmake_configure(name, cmake\_path) + self.make_and_install()
357         )
358 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!configure@{configure}}
\index{configure@{configure}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{configure(self, name=\+None)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+configure (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name = {\ttfamily None}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a9bafdc9ebde1e6c76151664655eb18c6}


Definition at line 303 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run(), and shell\+\_\+quoting.\+shell\+\_\+join().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+autoconf\+\_\+install().


\begin{DoxyCode}
303     \textcolor{keyword}{def }configure(self, name=None):
304         autoconf\_options = \{\}
305         \textcolor{keywordflow}{if} name \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:
306             autoconf\_options.update(
307                 self.option(\textcolor{stringliteral}{'\{0\}:autoconf\_options'}.format(name), \{\})
308             )
309         \textcolor{keywordflow}{return} [
310             self.run(ShellQuoted(
311                 \textcolor{stringliteral}{'LDFLAGS="$LDFLAGS -L"\{p\}"/lib -Wl,-rpath="\{p\}"/lib" '}
312                 \textcolor{stringliteral}{'CFLAGS="$CFLAGS -I"\{p\}"/include" '}
313                 \textcolor{stringliteral}{'CPPFLAGS="$CPPFLAGS -I"\{p\}"/include" '}
314                 \textcolor{stringliteral}{'PY\_PREFIX=\{p\} '}
315                 \textcolor{stringliteral}{'./configure --prefix=\{p\} \{args\}'}
316             ).format(
317                 p=self.option(\textcolor{stringliteral}{'prefix'}),
318                 args=shell_join(\textcolor{stringliteral}{' '}, (
319                     ShellQuoted(\textcolor{stringliteral}{'\{k\}=\{v\}'}).format(k=k, v=v)
320                     \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} autoconf\_options.items()
321                 )),
322             )),
323         ]
324 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!copy\+\_\+local\+\_\+repo@{copy\+\_\+local\+\_\+repo}}
\index{copy\+\_\+local\+\_\+repo@{copy\+\_\+local\+\_\+repo}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{copy\+\_\+local\+\_\+repo(self, dir, dest\+\_\+name)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+copy\+\_\+local\+\_\+repo (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{dir, }
\item[{}]{dest\+\_\+name}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a1d889aca71ff24b1e3ac060371fcf694}
\begin{DoxyVerb}Copy the local repo at `dir` into this step's `workdir()`, analog of:
  cp -r /path/to/folly folly
\end{DoxyVerb}
 

Definition at line 175 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir().


\begin{DoxyCode}
175     \textcolor{keyword}{def }copy_local_repo(self, dir, dest\_name):
176         \textcolor{stringliteral}{'''}
177 \textcolor{stringliteral}{        Copy the local repo at `dir` into this step's `workdir()`, analog of:}
178 \textcolor{stringliteral}{          cp -r /path/to/folly folly}
179 \textcolor{stringliteral}{        '''}
180         \textcolor{keywordflow}{raise} NotImplementedError
181 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!debian\+\_\+ccache\+\_\+setup\+\_\+steps@{debian\+\_\+ccache\+\_\+setup\+\_\+steps}}
\index{debian\+\_\+ccache\+\_\+setup\+\_\+steps@{debian\+\_\+ccache\+\_\+setup\+\_\+steps}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{debian\+\_\+ccache\+\_\+setup\+\_\+steps(self)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+debian\+\_\+ccache\+\_\+setup\+\_\+steps (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a9f100ffe7bb168c03f2aa6953d9969a7}


Definition at line 249 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+install\+\_\+debian\+\_\+deps().


\begin{DoxyCode}
249     \textcolor{keyword}{def }debian_ccache_setup_steps(self):
250         \textcolor{keywordflow}{return} []  \textcolor{comment}{# It's ok to ship a renderer without ccache support.}
251 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!debian\+\_\+deps@{debian\+\_\+deps}}
\index{debian\+\_\+deps@{debian\+\_\+deps}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{debian\+\_\+deps(self)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+debian\+\_\+deps (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a5a11e2701863b6600a62deffaa2d4474}


Definition at line 182 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+install\+\_\+debian\+\_\+deps().


\begin{DoxyCode}
182     \textcolor{keyword}{def }debian_deps(self):
183         \textcolor{keywordflow}{return} [
184             \textcolor{stringliteral}{'autoconf-archive'},
185             \textcolor{stringliteral}{'bison'},
186             \textcolor{stringliteral}{'build-essential'},
187             \textcolor{stringliteral}{'cmake'},
188             \textcolor{stringliteral}{'curl'},
189             \textcolor{stringliteral}{'flex'},
190             \textcolor{stringliteral}{'git'},
191             \textcolor{stringliteral}{'gperf'},
192             \textcolor{stringliteral}{'joe'},
193             \textcolor{stringliteral}{'libboost-all-dev'},
194             \textcolor{stringliteral}{'libcap-dev'},
195             \textcolor{stringliteral}{'libdouble-conversion-dev'},
196             \textcolor{stringliteral}{'libevent-dev'},
197             \textcolor{stringliteral}{'libgflags-dev'},
198             \textcolor{stringliteral}{'libgoogle-glog-dev'},
199             \textcolor{stringliteral}{'libkrb5-dev'},
200             \textcolor{stringliteral}{'libpcre3-dev'},
201             \textcolor{stringliteral}{'libpthread-stubs0-dev'},
202             \textcolor{stringliteral}{'libnuma-dev'},
203             \textcolor{stringliteral}{'libsasl2-dev'},
204             \textcolor{stringliteral}{'libsnappy-dev'},
205             \textcolor{stringliteral}{'libsqlite3-dev'},
206             \textcolor{stringliteral}{'libssl-dev'},
207             \textcolor{stringliteral}{'libtool'},
208             \textcolor{stringliteral}{'netcat-openbsd'},
209             \textcolor{stringliteral}{'pkg-config'},
210             \textcolor{stringliteral}{'sudo'},
211             \textcolor{stringliteral}{'unzip'},
212             \textcolor{stringliteral}{'wget'},
213         ]
214 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!diagnostics@{diagnostics}}
\index{diagnostics@{diagnostics}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{diagnostics(self)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+diagnostics (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a64340bd79e34282afd523863703534f2}


Definition at line 151 of file fbcode\+\_\+builder.\+py.



References shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+comment(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+comment(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+step(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+step().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+build().


\begin{DoxyCode}
151     \textcolor{keyword}{def }diagnostics(self):
152         \textcolor{stringliteral}{'Log some system diagnostics before/after setup for ease of debugging'}
153         \textcolor{comment}{# The builder's repr is not used in a command to avoid pointlessly}
154         \textcolor{comment}{# invalidating Docker's build cache.}
155         \textcolor{keywordflow}{return} self.step(\textcolor{stringliteral}{'Diagnostics'}, [
156             self.comment(\textcolor{stringliteral}{'Builder \{0\}'}.format(repr(self))),
157             self.run(ShellQuoted(\textcolor{stringliteral}{'hostname'})),
158             self.run(ShellQuoted(\textcolor{stringliteral}{'cat /etc/issue || echo no /etc/issue'})),
159             self.run(ShellQuoted(\textcolor{stringliteral}{'g++ --version || echo g++ not installed'})),
160             self.run(ShellQuoted(\textcolor{stringliteral}{'cmake --version || echo cmake not installed'})),
161         ])
162 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!fb\+\_\+github\+\_\+autoconf\+\_\+install@{fb\+\_\+github\+\_\+autoconf\+\_\+install}}
\index{fb\+\_\+github\+\_\+autoconf\+\_\+install@{fb\+\_\+github\+\_\+autoconf\+\_\+install}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{fb\+\_\+github\+\_\+autoconf\+\_\+install(self, project\+\_\+and\+\_\+path, github\+\_\+org=\textquotesingle{}facebook\textquotesingle{})}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+autoconf\+\_\+install (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{project\+\_\+and\+\_\+path, }
\item[{}]{github\+\_\+org = {\ttfamily \textquotesingle{}facebook\textquotesingle{}}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_ac80b52f88cf372d96cbe75d0a1d9c86f}


Definition at line 359 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+autoconf\+\_\+install(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+project\+\_\+workdir().


\begin{DoxyCode}
359     \textcolor{keyword}{def }fb_github_autoconf_install(self, project\_and\_path, github\_org='facebook'):
360         \textcolor{keywordflow}{return} [
361             self.fb_github_project_workdir(project\_and\_path, github\_org),
362             self.autoconf_install(project\_and\_path),
363         ]
364 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!fb\+\_\+github\+\_\+cmake\+\_\+install@{fb\+\_\+github\+\_\+cmake\+\_\+install}}
\index{fb\+\_\+github\+\_\+cmake\+\_\+install@{fb\+\_\+github\+\_\+cmake\+\_\+install}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{fb\+\_\+github\+\_\+cmake\+\_\+install(self, project\+\_\+and\+\_\+path, cmake\+\_\+path=\textquotesingle{}..\textquotesingle{}, github\+\_\+org=\textquotesingle{}facebook\textquotesingle{})}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+cmake\+\_\+install (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{project\+\_\+and\+\_\+path, }
\item[{}]{cmake\+\_\+path = {\ttfamily \textquotesingle{}..\textquotesingle{}}, }
\item[{}]{github\+\_\+org = {\ttfamily \textquotesingle{}facebook\textquotesingle{}}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a642fb2e0fe693fbaeb58653b2ed97b35}


Definition at line 365 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+install(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+project\+\_\+workdir().


\begin{DoxyCode}
365     \textcolor{keyword}{def }fb_github_cmake_install(self, project\_and\_path, cmake\_path='..', github\_org='facebook'):
366         \textcolor{keywordflow}{return} [
367             self.fb_github_project_workdir(project\_and\_path, github\_org),
368             self.cmake_install(project\_and\_path, cmake\_path),
369         ]
370 \end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!fb\+\_\+github\+\_\+project\+\_\+workdir@{fb\+\_\+github\+\_\+project\+\_\+workdir}}
\index{fb\+\_\+github\+\_\+project\+\_\+workdir@{fb\+\_\+github\+\_\+project\+\_\+workdir}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{fb\+\_\+github\+\_\+project\+\_\+workdir(self, project\+\_\+and\+\_\+path, github\+\_\+org=\textquotesingle{}facebook\textquotesingle{})}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+project\+\_\+workdir (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{project\+\_\+and\+\_\+path, }
\item[{}]{github\+\_\+org = {\ttfamily \textquotesingle{}facebook\textquotesingle{}}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a9b5fe5a35afe35aec0ac68996f5e983e}


Definition at line 278 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+autoconf\+\_\+install(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+cmake\+\_\+install().


\begin{DoxyCode}
278     \textcolor{keyword}{def }fb_github_project_workdir(self, project\_and\_path, github\_org='facebook'):
279         \textcolor{stringliteral}{'This helper lets Facebook-internal CI special-cases FB projects'}
280         project, path = project\_and\_path.split(\textcolor{stringliteral}{'/'}, 1)
281         \textcolor{keywordflow}{return} self.github_project_workdir(github\_org + \textcolor{stringliteral}{'/'} + project, path)
282 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!github\+\_\+project\+\_\+workdir@{github\+\_\+project\+\_\+workdir}}
\index{github\+\_\+project\+\_\+workdir@{github\+\_\+project\+\_\+workdir}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{github\+\_\+project\+\_\+workdir(self, project, path)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{project, }
\item[{}]{path}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_ab6b8644665eb16625044b8c994dc0ced}


Definition at line 252 of file fbcode\+\_\+builder.\+py.



References docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+copy\+\_\+local\+\_\+repo(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+copy\+\_\+local\+\_\+repo(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option(), shell\+\_\+quoting.\+path\+\_\+join(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+step(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+step(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+workdir(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+workdir().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+fb\+\_\+github\+\_\+project\+\_\+workdir().


\begin{DoxyCode}
252     \textcolor{keyword}{def }github_project_workdir(self, project, path):
253         \textcolor{comment}{# Only check out a non-default branch if requested. This especially}
254         \textcolor{comment}{# makes sense when building from a local repo.}
255         git\_hash = self.option(
256             \textcolor{stringliteral}{'\{0\}:git\_hash'}.format(project),
257             \textcolor{comment}{# Any repo that has a hash in deps/github\_hashes defaults to}
258             \textcolor{comment}{# that, with the goal of making builds maximally consistent.}
259             self.\_github\_hashes.get(project, \textcolor{stringliteral}{''})
260         )
261         maybe\_change\_branch = [
262             self.run(ShellQuoted(\textcolor{stringliteral}{'git checkout \{hash\}'}).format(hash=git\_hash)),
263         ] \textcolor{keywordflow}{if} git\_hash \textcolor{keywordflow}{else} []
264 
265         base\_dir = self.option(\textcolor{stringliteral}{'projects\_dir'})
266 
267         local\_repo\_dir = self.option(\textcolor{stringliteral}{'\{0\}:local\_repo\_dir'}.format(project), \textcolor{stringliteral}{''})
268         \textcolor{keywordflow}{return} self.step(\textcolor{stringliteral}{'Check out \{0\}, workdir \{1\}'}.format(project, path), [
269             self.workdir(base\_dir),
270             self.run(
271                 ShellQuoted(\textcolor{stringliteral}{'git clone https://github.com/\{p\}'}).format(p=project)
272             ) \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} local\_repo\_dir \textcolor{keywordflow}{else} self.copy_local_repo(
273                 local\_repo\_dir, os.path.basename(project)
274             ),
275             self.workdir(path_join(base\_dir, os.path.basename(project), path)),
276         ] + maybe\_change\_branch)
277 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!has\+\_\+option@{has\+\_\+option}}
\index{has\+\_\+option@{has\+\_\+option}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{has\+\_\+option(self, name)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+has\+\_\+option (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_aebe22a563f68f8d01a35463f540300ea}


Definition at line 108 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+options\+\_\+do\+\_\+not\+\_\+access.



Referenced by shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+setup().


\begin{DoxyCode}
108     \textcolor{keyword}{def }has_option(self, name):
109         \textcolor{keywordflow}{return} name \textcolor{keywordflow}{in} self._options_do_not_access
110 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!install\+\_\+debian\+\_\+deps@{install\+\_\+debian\+\_\+deps}}
\index{install\+\_\+debian\+\_\+deps@{install\+\_\+debian\+\_\+deps}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{install\+\_\+debian\+\_\+deps(self)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+install\+\_\+debian\+\_\+deps (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a2f3b87fa18289cd3662aee3e83224f41}


Definition at line 219 of file fbcode\+\_\+builder.\+py.



References docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+debian\+\_\+ccache\+\_\+setup\+\_\+steps(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+debian\+\_\+ccache\+\_\+setup\+\_\+steps(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+debian\+\_\+deps(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run(), shell\+\_\+quoting.\+shell\+\_\+join(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+step(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+step().



Referenced by docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+setup().


\begin{DoxyCode}
219     \textcolor{keyword}{def }install_debian_deps(self):
220         actions = [
221             self.run(
222                 ShellQuoted(\textcolor{stringliteral}{'apt-get update && apt-get install -yq \{deps\}'}).format(
223                     deps=shell_join(\textcolor{stringliteral}{' '}, (
224                         ShellQuoted(dep) \textcolor{keywordflow}{for} dep \textcolor{keywordflow}{in} self.debian_deps())))
225             ),
226         ]
227         gcc\_version = self.option(\textcolor{stringliteral}{'gcc\_version'})
228 
229         \textcolor{comment}{# Make the selected GCC the default before building anything}
230         actions.extend([
231             self.run(ShellQuoted(\textcolor{stringliteral}{'apt-get install -yq \{c\} \{cpp\}'}).format(
232                 c=ShellQuoted(\textcolor{stringliteral}{'gcc-\{v\}'}).format(v=gcc\_version),
233                 cpp=ShellQuoted(\textcolor{stringliteral}{'g++-\{v\}'}).format(v=gcc\_version),
234             )),
235             self.run(ShellQuoted(
236                 \textcolor{stringliteral}{'update-alternatives --install /usr/bin/gcc gcc \{c\} 40 '}
237                 \textcolor{stringliteral}{'--slave /usr/bin/g++ g++ \{cpp\}'}
238             ).format(
239                 c=ShellQuoted(\textcolor{stringliteral}{'/usr/bin/gcc-\{v\}'}).format(v=gcc\_version),
240                 cpp=ShellQuoted(\textcolor{stringliteral}{'/usr/bin/g++-\{v\}'}).format(v=gcc\_version),
241             )),
242             self.run(ShellQuoted(\textcolor{stringliteral}{'update-alternatives --config gcc'})),
243         ])
244 
245         actions.extend(self.debian_ccache_setup_steps())
246 
247         \textcolor{keywordflow}{return} self.step(\textcolor{stringliteral}{'Install packages for Debian-based OS'}, actions)
248 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!make\+\_\+and\+\_\+install@{make\+\_\+and\+\_\+install}}
\index{make\+\_\+and\+\_\+install@{make\+\_\+and\+\_\+install}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{make\+\_\+and\+\_\+install(self, make\+\_\+vars=\+None)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+make\+\_\+and\+\_\+install (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{make\+\_\+vars = {\ttfamily None}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a6f32b6848b9c7b51b95ea44dccddd30d}


Definition at line 295 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+make\+\_\+vars(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+parallel\+\_\+make(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+autoconf\+\_\+install(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+install().


\begin{DoxyCode}
295     \textcolor{keyword}{def }make_and_install(self, make\_vars=None):
296         \textcolor{keywordflow}{return} [
297             self.parallel_make(make\_vars),
298             self.run(ShellQuoted(\textcolor{stringliteral}{'make install \{vars\}'}).format(
299                 vars=self._make_vars(make\_vars),
300             )),
301         ]
302 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!option@{option}}
\index{option@{option}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{option(self, name, default=\+None)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{default = {\ttfamily None}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a2e909c8eb525b65f9cbb9c902c5b1c01}


Definition at line 101 of file fbcode\+\_\+builder.\+py.



Referenced by docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+\_\+user(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+configure(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+configure(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+copy\+\_\+local\+\_\+repo(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+debian\+\_\+ccache\+\_\+setup\+\_\+steps(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+install\+\_\+debian\+\_\+deps(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+parallel\+\_\+make(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+setup(), and shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+setup().


\begin{DoxyCode}
101     \textcolor{keyword}{def }option(self, name, default=None):
102         value = self.\_options\_do\_not\_access.get(name, default)
103         \textcolor{keywordflow}{if} value \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:
104             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{'Option \{0\} is required'}.format(name))
105         self.options\_used.add(name)
106         \textcolor{keywordflow}{return} value
107 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!parallel\+\_\+make@{parallel\+\_\+make}}
\index{parallel\+\_\+make@{parallel\+\_\+make}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{parallel\+\_\+make(self, make\+\_\+vars=\+None)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+parallel\+\_\+make (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{make\+\_\+vars = {\ttfamily None}}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a3524fa0d1fda016ea3d1ffc0defb0809}


Definition at line 289 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+make\+\_\+vars(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+run(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+make\+\_\+and\+\_\+install().


\begin{DoxyCode}
289     \textcolor{keyword}{def }parallel_make(self, make\_vars=None):
290         \textcolor{keywordflow}{return} self.run(ShellQuoted(\textcolor{stringliteral}{'make -j \{n\} \{vars\}'}).format(
291             n=self.option(\textcolor{stringliteral}{'make\_parallelism'}),
292             vars=self._make_vars(make\_vars),
293         ))
294 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!render@{render}}
\index{render@{render}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{render(self, steps)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+render (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{steps}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a9520e20493a3d6963a1ad94f12e9022c}
\begin{DoxyVerb}Converts nested actions to your builder's expected output format.
Typically takes the output of build().\end{DoxyVerb}
 

Definition at line 120 of file fbcode\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+options\+\_\+do\+\_\+not\+\_\+access, shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+\_\+render\+\_\+impl(), docker\+\_\+builder.\+Docker\+F\+B\+Code\+Builder.\+\_\+render\+\_\+impl(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+options\+\_\+used.


\begin{DoxyCode}
120     \textcolor{keyword}{def }render(self, steps):
121         \textcolor{stringliteral}{'''}
122 \textcolor{stringliteral}{}
123 \textcolor{stringliteral}{        Converts nested actions to your builder's expected output format.}
124 \textcolor{stringliteral}{        Typically takes the output of build().}
125 \textcolor{stringliteral}{}
126 \textcolor{stringliteral}{        '''}
127         res = self.\_render\_impl(steps)  \textcolor{comment}{# Implementation-dependent}
128         \textcolor{comment}{# Now that the output is rendered, we expect all options to have}
129         \textcolor{comment}{# been used.}
130         unused\_options = set(self._options_do_not_access)
131         unused\_options -= self.options_used
132         \textcolor{keywordflow}{if} unused\_options:
133             \textcolor{keywordflow}{raise} RuntimeError(
134                 \textcolor{stringliteral}{'Unused options: \{0\} -- please check if you made a typo '}
135                 \textcolor{stringliteral}{'in any of them. Those that are truly not useful should '}
136                 \textcolor{stringliteral}{'be not be set so that this typo detection can be useful.'}
137                 .format(unused\_options)
138             )
139         \textcolor{keywordflow}{return} res
140 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!run@{run}}
\index{run@{run}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{run(self, shell\+\_\+cmd)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+run (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{shell\+\_\+cmd}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a0fc0d3c7786f4148057ca7e1f95efc71}


Definition at line 167 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+autoconf\+\_\+install(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+configure(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+configure(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+diagnostics(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+install\+\_\+debian\+\_\+deps(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+make\+\_\+and\+\_\+install(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+parallel\+\_\+make().


\begin{DoxyCode}
167     \textcolor{keyword}{def }run(self, shell\_cmd):
168         \textcolor{stringliteral}{'Run this bash command'}
169         \textcolor{keywordflow}{raise} NotImplementedError
170 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!setup@{setup}}
\index{setup@{setup}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{setup(self)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+setup (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a2b677e7185c8cfd7608f843833dd03c6}


Definition at line 147 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+build().


\begin{DoxyCode}
147     \textcolor{keyword}{def }setup(self):
148         \textcolor{stringliteral}{'Your builder may want to install packages here.'}
149         \textcolor{keywordflow}{raise} NotImplementedError
150 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!step@{step}}
\index{step@{step}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{step(self, name, actions)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+step (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{actions}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a93562734c3bdf45932e88ffa0a697aa9}


Definition at line 163 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+autoconf\+\_\+install(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+cmake\+\_\+install(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+diagnostics(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+install\+\_\+debian\+\_\+deps().


\begin{DoxyCode}
163     \textcolor{keyword}{def }step(self, name, actions):
164         \textcolor{stringliteral}{'A labeled collection of actions or other steps'}
165         \textcolor{keywordflow}{raise} NotImplementedError
166 
\end{DoxyCode}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!workdir@{workdir}}
\index{workdir@{workdir}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{workdir(self, dir)}]{\setlength{\rightskip}{0pt plus 5cm}def fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+workdir (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{dir}
\end{DoxyParamCaption}
)}\label{classfbcode__builder_1_1FBCodeBuilder_a9206347ffe31ffbea0d4535aeab60c87}


Definition at line 171 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+github\+\_\+project\+\_\+workdir().


\begin{DoxyCode}
171     \textcolor{keyword}{def }workdir(self, dir):
172         \textcolor{stringliteral}{'Create this directory if it does not exist, and change into it'}
173         \textcolor{keywordflow}{raise} NotImplementedError
174 
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!\+\_\+github\+\_\+hashes@{\+\_\+github\+\_\+hashes}}
\index{\+\_\+github\+\_\+hashes@{\+\_\+github\+\_\+hashes}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{\+\_\+github\+\_\+hashes}]{\setlength{\rightskip}{0pt plus 5cm}fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+github\+\_\+hashes\hspace{0.3cm}{\ttfamily [private]}}\label{classfbcode__builder_1_1FBCodeBuilder_a8de20d1f7b20927139a79f0fd6076057}


Definition at line 90 of file fbcode\+\_\+builder.\+py.

\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!\+\_\+options\+\_\+do\+\_\+not\+\_\+access@{\+\_\+options\+\_\+do\+\_\+not\+\_\+access}}
\index{\+\_\+options\+\_\+do\+\_\+not\+\_\+access@{\+\_\+options\+\_\+do\+\_\+not\+\_\+access}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{\+\_\+options\+\_\+do\+\_\+not\+\_\+access}]{\setlength{\rightskip}{0pt plus 5cm}fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+\_\+options\+\_\+do\+\_\+not\+\_\+access\hspace{0.3cm}{\ttfamily [private]}}\label{classfbcode__builder_1_1FBCodeBuilder_a9619842a6e9fcb3113f0b88bca07e914}


Definition at line 86 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+add\+\_\+option(), fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+has\+\_\+option(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+render().

\index{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}!options\+\_\+used@{options\+\_\+used}}
\index{options\+\_\+used@{options\+\_\+used}!fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder@{fbcode\+\_\+builder\+::\+F\+B\+Code\+Builder}}
\subsubsection[{options\+\_\+used}]{\setlength{\rightskip}{0pt plus 5cm}fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+options\+\_\+used}\label{classfbcode__builder_1_1FBCodeBuilder_ab5e799fd429347a660bad6c143cd109d}


Definition at line 89 of file fbcode\+\_\+builder.\+py.



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+render().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
build/fbcode\+\_\+builder/{\bf fbcode\+\_\+builder.\+py}\end{DoxyCompactItemize}
