\section{proxygen\+:\+:Filter Class Reference}
\label{classproxygen_1_1Filter}\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}}


{\ttfamily \#include $<$Filters.\+h$>$}

Inheritance diagram for proxygen\+:\+:Filter\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.666667cm]{classproxygen_1_1Filter}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf Filter} ({\bf Request\+Handler} $\ast$upstream)
\item 
void {\bf set\+Response\+Handler} ({\bf Response\+Handler} $\ast$handler) noexceptoverride
\item 
void {\bf on\+Request} (std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$ headers) noexceptoverride
\item 
void {\bf on\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body) noexceptoverride
\item 
void {\bf on\+Upgrade} ({\bf Upgrade\+Protocol} protocol) noexceptoverride
\item 
void {\bf on\+E\+OM} () noexceptoverride
\item 
void {\bf request\+Complete} () noexceptoverride
\item 
void {\bf on\+Error} ({\bf Proxygen\+Error} err) noexceptoverride
\item 
void {\bf on\+Egress\+Paused} () noexceptoverride
\item 
void {\bf on\+Egress\+Resumed} () noexceptoverride
\item 
bool {\bf can\+Handle\+Expect} () noexceptoverride
\item 
{\bf Ex\+Message\+Handler} $\ast$ {\bf get\+Ex\+Handler} () noexceptoverride
\item 
void {\bf send\+Headers} ({\bf H\+T\+T\+P\+Message} \&msg) noexceptoverride
\item 
void {\bf send\+Chunk\+Header} (size\+\_\+t len) noexceptoverride
\item 
void {\bf send\+Body} (std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body) noexceptoverride
\item 
void {\bf send\+Chunk\+Terminator} () noexceptoverride
\item 
void {\bf send\+E\+OM} () noexceptoverride
\item 
void {\bf send\+Abort} () noexceptoverride
\item 
void {\bf refresh\+Timeout} () noexceptoverride
\item 
void {\bf pause\+Ingress} () noexceptoverride
\item 
void {\bf resume\+Ingress} () noexceptoverride
\item 
{\bf Response\+Handler} $\ast$ {\bf new\+Pushed\+Response} ({\bf Push\+Handler} $\ast$handler) noexceptoverride
\item 
const wangle\+::\+Transport\+Info \& {\bf get\+Setup\+Transport\+Info} () const noexceptoverride
\item 
void {\bf get\+Current\+Transport\+Info} (wangle\+::\+Transport\+Info $\ast$tinfo) const override
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Filters are a way to add functionality to \doxyref{H\+T\+T\+P\+Server}{p.}{classproxygen_1_1HTTPServer} without complicating app specific \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler}. The basic idea is

App-\/handler $<$=$>$ Filter-\/1 $<$=$>$ Filter-\/2 $<$=$>$ Client

The data flows through these filters between client and handler. They can do things like modify the data flowing through them, can update stats, create traces and even send direct response if they feel like.

The default implementation just lets everything pass through. 

Definition at line 29 of file Filters.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!Filter@{Filter}}
\index{Filter@{Filter}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{Filter(\+Request\+Handler $\ast$upstream)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+Filter\+::\+Filter (
\begin{DoxyParamCaption}
\item[{{\bf Request\+Handler} $\ast$}]{upstream}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}\label{classproxygen_1_1Filter_af8eeab2d700b69642731a34e5b063d20}


Definition at line 31 of file Filters.\+h.


\begin{DoxyCode}
32       : ResponseHandler(upstream) \{
33   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!can\+Handle\+Expect@{can\+Handle\+Expect}}
\index{can\+Handle\+Expect@{can\+Handle\+Expect}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{can\+Handle\+Expect() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+Filter\+::can\+Handle\+Expect (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a32ea4520f3f16444c0538fa65b2726b3}
Returns true if the handler is responsible for responding to Expect headers, false otherwise. 

Reimplemented from {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_ad632dd51c75e6d27558fae7bf850239d}.



Definition at line 79 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::can\+Handle\+Expect(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
79                                            \{
80     \textcolor{keywordflow}{return} upstream_->canHandleExpect();
81   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!get\+Current\+Transport\+Info@{get\+Current\+Transport\+Info}}
\index{get\+Current\+Transport\+Info@{get\+Current\+Transport\+Info}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{get\+Current\+Transport\+Info(wangle\+::\+Transport\+Info $\ast$tinfo) const override}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::get\+Current\+Transport\+Info (
\begin{DoxyParamCaption}
\item[{wangle\+::\+Transport\+Info $\ast$}]{tinfo}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}}\label{classproxygen_1_1Filter_adfe01b2f566951c8022ae0bc8f051cc6}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a90940a302d830ed0eebfc993c2b176f2}.



Definition at line 132 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::get\+Current\+Transport\+Info().


\begin{DoxyCode}
132                                                                           \{
133     downstream_->getCurrentTransportInfo(tinfo);
134   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!get\+Ex\+Handler@{get\+Ex\+Handler}}
\index{get\+Ex\+Handler@{get\+Ex\+Handler}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{get\+Ex\+Handler() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Ex\+Message\+Handler}$\ast$ proxygen\+::\+Filter\+::get\+Ex\+Handler (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_acbd6d5206633c61ef385d4a2dbc04a75}
Implement in control stream handler to support incoming child EX streams. 

Reimplemented from {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a6131d21f1a673ce0d37fa61af8aa5733}.



Definition at line 83 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::get\+Ex\+Handler(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
83                                                      \{
84     \textcolor{keywordflow}{return} upstream_->getExHandler();
85   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!get\+Setup\+Transport\+Info@{get\+Setup\+Transport\+Info}}
\index{get\+Setup\+Transport\+Info@{get\+Setup\+Transport\+Info}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{get\+Setup\+Transport\+Info() const noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}const wangle\+::\+Transport\+Info\& proxygen\+::\+Filter\+::get\+Setup\+Transport\+Info (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a8f1d64f6b73c879c4ba7a0e89a0eca91}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_aeceafc15bb87a0c4dce1c6ea3a6274a1}.



Definition at line 128 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::get\+Setup\+Transport\+Info().


\begin{DoxyCode}
128                                                                              \{
129     \textcolor{keywordflow}{return} downstream_->getSetupTransportInfo();
130   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!new\+Pushed\+Response@{new\+Pushed\+Response}}
\index{new\+Pushed\+Response@{new\+Pushed\+Response}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{new\+Pushed\+Response(\+Push\+Handler $\ast$handler) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Response\+Handler}$\ast$ proxygen\+::\+Filter\+::new\+Pushed\+Response (
\begin{DoxyParamCaption}
\item[{{\bf Push\+Handler} $\ast$}]{handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_aed159f5c492839867ac16cdc65e6f57a}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a43a4028a9b826ba81f77ce38134d1584}.



Definition at line 124 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::new\+Pushed\+Response().


\begin{DoxyCode}
124                                                                              \{
125     \textcolor{keywordflow}{return} downstream_->newPushedResponse(handler);
126   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+Body@{on\+Body}}
\index{on\+Body@{on\+Body}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{body}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a98e803dd89a7bfc644e82c641555dfe0}
Invoked when we get part of body for the request. 

Implements {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_aaf0ed3bb94384e6240e15cca63de82bb}.



Definition at line 47 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::on\+Body(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
47                                                                 \{
48     upstream_->onBody(std::move(body));
49   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+Egress\+Paused@{on\+Egress\+Paused}}
\index{on\+Egress\+Paused@{on\+Egress\+Paused}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+Egress\+Paused() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+Egress\+Paused (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_af8a97efa470810e7bad65fc51f1d3559}
Signals from H\+T\+TP layer when client queue is full or empty. If you are sending a streaming response, consider implementing these and acting accordingly. Saves your server from running out of memory. 

Reimplemented from {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a2791a2a46b57712ad177116d43fbc8e3}.



Definition at line 71 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::on\+Egress\+Paused(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
71                                           \{
72     upstream_->onEgressPaused();
73   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+Egress\+Resumed@{on\+Egress\+Resumed}}
\index{on\+Egress\+Resumed@{on\+Egress\+Resumed}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+Egress\+Resumed() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+Egress\+Resumed (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_acf857f65ceeac0b3c9c8e0a1efe79d22}


Reimplemented from {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a8128e8661fa526a6d10fd9c03dbe4dc3}.



Definition at line 75 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::on\+Egress\+Resumed(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
75                                            \{
76     upstream_->onEgressResumed();
77   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+E\+OM@{on\+E\+OM}}
\index{on\+E\+OM@{on\+E\+OM}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+E\+O\+M() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a9cbe8f047a67bafe605ffdb960ae8daf}
Invoked when we finish receiving the body. 

Implements {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a24f26d2cf71effaf154ce53aeff51aab}.



Definition at line 55 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::on\+E\+O\+M(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
55                                  \{
56     upstream_->onEOM();
57   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+Error@{on\+Error}}
\index{on\+Error@{on\+Error}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+Error(\+Proxygen\+Error err) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+Error (
\begin{DoxyParamCaption}
\item[{{\bf Proxygen\+Error}}]{err}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_accfdfae779e41ca7624148910e9254a0}
Request failed. Maybe because of read/write error on socket or client not being able to send request in time.

N\+O\+TE\+: Can be invoked at any time (except for before on\+Request).

No more callbacks will be invoked after this. You should clean up after yourself. 

Implements {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_ad7e6428b925840a334adc58ff6f4f680}.



Definition at line 65 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, proxygen\+::\+Request\+Handler\+::on\+Error(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
65                                                     \{
66     downstream_ = \textcolor{keyword}{nullptr};
67     upstream_->onError(err);
68     \textcolor{keyword}{delete} \textcolor{keyword}{this};
69   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+Request@{on\+Request}}
\index{on\+Request@{on\+Request}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+Request(std\+::unique\+\_\+ptr$<$ H\+T\+T\+P\+Message $>$ headers) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+Request (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ {\bf H\+T\+T\+P\+Message} $>$}]{headers}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_aae05166bfb13752325073d4427a8ed34}
Invoked when we have successfully fetched headers from client. This will always be the first callback invoked on your handler. 

Implements {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a61f59e1155f906c7b73062147164320f}.



Definition at line 43 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::on\+Request(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
43                                                                        \{
44     upstream_->onRequest(std::move(headers));
45   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!on\+Upgrade@{on\+Upgrade}}
\index{on\+Upgrade@{on\+Upgrade}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{on\+Upgrade(\+Upgrade\+Protocol protocol) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::on\+Upgrade (
\begin{DoxyParamCaption}
\item[{{\bf Upgrade\+Protocol}}]{prot}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a3fafd5b5b4db26e7602110b3e60eb418}
Invoked when the session has been upgraded to a different protocol 

Implements {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_aefed2946bc5558baf6e36a2d11290b79}.



Definition at line 51 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::on\+Upgrade(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
51                                                              \{
52     upstream_->onUpgrade(protocol);
53   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!pause\+Ingress@{pause\+Ingress}}
\index{pause\+Ingress@{pause\+Ingress}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{pause\+Ingress() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::pause\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_adbee2e0f11f96b7bf4807fbd34f255ad}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_afa9c9a5f7a64d98de012d35e344c6d98}.



Definition at line 116 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::pause\+Ingress().


\begin{DoxyCode}
116                                         \{
117     downstream_->pauseIngress();
118   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!refresh\+Timeout@{refresh\+Timeout}}
\index{refresh\+Timeout@{refresh\+Timeout}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{refresh\+Timeout() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::refresh\+Timeout (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_abdb0592340eac2e25ed66472c243cfc8}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a8b487f372085f391dc1a15a4fe5855cd}.



Definition at line 112 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::refresh\+Timeout().


\begin{DoxyCode}
112                                           \{
113     downstream_->refreshTimeout();
114   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!request\+Complete@{request\+Complete}}
\index{request\+Complete@{request\+Complete}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{request\+Complete() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::request\+Complete (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_ab075db9a9546d3bfa3affff60f5c468c}
Invoked when request processing has been completed and nothing more needs to be done. This may be a good place to log some stats and clean up resources. This is distinct from \doxyref{on\+E\+O\+M()}{p.}{classproxygen_1_1Filter_a9cbe8f047a67bafe605ffdb960ae8daf} because it is invoked after the response is fully sent. Once this callback has been received, {\ttfamily downstream\+\_\+} should be considered invalid. 

Implements {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a0ec159751b407bcd3667994c6d8d7cfe}.



Definition at line 59 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, proxygen\+::\+Request\+Handler\+::request\+Complete(), and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
59                                            \{
60     downstream_ = \textcolor{keyword}{nullptr};
61     upstream_->requestComplete();
62     \textcolor{keyword}{delete} \textcolor{keyword}{this};
63   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!resume\+Ingress@{resume\+Ingress}}
\index{resume\+Ingress@{resume\+Ingress}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{resume\+Ingress() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::resume\+Ingress (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_af14ff17b4684e908e8612579ce718706}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_af6bf0c68365230886b7d278821f87078}.



Definition at line 120 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::resume\+Ingress().


\begin{DoxyCode}
120                                          \{
121     downstream_->resumeIngress();
122   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!send\+Abort@{send\+Abort}}
\index{send\+Abort@{send\+Abort}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{send\+Abort() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::send\+Abort (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a4c7e63270b947317f421f09bde33b252}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a3827b60bdfef24355756918c5b7ade26}.



Definition at line 108 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::send\+Abort().



Referenced by proxygen\+::\+Zlib\+Server\+Filter\+::fail().


\begin{DoxyCode}
108                                      \{
109     downstream_->sendAbort();
110   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!send\+Body@{send\+Body}}
\index{send\+Body@{send\+Body}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{send\+Body(std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$ body) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::send\+Body (
\begin{DoxyParamCaption}
\item[{std\+::unique\+\_\+ptr$<$ folly\+::\+I\+O\+Buf $>$}]{body}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a13525ef7e5031fae0475e4b67d5497ff}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_ad2f61f6816fe12e96945fef5cdcd2228}.



Definition at line 96 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::send\+Body().



Referenced by proxygen\+::\+Zlib\+Server\+Filter\+::send\+Body(), and proxygen\+::\+Zlib\+Server\+Filter\+::send\+E\+O\+M().


\begin{DoxyCode}
96                                                                   \{
97     downstream_->sendBody(std::move(body));
98   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!send\+Chunk\+Header@{send\+Chunk\+Header}}
\index{send\+Chunk\+Header@{send\+Chunk\+Header}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{send\+Chunk\+Header(size\+\_\+t len) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::send\+Chunk\+Header (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{len}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a52bdb3c0f7f88b796ba824e5d3230519}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a37c5b3b070602f564d654cf016b35109}.



Definition at line 92 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::send\+Chunk\+Header().



Referenced by proxygen\+::\+Zlib\+Server\+Filter\+::send\+Body(), proxygen\+::\+Zlib\+Server\+Filter\+::send\+Chunk\+Header(), and proxygen\+::\+Zlib\+Server\+Filter\+::send\+E\+O\+M().


\begin{DoxyCode}
92                                                      \{
93     downstream_->sendChunkHeader(len);
94   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!send\+Chunk\+Terminator@{send\+Chunk\+Terminator}}
\index{send\+Chunk\+Terminator@{send\+Chunk\+Terminator}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{send\+Chunk\+Terminator() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::send\+Chunk\+Terminator (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a9804f149cdfaea4984b3b306f77de6de}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a7b7faccdcf98892f64ebe01d8b3dd11c}.



Definition at line 100 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::send\+Chunk\+Terminator().



Referenced by proxygen\+::\+Zlib\+Server\+Filter\+::send\+E\+O\+M().


\begin{DoxyCode}
100                                                \{
101     downstream_->sendChunkTerminator();
102   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!send\+E\+OM@{send\+E\+OM}}
\index{send\+E\+OM@{send\+E\+OM}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{send\+E\+O\+M() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::send\+E\+OM (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a7ac8fec9b96805c396b49bec23e62708}


Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_af40d7a5c1674bea892d2598df9cfba61}.



Definition at line 104 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::send\+E\+O\+M().



Referenced by proxygen\+::\+Zlib\+Server\+Filter\+::send\+E\+O\+M().


\begin{DoxyCode}
104                                    \{
105     downstream_->sendEOM();
106   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!send\+Headers@{send\+Headers}}
\index{send\+Headers@{send\+Headers}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{send\+Headers(\+H\+T\+T\+P\+Message \&msg) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::send\+Headers (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message} \&}]{msg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_a46e5b86bf739ec744d58e4b88438a6f0}
N\+O\+TE\+: We take response message as non-\/const reference, to allow filters between your handler and client to be able to modify response if they want to.

eg. a compression filter might want to change the content-\/encoding 

Implements {\bf proxygen\+::\+Response\+Handler} \doxyref{}{p.}{classproxygen_1_1ResponseHandler_a20f98e57c8000a4af68483763f5fffb1}.



Definition at line 88 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, and proxygen\+::\+Response\+Handler\+::send\+Headers().



Referenced by proxygen\+::\+Zlib\+Server\+Filter\+::send\+Body(), and proxygen\+::\+Zlib\+Server\+Filter\+::send\+Headers().


\begin{DoxyCode}
88                                                        \{
89     downstream_->sendHeaders(msg);
90   \}
\end{DoxyCode}
\index{proxygen\+::\+Filter@{proxygen\+::\+Filter}!set\+Response\+Handler@{set\+Response\+Handler}}
\index{set\+Response\+Handler@{set\+Response\+Handler}!proxygen\+::\+Filter@{proxygen\+::\+Filter}}
\subsubsection[{set\+Response\+Handler(\+Response\+Handler $\ast$handler) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+Filter\+::set\+Response\+Handler (
\begin{DoxyParamCaption}
\item[{{\bf Response\+Handler} $\ast$}]{handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1Filter_af0e6c8e222e74c64b5acda58d64fb54f}
Saves the downstream handle with itself. Implementations of this interface should use downstream\+\_\+ to send back response.

X\+XX\+: Only override this method if you are A\+B\+S\+O\+L\+U\+T\+E\+LY sure what you are doing. If possible, just use downstream\+\_\+ variable and dont mess with these things. 

Reimplemented from {\bf proxygen\+::\+Request\+Handler} \doxyref{}{p.}{classproxygen_1_1RequestHandler_a7c3679aea96f2d5502c42a1254ea882f}.



Definition at line 36 of file Filters.\+h.



References proxygen\+::\+Request\+Handler\+::downstream\+\_\+, proxygen\+::\+Request\+Handler\+::set\+Response\+Handler(), proxygen\+::\+Response\+Handler\+::txn\+\_\+, and proxygen\+::\+Response\+Handler\+::upstream\+\_\+.


\begin{DoxyCode}
36                                                                       \{
37     \textcolor{comment}{// Save downstream handler and pass ourselves as downstream handler}
38     downstream_ = handler;
39     txn_ = handler->getTransaction();
40     upstream_->setResponseHandler(\textcolor{keyword}{this});
41   \}
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/httpserver/{\bf Filters.\+h}\end{DoxyCompactItemize}
