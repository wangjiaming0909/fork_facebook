\section{proxygen\+:\+:Scoped\+Handler\+Factory$<$ Handler\+Type $>$ Class Template Reference}
\label{classproxygen_1_1ScopedHandlerFactory}\index{proxygen\+::\+Scoped\+Handler\+Factory$<$ Handler\+Type $>$@{proxygen\+::\+Scoped\+Handler\+Factory$<$ Handler\+Type $>$}}


{\ttfamily \#include $<$Scoped\+H\+T\+T\+P\+Server.\+h$>$}

Inheritance diagram for proxygen\+:\+:Scoped\+Handler\+Factory$<$ Handler\+Type $>$\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classproxygen_1_1ScopedHandlerFactory}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf Scoped\+Handler\+Factory} (Handler\+Type handler)
\item 
void {\bf on\+Server\+Start} (folly\+::\+Event\+Base $\ast$) noexceptoverride
\item 
void {\bf on\+Server\+Stop} () noexceptoverride
\item 
{\bf Request\+Handler} $\ast$ {\bf on\+Request} ({\bf Request\+Handler} $\ast$, {\bf H\+T\+T\+P\+Message} $\ast$) noexceptoverride
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
Handler\+Type {\bf handler\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\subsubsection*{template$<$typename Handler\+Type$>$\\*
class proxygen\+::\+Scoped\+Handler\+Factory$<$ Handler\+Type $>$}



Definition at line 65 of file Scoped\+H\+T\+T\+P\+Server.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}!Scoped\+Handler\+Factory@{Scoped\+Handler\+Factory}}
\index{Scoped\+Handler\+Factory@{Scoped\+Handler\+Factory}!proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}}
\subsubsection[{Scoped\+Handler\+Factory(\+Handler\+Type handler)}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Handler\+Type $>$ {\bf proxygen\+::\+Scoped\+Handler\+Factory}$<$ Handler\+Type $>$\+::{\bf Scoped\+Handler\+Factory} (
\begin{DoxyParamCaption}
\item[{Handler\+Type}]{handler}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}\label{classproxygen_1_1ScopedHandlerFactory_a9674cbe393cc990e2808c71c0ef1321f}


Definition at line 67 of file Scoped\+H\+T\+T\+P\+Server.\+h.


\begin{DoxyCode}
67                                                     : handler_(handler) \{
68   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}!on\+Request@{on\+Request}}
\index{on\+Request@{on\+Request}!proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}}
\subsubsection[{on\+Request(\+Request\+Handler $\ast$, H\+T\+T\+P\+Message $\ast$) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Handler\+Type $>$ {\bf Request\+Handler}$\ast$ {\bf proxygen\+::\+Scoped\+Handler\+Factory}$<$ Handler\+Type $>$\+::on\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Request\+Handler} $\ast$}]{, }
\item[{{\bf H\+T\+T\+P\+Message} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1ScopedHandlerFactory_a3426b1050b058f472d3b6b64095a62f1}
Invoked for each new request server handles. \doxyref{H\+T\+T\+P\+Message}{p.}{classproxygen_1_1HTTPMessage} is provided so that user can potentially choose among several implementation of handler based on \doxyref{U\+RL}{p.}{classproxygen_1_1URL} or something. No need to save/copy this \doxyref{H\+T\+T\+P\+Message}{p.}{classproxygen_1_1HTTPMessage}. \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler} will be given the \doxyref{H\+T\+T\+P\+Message}{p.}{classproxygen_1_1HTTPMessage} in a separate callback.

Some request handlers don\textquotesingle{}t handle the request themselves (think filters). They do take some actions based on request/response but otherwise they just hand-\/off request to some other \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler}. This upstream \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler} is given as first parameter. For the terminal \doxyref{Request\+Handler}{p.}{classproxygen_1_1RequestHandler} this will by nullptr. 

Implements {\bf proxygen\+::\+Request\+Handler\+Factory} \doxyref{}{p.}{classproxygen_1_1RequestHandlerFactory_a9c2cbbc96d006244ea28cea44a3e6a60}.



Definition at line 76 of file Scoped\+H\+T\+T\+P\+Server.\+h.


\begin{DoxyCode}
76                                                                              \{
77     \textcolor{keywordflow}{return} \textcolor{keyword}{new} ScopedHandler<HandlerType>(&handler_);
78   \}
\end{DoxyCode}
\index{proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}!on\+Server\+Start@{on\+Server\+Start}}
\index{on\+Server\+Start@{on\+Server\+Start}!proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}}
\subsubsection[{on\+Server\+Start(folly\+::\+Event\+Base $\ast$) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Handler\+Type $>$ void {\bf proxygen\+::\+Scoped\+Handler\+Factory}$<$ Handler\+Type $>$\+::on\+Server\+Start (
\begin{DoxyParamCaption}
\item[{folly\+::\+Event\+Base $\ast$}]{evb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1ScopedHandlerFactory_a8decc6f35ec73c447f8e711522a0c475}
Invoked in each thread server is going to handle requests before we start handling requests. Can be used to setup thread-\/local setup for each thread (stats and such). 

Implements {\bf proxygen\+::\+Request\+Handler\+Factory} \doxyref{}{p.}{classproxygen_1_1RequestHandlerFactory_af76091b8a51a8d069fcc1aec3007a1cc}.



Definition at line 70 of file Scoped\+H\+T\+T\+P\+Server.\+h.


\begin{DoxyCode}
70                                                         \{
71   \}
\end{DoxyCode}
\index{proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}!on\+Server\+Stop@{on\+Server\+Stop}}
\index{on\+Server\+Stop@{on\+Server\+Stop}!proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}}
\subsubsection[{on\+Server\+Stop() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Handler\+Type $>$ void {\bf proxygen\+::\+Scoped\+Handler\+Factory}$<$ Handler\+Type $>$\+::on\+Server\+Stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classproxygen_1_1ScopedHandlerFactory_a9c3d96441ffd7c6fdbf02ea84b22e1ff}
Invoked in each handler thread after all the connections are drained from that thread. Can be used to tear down thread-\/local setup. 

Implements {\bf proxygen\+::\+Request\+Handler\+Factory} \doxyref{}{p.}{classproxygen_1_1RequestHandlerFactory_a0791d6b33c13513ed6f550bbbd7bca85}.



Definition at line 73 of file Scoped\+H\+T\+T\+P\+Server.\+h.


\begin{DoxyCode}
73                                         \{
74   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}!handler\+\_\+@{handler\+\_\+}}
\index{handler\+\_\+@{handler\+\_\+}!proxygen\+::\+Scoped\+Handler\+Factory@{proxygen\+::\+Scoped\+Handler\+Factory}}
\subsubsection[{handler\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Handler\+Type $>$ Handler\+Type {\bf proxygen\+::\+Scoped\+Handler\+Factory}$<$ Handler\+Type $>$\+::handler\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classproxygen_1_1ScopedHandlerFactory_a241d10e9b027f3e83111ac284596b8a0}


Definition at line 80 of file Scoped\+H\+T\+T\+P\+Server.\+h.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/httpserver/{\bf Scoped\+H\+T\+T\+P\+Server.\+h}\end{DoxyCompactItemize}
