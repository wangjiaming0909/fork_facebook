\section{proxygen/lib/http/test/\+H\+T\+T\+P\+Message\+Test.cpp File Reference}
\label{HTTPMessageTest_8cpp}\index{proxygen/lib/http/test/\+H\+T\+T\+P\+Message\+Test.\+cpp@{proxygen/lib/http/test/\+H\+T\+T\+P\+Message\+Test.\+cpp}}
{\ttfamily \#include $<$fcntl.\+h$>$}\\*
{\ttfamily \#include $<$folly/portability/\+G\+Test.\+h$>$}\\*
{\ttfamily \#include $<$proxygen/lib/http/\+H\+T\+T\+P\+Message.\+h$>$}\\*
{\ttfamily \#include $<$proxygen/lib/utils/\+Test\+Utils.\+h$>$}\\*
{\ttfamily \#include $<$signal.\+h$>$}\\*
{\ttfamily \#include $<$stdlib.\+h$>$}\\*
{\ttfamily \#include $<$string.\+h$>$}\\*
{\ttfamily \#include $<$sys/types.\+h$>$}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Parse\+Cookies\+Simple)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Parse\+Cookies\+Spaces)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Parse\+Cookies\+Single\+Cookie)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Parse\+Cookies\+Multiple\+Cookies)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Parse\+Query\+Params\+Simple)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Parse\+Query\+Params\+Complex)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Header\+Preservation)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Header\+Remove)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+All\+Versions\+Header\+Remove)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Set\+Header)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Combine)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Proxification)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Keepalive\+Check)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Header\+Strip\+Per\+Hop)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Empty\+Name)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Method)
\item 
void {\bf test\+Path\+And\+Query} (const string \&url, const string \&expected\+Path, const string \&expected\+Query)
\item 
{\bf T\+E\+ST} (Get\+Path\+And\+Query, {\bf Parse\+U\+RL})
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Headers}, Add\+String\+Piece)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Headers}, Initializer\+List)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Headers}, Initializer\+List\+String\+Piece)
\item 
void {\bf test\+Remove\+Query\+Param} (const string \&url, const string \&query\+Param, const string \&expected\+Url, const string \&expected\+Query)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Remove\+Query\+Param\+Tests)
\item 
void {\bf test\+Set\+Query\+Param} (const string \&url, const string \&query\+Param, const string \&param\+Value, const string \&expected\+Url, const string \&expected\+Query)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Set\+Query\+Param\+Tests)
\item 
{\bf T\+E\+ST} ({\bf H\+T\+T\+P\+Message}, Test\+Check\+For\+Header\+Token)
\item 
{\bf T\+E\+ST} (Http\+Message, Test\+Protocol\+String\+H\+T\+T\+P\+Version)
\item 
{\bf T\+E\+ST} (Http\+Message, Test\+Protocol\+String\+Advanced\+Protocol)
\item 
{\bf T\+E\+ST} (Http\+Message, Test\+Extract\+Trailers)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Parse\+Cookies\+Simple)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Parse\+Cookies\+Simple}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_abe1b889dd51846a3ac25934e0ed39a93}


Definition at line 22 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Cookie(), and proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers().


\begin{DoxyCode}
22                                           \{
23   HTTPMessage msg;
24 
25   msg.getHeaders().add(\textcolor{stringliteral}{"Cookie"}, \textcolor{stringliteral}{"id=1256679245; data=0:1234567"});
26   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"id"}), \textcolor{stringliteral}{"1256679245"});
27   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"data"}), \textcolor{stringliteral}{"0:1234567"});
28   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"mising"}), \textcolor{stringliteral}{""});
29 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Parse\+Cookies\+Spaces)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Parse\+Cookies\+Spaces}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a2ce2be1062a0bcd24a475ad9200ba01d}


Definition at line 31 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Cookie(), and proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers().


\begin{DoxyCode}
31                                           \{
32   HTTPMessage msg;
33 
34   msg.getHeaders().add(\textcolor{stringliteral}{"Cookie"}, \textcolor{stringliteral}{" id=1256679245 ;   data=0:1234567  ;"});
35   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"id"}), \textcolor{stringliteral}{"1256679245"});
36   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"data"}), \textcolor{stringliteral}{"0:1234567"});
37 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Parse\+Cookies\+Single\+Cookie)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Parse\+Cookies\+Single\+Cookie}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_af0ae880bd2dc4239f07e27a115fa4d33}


Definition at line 39 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Cookie(), and proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers().


\begin{DoxyCode}
39                                                 \{
40   HTTPMessage msg;
41 
42   msg.getHeaders().add(\textcolor{stringliteral}{"Cookie"}, \textcolor{stringliteral}{"   user\_id=1256679245  "});
43   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"user\_id"}), \textcolor{stringliteral}{"1256679245"});
44 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Parse\+Cookies\+Multiple\+Cookies)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Parse\+Cookies\+Multiple\+Cookies}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_aa489a63fcdf56209e0a6c593a6bfee80}


Definition at line 46 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Cookie(), and proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers().


\begin{DoxyCode}
46                                                    \{
47   HTTPMessage msg;
48 
49   msg.getHeaders().add(
50     \textcolor{stringliteral}{"Cookie"}, \textcolor{stringliteral}{"id=1256679245; data=0:1234567; same=Always; Name"});
51   msg.getHeaders().add(
52     \textcolor{stringliteral}{"Cookie"}, \textcolor{stringliteral}{"id2=1256679245; data2=0:1234567; same=Always; "});
53   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"id"}), \textcolor{stringliteral}{"1256679245"});
54   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"id2"}), \textcolor{stringliteral}{"1256679245"});
55   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"data"}), \textcolor{stringliteral}{"0:1234567"});
56   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"data2"}), \textcolor{stringliteral}{"0:1234567"});
57   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"same"}), \textcolor{stringliteral}{"Always"});
58   EXPECT\_EQ(msg.getCookie(\textcolor{stringliteral}{"Name"}), \textcolor{stringliteral}{""});
59 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Parse\+Query\+Params\+Simple)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Parse\+Query\+Params\+Simple}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_aa88e1066e7d92f2906cecf0b118daeef}


Definition at line 61 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Decoded\+Query\+Param(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Int\+Query\+Param(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Query\+Param(), proxygen\+::\+H\+T\+T\+P\+Message\+::has\+Query\+Param(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+U\+R\+L().


\begin{DoxyCode}
61                                               \{
62   HTTPMessage msg;
63   \textcolor{keywordtype}{string} url = \textcolor{stringliteral}{"/test?seq=123456&userid=1256679245&dup=1&dup=2&helloWorld"}
64                \textcolor{stringliteral}{"&second=was+it+clear+%28already%29%3F"};
65 
66   msg.setURL(url);
67   EXPECT\_EQ(msg.getQueryParam(\textcolor{stringliteral}{"seq"}), \textcolor{stringliteral}{"123456"});
68   EXPECT\_EQ(msg.getQueryParam(\textcolor{stringliteral}{"userid"}), \textcolor{stringliteral}{"1256679245"});
69   EXPECT\_EQ(msg.getQueryParam(\textcolor{stringliteral}{"dup"}), \textcolor{stringliteral}{"2"});
70   EXPECT\_EQ(msg.getQueryParam(\textcolor{stringliteral}{"helloWorld"}), \textcolor{stringliteral}{""});
71   EXPECT\_EQ(msg.getIntQueryParam(\textcolor{stringliteral}{"dup"}, 5), 2);
72   EXPECT\_EQ(msg.getIntQueryParam(\textcolor{stringliteral}{"abc"}, 5), 5);
73   EXPECT\_EQ(msg.getDecodedQueryParam(\textcolor{stringliteral}{"second"}), \textcolor{stringliteral}{"was it clear (already)?"});
74   EXPECT\_EQ(msg.getDecodedQueryParam(\textcolor{stringliteral}{"seq"}), \textcolor{stringliteral}{"123456"});
75   EXPECT\_EQ(msg.hasQueryParam(\textcolor{stringliteral}{"seq"}), \textcolor{keyword}{true});
76   EXPECT\_EQ(msg.hasQueryParam(\textcolor{stringliteral}{"seq1"}), \textcolor{keyword}{false});
77   EXPECT\_EQ(msg.getIntQueryParam(\textcolor{stringliteral}{"dup"}), 2);
78   EXPECT\_ANY\_THROW(msg.getIntQueryParam(\textcolor{stringliteral}{"abc"}));
79   EXPECT\_ANY\_THROW(msg.getIntQueryParam(\textcolor{stringliteral}{"second"}));
80 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Parse\+Query\+Params\+Complex)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Parse\+Query\+Params\+Complex}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_af7e787bf3fcc910402de4b6fc0575498}


Definition at line 82 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Query\+Param(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+U\+R\+L().


\begin{DoxyCode}
82                                                \{
83   HTTPMessage msg;
84   std::vector<std::vector<std::string>> input = \{
85     \{\textcolor{stringliteral}{""}, \textcolor{stringliteral}{""}, \textcolor{stringliteral}{""}\},
86     \{\textcolor{stringliteral}{"key\_and\_equal\_but\_no\_value"}, \textcolor{stringliteral}{"="}, \textcolor{stringliteral}{""}\},
87     \{\textcolor{stringliteral}{"only\_key"}, \textcolor{stringliteral}{""}, \textcolor{stringliteral}{""}\},
88     \{\textcolor{stringliteral}{"key\_and\_value"}, \textcolor{stringliteral}{"="}, \textcolor{stringliteral}{"value"}\},
89     \{\textcolor{stringliteral}{"key\_and\_value\_2"}, \textcolor{stringliteral}{"="}, \textcolor{stringliteral}{"value2"}\},
90     \{\textcolor{stringliteral}{"key\_and\_value\_3"}, \textcolor{stringliteral}{"="}, \textcolor{stringliteral}{"value3"}\}
91   \};
92 
93   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (1 << input.size()); ++i) \{
94     std::vector<std::vector<std::string>> sub;
95     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < input.size(); ++j) \{
96       \textcolor{keywordflow}{if} ((i & (1 << j))) \{
97         sub.push\_back(input[j]);
98       \}
99     \}
100 
101     sort(sub.begin(), sub.end());
102     \textcolor{keywordflow}{do} \{
103       \textcolor{keywordtype}{bool} first = \textcolor{keyword}{true};
104       std::string url = \textcolor{stringliteral}{"/test?"};
105       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& val: sub) \{
106         \textcolor{keywordflow}{if} (first) \{
107           first = \textcolor{keyword}{false};
108         \} \textcolor{keywordflow}{else} \{
109           url += \textcolor{stringliteral}{"&"};
110         \}
111 
112         url += val[0] + val[1] + val[2];
113       \}
114 
115       msg.setURL(url);
116       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}& val: sub) \{
117         \textcolor{keywordflow}{if} (val[0].empty()) \{
118           \textcolor{keywordflow}{continue};
119         \}
120 
121         EXPECT\_EQ(val[2], msg.getQueryParam(val[0]));
122       \}
123 
124     \} \textcolor{keywordflow}{while} (next\_permutation(sub.begin(), sub.end()));
125   \}
126 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Header\+Preservation)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Header\+Preservation}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a42bcda83ed36da97fa4ff5a5e332c1b8}


Definition at line 128 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Number\+Of\+Values(), and proxygen\+::\+H\+T\+T\+P\+Headers\+::size().


\begin{DoxyCode}
128                                           \{
129   HTTPMessage msg;
130   HTTPHeaders& hdrs = msg.getHeaders();
131 
132   hdrs.add(\textcolor{stringliteral}{"Jojo"}, \textcolor{stringliteral}{"1"});
133   hdrs.add(\textcolor{stringliteral}{"Binky"}, \textcolor{stringliteral}{"2"});
134   hdrs.add(\textcolor{stringliteral}{"jOJo"}, \textcolor{stringliteral}{"3"});
135   hdrs.add(\textcolor{stringliteral}{"bINKy"}, \textcolor{stringliteral}{"4"});
136 
137   EXPECT\_EQ(hdrs.size(), 4);
138   EXPECT\_EQ(hdrs.getNumberOfValues(\textcolor{stringliteral}{"jojo"}), 2);
139   EXPECT\_EQ(hdrs.getNumberOfValues(\textcolor{stringliteral}{"binky"}), 2);
140 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Header\+Remove)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Header\+Remove}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_ac4f40d2a86e511152d9704e1e424ccf3}


Definition at line 142 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Number\+Of\+Values(), proxygen\+::\+H\+T\+T\+P\+Headers\+::remove(), and proxygen\+::\+H\+T\+T\+P\+Headers\+::size().


\begin{DoxyCode}
142                                     \{
143   HTTPMessage msg;
144   HTTPHeaders& hdrs = msg.getHeaders();
145 
146   hdrs.add(\textcolor{stringliteral}{"Jojo"}, \textcolor{stringliteral}{"1"});
147   hdrs.add(\textcolor{stringliteral}{"Binky"}, \textcolor{stringliteral}{"2"});
148   hdrs.add(\textcolor{stringliteral}{"jOJo"}, \textcolor{stringliteral}{"3"});
149   hdrs.add(\textcolor{stringliteral}{"bINKy"}, \textcolor{stringliteral}{"4"});
150   hdrs.remove(\textcolor{stringliteral}{"jojo"});
151 
152   EXPECT\_EQ(hdrs.size(), 2);
153   EXPECT\_EQ(hdrs.getNumberOfValues(\textcolor{stringliteral}{"binky"}), 2);
154 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+All\+Versions\+Header\+Remove)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+All\+Versions\+Header\+Remove}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_ac7740fc2937535cdd39919cfe2fa7000}


Definition at line 156 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+\_\+\+H\+E\+A\+D\+E\+R\+\_\+\+N\+O\+NE, proxygen\+::\+H\+T\+T\+P\+Headers\+::remove\+All\+Versions(), and proxygen\+::\+H\+T\+T\+P\+Headers\+::size().


\begin{DoxyCode}
156                                                \{
157   HTTPMessage msg;
158   HTTPHeaders& hdrs = msg.getHeaders();
159 
160   hdrs.add(\textcolor{stringliteral}{"Jojo\_1\_2"}, \textcolor{stringliteral}{"1"});
161   hdrs.add(\textcolor{stringliteral}{"Binky"}, \textcolor{stringliteral}{"2"});
162   hdrs.add(\textcolor{stringliteral}{"Jojo\_1-2"}, \textcolor{stringliteral}{"3"});
163   hdrs.add(\textcolor{stringliteral}{"Jojo-1\_2"}, \textcolor{stringliteral}{"4"});
164   hdrs.add(\textcolor{stringliteral}{"Jojo-1-2"}, \textcolor{stringliteral}{"4"});
165   hdrs.removeAllVersions(HTTP_HEADER_NONE, \textcolor{stringliteral}{"Jojo\_1\_2"});
166   EXPECT\_EQ(hdrs.size(), 1);
167 
168   hdrs.add(\textcolor{stringliteral}{"Content-Length"}, \textcolor{stringliteral}{"1"});
169   hdrs.add(\textcolor{stringliteral}{"Content\_Length"}, \textcolor{stringliteral}{"2"});
170   hdrs.removeAllVersions(HTTP\_HEADER\_CONTENT\_LENGTH, \textcolor{stringliteral}{"Content-Length"});
171   EXPECT\_EQ(hdrs.size(), 1);
172 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Set\+Header)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Set\+Header}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a7e55a77e51a3c49f24b1f71565b0e1a1}


Definition at line 174 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Number\+Of\+Values(), proxygen\+::\+H\+T\+T\+P\+Headers\+::set(), and proxygen\+::\+H\+T\+T\+P\+Headers\+::size().


\begin{DoxyCode}
174                                  \{
175   HTTPMessage msg;
176   HTTPHeaders& hdrs = msg.getHeaders();
177 
178   hdrs.set(\textcolor{stringliteral}{"Jojo"}, \textcolor{stringliteral}{"1"});
179   EXPECT\_EQ(hdrs.size(), 1);
180   EXPECT\_EQ(hdrs.getNumberOfValues(\textcolor{stringliteral}{"Jojo"}), 1);
181 
182   hdrs.add(\textcolor{stringliteral}{"jojo"}, \textcolor{stringliteral}{"2"});
183   hdrs.add(\textcolor{stringliteral}{"jojo"}, \textcolor{stringliteral}{"3"});
184   hdrs.add(\textcolor{stringliteral}{"bar"}, \textcolor{stringliteral}{"4"});
185   EXPECT\_EQ(hdrs.size(), 4);
186   EXPECT\_EQ(hdrs.getNumberOfValues(\textcolor{stringliteral}{"Jojo"}), 3);
187 
188   hdrs.set(\textcolor{stringliteral}{"joJO"}, \textcolor{stringliteral}{"5"});
189   EXPECT\_EQ(hdrs.size(), 2);
190   EXPECT\_EQ(hdrs.getNumberOfValues(\textcolor{stringliteral}{"Jojo"}), 1);
191 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Combine)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Combine}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a141afdf824439f160bd1c6783be4fe47}


Definition at line 193 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Headers\+::combine(), and proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers().


\begin{DoxyCode}
193                                \{
194   HTTPMessage msg;
195   HTTPHeaders& headers = msg.getHeaders();
196 
197   EXPECT\_EQ(headers.combine(\textcolor{stringliteral}{"Combine"}), \textcolor{stringliteral}{""});
198 
199   headers.add(\textcolor{stringliteral}{"Combine"}, \textcolor{stringliteral}{"first value"});
200   EXPECT\_EQ(headers.combine(\textcolor{stringliteral}{"Combine"}), \textcolor{stringliteral}{"first value"});
201 
202   headers.add(\textcolor{stringliteral}{"Combine"}, \textcolor{stringliteral}{"second value"});
203   EXPECT\_EQ(headers.combine(\textcolor{stringliteral}{"Combine"}), \textcolor{stringliteral}{"first value, second value"});
204 
205   headers.add(\textcolor{stringliteral}{"Combine"}, \textcolor{stringliteral}{"third value"});
206   EXPECT\_EQ(headers.combine(\textcolor{stringliteral}{"Combine"}),
207             \textcolor{stringliteral}{"first value, second value, third value"});
208   VLOG(4) << msg;
209 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Proxification)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Proxification}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a956c42db0547392f8d3ff2f668d4e010}


Definition at line 211 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::ensure\+Host\+Header(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Single\+Or\+Empty(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Dst\+Address(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Local\+Ip(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Wants\+Keepalive(), and proxygen\+::\+H\+T\+T\+P\+Message\+::wants\+Keepalive().


\begin{DoxyCode}
211                                      \{
212   HTTPMessage msg;
213 
214   folly::SocketAddress dstAddr(\textcolor{stringliteral}{"192.168.1.1"}, 1887);
215   folly::SocketAddress clientAddr(\textcolor{stringliteral}{"74.125.127.9"}, 1987);
216   msg.setDstAddress(dstAddr);
217   msg.setLocalIp(\textcolor{stringliteral}{"10.0.0.1"});
218   msg.ensureHostHeader();
219   msg.setWantsKeepalive(\textcolor{keyword}{false});
220 
221   HTTPHeaders& hdrs = msg.getHeaders();
222   EXPECT\_EQ(\textcolor{stringliteral}{"192.168.1.1"}, hdrs.getSingleOrEmpty(HTTP\_HEADER\_HOST));
223   EXPECT\_FALSE(msg.wantsKeepalive());
224 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Keepalive\+Check)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Keepalive\+Check}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a3d6d79315b05d9252f7ddca1f8f24a85}


Definition at line 226 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::compute\+Keepalive(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+H\+T\+T\+P\+Version(), and proxygen\+::\+H\+T\+T\+P\+Message\+::strip\+Per\+Hop\+Headers().


\begin{DoxyCode}
226                                       \{
227   \{
228     HTTPMessage msg;
229     msg.setHTTPVersion(1, 0);
230     EXPECT\_FALSE(msg.computeKeepalive());
231   \}
232 
233   \{
234     HTTPMessage msg;
235     msg.setHTTPVersion(1, 1);
236     EXPECT\_TRUE(msg.computeKeepalive());
237   \}
238 
239   \{
240     HTTPMessage msg;
241     msg.setHTTPVersion(1, 1);
242     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"close"});
243     EXPECT\_FALSE(msg.computeKeepalive());
244   \}
245 
246   \{
247     HTTPMessage msg;
248     msg.setHTTPVersion(1, 1);
249     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"ClOsE"});
250     EXPECT\_FALSE(msg.computeKeepalive());
251   \}
252 
253   \{
254     HTTPMessage msg;
255     msg.setHTTPVersion(1, 1);
256     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"foo,bar"});
257     EXPECT\_TRUE(msg.computeKeepalive());
258   \}
259 
260   \{
261     HTTPMessage msg;
262     msg.setHTTPVersion(1, 1);
263     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"foo,bar"});
264     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"abc,CLOSE,def"});
265     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"xyz"});
266     EXPECT\_FALSE(msg.computeKeepalive());
267   \}
268 
269   \{
270     HTTPMessage msg;
271     msg.setHTTPVersion(1, 1);
272     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"foo,bar"});
273     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"abc ,  CLOSE , def"});
274     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"xyz"});
275     EXPECT\_FALSE(msg.computeKeepalive());
276   \}
277 
278   \{
279     HTTPMessage msg;
280     msg.setHTTPVersion(1, 1);
281     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"  close "});
282     EXPECT\_FALSE(msg.computeKeepalive());
283   \}
284 
285   \{
286     HTTPMessage msg;
287     msg.setHTTPVersion(1, 1);
288     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{",  close "});
289     EXPECT\_FALSE(msg.computeKeepalive());
290   \}
291 
292   \{
293     HTTPMessage msg;
294     msg.setHTTPVersion(1, 1);
295     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"  close , "});
296     EXPECT\_FALSE(msg.computeKeepalive());
297   \}
298 
299   \{
300     HTTPMessage msg;
301     msg.setHTTPVersion(1, 0);
302     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"Keep-Alive"});
303     EXPECT\_TRUE(msg.computeKeepalive());
304   \}
305 
306   \{
307     HTTPMessage msg;
308     msg.setHTTPVersion(1, 0);
309     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"keep-alive"});
310     EXPECT\_TRUE(msg.computeKeepalive());
311   \}
312 
313   \{
314     HTTPMessage msg;
315     msg.setHTTPVersion(1, 0);
316     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"keep-alive"});
317     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"close"});
318     EXPECT\_FALSE(msg.computeKeepalive());
319   \}
320 
321   \{
322     HTTPMessage msg;
323     msg.setHTTPVersion(1, 0);
324     msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"keep-alive"});
325     msg.stripPerHopHeaders();
326     EXPECT\_TRUE(msg.computeKeepalive());
327   \}
328 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Header\+Strip\+Per\+Hop)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Header\+Strip\+Per\+Hop}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a7afb03ea0e680bdc56ad0110eeafd5c4}


Definition at line 330 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Stripped\+Per\+Hop\+Headers(), proxygen\+::\+H\+T\+T\+P\+Headers\+::size(), and proxygen\+::\+H\+T\+T\+P\+Message\+::strip\+Per\+Hop\+Headers().


\begin{DoxyCode}
330                                          \{
331   HTTPMessage msg;
332 
333   msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"a, b, c"});
334   msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"d"});
335   msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{",,,,"});
336   msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{" , , , ,"});
337   msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{", e"});
338   msg.getHeaders().add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{" f ,\(\backslash\)tg\(\backslash\)t, \(\backslash\)r\(\backslash\)n\(\backslash\)th "});
339   msg.getHeaders().add(\textcolor{stringliteral}{"Keep-Alive"}, \textcolor{stringliteral}{"true"});
340 
341   msg.getHeaders().add(\textcolor{stringliteral}{"a"}, \textcolor{stringliteral}{"1"});
342   msg.getHeaders().add(\textcolor{stringliteral}{"b"}, \textcolor{stringliteral}{"2"});
343   msg.getHeaders().add(\textcolor{stringliteral}{"c"}, \textcolor{stringliteral}{"3"});
344   msg.getHeaders().add(\textcolor{stringliteral}{"d"}, \textcolor{stringliteral}{"4"});
345   msg.getHeaders().add(\textcolor{stringliteral}{"e"}, \textcolor{stringliteral}{"5"});
346   msg.getHeaders().add(\textcolor{stringliteral}{"f"}, \textcolor{stringliteral}{"6"});
347   msg.getHeaders().add(\textcolor{stringliteral}{"g"}, \textcolor{stringliteral}{"7"});
348   msg.getHeaders().add(\textcolor{stringliteral}{"h"}, \textcolor{stringliteral}{"8"});
349 
350   EXPECT\_EQ(msg.getHeaders().size(), 15);
351   msg.stripPerHopHeaders();
352   EXPECT\_EQ(msg.getHeaders().size(), 0);
353   EXPECT\_EQ(msg.getStrippedPerHopHeaders().size(), 15);
354 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Empty\+Name)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Empty\+Name}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_af54d994a28df5581e02a69e3bef5fb46}


Definition at line 356 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References E\+X\+P\+E\+C\+T\+\_\+\+D\+E\+A\+T\+H\+\_\+\+N\+O\+\_\+\+C\+O\+RE, proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers(), and proxygen\+::\+H\+T\+T\+P\+Headers\+::set().


\begin{DoxyCode}
356                                  \{
357   HTTPMessage msg;
358   EXPECT_DEATH_NO_CORE(msg.getHeaders().set(\textcolor{stringliteral}{""}, \textcolor{stringliteral}{"empty name?!"}), \textcolor{stringliteral}{".*"});
359 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Method)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Method}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a3b445ec842fd3554bb03bab52a7dfdb2}


Definition at line 361 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+C\+O\+N\+N\+E\+CT, proxygen\+::\+G\+ET, proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Method(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Method\+String(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Method().


\begin{DoxyCode}
361                               \{
362   HTTPMessage msg;
363 
364   msg.setMethod(HTTPMethod::GET);
365   EXPECT\_EQ(\textcolor{stringliteral}{"GET"}, msg.getMethodString());
366   EXPECT\_EQ(HTTPMethod::GET == msg.getMethod(), \textcolor{keyword}{true});
367 
368   msg.setMethod(\textcolor{stringliteral}{"FOO"});
369   EXPECT\_EQ(\textcolor{stringliteral}{"FOO"}, msg.getMethodString());
370   EXPECT\_EQ(folly::none, msg.getMethod());
371 
372   msg.setMethod(HTTPMethod::CONNECT);
373   EXPECT\_EQ(\textcolor{stringliteral}{"CONNECT"}, msg.getMethodString());
374   EXPECT\_EQ(HTTPMethod::CONNECT == msg.getMethod(), \textcolor{keyword}{true});
375 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Get\+Path\+And\+Query, Parse\+U\+R\+L)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Get\+Path\+And\+Query}]{, }
\item[{{\bf Parse\+U\+RL}}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_aa610758dc15b89de3d00948f6dc30c6b}


Definition at line 388 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References test\+Path\+And\+Query().


\begin{DoxyCode}
388                                 \{
389   testPathAndQuery(\textcolor{stringliteral}{"http://localhost:80/foo?bar#qqq"}, \textcolor{stringliteral}{"/foo"}, \textcolor{stringliteral}{"bar"});
390   testPathAndQuery(\textcolor{stringliteral}{"localhost:80/foo?bar#qqq"}, \textcolor{stringliteral}{"/foo"}, \textcolor{stringliteral}{"bar"});
391   testPathAndQuery(\textcolor{stringliteral}{"localhost"}, \textcolor{stringliteral}{""}, \textcolor{stringliteral}{""});
392   testPathAndQuery(\textcolor{stringliteral}{"/f/o/o?bar#qqq"}, \textcolor{stringliteral}{"/f/o/o"}, \textcolor{stringliteral}{"bar"});
393   testPathAndQuery(\textcolor{stringliteral}{"#?hello"}, \textcolor{stringliteral}{""}, \textcolor{stringliteral}{""});
394 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Headers, Add\+String\+Piece)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Headers}}]{, }
\item[{Add\+String\+Piece}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a55ee1bbd62da348806e7172c9ec6d3ae}


Definition at line 396 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Single\+Or\+Empty(), and name.


\begin{DoxyCode}
396                                   \{
397   \textcolor{keyword}{const} \textcolor{keywordtype}{char} foo[] = \textcolor{stringliteral}{"name:value"};
398   HTTPHeaders headers;
399 
400   folly::StringPiece str(foo);
401   folly::StringPiece name = str.split\_step(\textcolor{charliteral}{':'});
402   headers.add(name, str);
403   EXPECT\_EQ(\textcolor{stringliteral}{"value"}, headers.getSingleOrEmpty(\textcolor{stringliteral}{"name"}));
404 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Headers, Initializer\+List)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Headers}}]{, }
\item[{Initializer\+List}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a527bfff8a58362597f191e64dd342c02}


Definition at line 406 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Headers\+::combine(), and proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Single\+Or\+Empty().


\begin{DoxyCode}
406                                    \{
407   HTTPHeaders hdrs;
408 
409   hdrs.add(\{\{\textcolor{stringliteral}{"name"}, \textcolor{stringliteral}{"value"}\}\});
410   hdrs.add(\{\{HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"close"}\}\});
411   hdrs.add(\{\{\textcolor{stringliteral}{"a"}, \textcolor{stringliteral}{"b"}\},
412             \{HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"foo"}\},
413             \{HTTP\_HEADER\_SERVER, \textcolor{stringliteral}{"x"}\}\});
414 
415   EXPECT\_EQ(\textcolor{stringliteral}{"value"}, hdrs.getSingleOrEmpty(\textcolor{stringliteral}{"name"}));
416   EXPECT\_EQ(\textcolor{stringliteral}{"close, foo"}, hdrs.combine(HTTP\_HEADER\_CONNECTION));
417   EXPECT\_EQ(\textcolor{stringliteral}{"x"}, hdrs.getSingleOrEmpty(HTTP\_HEADER\_SERVER));
418 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Headers, Initializer\+List\+String\+Piece)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Headers}}]{, }
\item[{Initializer\+List\+String\+Piece}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a88fd7c8eff3f3a238555a13136b07bf1}


Definition at line 420 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Headers\+::get\+Single\+Or\+Empty(), and name.


\begin{DoxyCode}
420                                               \{
421   HTTPHeaders hdrs;
422 
423   \textcolor{keyword}{const} \textcolor{keywordtype}{char}* foo = \textcolor{stringliteral}{"name:value"};
424   folly::StringPiece str(foo);
425   folly::StringPiece name = str.split\_step(\textcolor{charliteral}{':'});
426   hdrs.add(\{\{name, str\}, \{HTTP\_HEADER\_CONNECTION, str\}\});
427 
428   EXPECT\_EQ(\textcolor{stringliteral}{"value"}, hdrs.getSingleOrEmpty(\textcolor{stringliteral}{"name"}));
429   EXPECT\_EQ(\textcolor{stringliteral}{"value"}, hdrs.getSingleOrEmpty(HTTP\_HEADER\_CONNECTION));
430 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Remove\+Query\+Param\+Tests)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Remove\+Query\+Param\+Tests}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_aeac031e10ace10b9cf6b37997c549482}


Definition at line 445 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References test\+Remove\+Query\+Param().


\begin{DoxyCode}
445                                          \{
446   \textcolor{comment}{// Query param present}
447   testRemoveQueryParam(\textcolor{stringliteral}{"http://localhost:80/foo?param1=a&param2=b#qqq"},
448                        \textcolor{stringliteral}{"param2"},
449                        \textcolor{stringliteral}{"http://localhost:80/foo?param1=a#qqq"},
450                        \textcolor{stringliteral}{"param1=a"});
451   \textcolor{comment}{// Query param not present}
452   testRemoveQueryParam(\textcolor{stringliteral}{"http://localhost/foo?param1=a&param2=b#qqq"},
453                        \textcolor{stringliteral}{"param3"},
454                        \textcolor{stringliteral}{"http://localhost/foo?param1=a&param2=b#qqq"},
455                        \textcolor{stringliteral}{"param1=a&param2=b"});
456   \textcolor{comment}{// No scheme}
457   testRemoveQueryParam(\textcolor{stringliteral}{"localhost:80/foo?param1=a&param2=b#qqq"},
458                        \textcolor{stringliteral}{"param2"},
459                        \textcolor{stringliteral}{"localhost:80/foo?param1=a#qqq"},
460                        \textcolor{stringliteral}{"param1=a"});
461   \textcolor{comment}{// Just hostname as URL and empty query param}
462   testRemoveQueryParam(\textcolor{stringliteral}{"localhost"}, \textcolor{stringliteral}{"param2"}, \textcolor{stringliteral}{"localhost"}, \textcolor{stringliteral}{""});
463   testRemoveQueryParam(\textcolor{stringliteral}{"localhost"}, \textcolor{stringliteral}{""}, \textcolor{stringliteral}{"localhost"}, \textcolor{stringliteral}{""});
464   \textcolor{comment}{// Just path as URL}
465   testRemoveQueryParam(\textcolor{stringliteral}{"/f/o/o?bar#qqq"}, \textcolor{stringliteral}{"bar"}, \textcolor{stringliteral}{"/f/o/o#qqq"}, \textcolor{stringliteral}{""});
466 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Set\+Query\+Param\+Tests)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Set\+Query\+Param\+Tests}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_aaa29096b877cde3429f8beb17dc93487}


Definition at line 482 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References test\+Set\+Query\+Param().


\begin{DoxyCode}
482                                       \{
483   \textcolor{comment}{// Overwrite existing parameter}
484   testSetQueryParam(\textcolor{stringliteral}{"http://localhost:80/foo?param1=a&param2=b#qqq"},
485                     \textcolor{stringliteral}{"param2"},
486                     \textcolor{stringliteral}{"true"},
487                     \textcolor{stringliteral}{"http://localhost:80/foo?param1=a&param2=true#qqq"},
488                     \textcolor{stringliteral}{"param1=a&param2=true"});
489   \textcolor{comment}{// Add a query parameter}
490   testSetQueryParam(\textcolor{stringliteral}{"http://localhost/foo?param1=a&param2=b#qqq"},
491                     \textcolor{stringliteral}{"param3"},
492                     \textcolor{stringliteral}{"true"},
493                     \textcolor{stringliteral}{"http://localhost/foo?param1=a&param2=b&param3=true#qqq"},
494                     \textcolor{stringliteral}{"param1=a&param2=b&param3=true"});
495   \textcolor{comment}{// Add a query parameter, should be alphabetical order}
496   testSetQueryParam(\textcolor{stringliteral}{"localhost:80/foo?param1=a&param3=c#qqq"},
497                     \textcolor{stringliteral}{"param2"},
498                     \textcolor{stringliteral}{"b"},
499                     \textcolor{stringliteral}{"localhost:80/foo?param1=a&param2=b&param3=c#qqq"},
500                     \textcolor{stringliteral}{"param1=a&param2=b&param3=c"});
501   \textcolor{comment}{// Add a query parameter when no query parameters exist}
502   testSetQueryParam(\textcolor{stringliteral}{"localhost:80/foo#qqq"},
503                     \textcolor{stringliteral}{"param2"},
504                     \textcolor{stringliteral}{"b"},
505                     \textcolor{stringliteral}{"localhost:80/foo?param2=b#qqq"},
506                     \textcolor{stringliteral}{"param2=b"});
507 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+H\+T\+T\+P\+Message, Test\+Check\+For\+Header\+Token)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{{\bf H\+T\+T\+P\+Message}}]{, }
\item[{Test\+Check\+For\+Header\+Token}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a188ac2fa3b66c5d0b26e2a9500c47d4b}


Definition at line 509 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::check\+For\+Header\+Token(), and proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Headers().


\begin{DoxyCode}
509                                            \{
510   HTTPMessage msg;
511   HTTPHeaders& headers = msg.getHeaders();
512 
513   headers.add(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"HTTP2-Settings"});
514   EXPECT\_TRUE(msg.checkForHeaderToken(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"HTTP2-Settings"},
515                                       \textcolor{keyword}{false}));
516   EXPECT\_FALSE(msg.checkForHeaderToken(HTTP\_HEADER\_CONNECTION, \textcolor{stringliteral}{"http2-settings"},
517                                        \textcolor{keyword}{true}));
518 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Http\+Message, Test\+Protocol\+String\+H\+T\+T\+P\+Version)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Http\+Message}]{, }
\item[{Test\+Protocol\+String\+H\+T\+T\+P\+Version}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a477e495766252f4defb8bf3118c641c3}


Definition at line 520 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Protocol\+String(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+H\+T\+T\+P\+Version().


\begin{DoxyCode}
520                                                  \{
521   HTTPMessage msg;
522   msg.setHTTPVersion(1, 1);
523 
524   EXPECT\_EQ(msg.getProtocolString(), \textcolor{stringliteral}{"1.1"});
525 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Http\+Message, Test\+Protocol\+String\+Advanced\+Protocol)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Http\+Message}]{, }
\item[{Test\+Protocol\+String\+Advanced\+Protocol}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_afdea149b94c7b8df938d867bd86a1ad5}


Definition at line 527 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Protocol\+String(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Advanced\+Protocol\+String().


\begin{DoxyCode}
527                                                       \{
528   HTTPMessage msg;
529   std::string advancedProtocol = \textcolor{stringliteral}{"h2"};
530   msg.setAdvancedProtocolString(advancedProtocol);
531   EXPECT\_EQ(msg.getProtocolString(), advancedProtocol);
532 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!T\+E\+ST@{T\+E\+ST}}
\index{T\+E\+ST@{T\+E\+ST}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{T\+E\+S\+T(\+Http\+Message, Test\+Extract\+Trailers)}]{\setlength{\rightskip}{0pt plus 5cm}T\+E\+ST (
\begin{DoxyParamCaption}
\item[{Http\+Message}]{, }
\item[{Test\+Extract\+Trailers}]{}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_aabf0ace0d1e67ac871df7e53de1f1d76}


Definition at line 534 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Headers\+::add(), proxygen\+::\+H\+T\+T\+P\+Message\+::extract\+Trailers(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Trailers(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Trailers().


\begin{DoxyCode}
534                                        \{
535   HTTPMessage msg;
536   \textcolor{keyword}{auto} trailers = std::make\_unique<HTTPHeaders>();
537   HTTPHeaders* rawPointer = trailers.get();
538   trailers->add(\textcolor{stringliteral}{"The-trailer"}, \textcolor{stringliteral}{"something"});
539   msg.setTrailers(std::move(trailers));
540   \textcolor{keyword}{auto} trailers2 = msg.extractTrailers();
541   EXPECT\_EQ(rawPointer, trailers2.get());
542   EXPECT\_EQ(\textcolor{keyword}{nullptr}, msg.getTrailers());
543 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!test\+Path\+And\+Query@{test\+Path\+And\+Query}}
\index{test\+Path\+And\+Query@{test\+Path\+And\+Query}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{test\+Path\+And\+Query(const string \&url, const string \&expected\+Path, const string \&expected\+Query)}]{\setlength{\rightskip}{0pt plus 5cm}void test\+Path\+And\+Query (
\begin{DoxyParamCaption}
\item[{const string \&}]{url, }
\item[{const string \&}]{expected\+Path, }
\item[{const string \&}]{expected\+Query}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_ac3c34f95d557498e4ec158a028ca520d}


Definition at line 377 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Path(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Query\+String(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+U\+R\+L(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+U\+R\+L().



Referenced by T\+E\+S\+T().


\begin{DoxyCode}
379                                                    \{
380   HTTPMessage msg;
381   msg.setURL(url);
382 
383   EXPECT\_EQ(msg.getURL(), url);
384   EXPECT\_EQ(msg.getPath(), expectedPath);
385   EXPECT\_EQ(msg.getQueryString(), expectedQuery);
386 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!test\+Remove\+Query\+Param@{test\+Remove\+Query\+Param}}
\index{test\+Remove\+Query\+Param@{test\+Remove\+Query\+Param}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{test\+Remove\+Query\+Param(const string \&url, const string \&query\+Param, const string \&expected\+Url, const string \&expected\+Query)}]{\setlength{\rightskip}{0pt plus 5cm}void test\+Remove\+Query\+Param (
\begin{DoxyParamCaption}
\item[{const string \&}]{url, }
\item[{const string \&}]{query\+Param, }
\item[{const string \&}]{expected\+Url, }
\item[{const string \&}]{expected\+Query}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a9823170884625662e86b98ec453930a5}


Definition at line 432 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Query\+String(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+U\+R\+L(), proxygen\+::\+H\+T\+T\+P\+Message\+::remove\+Query\+Param(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+U\+R\+L().



Referenced by T\+E\+S\+T().


\begin{DoxyCode}
435                                                        \{
436   HTTPMessage msg;
437   msg.setURL(url);
438   \textcolor{keywordtype}{bool} expectedChange = (url != expectedUrl);
439   EXPECT\_EQ(msg.removeQueryParam(queryParam), expectedChange);
440 
441   EXPECT\_EQ(msg.getURL(), expectedUrl);
442   EXPECT\_EQ(msg.getQueryString(), expectedQuery);
443 \}
\end{DoxyCode}
\index{H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}!test\+Set\+Query\+Param@{test\+Set\+Query\+Param}}
\index{test\+Set\+Query\+Param@{test\+Set\+Query\+Param}!H\+T\+T\+P\+Message\+Test.\+cpp@{H\+T\+T\+P\+Message\+Test.\+cpp}}
\subsubsection[{test\+Set\+Query\+Param(const string \&url, const string \&query\+Param, const string \&param\+Value, const string \&expected\+Url, const string \&expected\+Query)}]{\setlength{\rightskip}{0pt plus 5cm}void test\+Set\+Query\+Param (
\begin{DoxyParamCaption}
\item[{const string \&}]{url, }
\item[{const string \&}]{query\+Param, }
\item[{const string \&}]{param\+Value, }
\item[{const string \&}]{expected\+Url, }
\item[{const string \&}]{expected\+Query}
\end{DoxyParamCaption}
)}\label{HTTPMessageTest_8cpp_a3c19fefd7e13a4f457bc892e93ef918f}


Definition at line 468 of file H\+T\+T\+P\+Message\+Test.\+cpp.



References proxygen\+::\+H\+T\+T\+P\+Message\+::get\+Query\+String(), proxygen\+::\+H\+T\+T\+P\+Message\+::get\+U\+R\+L(), proxygen\+::\+H\+T\+T\+P\+Message\+::set\+Query\+Param(), and proxygen\+::\+H\+T\+T\+P\+Message\+::set\+U\+R\+L().



Referenced by T\+E\+S\+T().


\begin{DoxyCode}
472                                                     \{
473   HTTPMessage msg;
474   msg.setURL(url);
475   \textcolor{keywordtype}{bool} expectedChange = (url != expectedUrl);
476   EXPECT\_EQ(msg.setQueryParam(queryParam, paramValue), expectedChange);
477 
478   EXPECT\_EQ(msg.getURL(), expectedUrl);
479   EXPECT\_EQ(msg.getQueryString(), expectedQuery);
480 \}
\end{DoxyCode}
