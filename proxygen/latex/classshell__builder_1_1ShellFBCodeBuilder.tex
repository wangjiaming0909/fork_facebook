\section{shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder Class Reference}
\label{classshell__builder_1_1ShellFBCodeBuilder}\index{shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder}}
Inheritance diagram for shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{classshell__builder_1_1ShellFBCodeBuilder}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def {\bf workdir} (self, dir)
\item 
def {\bf run} (self, shell\+\_\+cmd)
\item 
def {\bf step} (self, {\bf name}, actions)
\item 
def {\bf setup} (self)
\item 
def {\bf comment} (self, comment)
\item 
def {\bf copy\+\_\+local\+\_\+repo} (self, dir, dest\+\_\+name)
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
def {\bf \+\_\+render\+\_\+impl} (self, {\bf steps})
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}


Definition at line 32 of file shell\+\_\+builder.\+py.



\subsection{Member Function Documentation}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!\+\_\+render\+\_\+impl@{\+\_\+render\+\_\+impl}}
\index{\+\_\+render\+\_\+impl@{\+\_\+render\+\_\+impl}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{\+\_\+render\+\_\+impl(self, steps)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+\_\+render\+\_\+impl (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{steps}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [private]}}\label{classshell__builder_1_1ShellFBCodeBuilder_a0aeb1f0a1f4605b50c9590e37bfbc32f}


Definition at line 33 of file shell\+\_\+builder.\+py.



References shell\+\_\+quoting.\+raw\+\_\+shell(), utils.\+recursively\+\_\+flatten\+\_\+list(), and shell\+\_\+quoting.\+shell\+\_\+join().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+render().


\begin{DoxyCode}
33     \textcolor{keyword}{def }_render_impl(self, steps):
34         \textcolor{keywordflow}{return} raw_shell(shell_join(\textcolor{stringliteral}{'\(\backslash\)n'}, recursively_flatten_list(steps)))
35 
\end{DoxyCode}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!comment@{comment}}
\index{comment@{comment}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{comment(self, comment)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+comment (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{comment}
\end{DoxyParamCaption}
)}\label{classshell__builder_1_1ShellFBCodeBuilder_af0224e8d30cd9d426313b7b057b7314b}


Definition at line 66 of file shell\+\_\+builder.\+py.



References shell\+\_\+quoting.\+shell\+\_\+comment().



Referenced by fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+diagnostics().


\begin{DoxyCode}
66     \textcolor{keyword}{def }comment(self, comment):
67         \textcolor{keywordflow}{return} shell_comment(comment)
68 
\end{DoxyCode}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!copy\+\_\+local\+\_\+repo@{copy\+\_\+local\+\_\+repo}}
\index{copy\+\_\+local\+\_\+repo@{copy\+\_\+local\+\_\+repo}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{copy\+\_\+local\+\_\+repo(self, dir, dest\+\_\+name)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+copy\+\_\+local\+\_\+repo (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{dir, }
\item[{}]{dest\+\_\+name}
\end{DoxyParamCaption}
)}\label{classshell__builder_1_1ShellFBCodeBuilder_aaa1b419db3df1b233815919d92d01e45}


Definition at line 69 of file shell\+\_\+builder.\+py.


\begin{DoxyCode}
69     \textcolor{keyword}{def }copy_local_repo(self, dir, dest\_name):
70         \textcolor{keywordflow}{return} [
71             ShellQuoted(\textcolor{stringliteral}{'cp -r \{dir\} \{dest\_name\}'}).format(
72                 dir=dir,
73                 dest\_name=dest\_name
74             ),
75         ]
76 
77 
\end{DoxyCode}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!run@{run}}
\index{run@{run}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{run(self, shell\+\_\+cmd)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+run (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{shell\+\_\+cmd}
\end{DoxyParamCaption}
)}\label{classshell__builder_1_1ShellFBCodeBuilder_a8f60a0086d483bce5d7af9df8efb8469}


Definition at line 43 of file shell\+\_\+builder.\+py.


\begin{DoxyCode}
43     \textcolor{keyword}{def }run(self, shell\_cmd):
44         \textcolor{keywordflow}{return} ShellQuoted(\textcolor{stringliteral}{'\{cmd\}'}).format(cmd=shell\_cmd)
45 
\end{DoxyCode}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!setup@{setup}}
\index{setup@{setup}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{setup(self)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+setup (
\begin{DoxyParamCaption}
\item[{}]{self}
\end{DoxyParamCaption}
)}\label{classshell__builder_1_1ShellFBCodeBuilder_af8ec0e8bb58c120861101f89a901a5a4}


Definition at line 51 of file shell\+\_\+builder.\+py.



References fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+has\+\_\+option(), and fbcode\+\_\+builder.\+F\+B\+Code\+Builder.\+option().


\begin{DoxyCode}
51     \textcolor{keyword}{def }setup(self):
52         steps = [
53             ShellQuoted(\textcolor{stringliteral}{'set -exo pipefail'}),
54         ]
55         \textcolor{keywordflow}{if} self.has_option(\textcolor{stringliteral}{'ccache\_dir'}):
56             ccache\_dir = self.option(\textcolor{stringliteral}{'ccache\_dir'})
57             steps += [
58                 ShellQuoted(
59                     \textcolor{comment}{# Set CCACHE\_DIR before the `ccache` invocations below.}
60                     \textcolor{stringliteral}{'export CCACHE\_DIR=\{ccache\_dir\} '}
61                     \textcolor{stringliteral}{'CC="ccache $\{\{CC:-gcc\}\}" CXX="ccache $\{\{CXX:-g++\}\}"'}
62                 ).format(ccache\_dir=ccache\_dir)
63             ]
64         \textcolor{keywordflow}{return} steps
65 
\end{DoxyCode}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!step@{step}}
\index{step@{step}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{step(self, name, actions)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+step (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{name, }
\item[{}]{actions}
\end{DoxyParamCaption}
)}\label{classshell__builder_1_1ShellFBCodeBuilder_a6acc492926f320e0b3650898e037384a}


Definition at line 46 of file shell\+\_\+builder.\+py.


\begin{DoxyCode}
46     \textcolor{keyword}{def }step(self, name, actions):
47         \textcolor{keyword}{assert} \textcolor{stringliteral}{'\(\backslash\)n'} \textcolor{keywordflow}{not} \textcolor{keywordflow}{in} name, \textcolor{stringliteral}{'Name \{0\} would span > 1 line'}.format(name)
48         b = ShellQuoted(\textcolor{stringliteral}{''})
49         \textcolor{keywordflow}{return} [ShellQuoted(\textcolor{stringliteral}{'### \{0\} ###'}.format(name)), b] + actions + [b]
50 
\end{DoxyCode}
\index{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}!workdir@{workdir}}
\index{workdir@{workdir}!shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder@{shell\+\_\+builder\+::\+Shell\+F\+B\+Code\+Builder}}
\subsubsection[{workdir(self, dir)}]{\setlength{\rightskip}{0pt plus 5cm}def shell\+\_\+builder.\+Shell\+F\+B\+Code\+Builder.\+workdir (
\begin{DoxyParamCaption}
\item[{}]{self, }
\item[{}]{dir}
\end{DoxyParamCaption}
)}\label{classshell__builder_1_1ShellFBCodeBuilder_a69a8a861f1b150b38f9720259a8f14e7}


Definition at line 36 of file shell\+\_\+builder.\+py.


\begin{DoxyCode}
36     \textcolor{keyword}{def }workdir(self, dir):
37         \textcolor{keywordflow}{return} [
38             ShellQuoted(\textcolor{stringliteral}{'mkdir -p \{d\} && cd \{d\}'}).format(
39                 d=dir
40             ),
41         ]
42 
\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
build/fbcode\+\_\+builder/{\bf shell\+\_\+builder.\+py}\end{DoxyCompactItemize}
