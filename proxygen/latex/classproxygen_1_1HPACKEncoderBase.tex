\section{proxygen\+:\+:H\+P\+A\+C\+K\+Encoder\+Base Class Reference}
\label{classproxygen_1_1HPACKEncoderBase}\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}


{\ttfamily \#include $<$H\+P\+A\+C\+K\+Encoder\+Base.\+h$>$}

Inheritance diagram for proxygen\+:\+:H\+P\+A\+C\+K\+Encoder\+Base\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classproxygen_1_1HPACKEncoderBase}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf H\+P\+A\+C\+K\+Encoder\+Base} (bool huffman)
\item 
void {\bf set\+Header\+Table\+Size} ({\bf Header\+Table} \&table, uint32\+\_\+t size)
\item 
void {\bf set\+Header\+Indexing\+Strategy} (const {\bf Header\+Indexing\+Strategy} $\ast$indexing\+Strat)
\item 
const {\bf Header\+Indexing\+Strategy} $\ast$ {\bf get\+Header\+Indexing\+Strategy} () const 
\end{DoxyCompactItemize}
\subsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
static const uint32\+\_\+t {\bf k\+Buffer\+Growth} = 4000
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t {\bf handle\+Pending\+Context\+Update} ({\bf H\+P\+A\+C\+K\+Encode\+Buffer} \&buf, uint32\+\_\+t table\+Capacity)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
const {\bf Header\+Indexing\+Strategy} $\ast$ {\bf indexing\+Strat\+\_\+}
\item 
{\bf H\+P\+A\+C\+K\+Encode\+Buffer} {\bf stream\+Buffer\+\_\+}
\item 
bool {\bf pending\+Context\+Update\+\_\+} \{false\}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Common encoder functionality between \doxyref{H\+P\+A\+CK}{p.}{namespaceproxygen_1_1HPACK} and Q\+P\+A\+CK 

Definition at line 21 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



\subsection{Constructor \& Destructor Documentation}
\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!H\+P\+A\+C\+K\+Encoder\+Base@{H\+P\+A\+C\+K\+Encoder\+Base}}
\index{H\+P\+A\+C\+K\+Encoder\+Base@{H\+P\+A\+C\+K\+Encoder\+Base}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{H\+P\+A\+C\+K\+Encoder\+Base(bool huffman)}]{\setlength{\rightskip}{0pt plus 5cm}proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::\+H\+P\+A\+C\+K\+Encoder\+Base (
\begin{DoxyParamCaption}
\item[{bool}]{huffman}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}\label{classproxygen_1_1HPACKEncoderBase_a65d3d96f11e8150fdd912ea11ae62bfa}


Definition at line 24 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



References proxygen\+::\+Header\+Indexing\+Strategy\+::get\+Default\+Instance(), and indexing\+Strat\+\_\+.


\begin{DoxyCode}
25     : streamBuffer_(kBufferGrowth, huffman) \{
26     indexingStrat_ = HeaderIndexingStrategy::getDefaultInstance();
27   \}
\end{DoxyCode}


\subsection{Member Function Documentation}
\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!get\+Header\+Indexing\+Strategy@{get\+Header\+Indexing\+Strategy}}
\index{get\+Header\+Indexing\+Strategy@{get\+Header\+Indexing\+Strategy}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{get\+Header\+Indexing\+Strategy() const }]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Header\+Indexing\+Strategy}$\ast$ proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::get\+Header\+Indexing\+Strategy (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HPACKEncoderBase_ad6ea138a04a530e364fbeccdc36ee2d1}


Definition at line 46 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



References handle\+Pending\+Context\+Update(), and indexing\+Strat\+\_\+.


\begin{DoxyCode}
46                                                                   \{
47     \textcolor{keywordflow}{return} indexingStrat_;
48   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!handle\+Pending\+Context\+Update@{handle\+Pending\+Context\+Update}}
\index{handle\+Pending\+Context\+Update@{handle\+Pending\+Context\+Update}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{handle\+Pending\+Context\+Update(\+H\+P\+A\+C\+K\+Encode\+Buffer \&buf, uint32\+\_\+t table\+Capacity)}]{\setlength{\rightskip}{0pt plus 5cm}uint32\+\_\+t proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::handle\+Pending\+Context\+Update (
\begin{DoxyParamCaption}
\item[{{\bf H\+P\+A\+C\+K\+Encode\+Buffer} \&}]{buf, }
\item[{uint32\+\_\+t}]{table\+Capacity}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{classproxygen_1_1HPACKEncoderBase_a0fbf93fce0f9a5887a7fd4950beeb5cd}


Definition at line 14 of file H\+P\+A\+C\+K\+Encoder\+Base.\+cpp.



References proxygen\+::\+H\+P\+A\+C\+K\+Encode\+Buffer\+::encode\+Integer(), pending\+Context\+Update\+\_\+, proxygen\+::\+H\+P\+A\+C\+K\+::\+Q\+\_\+\+T\+A\+B\+L\+E\+\_\+\+S\+I\+Z\+E\+\_\+\+U\+P\+D\+A\+TE, and proxygen\+::\+H\+P\+A\+C\+K\+::\+T\+A\+B\+L\+E\+\_\+\+S\+I\+Z\+E\+\_\+\+U\+P\+D\+A\+TE.



Referenced by proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+::encode(), proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::encode(), and get\+Header\+Indexing\+Strategy().


\begin{DoxyCode}
15                                                                               \{
16   CHECK\_EQ(HPACK::TABLE_SIZE_UPDATE.code, HPACK::Q_TABLE_SIZE_UPDATE.code) <<
17     \textcolor{stringliteral}{"Code assumes these are equal"};
18   uint32\_t encoded = 0;
19   \textcolor{keywordflow}{if} (pendingContextUpdate_) \{
20     VLOG(5) << \textcolor{stringliteral}{"Encoding table size update size="} << tableCapacity;
21     encoded = buf.encodeInteger(tableCapacity, HPACK::TABLE_SIZE_UPDATE);
22     pendingContextUpdate_ = \textcolor{keyword}{false};
23   \}
24 
25   \textcolor{keywordflow}{return} encoded;
26 \}
\end{DoxyCode}
\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!set\+Header\+Indexing\+Strategy@{set\+Header\+Indexing\+Strategy}}
\index{set\+Header\+Indexing\+Strategy@{set\+Header\+Indexing\+Strategy}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{set\+Header\+Indexing\+Strategy(const Header\+Indexing\+Strategy $\ast$indexing\+Strat)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::set\+Header\+Indexing\+Strategy (
\begin{DoxyParamCaption}
\item[{const {\bf Header\+Indexing\+Strategy} $\ast$}]{indexing\+Strat}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HPACKEncoderBase_a1cd6b420b5b3b9be14db9f4186c8844b}


Definition at line 43 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



References indexing\+Strat\+\_\+.



Referenced by proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::\+Q\+P\+A\+C\+K\+Encoder().


\begin{DoxyCode}
43                                                                               \{
44     indexingStrat_ = indexingStrat;
45   \}
\end{DoxyCode}
\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!set\+Header\+Table\+Size@{set\+Header\+Table\+Size}}
\index{set\+Header\+Table\+Size@{set\+Header\+Table\+Size}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{set\+Header\+Table\+Size(\+Header\+Table \&table, uint32\+\_\+t size)}]{\setlength{\rightskip}{0pt plus 5cm}void proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::set\+Header\+Table\+Size (
\begin{DoxyParamCaption}
\item[{{\bf Header\+Table} \&}]{table, }
\item[{uint32\+\_\+t}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{classproxygen_1_1HPACKEncoderBase_ab1e107b20f4307d8ba432db2782193c6}


Definition at line 36 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



References proxygen\+::\+Header\+Table\+::capacity(), pending\+Context\+Update\+\_\+, and proxygen\+::\+Header\+Table\+::set\+Capacity().



Referenced by proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+::set\+Header\+Table\+Size(), and proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::set\+Header\+Table\+Size().


\begin{DoxyCode}
36                                                              \{
37     \textcolor{keywordflow}{if} (size != table.capacity()) \{
38       CHECK(table.setCapacity(size));
39       pendingContextUpdate_ = \textcolor{keyword}{true};
40     \}
41   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!indexing\+Strat\+\_\+@{indexing\+Strat\+\_\+}}
\index{indexing\+Strat\+\_\+@{indexing\+Strat\+\_\+}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{indexing\+Strat\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}const {\bf Header\+Indexing\+Strategy}$\ast$ proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::indexing\+Strat\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classproxygen_1_1HPACKEncoderBase_a0f1d868b93aa6ca7a347e40c094f561c}


Definition at line 55 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



Referenced by proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+::encode\+Header(), get\+Header\+Indexing\+Strategy(), H\+P\+A\+C\+K\+Encoder\+Base(), set\+Header\+Indexing\+Strategy(), and proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::should\+Index().

\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!k\+Buffer\+Growth@{k\+Buffer\+Growth}}
\index{k\+Buffer\+Growth@{k\+Buffer\+Growth}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{k\+Buffer\+Growth}]{\setlength{\rightskip}{0pt plus 5cm}const uint32\+\_\+t proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::k\+Buffer\+Growth = 4000\hspace{0.3cm}{\ttfamily [static]}}\label{classproxygen_1_1HPACKEncoderBase_a8d74c68fb18401bcf03fda3cd5221b46}
Size of a new I\+O\+Buf which is added to the chain

jemalloc will round up to 4k -\/ overhead 

Definition at line 34 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.

\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!pending\+Context\+Update\+\_\+@{pending\+Context\+Update\+\_\+}}
\index{pending\+Context\+Update\+\_\+@{pending\+Context\+Update\+\_\+}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{pending\+Context\+Update\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}bool proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::pending\+Context\+Update\+\_\+ \{false\}\hspace{0.3cm}{\ttfamily [protected]}}\label{classproxygen_1_1HPACKEncoderBase_a10f3879036ab0c2b233a70e38d7746a2}


Definition at line 57 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



Referenced by handle\+Pending\+Context\+Update(), and set\+Header\+Table\+Size().

\index{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}!stream\+Buffer\+\_\+@{stream\+Buffer\+\_\+}}
\index{stream\+Buffer\+\_\+@{stream\+Buffer\+\_\+}!proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base@{proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base}}
\subsubsection[{stream\+Buffer\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}{\bf H\+P\+A\+C\+K\+Encode\+Buffer} proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+Base\+::stream\+Buffer\+\_\+\hspace{0.3cm}{\ttfamily [protected]}}\label{classproxygen_1_1HPACKEncoderBase_a311077cae16bac420390c2d4c031a5dc}


Definition at line 56 of file H\+P\+A\+C\+K\+Encoder\+Base.\+h.



Referenced by proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+::encode(), proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::encode(), proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+::encode\+As\+Index(), proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::encode\+Header\+Q(), proxygen\+::\+H\+P\+A\+C\+K\+Encoder\+::encode\+Literal(), proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::encode\+Literal\+Q(), and proxygen\+::\+Q\+P\+A\+C\+K\+Encoder\+::encode\+Q().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
proxygen/lib/http/codec/compress/{\bf H\+P\+A\+C\+K\+Encoder\+Base.\+h}\item 
proxygen/lib/http/codec/compress/{\bf H\+P\+A\+C\+K\+Encoder\+Base.\+cpp}\end{DoxyCompactItemize}
