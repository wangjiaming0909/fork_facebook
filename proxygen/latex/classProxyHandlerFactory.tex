\section{Proxy\+Handler\+Factory Class Reference}
\label{classProxyHandlerFactory}\index{Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}}
Inheritance diagram for Proxy\+Handler\+Factory\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classProxyHandlerFactory}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct {\bf Timer\+Wrapper}
\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bf on\+Server\+Start} (folly\+::\+Event\+Base $\ast$evb) noexceptoverride
\item 
void {\bf on\+Server\+Stop} () noexceptoverride
\item 
{\bf Request\+Handler} $\ast$ {\bf on\+Request} ({\bf Request\+Handler} $\ast$, {\bf H\+T\+T\+P\+Message} $\ast$) noexceptoverride
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
folly\+::\+Thread\+Local\+Ptr$<$ {\bf Proxy\+Stats} $>$ {\bf stats\+\_\+}
\item 
folly\+::\+Thread\+Local$<$ {\bf Timer\+Wrapper} $>$ {\bf timer\+\_\+}
\end{DoxyCompactItemize}


\subsection{Detailed Description}


Definition at line 37 of file Proxy\+Server.\+cpp.



\subsection{Member Function Documentation}
\index{Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}!on\+Request@{on\+Request}}
\index{on\+Request@{on\+Request}!Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}}
\subsubsection[{on\+Request(\+Request\+Handler $\ast$, H\+T\+T\+P\+Message $\ast$) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Request\+Handler}$\ast$ Proxy\+Handler\+Factory\+::on\+Request (
\begin{DoxyParamCaption}
\item[{{\bf Request\+Handler} $\ast$}]{, }
\item[{{\bf H\+T\+T\+P\+Message} $\ast$}]{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classProxyHandlerFactory_a53ba7cda3ece728c8ef5063a63813d90}
Invoked for each new request server handles. H\+T\+T\+P\+Message is provided so that user can potentially choose among several implementation of handler based on U\+RL or something. No need to save/copy this H\+T\+T\+P\+Message. Request\+Handler will be given the H\+T\+T\+P\+Message in a separate callback.

Some request handlers don\textquotesingle{}t handle the request themselves (think filters). They do take some actions based on request/response but otherwise they just hand-\/off request to some other Request\+Handler. This upstream Request\+Handler is given as first parameter. For the terminal Request\+Handler this will by nullptr. 

Implements {\bf proxygen\+::\+Request\+Handler\+Factory} \doxyref{}{p.}{classproxygen_1_1RequestHandlerFactory_a9c2cbbc96d006244ea28cea44a3e6a60}.



Definition at line 53 of file Proxy\+Server.\+cpp.


\begin{DoxyCode}
53                                                                              \{
54     \textcolor{keywordflow}{return} \textcolor{keyword}{new} ProxyHandler(stats_.get(), timer_->timer.get());
55   \}
\end{DoxyCode}
\index{Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}!on\+Server\+Start@{on\+Server\+Start}}
\index{on\+Server\+Start@{on\+Server\+Start}!Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}}
\subsubsection[{on\+Server\+Start(folly\+::\+Event\+Base $\ast$evb) noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void Proxy\+Handler\+Factory\+::on\+Server\+Start (
\begin{DoxyParamCaption}
\item[{folly\+::\+Event\+Base $\ast$}]{evb}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classProxyHandlerFactory_a5ceca193cb19b8df0b7d327ab2072537}
Invoked in each thread server is going to handle requests before we start handling requests. Can be used to setup thread-\/local setup for each thread (stats and such). 

Implements {\bf proxygen\+::\+Request\+Handler\+Factory} \doxyref{}{p.}{classproxygen_1_1RequestHandlerFactory_af76091b8a51a8d069fcc1aec3007a1cc}.



Definition at line 39 of file Proxy\+Server.\+cpp.


\begin{DoxyCode}
39                                                             \{
40     stats_.reset(\textcolor{keyword}{new} ProxyStats);
41     timer_->timer = HHWheelTimer::newTimer(
42       evb,
43       std::chrono::milliseconds(HHWheelTimer::DEFAULT\_TICK\_INTERVAL),
44       folly::AsyncTimeout::InternalEnum::NORMAL,
45       std::chrono::seconds(FLAGS\_server\_timeout));
46   \}
\end{DoxyCode}
\index{Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}!on\+Server\+Stop@{on\+Server\+Stop}}
\index{on\+Server\+Stop@{on\+Server\+Stop}!Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}}
\subsubsection[{on\+Server\+Stop() noexceptoverride}]{\setlength{\rightskip}{0pt plus 5cm}void Proxy\+Handler\+Factory\+::on\+Server\+Stop (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [virtual]}, {\ttfamily [noexcept]}}\label{classProxyHandlerFactory_a46b4431a97feaa9d2bed959ae167cdd0}
Invoked in each handler thread after all the connections are drained from that thread. Can be used to tear down thread-\/local setup. 

Implements {\bf proxygen\+::\+Request\+Handler\+Factory} \doxyref{}{p.}{classproxygen_1_1RequestHandlerFactory_a0791d6b33c13513ed6f550bbbd7bca85}.



Definition at line 48 of file Proxy\+Server.\+cpp.


\begin{DoxyCode}
48                                         \{
49     stats_.reset();
50     timer_->timer.reset();
51   \}
\end{DoxyCode}


\subsection{Member Data Documentation}
\index{Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}!stats\+\_\+@{stats\+\_\+}}
\index{stats\+\_\+@{stats\+\_\+}!Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}}
\subsubsection[{stats\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Thread\+Local\+Ptr$<${\bf Proxy\+Stats}$>$ Proxy\+Handler\+Factory\+::stats\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classProxyHandlerFactory_a3239218f460ab82bb5bc9b4bae7916e9}


Definition at line 61 of file Proxy\+Server.\+cpp.

\index{Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}!timer\+\_\+@{timer\+\_\+}}
\index{timer\+\_\+@{timer\+\_\+}!Proxy\+Handler\+Factory@{Proxy\+Handler\+Factory}}
\subsubsection[{timer\+\_\+}]{\setlength{\rightskip}{0pt plus 5cm}folly\+::\+Thread\+Local$<${\bf Timer\+Wrapper}$>$ Proxy\+Handler\+Factory\+::timer\+\_\+\hspace{0.3cm}{\ttfamily [private]}}\label{classProxyHandlerFactory_ad13b0062e7820d9d6a4c8e2a892d4cd6}


Definition at line 62 of file Proxy\+Server.\+cpp.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
proxygen/httpserver/samples/proxy/{\bf Proxy\+Server.\+cpp}\end{DoxyCompactItemize}
